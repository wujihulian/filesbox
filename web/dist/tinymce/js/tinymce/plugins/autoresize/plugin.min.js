(function(){"use strict";function u(n,t){var e=n.getBody();e&&(e.style.overflowY=t?"":"hidden",t||(e.scrollTop=0))}function m(n,t,e,i){var o=parseInt(n.getStyle(t,e,i),10);return isNaN(o)?0:o}var d=function(n){function t(){return e}var e=n;return{get:t,set:function(i){e=i},clone:function(){return d(t())}}},b=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=tinymce.util.Tools.resolve("tinymce.Env"),C=tinymce.util.Tools.resolve("tinymce.util.Delay"),_=function(n){return n.fire("ResizeEditor")},h=function(n){return n.getParam("min_height",n.getElement().offsetHeight,"number")},P=function(n){return n.getParam("max_height",0,"number")},w=function(n){return n.getParam("autoresize_overflow_padding",1,"number")},S=function(n){return n.getParam("autoresize_bottom_margin",50,"number")},T=function(n){return n.getParam("autoresize_on_init",!0,"boolean")},s=function(n,t,e,i,o){C.setEditorTimeout(n,function(){r(n,t),e--?s(n,t,e,i,o):o&&o()},i)},r=function(n,t){var e,i,o,f=n.dom,p=n.getDoc();if(p)if(function(z){return z.plugins.fullscreen&&z.plugins.fullscreen.isFullscreen()}(n))u(n,!0);else{var c=p.documentElement,H=S(n);i=h(n);var N=m(f,c,"margin-top",!0),R=m(f,c,"margin-bottom",!0);(o=c.offsetHeight+N+R+H)<0&&(o=0);var y=n.getContainer().offsetHeight-n.getContentAreaContainer().offsetHeight;o+y>h(n)&&(i=o+y);var g=P(n);if(g&&g<i?(i=g,u(n,!0)):u(n,!1),i!==t.get()){if(e=i-t.get(),f.setStyle(n.getContainer(),"height",i+"px"),t.set(i),_(n),a.browser.isSafari()&&a.mac){var l=n.getWin();l.scrollTo(l.pageXOffset,l.pageYOffset)}n.hasFocus()&&n.selection.scrollIntoView(n.selection.getNode()),a.webkit&&e<0&&r(n,t)}}},v={setup:function(n,t){n.on("init",function(){var e=w(n);n.dom.setStyles(n.getBody(),{paddingLeft:e,paddingRight:e,"min-height":0})}),n.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",function(){r(n,t)}),T(n)&&n.on("init",function(){s(n,t,20,100,function(){s(n,t,5,1e3)})})},resize:r},E=function(n,t){n.addCommand("mceAutoResize",function(){v.resize(n,t)})};(function(){b.add("autoresize",function(t){if(t.settings.hasOwnProperty("resize")||(t.settings.resize=!1),!t.inline){var e=d(0);E(t,e),v.setup(t,e)}})})()})();
