(function(){"use strict";function d(t){return function(n){return(" "+n.attr("class")+" ").indexOf(t)!==-1}}function v(t,n,u){return function(o){var a=arguments,c=a[a.length-2],l=0<c?n.charAt(c-1):"";if(l==='"')return o;if(l===">"){var r=n.lastIndexOf("<",c);if(r!==-1&&n.substring(r,c).indexOf('contenteditable="false"')!==-1)return o}return'<span class="'+u+'" data-mce-content="'+t.dom.encode(a[0])+'">'+t.dom.encode(typeof a[1]=="string"?a[1]:a[0])+"</span>"}}var p=tinymce.util.Tools.resolve("tinymce.PluginManager"),m=tinymce.util.Tools.resolve("tinymce.util.Tools"),g=function(t){return t.getParam("noneditable_noneditable_class","mceNonEditable")},h=function(t){return t.getParam("noneditable_editable_class","mceEditable")},x=function(t){var n=t.getParam("noneditable_regexp",[]);return n&&n.constructor===RegExp?[n]:n},y=function(t){var n,u,o="contenteditable";n=" "+m.trim(h(t))+" ",u=" "+m.trim(g(t))+" ";var a=d(n),c=d(u),l=x(t);t.on("PreInit",function(){0<l.length&&t.on("BeforeSetContent",function(r){(function(e,i,s){var b=i.length,f=s.content;if(s.format!=="raw"){for(;b--;)f=f.replace(i[b],v(e,f,g(e)));s.content=f}})(t,l,r)}),t.parser.addAttributeFilter("class",function(r){for(var e,i=r.length;i--;)e=r[i],a(e)?e.attr(o,"true"):c(e)&&e.attr(o,"false")}),t.serializer.addAttributeFilter(o,function(r){for(var e,i=r.length;i--;)e=r[i],(a(e)||c(e))&&(0<l.length&&e.attr("data-mce-content")?(e.name="#text",e.type=3,e.raw=!0,e.value=e.attr("data-mce-content")):e.attr(o,null))})})};(function(){p.add("noneditable",function(n){y(n)})})()})();
