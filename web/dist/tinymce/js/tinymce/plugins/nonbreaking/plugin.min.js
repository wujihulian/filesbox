(function(){"use strict";function o(n,e){for(var t="",i=0;i<e;i++)t+=n;return t}var r=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=function(n){var e=n.getParam("nonbreaking_force_tab",0);return typeof e=="boolean"?e===!0?3:0:e},u=function(n){return n.getParam("nonbreaking_wrap",!0,"boolean")},a=function(n,e){var t=u(n)||n.plugins.visualchars?'<span class="'+(function(i){return!!i.plugins.visualchars&&i.plugins.visualchars.isEnabled()}(n)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap")+'" contenteditable="false">'+o("&nbsp;",e)+"</span>":o("&nbsp;",e);n.undoManager.transact(function(){return n.insertContent(t)})},s=function(n){n.addCommand("mceNonBreaking",function(){a(n,1)})},f=tinymce.util.Tools.resolve("tinymce.util.VK"),g=function(n){var e=c(n);0<e&&n.on("keydown",function(t){if(t.keyCode===f.TAB&&!t.isDefaultPrevented()){if(t.shiftKey)return;t.preventDefault(),t.stopImmediatePropagation(),a(n,e)}})},l=function(n){n.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:function(){return n.execCommand("mceNonBreaking")}}),n.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:function(){return n.execCommand("mceNonBreaking")}})};(function(){r.add("nonbreaking",function(e){s(e),l(e),g(e)})})()})();
