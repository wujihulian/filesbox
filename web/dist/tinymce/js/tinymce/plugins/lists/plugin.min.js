(function(m){"use strict";function Pe(){}function l(n){return function(){return n}}function An(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!n.apply(null,e)}}function V(){return an}var on,_e=tinymce.util.Tools.resolve("tinymce.PluginManager"),_=l(!1),un=l(!0),an=(on={fold:function(n,e){return n()},is:_,isSome:_,isNone:un,getOr:In,getOrThunk:Rn,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:In,orThunk:Rn,map:V,each:Pe,bind:V,exists:_,forall:un,filter:V,equals:xn,equals_:xn,toArray:function(){return[]},toString:l("none()")},Object.freeze&&Object.freeze(on),on);function xn(n){return n.isNone()}function Rn(n){return n()}function In(n){return n}function M(n){return function(e){return function(t){if(t===null)return"null";var r=typeof t;return r=="object"&&(Array.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="Array")?"array":r=="object"&&(String.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="String")?"string":r}(e)===n}}function T(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var i=n[o];r[o]=e(i,o)}return r}function b(n,e){for(var t=0,r=n.length;t<r;t++)e(n[t],t)}function sn(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var i=n[r];e(i,r)&&t.push(i)}return t}function Bn(n,e,t){return b(n,function(r){t=e(t,r)}),t}function cn(n,e){for(var t=0,r=n.length;t<r;t++){var o=n[t];if(e(o,t))return S.some(o)}return S.none()}function Pn(n,e){return function(t){for(var r=[],o=0,i=t.length;o<i;++o){if(!ut(t[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+t);ft.apply(r,t[o])}return r}(T(n,e))}function fn(n){return n.length===0?S.none():S.some(n[0])}function K(n){return n.length===0?S.none():S.some(n[n.length-1])}function Me(n,e,t){return(n.compareDocumentPosition(e)&t)!=0}function Ue(n,e){var t=function(o,i){for(var u=0;u<o.length;u++){var a=o[u];if(a.test(i))return a}}(n,e);if(!t)return{major:0,minor:0};function r(o){return Number(e.replace(t,"$"+o))}return Tn(r(1),r(2))}function I(n,e){return function(){return e===n}}function w(n,e){return function(){return e===n}}function _n(n,e){var t=String(e).toLowerCase();return cn(n,function(r){return r.search(t)})}function y(n,e){return n.indexOf(e)!==-1}function D(n){return function(e){return y(e,n)}}function Mn(n,e){return n.dom()===e.dom()}function Un(n,e,t){return n.isSome()&&e.isSome()?S.some(t(n.getOrDie(),e.getOrDie())):S.none()}function dn(n){return S.from(n.dom().parentNode).map(h.fromDom)}function ln(n){return T(n.dom().childNodes,h.fromDom)}function Fn(n,e){var t=n.dom().childNodes;return S.from(t[e]).map(h.fromDom)}function jn(n){return Fn(n,0)}function Hn(n){return Fn(n,n.dom().childNodes.length-1)}function $n(n,e){dn(n).each(function(t){t.dom().insertBefore(e.dom(),n.dom())})}function X(n,e){n.dom().appendChild(e.dom())}function mn(n,e){b(e,function(t){X(n,t)})}function qn(n){var e=n.dom();e.parentNode!==null&&e.parentNode.removeChild(e)}function U(n,e,t){return n.fire("ListMutation",{action:e,element:t})}function Wn(n,e){return function(t,r){for(var o=r!=null?r:Ot,i=0;i<t.length&&o!==void 0&&o!==null;++i)o=o[t[i]];return o}(n.split("."),e)}function gn(n){return n&&n.nodeName==="BR"}function pn(n){var e=n.selection.getStart(!0);return n.dom.getParent(e,"OL,UL,DL",nn(n,e))}function Vn(n){var e=n.selection.getSelectedBlocks();return N.grep(function(t,r){var o=N.map(r,function(i){var u=t.dom.getParent(i,"li,dd,dt",nn(t,i));return u||i});return ke.unique(o)}(n,e),function(t){return Dt(t)})}function Kn(n,e){var t=n.dom.getParents(e,"ol,ul",nn(n,e));return K(t)}function Xn(n,e){var t,r,o,i=n.dom,u=n.schema.getBlockElements(),a=i.createFragment(),s=Rt(n);if(s&&((r=i.create(s)).tagName===s.toUpperCase()&&i.setAttribs(r,It(n)),Ae(e.firstChild,u)||a.appendChild(r)),e)for(;t=e.firstChild;){var c=t.nodeName;o||c==="SPAN"&&t.getAttribute("data-mce-type")==="bookmark"||(o=!0),Ae(t,u)?(a.appendChild(t),r=null):s?(r||(r=i.create(s),a.appendChild(r)),r.appendChild(t)):a.appendChild(t)}return s?o||r.appendChild(i.create("br",{"data-mce-bogus":"1"})):a.appendChild(i.create("br")),a}function zn(n){return n.dom().nodeName.toLowerCase()}function F(n,e){var t=n.dom();(function(r,o){for(var i=St(r),u=0,a=i.length;u<a;u++){var s=i[u];o(r[s],s)}})(e,function(r,o){(function(i,u,a){if(!(se(a)||at(a)||st(a)))throw m.console.error("Invalid call to Attr.set. Key ",u,":: Value ",a,":: Element ",i),new Error("Attribute value was not simple");i.setAttribute(u,a+"")})(t,o,r)})}function vn(n){return Bn(n.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})}function Fe(n,e,t){if(!se(t))throw m.console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);!function(r){return r.style!==void 0&&ce(r.style.getPropertyValue)}(n)||n.style.setProperty(e,t)}function je(n){return function(e,t){return h.fromDom(e.dom().cloneNode(t))}(n,!0)}function hn(n,e){var t=function(o,i){var u=h.fromTag(i),a=vn(o);return F(u,a),u}(n,e);$n(n,t);var r=ln(n);return mn(t,r),qn(n),t}function Qn(n,e){X(n.item,e.list)}function He(n,e,t){var r=e.slice(0,t.depth);return K(r).each(function(o){(function(i,u){X(i.list,u),i.item=u})(o,function(i,u,a){var s=h.fromTag("li",i);return F(s,u),mn(s,a),s}(n,t.itemAttributes,t.content)),function(i,u){zn(i.list)!==u.listType&&(i.list=hn(i.list,u.listType)),F(i.list,u.listAttributes)}(o,t)}),r}function $e(n,e,t){var r=function(o,i,u){for(var a,s,c,f=[],d=0;d<u;d++)f.push((a=o,s=i.listType,c={list:h.fromTag(s,a),item:h.fromTag("li",a)},X(c.list,c.item),c));return f}(n,t,t.depth-e.length);return function(o){for(var i=1;i<o.length;i++)Qn(o[i-1],o[i])}(r),function(o,i){for(var u=0;u<o.length-1;u++)a=o[u].item,s="list-style-type",c="none",f=a.dom(),Fe(f,s,c);var a,s,c,f;K(o).each(function(d){F(d.list,i.listAttributes),F(d.item,i.itemAttributes),mn(d.item,i.content)})}(r,t),function(o,i){Un(K(o),fn(i),Qn)}(e,r),e.concat(r)}function j(n){return J(n,"OL,UL")}function Yn(n){return jn(n).map(j).getOr(!1)}function Gn(n){return 0<n.depth}function qe(n){return n.isSelected}function We(n){var e=ln(n),t=function(r){return Hn(r).map(j).getOr(!1)}(n)?e.slice(0,-1):e;return T(t,je)}function Ve(n){b(n,function(e,t){(function(r,o){for(var i=r[o].depth,u=o-1;0<=u;u--){if(r[u].depth===i)return S.some(r[u]);if(r[u].depth<i)break}return S.none()})(n,t).each(function(r){(function(o,i){o.listType=i.listType,o.listAttributes=fe({},i.listAttributes)})(e,r)})})}function Ke(n,e,t,r){return jn(r).filter(j).fold(function(){e.each(function(u){Mn(u.start,r)&&t.set(!0)});var o=function(u,a,s){return dn(u).filter(Bt).map(function(c){return{depth:a,isSelected:s,content:We(u),itemAttributes:vn(u),listAttributes:vn(c),listType:zn(c)}})}(r,n,t.get());e.each(function(u){Mn(u.end,r)&&t.set(!1)});var i=Hn(r).filter(j).map(function(u){return en(n,e,t,u)}).getOr([]);return o.toArray().concat(i)},function(o){return en(n,e,t,o)})}function Xe(n,e){return T(e,function(t){var r=function(o,i){var u=(i||m.document).createDocumentFragment();return b(o,function(a){u.appendChild(a.dom())}),h.fromDom(u)}(t.content);return h.fromDom(Xn(n,r.dom()))})}function ze(n,e){return Ve(e),function(t,r){var o=Bn(r,function(i,u){return u.depth>i.length?$e(t,i,u):He(t,i,u)},[]);return fn(o).map(function(i){return i.list})}(n.contentDocument,e).toArray()}function Qe(n){var e=T(L.getSelectedListItems(n),h.fromDom);return Un(cn(e,An(Yn)),cn(function(t){var r=ct.call(t,0);return r.reverse(),r}(e),An(Yn)),function(t,r){return{start:t,end:r}})}function Ye(n,e,t){var r=function(o,i){var u=Ln(!1);return T(o,function(a){return{sourceList:a,entries:en(0,i,u,a)}})}(e,Qe(n));b(r,function(o){(function(u,a){b(sn(u,qe),function(s){return function(c,f){switch(c){case"Indent":f.depth++;break;case"Outdent":f.depth--;break;case"Flatten":f.depth=0}}(a,s)})})(o.entries,t);var i=function(u,a){return Pn(function(s,c){if(s.length===0)return[];for(var f=c(s[0]),d=[],g=[],p=0,O=s.length;p<O;p++){var v=s[p],A=c(v);A!==f&&(d.push(g),g=[]),f=A,g.push(v)}return g.length!==0&&d.push(g),d}(a,Gn),function(s){return fn(s).map(Gn).getOr(!1)?ze(u,s):Xe(u,s)})}(n,o.entries);b(i,function(u){U(n,t==="Indent"?"IndentList":"OutdentList",u.dom())}),function(u,a){b(a,function(s){$n(u,s)})}(o.sourceList,i),qn(o.sourceList)})}function Ge(n){J(n,"dt")&&hn(n,"dd")}function Je(n,e,t){b(t,e==="Indent"?Ge:function(r){return function(o,i){J(i,"dd")?hn(i,"dt"):J(i,"dt")&&dn(i).each(function(u){return Pt(o,u.dom(),i.dom())})}(n,r)})}function Jn(n,e){if(B(n))return{container:n,offset:e};var t=we.getNode(n,e);return B(t)?{container:t,offset:e>=n.childNodes.length?t.data.length:0}:t.previousSibling&&B(t.previousSibling)?{container:t.previousSibling,offset:t.previousSibling.data.length}:t.nextSibling&&B(t.nextSibling)?{container:t.nextSibling,offset:0}:{container:n,offset:e}}function Nn(n,e){var t=T(L.getSelectedListRoots(n),h.fromDom),r=T(L.getSelectedDlItems(n),h.fromDom),o=!1;if(t.length||r.length){var i=n.selection.getBookmark();Ye(n,t,e),Je(n,e,r),n.selection.moveToBookmark(i),n.selection.setRng(tn(n.selection.getRng())),n.nodeChanged(),o=!0}return o}function Zn(n){return Nn(n,"Indent")}function yn(n){return Nn(n,"Outdent")}function z(n){return Nn(n,"Flatten")}function ne(n){return/\btox\-/.test(n.className)}function Q(n){switch(n){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}}function ee(n,e){N.each(e,function(t,r){n.setAttribute(r,t)})}function Y(n,e,t){(function(r,o,i){var u=i["list-style-type"]?i["list-style-type"]:null;r.setStyle(o,"list-style-type",u)})(n,e,t),function(r,o,i){ee(o,i["list-attributes"]),N.each(r.select("li",o),function(u){ee(u,i["list-item-attributes"])})}(n,e,t)}function te(n,e,t,r){var o,i;for(o=e[t?"startContainer":"endContainer"],i=e[t?"startOffset":"endOffset"],o.nodeType===1&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!t&&$(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(En(n,o)||/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o}function Ze(n,e,t){t===void 0&&(t={});var r,o=n.selection.getRng(!0),i="LI",u=L.getClosestListRootElm(n,n.selection.getStart(!0)),a=n.dom;a.getContentEditable(n.selection.getNode())!=="false"&&((e=e.toUpperCase())==="DL"&&(i="DT"),r=q(o),N.each(function(s,c,f){for(var d,g=[],p=s.dom,O=te(s,c,!0,f),v=te(s,c,!1,f),A=[],R=O;R&&(A.push(R),R!==v);R=R.nextSibling);return N.each(A,function(C){if(En(s,C))return g.push(C),void(d=null);if(p.isBlock(C)||$(C))return $(C)&&p.remove(C),void(d=null);var Be=C.nextSibling;_t.isBookmarkNode(C)&&(En(s,Be)||!Be&&C.parentNode===f)?d=null:(d||(d=p.create("p"),C.parentNode.insertBefore(d,C),g.push(d)),d.appendChild(C))}),g}(n,o,u),function(s){var c,f;(f=s.previousSibling)&&E(f)&&f.nodeName===e&&function(d,g,p){var O=d.getStyle(g,"list-style-type"),v=p?p["list-style-type"]:"";return O===(v=v===null?"":v)}(a,f,t)?(c=f,s=a.rename(s,i),f.appendChild(s)):(c=a.create(e),s.parentNode.insertBefore(c,s),c.appendChild(s),s=a.rename(s,i)),function(d,g,p){N.each(p,function(O){var v;return d.setStyle(g,((v={})[O]="",v))})}(a,s,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Y(a,c,t),kn(n.dom,c)}),n.selection.setRng(W(r)))}function re(n,e,t){return function(r,o){return r&&o&&E(r)&&r.nodeName===o.nodeName}(e,t)&&function(r,o,i){return r.getStyle(o,"list-style-type",!0)===r.getStyle(i,"list-style-type",!0)}(n,e,t)&&function(r,o){return r.className===o.className}(e,t)}function nt(n,e,t,r,o){if(e.nodeName!==r||Re(o)){var i=q(n.selection.getRng(!0));N.each([e].concat(t),function(u){(function(a,s,c,f){if(s.nodeName!==c){var d=a.dom.rename(s,c);Y(a.dom,d,f),U(a,Q(c),d)}else Y(a.dom,s,f),U(a,Q(c),s)})(n,u,r,o)}),n.selection.setRng(W(i))}else z(n)}function et(n,e){var t,r=e.parentNode;r.nodeName==="LI"&&r.firstChild===e&&((t=r.previousSibling)&&t.nodeName==="LI"?(t.appendChild(e),x(n,r)&&Ie.remove(r)):Ie.setStyle(r,"listStyleType","none")),E(r)&&(t=r.previousSibling)&&t.nodeName==="LI"&&t.appendChild(e)}function oe(n,e,t,r){var o=e.startContainer,i=e.startOffset;if(B(o)&&(t?i<o.data.length:0<i))return o;var u=n.schema.getNonEmptyElements();o.nodeType===1&&(o=we.getNode(o,i));var a=new yt(o,r);for(t&&kt(n.dom,o)&&a.next();o=a[t?"next":"prev2"]();)if(o.nodeName==="LI"&&!o.hasChildNodes()||u[o.nodeName]||B(o)&&0<o.data.length)return o}function ie(n,e){var t=e.childNodes;return t.length===1&&!E(t[0])&&n.isBlock(t[0])}function tt(n,e,t){var r,o;if(o=ie(n,t)?t.firstChild:t,function(i,u){ie(i,u)&&i.remove(u.firstChild,!0)}(n,e),!x(n,e,!0))for(;r=e.firstChild;)o.appendChild(r)}function Sn(n,e,t){var r,o,i=e.parentNode;if(xe(n,e)&&xe(n,t)){E(t.lastChild)&&(o=t.lastChild),i===t.lastChild&&$(i.previousSibling)&&n.remove(i.previousSibling),(r=t.lastChild)&&$(r)&&e.hasChildNodes()&&n.remove(r),x(n,t,!0)&&n.$(t).empty(),tt(n,e,t),o&&t.appendChild(o);var u=Nt(h.fromDom(t),h.fromDom(e))?n.getParents(e,E,t):[];n.remove(e),b(u,function(a){x(n,a)&&a!==n.getRoot()&&n.remove(a)})}}function rt(n,e,t,r){var o=n.dom;if(o.isEmpty(r))(function(u,a,s){u.dom.$(s).empty(),Sn(u.dom,a,s),u.selection.setCursorLocation(s)})(n,t,r);else{var i=q(e);Sn(o,t,r),n.selection.setRng(W(i))}}function ot(n,e){var t=n.dom,r=n.selection,o=r.getStart(),i=L.getClosestListRootElm(n,o),u=t.getParent(r.getStart(),"LI",i);if(u){var a=u.parentNode;if(a===n.getBody()&&x(t,a))return!0;var s=tn(r.getRng()),c=t.getParent(oe(n,s,e,i),"LI",i);if(c&&c!==u)return n.undoManager.transact(function(){e?rt(n,s,c,u):wt(u)?yn(n):function(f,d,g,p){var O=q(d);Sn(f.dom,g,p);var v=W(O);f.selection.setRng(v)}(n,s,u,c)}),!0;if(!c&&!e&&s.startOffset===0&&s.endOffset===0)return n.undoManager.transact(function(){z(n)}),!0}return!1}function it(n,e){return ot(n,e)||function(t,r){var o=t.dom,i=t.selection.getStart(),u=L.getClosestListRootElm(t,i),a=o.getParent(i,o.isBlock,u);if(a&&o.isEmpty(a)){var s=tn(t.selection.getRng()),c=o.getParent(oe(t,s,r,u),"LI",u);if(c)return t.undoManager.transact(function(){(function(f,d,g){var p=f.getParent(d.parentNode,f.isBlock,g);f.remove(d),p&&f.isEmpty(p)&&f.remove(p)})(o,a,u),rn.mergeWithAdjacentLists(o,c.parentNode),t.selection.select(c,!0),t.selection.collapse(r)}),!0}return!1}(n,e)}function On(n,e){return n.selection.isCollapsed()?it(n,e):function(t){var r=t.selection.getStart(),o=L.getClosestListRootElm(t,r);return!!(t.dom.getParent(r,"LI,DT,DD",o)||0<L.getSelectedListItems(t).length)&&(t.undoManager.transact(function(){t.execCommand("Delete"),Mt(t.dom,t.getBody())}),!0)}(n)}function Cn(n,e){return function(){var t=n.dom.getParent(n.selection.getStart(),"UL,OL,DL");return t&&t.nodeName===e}}function ue(n,e){return function(t){function r(o){var i=function(s,c){for(var f=0;f<s.length;f++)if(c(s[f]))return f;return-1}(o.parents,Et),u=i!==-1?o.parents.slice(0,i):o.parents,a=N.grep(u,E);t.setActive(0<a.length&&a[0].nodeName===e&&!ne(a[0]))}return n.on("NodeChange",r),function(){return n.off("NodeChange",r)}}}var ae,bn=function(n){function e(){return o}function t(i){return i(n)}var r=l(n),o={fold:function(i,u){return u(n)},is:function(i){return n===i},isSome:un,isNone:_,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(i){return bn(i(n))},each:function(i){i(n)},bind:t,exists:t,forall:t,filter:function(i){return i(n)?o:an},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(i){return i.is(n)},equals_:function(i,u){return i.fold(_,function(a){return u(n,a)})}};return o},S={some:bn,none:V,from:function(n){return n==null?an:bn(n)}},se=M("string"),ut=M("array"),at=M("boolean"),ce=M("function"),st=M("number"),ct=Array.prototype.slice,ft=Array.prototype.push,dt=(ce(Array.from)&&Array.from,function(n,e){return Me(n,e,m.Node.DOCUMENT_POSITION_CONTAINED_BY)}),fe=function(){return(fe=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)},Ln=function(n){function e(){return t}var t=n;return{get:e,set:function(r){t=r},clone:function(){return Ln(e())}}},de=function(){return Tn(0,0)},Tn=function(n,e){return{major:n,minor:e}},G={nu:Tn,detect:function(n,e){var t=String(e).toLowerCase();return n.length===0?de():Ue(n,t)},unknown:de},le="Edge",me="Chrome",ge="Opera",pe="Firefox",ve="Safari",he=function(n){var e=n.current;return{current:e,version:n.version,isEdge:I(le,e),isChrome:I(me,e),isIE:I("IE",e),isOpera:I(ge,e),isFirefox:I(pe,e),isSafari:I(ve,e)}},Ne={unknown:function(){return he({current:void 0,version:G.unknown()})},nu:he,edge:l(le),chrome:l(me),ie:l("IE"),opera:l(ge),firefox:l(pe),safari:l(ve)},ye="Windows",Se="Android",Oe="Solaris",Ce="FreeBSD",be="ChromeOS",Le=function(n){var e=n.current;return{current:e,version:n.version,isWindows:w(ye,e),isiOS:w("iOS",e),isAndroid:w(Se,e),isOSX:w("OSX",e),isLinux:w("Linux",e),isSolaris:w(Oe,e),isFreeBSD:w(Ce,e),isChromeOS:w(be,e)}},Te={unknown:function(){return Le({current:void 0,version:G.unknown()})},nu:Le,windows:l(ye),ios:l("iOS"),android:l(Se),linux:l("Linux"),osx:l("OSX"),solaris:l(Oe),freebsd:l(Ce),chromeos:l(be)},lt=function(n,e){return _n(n,e).map(function(t){var r=G.detect(t.versionRegexes,e);return{current:t.name,version:r}})},mt=function(n,e){return _n(n,e).map(function(t){var r=G.detect(t.versionRegexes,e);return{current:t.name,version:r}})},Dn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,gt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return y(n,"edge/")&&y(n,"chrome")&&y(n,"safari")&&y(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Dn],search:function(n){return y(n,"chrome")&&!y(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return y(n,"msie")||y(n,"trident")}},{name:"Opera",versionRegexes:[Dn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:D("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:D("firefox")},{name:"Safari",versionRegexes:[Dn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(y(n,"safari")||y(n,"mobile/"))&&y(n,"applewebkit")}}],pt=[{name:"Windows",search:D("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return y(n,"iphone")||y(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:D("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:D("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:D("linux"),versionRegexes:[]},{name:"Solaris",search:D("sunos"),versionRegexes:[]},{name:"FreeBSD",search:D("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:D("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],De={browsers:l(gt),oses:l(pt)},vt=Ln(function(n,e){var t=De.browsers(),r=De.oses(),o=lt(t,n).fold(Ne.unknown,Ne.nu),i=mt(r,n).fold(Te.unknown,Te.nu);return{browser:o,os:i,deviceType:function(u,a,s,c){var f=u.isiOS()&&/ipad/i.test(s)===!0,d=u.isiOS()&&!f,g=u.isiOS()||u.isAndroid(),p=g||c("(pointer:coarse)"),O=f||!d&&g&&c("(min-device-width:768px)"),v=d||g&&!O,A=a.isSafari()&&u.isiOS()&&/safari/i.test(s)===!1,R=!v&&!O&&!A;return{isiPad:l(f),isiPhone:l(d),isTablet:l(O),isPhone:l(v),isTouch:l(p),isAndroid:u.isAndroid,isiOS:u.isiOS,isWebView:l(A),isDesktop:l(R)}}(i,o,n,e)}}(m.navigator.userAgent,function(n){return m.window.matchMedia(n).matches})),H=function(n){if(n==null)throw new Error("Node cannot be null or undefined");return{dom:l(n)}},h={fromHtml:function(n,e){var t=(e||m.document).createElement("div");if(t.innerHTML=n,!t.hasChildNodes()||1<t.childNodes.length)throw m.console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return H(t.childNodes[0])},fromTag:function(n,e){var t=(e||m.document).createElement(n);return H(t)},fromText:function(n,e){var t=(e||m.document).createTextNode(n);return H(t)},fromDom:H,fromPoint:function(n,e,t){var r=n.dom();return S.from(r.elementFromPoint(e,t)).map(H)}},Ee=(m.Node.ATTRIBUTE_NODE,m.Node.CDATA_SECTION_NODE,m.Node.COMMENT_NODE,m.Node.DOCUMENT_NODE,m.Node.DOCUMENT_TYPE_NODE,m.Node.DOCUMENT_FRAGMENT_NODE,m.Node.ELEMENT_NODE),ht=(m.Node.TEXT_NODE,m.Node.PROCESSING_INSTRUCTION_NODE,m.Node.ENTITY_REFERENCE_NODE,m.Node.ENTITY_NODE,m.Node.NOTATION_NODE,Ee),Nt=vt.get().browser.isIE()?function(n,e){return dt(n.dom(),e.dom())}:function(n,e){var t=n.dom(),r=e.dom();return t!==r&&t.contains(r)},J=function(n,e){var t=n.dom();if(t.nodeType!==ht)return!1;var r=t;if(r.matches!==void 0)return r.matches(e);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(e);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(e);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},we=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),yt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Z=tinymce.util.Tools.resolve("tinymce.util.VK"),St=Object.keys,Ot=(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e]}("element","offset"),typeof m.window!="undefined"?m.window:Function("return this;")()),Ct=function(n,e){var t=function(r,o){return Wn(r,o)}(n,e);if(t==null)throw new Error(n+" not available on this browser");return t},bt=function(n){return function(e){return Ct("HTMLElement",e)}(Wn("ownerDocument.defaultView",n)).prototype.isPrototypeOf(n)},ke=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),N=tinymce.util.Tools.resolve("tinymce.util.Tools"),B=function(n){return n&&n.nodeType===3},E=function(n){return n&&/^(OL|UL|DL)$/.test(n.nodeName)},Lt=function(n){return n&&/^(OL|UL)$/.test(n.nodeName)},Tt=function(n){return n&&/^(DT|DD)$/.test(n.nodeName)},Dt=function(n){return n&&/^(LI|DT|DD)$/.test(n.nodeName)},Et=function(n){return n&&/^(TH|TD)$/.test(n.nodeName)},$=gn,wt=function(n){return n.parentNode.firstChild===n},En=function(n,e){return e&&!!n.schema.getTextBlockElements()[e.nodeName]},Ae=function(n,e){return n&&n.nodeName in e},kt=function(n,e){return!!gn(e)&&!(!n.isBlock(e.nextSibling)||gn(e.previousSibling))},x=function(n,e,t){var r=n.isEmpty(e);return!(t&&0<n.select("span[data-mce-type=bookmark]",e).length)&&r},xe=function(n,e){return n.isChildOf(e,n.getRoot())},nn=function(n,e){var t=n.dom.getParents(e,"TD,TH");return 0<t.length?t[0]:n.getBody()},At=function(n,e){var t=T(e,function(r){return Kn(n,r).getOr(r)});return ke.unique(t)},L={isList:function(n){var e=pn(n);return bt(e)},getParentList:pn,getSelectedSubLists:function(n){var e=pn(n),t=n.selection.getSelectedBlocks();return function(r,o){return r&&o.length===1&&o[0]===r}(e,t)?function(r){return N.grep(r.querySelectorAll("ol,ul,dl"),function(o){return E(o)})}(e):N.grep(t,function(r){return E(r)&&e!==r})},getSelectedListItems:Vn,getClosestListRootElm:nn,getSelectedDlItems:function(n){return sn(Vn(n),Tt)},getSelectedListRoots:function(n){var e=function(t){var r=Kn(t,t.selection.getStart()),o=sn(t.selection.getSelectedBlocks(),Lt);return r.toArray().concat(o)}(n);return At(n,e)}},xt=function(n){return n.getParam("lists_indent_on_tab",!0)},Rt=function(n){var e=n.getParam("forced_root_block","p");return e===!1?"":e===!0?"p":e},It=function(n){return n.getParam("forced_root_block_attrs",{})},Bt=(ae=Ee,function(n){return function(e){return e.dom().nodeType}(n)===ae}),en=function(n,e,t,r){return Pn(ln(r),function(o){return(j(o)?en:Ke)(n+1,e,t,o)})},wn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),k=wn.DOM,Pt=function(n,e,t){var r,o,i,u,a,s;for(i=k.select('span[data-mce-type="bookmark"]',e),a=Xn(n,t),(r=k.createRng()).setStartAfter(t),r.setEndAfter(e),u=(o=r.extractContents()).firstChild;u;u=u.firstChild)if(u.nodeName==="LI"&&n.dom.isEmpty(u)){k.remove(u);break}n.dom.isEmpty(o)||k.insertAfter(o,e),k.insertAfter(a,e),x(n.dom,t.parentNode)&&(s=t.parentNode,N.each(i,function(c){s.parentNode.insertBefore(c,t.parentNode)}),k.remove(s)),k.remove(t),x(n.dom,e)&&k.remove(e)},tn=function(n){var e=n.cloneRange(),t=Jn(n.startContainer,n.startOffset);e.setStart(t.container,t.offset);var r=Jn(n.endContainer,n.endOffset);return e.setEnd(r.container,r.offset),e},_t=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),P=wn.DOM,q=function(n){function e(r){var o,i,u;i=n[r?"startContainer":"endContainer"],u=n[r?"startOffset":"endOffset"],i.nodeType===1&&(o=P.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(u=Math.min(u,i.childNodes.length-1),r?i.insertBefore(o,i.childNodes[u]):P.insertAfter(o,i.childNodes[u])):i.appendChild(o),i=o,u=0),t[r?"startContainer":"endContainer"]=i,t[r?"startOffset":"endOffset"]=u}var t={};return e(!0),n.collapsed||e(),t},W=function(n){function e(r){var o,i,u;o=u=n[r?"startContainer":"endContainer"],i=n[r?"startOffset":"endOffset"],o&&(o.nodeType===1&&(i=function(a){for(var s=a.parentNode.firstChild,c=0;s;){if(s===a)return c;s.nodeType===1&&s.getAttribute("data-mce-type")==="bookmark"||c++,s=s.nextSibling}return-1}(o),o=o.parentNode,P.remove(u),!o.hasChildNodes()&&P.isBlock(o)&&o.appendChild(P.create("br"))),n[r?"startContainer":"endContainer"]=o,n[r?"startOffset":"endOffset"]=i)}e(!0),e();var t=P.createRng();return t.setStart(n.startContainer,n.startOffset),n.endContainer&&t.setEnd(n.endContainer,n.endOffset),tn(t)},kn=function(n,e){var t,r;if(t=e.nextSibling,re(n,e,t)){for(;r=t.firstChild;)e.appendChild(r);n.remove(t)}if(t=e.previousSibling,re(n,e,t)){for(;r=t.lastChild;)e.insertBefore(r,e.firstChild);n.remove(t)}},Re=function(n){return"list-style-type"in n},rn={toggleList:function(n,e,t){var r=L.getParentList(n),o=L.getSelectedSubLists(n);t=t||{},r&&0<o.length?nt(n,r,o,e,t):function(i,u,a,s){if(u!==i.getBody())if(u)if(u.nodeName!==a||Re(s)||ne(u)){var c=q(i.selection.getRng(!0));Y(i.dom,u,s);var f=i.dom.rename(u,a);kn(i.dom,f),i.selection.setRng(W(c)),U(i,Q(a),f)}else z(i);else Ze(i,a,s),U(i,Q(a),u)}(n,r,e,t)},mergeWithAdjacentLists:kn},Ie=wn.DOM,Mt=function(n,e){N.each(N.grep(n.select("ol,ul",e)),function(t){et(n,t)})},Ut=function(n){n.on("keydown",function(e){e.keyCode===Z.BACKSPACE?On(n,!1)&&e.preventDefault():e.keyCode===Z.DELETE&&On(n,!0)&&e.preventDefault()})},Ft=On,jt=function(n){return{backspaceDelete:function(e){Ft(n,e)}}},Ht=function(n){n.on("BeforeExecCommand",function(e){var t=e.command.toLowerCase();t==="indent"?Zn(n):t==="outdent"&&yn(n)}),n.addCommand("InsertUnorderedList",function(e,t){rn.toggleList(n,"UL",t)}),n.addCommand("InsertOrderedList",function(e,t){rn.toggleList(n,"OL",t)}),n.addCommand("InsertDefinitionList",function(e,t){rn.toggleList(n,"DL",t)}),n.addCommand("RemoveList",function(){z(n)}),n.addQueryStateHandler("InsertUnorderedList",Cn(n,"UL")),n.addQueryStateHandler("InsertOrderedList",Cn(n,"OL")),n.addQueryStateHandler("InsertDefinitionList",Cn(n,"DL"))},$t=function(n){xt(n)&&function(e){e.on("keydown",function(t){t.keyCode!==Z.TAB||Z.metaKeyPressed(t)||e.undoManager.transact(function(){(t.shiftKey?yn(e):Zn(e))&&t.preventDefault()})})}(n),Ut(n)},qt=function(n){function e(i){return function(){return n.execCommand(i)}}var t,r,o;r="advlist",o=(t=n).settings.plugins?t.settings.plugins:"",N.inArray(o.split(/[ ,]/),r)===-1&&(n.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:e("InsertOrderedList"),onSetup:ue(n,"OL")}),n.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:e("InsertUnorderedList"),onSetup:ue(n,"UL")}))};(function(){_e.add("lists",function(e){return $t(e),qt(e),Ht(e),jt(e)})})()})(window);
