(function(){"use strict";function i(n,t){return function(e){e.setActive(t.get());function o(g){return e.setActive(g.state)}return n.on("VisualBlocks",o),function(){return n.off("VisualBlocks",o)}}}var u=function(n){function t(){return e}var e=n;return{get:t,set:function(o){e=o},clone:function(){return u(t())}}},s=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=function(n,t){n.fire("VisualBlocks",{state:t})},c=function(n,t,e){n.dom.toggleClass(n.getBody(),"mce-visualblocks"),e.set(!e.get()),l(n,e.get())},r=function(n,t,e){n.addCommand("mceVisualBlocks",function(){c(n,t,e)})},a=function(n){return n.getParam("visualblocks_default_state",!1,"boolean")},f=function(n,t,e){n.on("PreviewFormats AfterPreviewFormats",function(o){e.get()&&n.dom.toggleClass(n.getBody(),"mce-visualblocks",o.type==="afterpreviewformats")}),n.on("init",function(){a(n)&&c(n,t,e)}),n.on("remove",function(){n.dom.removeClass(n.getBody(),"mce-visualblocks")})},m=function(n,t){n.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:function(){return n.execCommand("mceVisualBlocks")},onSetup:i(n,t)}),n.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",onAction:function(){return n.execCommand("mceVisualBlocks")},onSetup:i(n,t)})};(function(){s.add("visualblocks",function(t,e){var o=u(!1);r(t,e,o),m(t,o),f(t,e,o)})})()})();
