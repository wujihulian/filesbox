(function(){var b,C,j,a,f,E=[];f=typeof global!="undefined"?global:window,a=f.jQuery;function l(){return f.tinymce}a.fn.tinymce=function(c){var s,v,p,o=this,r="";if(!o.length)return o;if(!c)return l()?l().get(o[0].id):null;o.css("visibility","hidden");function t(){var n=[],u=0;j||(_(),j=!0),o.each(function(i,m){var g,d=m.id,x=c.oninit;d||(m.id=d=l().DOM.uniqueId()),l().get(d)||(g=l().createEditor(d,c),n.push(g),g.on("init",function(){var y,h=x;o.css("visibility",""),x&&++u==n.length&&(typeof h=="string"&&(y=h.indexOf(".")===-1?null:l().resolve(h.replace(/\.\w+$/,"")),h=l().resolve(h)),h.apply(y||l(),n))}))}),a.each(n,function(i,m){m.render()})}if(f.tinymce||C||!(s=c.script_url))C===1?E.push(t):t();else{C=1,v=s.substring(0,s.lastIndexOf("/")),s.indexOf(".min")!=-1&&(r=".min"),f.tinymce=f.tinyMCEPreInit||{base:v,suffix:r},s.indexOf("gzip")!=-1&&(p=c.language||"en",s=s+(/\?/.test(s)?"&":"?")+"js=true&core=true&suffix="+escape(r)+"&themes="+escape(c.theme||"modern")+"&plugins="+escape(c.plugins||"")+"&languages="+(p||""),f.tinyMCE_GZ||(f.tinyMCE_GZ={start:function(){function n(u){l().ScriptLoader.markDone(l().baseURI.toAbsolute(u))}n("langs/"+p+".js"),n("themes/"+c.theme+"/theme"+r+".js"),n("themes/"+c.theme+"/langs/"+p+".js"),a.each(c.plugins.split(","),function(u,i){i&&(n("plugins/"+i+"/plugin"+r+".js"),n("plugins/"+i+"/langs/"+p+".js"))})},end:function(){}}));var e=document.createElement("script");e.type="text/javascript",e.onload=e.onreadystatechange=function(n){n=n||window.event,C===2||n.type!="load"&&!/complete|loaded/.test(e.readyState)||(l().dom.Event.domLoaded=1,C=2,c.script_loaded&&c.script_loaded(),t(),a.each(E,function(u,i){i()}))},e.src=s,document.body.appendChild(e)}return o},a.extend(a.expr[":"],{tinymce:function(c){var s;return!!(c.id&&"tinymce"in f&&(s=l().get(c.id))&&s.editorManager===l())}});var _=function(){function c(r){r==="remove"&&this.each(function(t,e){var n=p(e);n&&n.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(t,e){var n=l().get(e.id.replace(/_parent$/,""));n&&n.remove()})}function s(r){var t,e=this;if(r!=null)c.call(e),e.each(function(n,u){var i;(i=l().get(u.id))&&i.setContent(r)});else if(0<e.length&&(t=l().get(e[0].id)))return t.getContent()}function v(r){return!!(r&&r.length&&f.tinymce&&r.is(":tinymce"))}var p=function(r){var t=null;return r&&r.id&&f.tinymce&&(t=l().get(r.id)),t},o={};a.each(["text","html","val"],function(r,t){var e=o[t]=a.fn[t],n=t==="text";a.fn[t]=function(u){var i=this;if(!v(i))return e.apply(i,arguments);if(u!==b)return s.call(i.filter(":tinymce"),u),e.apply(i.not(":tinymce"),arguments),i;var m="",g=arguments;return(n?i:i.eq(0)).each(function(d,x){var y=p(x);m+=y?n?y.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):y.getContent({save:!0}):e.apply(a(x),g)}),m}}),a.each(["append","prepend"],function(r,t){var e=o[t]=a.fn[t],n=t==="prepend";a.fn[t]=function(u){var i=this;return v(i)?u!==b?(typeof u=="string"&&i.filter(":tinymce").each(function(m,g){var d=p(g);d&&d.setContent(n?u+d.getContent():d.getContent()+u)}),e.apply(i.not(":tinymce"),arguments),i):void 0:e.apply(i,arguments)}}),a.each(["remove","replaceWith","replaceAll","empty"],function(r,t){var e=o[t]=a.fn[t];a.fn[t]=function(){return c.call(this,t),e.apply(this,arguments)}}),o.attr=a.fn.attr,a.fn.attr=function(r,t){var e=this,n=arguments;if(!r||r!=="value"||!v(e))return o.attr.apply(e,n);if(t!==b)return s.call(e.filter(":tinymce"),t),o.attr.apply(e.not(":tinymce"),n),e;var u=e[0],i=p(u);return i?i.getContent({save:!0}):o.attr.apply(a(u),n)}}})();
