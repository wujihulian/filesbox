(function(F){"use strict";function P(){}function Zc(t,n){return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return t(n.apply(null,e))}}function bt(t){return t}var y=function(t){return function(){return t}};function ce(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];var i=n.concat(o);return t.apply(null,i)}}function Vi(t){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return!t.apply(null,n)}}function ts(t){return function(){throw new Error(t)}}var se=y(!1),$o=y(!0),sS=tinymce.util.Tools.resolve("tinymce.ThemeManager"),O=function(){return(O=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)};function qu(t,n){var e={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.indexOf(o)<0&&(e[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(e[o[r]]=t[o[r]])}return e}function jt(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var o=Array(t),r=0;for(n=0;n<e;n++)for(var i=arguments[n],u=0,a=i.length;u<a;u++,r++)o[r]=i[u];return o}function Ku(){return es}var ns,es=(ns={fold:function(t,n){return t()},is:se,isSome:se,isNone:$o,getOr:cm,getOrThunk:am,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:y(null),getOrUndefined:y(void 0),or:cm,orThunk:am,map:Ku,each:P,bind:Ku,exists:se,forall:$o,filter:Ku,equals:um,equals_:um,toArray:function(){return[]},toString:y("none()")},Object.freeze&&Object.freeze(ns),ns);function um(t){return t.isNone()}function am(t){return t()}function cm(t){return t}function Lr(t){return function(n){return function(e){if(e===null)return"null";var o=typeof e;return o=="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":o=="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":o}(n)===t}}function sm(t,n){if(ao(t)){for(var e=0,o=t.length;e<o;++e)if(n(t[e])!==!0)return!1;return!0}return!1}function fm(t,n){return lS.call(t,n)}function So(t,n){for(var e=0,o=t.length;e<o;e++)if(n(t[e],e))return!0;return!1}function lm(t,n){for(var e=[],o=0;o<t.length;o+=n){var r=Qu.call(t,o,o+n);e.push(r)}return e}function I(t,n){for(var e=t.length,o=new Array(e),r=0;r<e;r++){var i=t[r];o[r]=n(i,r)}return o}function Ct(t,n){for(var e=[],o=0,r=t.length;o<r;o++){var i=t[o];n(i,o)&&e.push(i)}return e}function jr(t,n,e){return function(o,r){for(var i=o.length-1;0<=i;i--)r(o[i],i)}(t,function(o){e=n(e,o)}),e}function Dn(t,n,e){return K(t,function(o){e=n(e,o)}),e}function Xt(t,n){for(var e=0,o=t.length;e<o;e++){var r=t[e];if(n(r,e))return d.some(r)}return d.none()}function Ur(t,n){for(var e=0,o=t.length;e<o;e++)if(n(t[e],e))return d.some(e);return d.none()}function Zt(t){for(var n=[],e=0,o=t.length;e<o;++e){if(!ao(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);dS.apply(n,t[e])}return n}function At(t,n){return Zt(I(t,n))}function Wr(t,n){for(var e=0,o=t.length;e<o;++e)if(n(t[e],e)!==!0)return!1;return!0}function Hi(t){var n=Qu.call(t,0);return n.reverse(),n}function os(t,n){return Ct(t,function(e){return!Mt(n,e)})}function fS(t){return[t]}function dm(t,n){var e=Qu.call(t,0);return e.sort(n),e}function rs(t){return t.length===0?d.none():d.some(t[t.length-1])}function fe(t,n){for(var e=0;e<t.length;e++){var o=n(t[e],e);if(o.isSome())return o}return d.none()}function Pt(t,n){return pm(t,function(e,o){return{k:o,v:n(e,o)}})}function mm(t,n){for(var e=Ht(t),o=0,r=e.length;o<r;o++){var i=e[o],u=t[i];if(n(u,i,t))return d.some(u)}return d.none()}function Ju(t){return Zu(t,function(n){return n})}function ee(t,n){return qt(t,n)&&t[n]!==void 0&&t[n]!==null}function gm(t){return function(){for(var n=new Array(arguments.length),e=0;e<n.length;e++)n[e]=arguments[e];if(n.length===0)throw new Error("Can't merge zero objects");for(var o={},r=0;r<n.length;r++){var i=n[r];for(var u in i)pS.call(i,u)&&(o[u]=t(o[u],i[u]))}return o}}function Co(t){var n,e=!1;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return e||(e=!0,n=t.apply(null,o)),n}}var le,$u,is=function(t){function n(){return r}function e(i){return i(t)}var o=y(t),r={fold:function(i,u){return u(t)},is:function(i){return t===i},isSome:$o,isNone:se,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:n,orThunk:n,map:function(i){return is(i(t))},each:function(i){i(t)},bind:e,exists:e,forall:e,filter:function(i){return i(t)?r:es},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(i){return i.is(t)},equals_:function(i,u){return i.fold(se,function(a){return u(t,a)})}};return r},d={some:is,none:Ku,from:function(t){return t==null?es:is(t)}},Gr=function(t){return{is:function(n){return t===n},isValue:$o,isError:se,getOr:y(t),getOrThunk:y(t),getOrDie:y(t),or:function(n){return Gr(t)},orThunk:function(n){return Gr(t)},fold:function(n,e){return e(t)},map:function(n){return Gr(n(t))},mapError:function(n){return Gr(t)},each:function(n){n(t)},bind:function(n){return n(t)},exists:function(n){return n(t)},forall:function(n){return n(t)},toOption:function(){return d.some(t)}}},Ni=function(t){return{is:se,isValue:se,isError:$o,getOr:bt,getOrThunk:function(n){return n()},getOrDie:function(){return ts(String(t))()},or:function(n){return n},orThunk:function(n){return n()},fold:function(n,e){return n(t)},map:function(n){return Ni(t)},mapError:function(n){return Ni(n(t))},each:P,bind:function(n){return Ni(t)},exists:se,forall:$o,toOption:d.none}},ot={value:Gr,error:Ni,fromOption:function(t,n){return t.fold(function(){return Ni(n)},Gr)}},Yt=Lr("string"),ko=Lr("object"),ao=Lr("array"),Pi=Lr("boolean"),de=Lr("function"),co=Lr("number"),Qu=Array.prototype.slice,lS=Array.prototype.indexOf,dS=Array.prototype.push,Mt=function(t,n){return-1<fm(t,n)},K=function(t,n){for(var e=0,o=t.length;e<o;e++)n(t[e],e)},zi=function(t){return t.length===0?d.none():d.some(t[0])},mS=de(Array.from)?Array.from:function(t){return Qu.call(t)},Ht=Object.keys,gS=Object.hasOwnProperty,yn=function(t,n){for(var e=Ht(t),o=0,r=e.length;o<r;o++){var i=e[o];n(t[i],i)}},pm=function(t,n){var e={};return yn(t,function(o,r){var i=n(o,r);e[i.k]=i.v}),e},Zu=function(t,n){var e=[];return yn(t,function(o,r){e.push(n(o,r))}),e},J=function(t,n){return qt(t,n)?d.from(t[n]):d.none()},qt=function(t,n){return gS.call(t,n)},Rn=function(t){if(!ao(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");var n=[],e={};return K(t,function(o,r){var i=Ht(o);if(i.length!==1)throw new Error("one and only one name per case");var u=i[0],a=o[u];if(e[u]!==void 0)throw new Error("duplicate key detected:"+u);if(u==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ao(a))throw new Error("case arguments must be an array");n.push(u),e[u]=function(){var s=arguments.length;if(s!==a.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+a.length+" ("+a+"), got "+s);for(var c=new Array(s),f=0;f<c.length;f++)c[f]=arguments[f];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[r].apply(null,c)},match:function(l){var m=Ht(l);if(n.length!==m.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+m.join(","));if(!Wr(n,function(h){return Mt(m,h)}))throw new Error("Not all branches were specified when using match. Specified: "+m.join(", ")+`
Required: `+n.join(", "));return l[u].apply(null,c)},log:function(l){F.console.log(l,{constructors:n,constructor:u,params:c})}}}}),e},pS=Object.prototype.hasOwnProperty,yt=gm(function(t,n){return ko(t)&&ko(n)?yt(t,n):n}),hm=gm(function(t,n){return n});($u=le=le||{})[$u.Error=0]="Error",$u[$u.Value=1]="Value";function vm(t,n,e){return t.stype===le.Error?n(t.serror):e(t.svalue)}function bm(t){return{stype:le.Value,svalue:t}}function ym(t){return{stype:le.Error,serror:t}}function ta(t){return ir.defaultedThunk(y(t))}function Li(t,n){var e;return(e={})[t]=n,e}function hS(t,n){return function(e,o){var r={};return yn(e,function(i,u){Mt(o,u)||(r[u]=i)}),r}(t,n)}function Xe(t,n){return Li(t,n)}function Xr(t){return function(n){var e={};return K(n,function(o){e[o.key]=o.value}),e}(t)}function vS(t,n){var e=function(o){var r=[],i=[];return K(o,function(u){u.fold(function(a){r.push(a)},function(a){i.push(a)})}),{errors:r,values:i}}(t);return 0<e.errors.length?function(o){return ot.error(Zt(o))}(e.errors):function(o,r){return o.length===0?ot.value(r):ot.value(yt(r,hm.apply(void 0,o)))}(e.values,n)}function xm(t){return Zc($r,Zt)(t)}function us(t){return ko(t)&&100<Ht(t).length?" removed due to size":JSON.stringify(t,null,2)}function ji(t,n){return $r([{path:t,getErrorInfo:n}])}function bS(t,n,e){return J(n,e).fold(function(){return function(o,r,i){return ji(o,function(){return'Could not find valid *strict* value for "'+r+'" in '+us(i)})}(t,e,n)},qn)}function wm(t,n,e){var o=J(t,n).fold(function(){return e(t)},bt);return qn(o)}function yS(t,n,e,o){return e.fold(function(r,i,u,a){function s(f){var l=a.extract(t.concat([r]),o,f);return ws(l,function(m){return Li(i,o(m))})}function c(f){return f.fold(function(){var l=Li(i,o(d.none()));return qn(l)},function(l){var m=a.extract(t.concat([r]),o,l);return ws(m,function(h){return Li(i,o(d.some(h)))})})}return u.fold(function(){return Qr(bS(t,n,r),s)},function(f){return Qr(wm(n,r,f),s)},function(){return Qr(function(f,l){return qn(J(f,l))}(n,r),c)},function(f){return Qr(function(l,m,h){var g=J(l,m).map(function(b){return b===!0?h(l):b});return qn(g)}(n,r,f),c)},function(f){var l=f(n),m=ws(wm(n,r,y({})),function(h){return yt(l,h)});return Qr(m,s)})},function(r,i){var u=i(n);return qn(Li(r,o(u)))})}function Qo(t){return{extract:function(n,e,o){return XS(t(o,e),function(r){return function(i,u){return ji(i,function(){return u})}(n,r)})},toString:function(){return"val"}}}function An(t){var n=W(t),e=jr(t,function(o,r){return r.fold(function(i){return yt(o,Xe(i,!0))},y(o))},{});return{extract:function(o,r,i){var u=Pi(i)?[]:function(s){var c=Ht(s);return Ct(c,function(f){return ee(s,f)})}(i),a=Ct(u,function(s){return!ee(e,s)});return a.length===0?n.extract(o,r,i):function(s,c){return ji(s,function(){return"There are unsupported fields: ["+c.join(", ")+"] specified"})}(o,a)},toString:n.toString}}function Oo(t){return{extract:function(n,e,o){var r=I(o,function(i,u){return t.extract(n.concat(["["+u+"]"]),e,i)});return Zm(r)},toString:function(){return"array("+t.toString()+")"}}}function xS(t,n){return{extract:function(e,o,r){var i=Ht(r),u=function(a,s){return Oo(Qo(t)).extract(a,bt,s)}(e,i);return Qr(u,function(a){var s=I(a,function(c){return Cs.field(c,c,Be(),n)});return W(s).extract(e,o,r)})},toString:function(){return"setOf("+n.toString()+")"}}}function wS(t,n,e,o,r){return J(o,r).fold(function(){return function(i,u,a){return ji(i,function(){return'The chosen schema: "'+a+'" did not exist in branches: '+us(u)})}(t,o,r)},function(i){return i.extract(t.concat(["branch: "+r]),n,e)})}function Sm(t,n){return{extract:function(e,o,r){return J(r,t).fold(function(){return function(i,u){return ji(i,function(){return'Choice schema did not contain choice key: "'+u+'"'})}(e,t)},function(i){return wS(e,o,r,n,i)})},toString:function(){return"chooseOn("+t+"). Possible values: "+Ht(n)}}}function Cm(t){return tg(t)}function Ui(t){return Qo(function(n){return t(n).fold($r,qn)})}function km(t,n){return xS(function(e){return WS(t(e))},n)}function Et(t,n,e){return GS(function(o,r,i,u){var a=r.extract([o],i,u);return YS(a,function(s){return{input:u,errors:s}})}(t,n,bt,e))}function Ye(t){return t.fold(function(n){throw new Error(ur(n))},bt)}function mn(t,n,e){return Ye(Et(t,n,e))}function Om(t,n){return Sm(t,n)}function me(t,n){return Sm(t,Pt(n,W))}function na(t,n){return Qo(function(e){var o=typeof e;return t(e)?qn(e):$r("Expected type: "+n+" but got: "+o)})}function _m(t){return Ui(function(n){return Mt(t,n)?ot.value(n):ot.error('Unsupported value: "'+n+'", choose one of "'+t.join(", ")+'".')})}function E(t){return Wt(t,t,Be(),ks())}function Xn(t,n){return Wt(t,t,Be(),n)}function Q(t){return Xn(t,pn)}function Wi(t,n){return Wt(t,t,Be(),_m(n))}function xn(t){return Xn(t,_s)}function _o(t,n){return Wt(t,t,Be(),W(n))}function Tm(t,n){return Wt(t,t,Be(),tg(n))}function To(t,n){return Wt(t,t,Be(),Oo(n))}function ft(t){return Wt(t,t,Ss(),ks())}function Eo(t,n){return Wt(t,t,Ss(),n)}function Em(t){return Eo(t,Os)}function Tt(t){return Eo(t,pn)}function Gi(t){return Eo(t,_s)}function oe(t,n){return Eo(t,W(n))}function k(t,n){return Wt(t,t,ta(n),ks())}function ge(t,n,e){return Wt(t,t,ta(n),e)}function as(t,n){return ge(t,n,Os)}function cs(t,n){return ge(t,n,pn)}function Zo(t,n,e){return ge(t,n,_m(e))}function tn(t,n){return ge(t,n,la)}function Ft(t,n){return ge(t,n,_s)}function Bm(t,n,e){return ge(t,n,W(e))}function un(t,n){return KS(t,n)}function SS(t,n,e){return(t.compareDocumentPosition(n)&e)!=0}function CS(t,n){var e=function(r,i){for(var u=0;u<r.length;u++){var a=r[u];if(a.test(i))return a}}(t,n);if(!e)return{major:0,minor:0};function o(r){return Number(n.replace(e,"$"+r))}return Ts(o(1),o(2))}function Yr(t,n){return function(){return n===t}}function Bo(t,n){return function(){return n===t}}function Dm(t,n){var e=String(n).toLowerCase();return Xt(t,function(o){return o.search(e)})}function an(t,n){return t.indexOf(n)!==-1}function so(t){return function(n){return an(n,t)}}function pe(){return oC.get()}function Am(t,n){var e=t.dom();if(e.nodeType!==pg)return!1;var o=e;if(o.matches!==void 0)return o.matches(n);if(o.msMatchesSelector!==void 0)return o.msMatchesSelector(n);if(o.webkitMatchesSelector!==void 0)return o.webkitMatchesSelector(n);if(o.mozMatchesSelector!==void 0)return o.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function Mm(t){return t.nodeType!==pg&&t.nodeType!==uC||t.childElementCount===0}function ss(t,n){var e=n===void 0?F.document:n.dom();return Mm(e)?[]:I(e.querySelectorAll(t),z.fromDom)}function nn(t,n){return t.dom()===n.dom()}function Fm(t,n,e){for(var o=t.dom(),r=de(e)?e:y(!1);o.parentNode;){o=o.parentNode;var i=z.fromDom(o),u=n(i);if(u.isSome())return u;if(r(i))break}return d.none()}function Im(t,n){return nn(t.element(),n.event().target())}function tr(t){if(!ee(t,"can")&&!ee(t,"abort")&&!ee(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return mn("Extracting event.handler",An([k("can",y(!0)),k("abort",y(!1)),k("run",P)]),t)}function kS(t){var n=function(o,r){return function(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];return Dn(o,function(a,s){return a&&r(s).apply(void 0,i)},!0)}}(t,function(o){return o.can}),e=function(o,r){return function(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];return Dn(o,function(a,s){return a||r(s).apply(void 0,i)},!1)}}(t,function(o){return o.abort});return tr({can:n,abort:e,run:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];K(t,function(i){i.run.apply(void 0,o)})}})}function ct(t,n){zs(t,t.element(),n,{})}function j(t,n,e){zs(t,t.element(),n,e)}function nr(t){ct(t,Ro())}function fs(t,n,e){zs(t,n,e,{})}function Rm(t,n,e,o){t.getSystem().triggerEvent(e,n,o.event())}function xt(t){return Xr(t)}function Vm(t,n){return{key:t,value:tr({abort:n})}}function Hm(t){return{key:t,value:tr({run:function(n,e){e.event().prevent()}})}}function B(t,n){return{key:t,value:tr({run:n})}}function ls(t,n,e){return{key:t,value:tr({run:function(o,r){n.apply(void 0,[o,r].concat(e))}})}}function ea(t){return function(n){return{key:t,value:tr({run:function(e,o){Im(e,o)&&n(e,o)}})}}}function qr(t,n,e){return function(o,r){return B(o,function(i,u){i.getSystem().getByUid(r).each(function(a){Rm(a,a.element(),o,u)})})}(t,n.partUids[e])}function ds(t,n){return B(t,function(e,o){var r=o.event(),i=e.getSystem().getByDom(r.target()).fold(function(){return hg(r.target(),function(u){return e.getSystem().getByDom(u).toOption()},y(!1)).getOr(e)},function(u){return u});n(e,i,o)})}function er(t){return B(t,function(n,e){e.cut()})}function Kr(t,n){return ea(t)(n)}function Oe(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(t.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+e.length+" arguments");var r={};return K(t,function(i,u){r[i]=y(e[u])}),r}}function oa(t){return t.slice(0).sort()}function Nm(t,n){if(!ao(n))throw new Error("The "+t+" fields must be an array. Was: "+n+".");K(n,function(e){if(!Yt(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})}function ra(t,n){var e=t.concat(n);if(e.length===0)throw new Error("You must specify at least one required or optional field.");return Nm("required",t),Nm("optional",n),function(o){var r=oa(o);Xt(r,function(i,u){return u<r.length-1&&i===r[u+1]}).each(function(i){throw new Error("The field: "+i+" occurs more than once in the combined fields: ["+r.join(", ")+"].")})}(e),function(o){var r=Ht(o);Wr(t,function(a){return Mt(r,a)})||function(a,s){throw new Error("All required keys ("+oa(a).join(", ")+") were not specified. Specified keys were: "+oa(s).join(", ")+".")}(t,r);var i=Ct(r,function(a){return!Mt(e,a)});0<i.length&&function(a){throw new Error("Unsupported keys for object: "+oa(a).join(", "))}(i);var u={};return K(t,function(a){u[a]=y(o[a])}),K(n,function(a){u[a]=y(Object.prototype.hasOwnProperty.call(o,a)?d.some(o[a]):d.none())}),u}}function Yn(t){return z.fromDom(t.dom().ownerDocument)}function Pm(t){return z.fromDom(t.dom().ownerDocument.documentElement)}function ia(t){return z.fromDom(t.dom().ownerDocument.defaultView)}function Vn(t){return d.from(t.dom().parentNode).map(z.fromDom)}function zm(t){return d.from(t.dom().offsetParent).map(z.fromDom)}function _e(t){return I(t.dom().childNodes,z.fromDom)}function ms(t,n){var e=t.dom().childNodes;return d.from(e[n]).map(z.fromDom)}function ua(t,n){Vn(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})}function OS(t,n){(function(e){return d.from(e.dom().nextSibling).map(z.fromDom)})(t).fold(function(){Vn(t).each(function(e){he(e,n)})},function(e){ua(e,n)})}function _S(t,n){(function(e){return ms(e,0)})(t).fold(function(){he(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})}function Lm(t,n){K(n,function(e){he(t,e)})}function gs(t){t.dom().textContent="",K(_e(t),function(n){Vo(n)})}function TS(t){var n=_e(t);0<n.length&&function(e,o){K(o,function(r){ua(e,r)})}(t,n),Vo(t)}function ps(t){return t.dom().innerHTML}function Xi(t,n){var e=Yn(t).dom(),o=z.fromDom(e.createDocumentFragment()),r=function(i,u){var a=(u||F.document).createElement("div");return a.innerHTML=i,_e(z.fromDom(a))}(n,e);Lm(o,r),gs(t),he(t,o)}function qe(t){return t.dom().nodeName.toLowerCase()}function jm(t){return function(n){return function(e){return e.dom().nodeType}(n)===t}}function Um(t,n,e){if(!(Yt(e)||Pi(e)||co(e)))throw F.console.error("Invalid call to Attr.set. Key ",n,":: Value ",e,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,e+"")}function lt(t,n,e){Um(t.dom(),n,e)}function Kt(t,n){var e=t.dom().getAttribute(n);return e===null?void 0:e}function or(t,n){var e=t.dom();return!(!e||!e.hasAttribute)&&e.hasAttribute(n)}function re(t,n){t.dom().removeAttribute(n)}function ES(t){return function(n,e){return z.fromDom(n.dom().cloneNode(e))}(t,!1)}function BS(t){return function(n){var e=z.fromTag("div"),o=z.fromDom(n.dom().cloneNode(!0));return he(e,o),ps(e)}(ES(t))}function Do(t){return BS(t)}function N(t){var n=new Date().getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++vC+String(n)}function Yi(t){return N(t)}function aa(t){function n(e){return function(){throw new Error("The component must be in a context to send: "+e+(t?`
`+Do(t().element())+" is not in context.":""))}}return{debugInfo:y("fake"),triggerEvent:n("triggerEvent"),triggerFocus:n("triggerFocus"),triggerEscape:n("triggerEscape"),build:n("build"),addToWorld:n("addToWorld"),removeFromWorld:n("removeFromWorld"),addToGui:n("addToGui"),removeFromGui:n("removeFromGui"),getByUid:n("getByUid"),getByDom:n("getByDom"),broadcast:n("broadcast"),broadcastOn:n("broadcastOn"),broadcastEvent:n("broadcastEvent"),isConnected:y(!1)}}function hs(t,n){var e=t.toString(),o=e.indexOf(")")+1,r=e.indexOf("("),i=e.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:n,parameters:js(i)}},t}function Wm(t){return Xe(kg,t)}function ca(t){return function(n,e){var o=e.toString(),r=o.indexOf(")")+1,i=o.indexOf("("),u=o.substring(i+1,r-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:js(u.slice(1))}},n}(function(n){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return t.apply(void 0,[n.getApis()].concat([n].concat(e)))},t)}function Gm(t,n){var e={};return yn(t,function(o,r){yn(o,function(i,u){var a=J(e,u).getOr([]);e[u]=a.concat([n(r,i)])})}),e}function Te(t){return{classes:t.classes!==void 0?t.classes:[],attributes:t.attributes!==void 0?t.attributes:{},styles:t.styles!==void 0?t.styles:{}}}function vs(t){return t.cHandler}function DS(t,n){return{name:y(t),handler:y(n)}}function AS(t,n,e){var o=O(O({},e),function(r,i){var u={};return K(r,function(a){u[a.name()]=a.handlers(i)}),u}(n,t));return Gm(o,DS)}function MS(t){var n=function(e){return de(e)?{can:y(!0),abort:y(!1),run:e}:e}(t);return function(e,o){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var u=[e,o].concat(r);n.abort.apply(void 0,u)?o.stop():n.can.apply(void 0,u)&&n.run.apply(void 0,u)}}function FS(t,n,e){var o=n[e];return o?function(r,i,u,a){try{var s=dm(u,function(c,f){var l=c[i](),m=f[i](),h=a.indexOf(l),g=a.indexOf(m);if(h===-1)throw new Error("The ordering for "+r+" does not have an entry for "+l+`.
Order specified: `+JSON.stringify(a,null,2));if(g===-1)throw new Error("The ordering for "+r+" does not have an entry for "+m+`.
Order specified: `+JSON.stringify(a,null,2));return h<g?-1:g<h?1:0});return ot.value(s)}catch(c){return ot.error([c])}}("Event: "+e,"name",t,o).map(function(r){var i=I(r,function(u){return u.handler()});return kS(i)}):function(r,i){return ot.error(["The event ("+r+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(I(i,function(u){return u.name()}),null,2)])}(e,t)}function IS(t){return Et("custom.definition",W([Wt("dom","dom",Be(),W([E("tag"),k("styles",{}),k("classes",[]),k("attributes",{}),ft("value"),ft("innerHtml")])),E("components"),E("uid"),k("events",{}),k("apis",{}),Wt("eventOrder","eventOrder",function(n){return ir.mergeWithThunk(y(n))}({"alloy.execute":["disabling","alloy.base.behaviour","toggling","typeaheadevents"],"alloy.focus":["alloy.base.behaviour","focusing","keying"],"alloy.system.init":["alloy.base.behaviour","disabling","toggling","representing"],input:["alloy.base.behaviour","representing","streaming","invalidating"],"alloy.system.detached":["alloy.base.behaviour","representing","item-events","tooltipping"],mousedown:["focusing","alloy.base.behaviour","item-type-events"],touchstart:["focusing","alloy.base.behaviour","item-type-events"],mouseover:["item-type-events","tooltipping"]}),ar()),ft("domModification")]),t)}function bs(t,n){var e=Kt(t,n);return e===void 0||e===""?[]:e.split(" ")}function sa(t){return t.dom().classList!==void 0}function RS(t,n){return function(e,o,r){var i=bs(e,o).concat([r]);return lt(e,o,i.join(" ")),!0}(t,"class",n)}function VS(t,n){return function(e,o,r){var i=Ct(bs(e,o),function(u){return u!==r});return 0<i.length?lt(e,o,i.join(" ")):re(e,o),!1}(t,"class",n)}function en(t,n){sa(t)?t.dom().classList.add(n):RS(t,n)}function HS(t){(sa(t)?t.dom().classList:function(n){return bs(n,"class")}(t)).length===0&&re(t,"class")}function Ut(t,n){sa(t)?t.dom().classList.remove(n):VS(t,n),HS(t)}function Ke(t,n){return sa(t)&&t.dom().classList.contains(n)}function qi(t,n){K(n,function(e){en(t,e)})}function Ao(t,n){K(n,function(e){Ut(t,e)})}function Ki(t){return t.style!==void 0&&de(t.style.getPropertyValue)}function Mo(t){var n=oi(t)?t.dom().parentNode:t.dom();return n!=null&&n.ownerDocument.body.contains(n)}function ys(t,n,e){if(!Yt(e))throw F.console.error("Invalid call to CSS.set. Property ",n,":: Value ",e,":: Element ",t),new Error("CSS value must be a string: "+e);Ki(t)&&t.style.setProperty(n,e)}function Xm(t,n){Ki(t)&&t.style.removeProperty(n)}function nt(t,n,e){var o=t.dom();ys(o,n,e)}function Jr(t,n){var e=t.dom();yn(n,function(o,r){ys(e,r,o)})}function xs(t,n){var e=t.dom();yn(n,function(o,r){o.fold(function(){Xm(e,r)},function(i){ys(e,r,i)})})}function Ee(t,n){var e=t.dom(),o=F.window.getComputedStyle(e).getPropertyValue(n),r=o!==""||Mo(t)?o:Og(e,n);return r===null?void 0:r}function gn(t,n){var e=t.dom(),o=Og(e,n);return d.from(o).filter(function(r){return 0<r.length})}function Ym(t,n,e){var o=z.fromTag(t);return nt(o,n,e),gn(o,n).isSome()}function _t(t,n){var e=t.dom();Xm(e,n),or(t,"style")&&function(o){return o.replace(/^\s+|\s+$/g,"")}(Kt(t,"style"))===""&&re(t,"style")}function Ji(t){return t.dom().offsetWidth}function rr(t){return t.dom().value}function fa(t,n){if(n===void 0)throw new Error("Value.set was undefined");t.dom().value=n}function NS(t){var n=z.fromTag(t.tag);(function(o,r){var i=o.dom();yn(r,function(u,a){Um(i,a,u)})})(n,t.attributes),qi(n,t.classes),Jr(n,t.styles),t.innerHtml.each(function(o){return Xi(n,o)});var e=t.domChildren;return Lm(n,e),t.value.each(function(o){fa(n,o)}),t.uid,Ls(n,t.uid),n}function PS(t,n){return function(e,o){var r=I(o,function(u){return oe(u.name(),[E("config"),k("state",Ae)])}),i=Et("component.behaviours",W(r),e.behaviours).fold(function(u){throw new Error(ur(u)+`
Complete spec:
`+JSON.stringify(e,null,2))},function(u){return u});return{list:o,data:Pt(i,function(u){var a=u.map(function(s){return{config:s.config,state:s.state.init(s.config)}});return function(){return a}})}}(t,n)}function zS(t){var n=function(e){var o=J(e,"behaviours").getOr({}),r=Ct(Ht(o),function(i){return o[i]!==void 0});return I(r,function(i){return o[i].me})}(t);return PS(t,n)}function LS(t,n,e){var o=function(u){return O(O({},u.dom),{uid:u.uid,domChildren:I(u.components,function(a){return a.element()})})}(t),r=function(u){return u.domModification.fold(function(){return Te({})},Te)}(t),i={"alloy.base.modification":r};return function(u,a){return O(O({},u),{attributes:O(O({},u.attributes),a.attributes),styles:O(O({},u.styles),a.styles),classes:u.classes.concat(a.classes)})}(o,0<n.length?function(u,a,s,c){var f=O({},a);K(s,function(p){f[p.name()]=p.exhibit(u,c)});function l(p){return jr(p,function(x,v){return O(O({},v.modification),x)},{})}var m=Gm(f,function(p,x){return{name:p,modification:x}}),h=jr(m.classes,function(p,x){return x.modification.concat(p)},[]),g=l(m.attributes),b=l(m.styles);return Te({classes:h,attributes:g,styles:b})}(e,i,n,o):r)}function jS(t,n,e){var o={"alloy.base.behaviour":function(r){return r.events}(t)};return function(r,i,u,a){var s=AS(r,u,a);return kC(s,i)}(e,t.eventOrder,n,o).getOrDie()}function US(t){var n=wC(t),e=n.events,o=qu(n,["events"]),r=function(u){var a=J(u,"components").getOr([]);return I(a,wn)}(o),i=O(O({},o),{events:O(O({},hC),e),components:r});return ot.value(function(u){function a(){return x}var s=V(SC),c=Ye(IS(u)),f=zS(u),l=function(v){return v.list}(f),m=function(v){return v.data}(f),h=LS(c,l,m),g=NS(h),b=jS(c,l,m),p=V(c.components),x={getSystem:s.get,config:function(v){var S=m;return(de(S[v.name()])?S[v.name()]:function(){throw new Error("Could not find "+v.name()+" in "+JSON.stringify(u,null,2))})()},hasConfigured:function(v){return de(m[v.name()])},spec:y(u),readState:function(v){return m[v]().map(function(S){return S.state.readState()}).getOr("not enabled")},getApis:function(){return c.apis},connect:function(v){s.set(v)},disconnect:function(){s.set(aa(a))},element:y(g),syncComponents:function(){var v=_e(g),S=At(v,function(w){return s.get().getByDom(w).fold(function(){return[]},function(C){return[C]})});p.set(S)},components:p.get,events:y(b)};return x}(i))}function Fo(t){var n=z.fromText(t);return Us({element:n})}var qm,Km,Jm,WS=function(t){return t.fold(ym,bm)},GS=function(t){return vm(t,ot.error,ot.value)},qn=bm,$m=function(t){var n=[],e=[];return K(t,function(o){vm(o,function(r){return e.push(r)},function(r){return n.push(r)})}),{values:n,errors:e}},$r=ym,Qr=function(t,n){return t.stype===le.Value?n(t.svalue):t},XS=function(t,n){return t.stype===le.Error?n(t.serror):t},ws=function(t,n){return t.stype===le.Value?{stype:le.Value,svalue:n(t.svalue)}:t},YS=function(t,n){return t.stype===le.Error?{stype:le.Error,serror:n(t.serror)}:t},ir=Rn([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Be=ir.strict,Ss=ir.asOption,$i=ir.defaultedThunk,Qm=(ir.asDefaultedOptionThunk,ir.mergeWithThunk),qS=(Rn([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(t,n){var e=$m(t);return 0<e.errors.length?xm(e.errors):function(o,r){return 0<o.length?qn(yt(r,hm.apply(void 0,o))):qn(r)}(e.values,n)}),Zm=function(t){var n=$m(t);return 0<n.errors.length?xm(n.errors):qn(n.values)},Cs=Rn([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),W=function(t){return{extract:function(n,e,o){return function(r,i,u,a){var s=I(u,function(c){return yS(r,i,c,a)});return qS(s,{})}(n,o,t,e)},toString:function(){return`obj{
`+I(t,function(n){return n.fold(function(e,o,r,i){return e+" -> "+i.toString()},function(e,o){return"state("+e+")"})}).join(`
`)+"}"}}},ks=y(Qo(qn)),tg=Zc(Oo,W),KS=Cs.state,Wt=Cs.field,ng=Qo(qn),JS=function(t){return{extract:function(n,e,o){return t().extract(n,e,o)},toString:function(){return t().toString()}}},ur=function(t){return`Errors: 
`+function(n){var e=10<n.length?n.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):n;return I(e,function(o){return"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo()})}(t.errors).join(`
`)+`

Input object: `+us(t.input)},ar=y(ng),Os=na(co,"number"),pn=na(Yt,"string"),la=na(Pi,"boolean"),_s=na(de,"function"),Qi=function(t){function n(e,o){for(var r=e.next();!r.done;){if(!o(r.value))return!1;r=e.next()}return!0}if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(function(e){return Qi(t[e])});case"Map":return n(t.keys(),Qi)&&n(t.values(),Qi);case"Set":return n(t.keys(),Qi);default:return!1}},$S=Qo(function(t){return Qi(t)?qn(t):$r("Expected value to be acceptable for sending via postMessage")}),V=function(t){function n(){return e}var e=t;return{get:n,set:function(o){e=o},clone:function(){return V(n())}}},Zi=function(t){if(t==null)throw new Error("Node cannot be null or undefined");return{dom:y(t)}},z={fromHtml:function(t,n){var e=(n||F.document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||1<e.childNodes.length)throw F.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Zi(e.childNodes[0])},fromTag:function(t,n){var e=(n||F.document).createElement(t);return Zi(e)},fromText:function(t,n){var e=(n||F.document).createTextNode(t);return Zi(e)},fromDom:Zi,fromPoint:function(t,n,e){var o=t.dom();return d.from(o.elementFromPoint(n,e)).map(Zi)}},QS=function(t,n){return SS(t,n,F.Node.DOCUMENT_POSITION_CONTAINED_BY)},eg=function(){return Ts(0,0)},Ts=function(t,n){return{major:t,minor:n}},da={nu:Ts,detect:function(t,n){var e=String(n).toLowerCase();return t.length===0?eg():CS(t,e)},unknown:eg},og="Firefox",rg=function(t){var n=t.current;return{current:n,version:t.version,isEdge:Yr("Edge",n),isChrome:Yr("Chrome",n),isIE:Yr("IE",n),isOpera:Yr("Opera",n),isFirefox:Yr(og,n),isSafari:Yr("Safari",n)}},ig={unknown:function(){return rg({current:void 0,version:da.unknown()})},nu:rg,edge:y("Edge"),chrome:y("Chrome"),ie:y("IE"),opera:y("Opera"),firefox:y(og),safari:y("Safari")},ug="Windows",ag="Android",cg="Solaris",sg="FreeBSD",fg="ChromeOS",lg=function(t){var n=t.current;return{current:n,version:t.version,isWindows:Bo(ug,n),isiOS:Bo("iOS",n),isAndroid:Bo(ag,n),isOSX:Bo("OSX",n),isLinux:Bo("Linux",n),isSolaris:Bo(cg,n),isFreeBSD:Bo(sg,n),isChromeOS:Bo(fg,n)}},dg={unknown:function(){return lg({current:void 0,version:da.unknown()})},nu:lg,windows:y(ug),ios:y("iOS"),android:y(ag),linux:y("Linux"),osx:y("OSX"),solaris:y(cg),freebsd:y(sg),chromeos:y(fg)},ZS=function(t,n){return Dm(t,n).map(function(e){var o=da.detect(e.versionRegexes,n);return{current:e.name,version:o}})},tC=function(t,n){return Dm(t,n).map(function(e){var o=da.detect(e.versionRegexes,n);return{current:e.name,version:o}})},Es=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,nC=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return an(t,"edge/")&&an(t,"chrome")&&an(t,"safari")&&an(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Es],search:function(t){return an(t,"chrome")&&!an(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return an(t,"msie")||an(t,"trident")}},{name:"Opera",versionRegexes:[Es,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:so("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:so("firefox")},{name:"Safari",versionRegexes:[Es,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(an(t,"safari")||an(t,"mobile/"))&&an(t,"applewebkit")}}],eC=[{name:"Windows",search:so("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return an(t,"iphone")||an(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:so("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:so("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:so("linux"),versionRegexes:[]},{name:"Solaris",search:so("sunos"),versionRegexes:[]},{name:"FreeBSD",search:so("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:so("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],mg={browsers:y(nC),oses:y(eC)},oC=V(function(t,n){var e=mg.browsers(),o=mg.oses(),r=ZS(e,t).fold(ig.unknown,ig.nu),i=tC(o,t).fold(dg.unknown,dg.nu);return{browser:r,os:i,deviceType:function(u,a,s,c){var f=u.isiOS()&&/ipad/i.test(s)===!0,l=u.isiOS()&&!f,m=u.isiOS()||u.isAndroid(),h=m||c("(pointer:coarse)"),g=f||!l&&m&&c("(min-device-width:768px)"),b=l||m&&!g,p=a.isSafari()&&u.isiOS()&&/safari/i.test(s)===!1,x=!b&&!g&&!p;return{isiPad:y(f),isiPhone:y(l),isTablet:y(g),isPhone:y(b),isTouch:y(h),isAndroid:u.isAndroid,isiOS:u.isiOS,isWebView:y(p),isDesktop:y(x)}}(i,r,t,n)}}(F.navigator.userAgent,function(t){return F.window.matchMedia(t).matches})),rC=(F.Node.ATTRIBUTE_NODE,F.Node.CDATA_SECTION_NODE,F.Node.COMMENT_NODE,F.Node.DOCUMENT_NODE),gg=(F.Node.DOCUMENT_TYPE_NODE,F.Node.DOCUMENT_FRAGMENT_NODE,F.Node.ELEMENT_NODE),iC=F.Node.TEXT_NODE,pg=(F.Node.PROCESSING_INSTRUCTION_NODE,F.Node.ENTITY_REFERENCE_NODE,F.Node.ENTITY_NODE,F.Node.NOTATION_NODE,gg),uC=rC,ma=pe().browser.isIE()?function(t,n){return QS(t.dom(),n.dom())}:function(t,n){var e=t.dom(),o=n.dom();return e!==o&&e.contains(o)},hg=function(t,n,e){return n(t).orThunk(function(){return e(t)?d.none():Fm(t,n,e)})},Io=y("touchstart"),tu=y("touchmove"),nu=y("touchend"),vg=y("touchcancel"),De=y("mousedown"),ga=y("mousemove"),Bs=y("mouseout"),Ds=y("mouseup"),cr=y("mouseover"),sr=y("focusin"),aC=y("focusout"),pa=y("keydown"),cC=y("keyup"),eu=y("input"),ou=y("change"),ru=y("click"),As=y("transitionend"),sC=y("selectstart"),fC={tap:y("alloy.tap")},fr=y("alloy.focus"),Ms=y("alloy.blur.post"),Fs=y("alloy.paste.post"),Zr=y("alloy.receive"),Ro=y("alloy.execute"),iu=y("alloy.focus.item"),uu=fC.tap,lC=y("alloy.longpress"),ha=y("alloy.sandbox.close"),Is=y("alloy.typeahead.cancel"),Rs=y("alloy.system.init"),dC=y("alloy.system.touchmove"),mC=y("alloy.system.touchend"),Vs=y("alloy.system.scroll"),Hs=y("alloy.system.resize"),ti=y("alloy.system.attached"),va=y("alloy.system.detached"),ni=y("alloy.system.dismissRequested"),bg=y("alloy.system.repositionRequested"),yg=y("alloy.focusmanager.shifted"),Ns=y("alloy.slotcontainer.visibility"),xg=y("alloy.change.tab"),wg=y("alloy.dismiss.tab"),Sg=y("alloy.highlight"),Ps=y("alloy.dehighlight"),zs=function(t,n,e,o){var r=O({target:n},o);t.getSystem().triggerEvent(e,n,Pt(r,y))},It=ea(ti()),fo=ea(va()),gC=ea(Rs()),lo=(qm=Ro(),function(t){return B(qm,t)}),he=(Oe("element","offset"),function(t,n){t.dom().appendChild(n.dom())}),Vo=function(t){var n=t.dom();n.parentNode!==null&&n.parentNode.removeChild(n)},ei=(typeof F.window!="undefined"?F.window:Function("return this;")(),jm(gg)),oi=jm(iC),pC=xt([(Km=fr(),Jm=function(t,n){var e=n.event().originator(),o=n.event().target();return!function(r,i,u){return nn(i,r.element())&&!nn(i,u)}(t,e,o)||(F.console.warn(fr()+` did not get interpreted by the desired target. 
Originator: `+Do(e)+`
Target: `+Do(o)+`
Check the `+fr()+" event handlers"),!1)},{key:Km,value:tr({can:Jm})})]),hC=Object.freeze({__proto__:null,events:pC}),vC=0,bC=y("alloy-id-"),yC=y("data-alloy-id"),xC=bC(),Cg=yC(),Ls=function(t,n){Object.defineProperty(t.dom(),Cg,{value:n,writable:!0})},au=function(t){var n=ei(t)?t.dom()[Cg]:null;return d.from(n)},wC=bt,SC=aa(),js=function(t){return I(t,function(n){return function(e,o){return function(r,i,u){return i===""||!(r.length<i.length)&&r.substr(u,u+i.length)===i}(e,o,e.length-o.length)}(n,"/*")?n.substring(0,n.length-"/*".length):n})},kg=N("alloy-premade"),Ae={init:function(){return ve({readState:function(){return"No State required"}})}},ve=function(t){return t},CC=function(t,n){return function(e,o){return{cHandler:e,purpose:y(o)}}(ce.apply(void 0,[t.handler].concat(n)),t.purpose())},kC=function(t,n){var e=Zu(t,function(o,r){return(o.length===1?ot.value(o[0].handler()):FS(o,n,r)).map(function(i){var u=MS(i),a=1<o.length?Ct(n[r],function(s){return So(o,function(c){return c.name()===s})}).join(" > "):o[0].name();return Xe(r,function(s,c){return{handler:s,purpose:y(c)}}(u,a))})});return vS(e,{})},Je=Co(function(){return OC(z.fromDom(F.document))}),OC=function(t){var n=t.dom().body;if(n==null)throw new Error("Body is not available yet");return z.fromDom(n)},Og=function(t,n){return Ki(t)?t.style.getPropertyValue(n):""},Us=function(t){var n=mn("external.component",An([E("element"),ft("uid")]),t),e=V(aa());n.uid.each(function(r){Ls(n.element,r)});var o={getSystem:e.get,config:d.none,hasConfigured:y(!1),connect:function(r){e.set(r)},disconnect:function(){e.set(aa(function(){return o}))},getApis:function(){return{}},element:y(n.element),spec:y(t),readState:y("No state"),syncComponents:P,components:y([]),events:y({})};return Wm(o)},_C=Yi,wn=function(t){return function(n){return J(n,kg)}(t).fold(function(){var n=t.hasOwnProperty("uid")?t:O({uid:_C("")},t);return US(n).getOrDie()},function(n){return n})},Kn=Wm;function _g(t,n){function e(r){var i=n(r);if(i<=0||i===null){var u=Ee(r,t);return parseFloat(u)||0}return i}function o(r,i){return Dn(i,function(u,a){var s=Ee(r,a),c=s===void 0?0:parseInt(s,10);return isNaN(c)?u:u+c},0)}return{set:function(r,i){if(!co(i)&&!i.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+i);var u=r.dom();Ki(u)&&(u.style[t]=i+"px")},get:e,getOuter:e,aggregate:o,max:function(r,i,u){var a=o(r,u);return a<i?i-a:0}}}function Hn(t){return Gs.get(t)}function lr(t){return Gs.getOuter(t)}function ba(t,n){return t!==void 0?t:n!==void 0?n:0}function dr(t){var n=t.dom().ownerDocument,e=n.body,o=n.defaultView,r=n.documentElement;if(e===t.dom())return Bt(e.offsetLeft,e.offsetTop);var i=ba(o.pageYOffset,r.scrollTop),u=ba(o.pageXOffset,r.scrollLeft),a=ba(r.clientTop,e.clientTop),s=ba(r.clientLeft,e.clientLeft);return Xs(t).translate(u-s,i-a)}function Mn(t){return ya.get(t)}function cu(t){return ya.getOuter(t)}function Tg(t){function n(){t.stopPropagation()}function e(){t.preventDefault()}var o=z.fromDom(t.target),r=Zc(e,n);return function(i,u,a,s,c,f,l){return{target:y(i),x:y(u),y:y(a),stop:s,prevent:c,kill:f,raw:y(l)}}(o,t.clientX,t.clientY,n,e,r,t)}function Eg(t,n,e,o,r){var i=function(u,a){return function(s){u(s)&&a(Tg(s))}}(e,o);return t.dom().addEventListener(n,i,r),{unbind:ce(TC,t,n,i,r)}}function mo(t){var n=t!==void 0?t.dom():F.document,e=n.body.scrollLeft||n.documentElement.scrollLeft,o=n.body.scrollTop||n.documentElement.scrollTop;return Bt(e,o)}function Bg(t,n,e){(e!==void 0?e.dom():F.document).defaultView.scrollTo(t,n)}function Dg(t,n,e,o){return{x:y(t),y:y(n),width:y(e),height:y(o),right:y(t+e),bottom:y(n+o)}}function Ag(t){var n=t===void 0?F.window:t,e=n.document,o=mo(z.fromDom(e));return function(r){var i=r===void 0?F.window:r;return d.from(i.visualViewport)}(n).fold(function(){var r=n.document.documentElement,i=r.clientWidth,u=r.clientHeight;return Dg(o.left(),o.top(),i,u)},function(r){return Dg(Math.max(r.pageLeft,o.left()),Math.max(r.pageTop,o.top()),r.width,r.height)})}function Ws(t){var n=z.fromDom(F.document),e=mo(n);return function(o,r){var i=r.owner(o),u=Fg(r,i);return d.some(u)}(t,EC).fold(ce(dr,t),function(o){var r=Xs(t),i=jr(o,function(u,a){var s=Xs(a);return{left:u.left+s.left(),top:u.top+s.top()}},{left:0,top:0});return Bt(i.left+r.left()+e.left(),i.top+r.top()+e.top())})}function Me(t,n,e,o){return{x:y(t),y:y(n),width:y(e),height:y(o),right:y(t+e),bottom:y(n+o)}}function be(t){var n=dr(t),e=cu(t),o=lr(t);return Me(n.left(),n.top(),e,o)}function ri(t){var n=Ws(t),e=cu(t),o=lr(t);return Me(n.left(),n.top(),e,o)}function mr(){return Ag(F.window)}var Gs=_g("height",function(t){var n=t.dom();return Mo(t)?n.getBoundingClientRect().height:n.offsetHeight}),Mg=function(t,n){return{left:y(t),top:y(n),translate:function(e,o){return Mg(t+e,n+o)}}},Bt=Mg,Xs=function(t){var n=t.dom(),e=n.ownerDocument.body;return e===n?Bt(e.offsetLeft,e.offsetTop):Mo(t)?function(o){var r=o.getBoundingClientRect();return Bt(r.left,r.top)}(n):Bt(0,0)},ya=_g("width",function(t){return t.dom().offsetWidth}),TC=function(t,n,e,o){t.dom().removeEventListener(n,e,o)},Fg=(pe().browser.isSafari(),function(t,n){return t.view(n).fold(y([]),function(e){var o=t.owner(e),r=Fg(t,o);return[e].concat(r)})}),EC=Object.freeze({__proto__:null,view:function(t){return(t.dom()===F.document?d.none():d.from(t.dom().defaultView.frameElement)).map(z.fromDom)},owner:function(t){return Yn(t)}}),BC=Oe("point","width","height"),DC=Oe("x","y","width","height");function Ig(t,n,e,o,r){return t(e,o)?d.some(e):de(r)&&r(e)?d.none():n(e,o,r)}function Rg(t,n,e){for(var o=t.dom(),r=de(e)?e:y(!1);o.parentNode;){o=o.parentNode;var i=z.fromDom(o);if(n(i))return d.some(i);if(r(i))break}return d.none()}function Vg(t,n,e){return Ig(function(o,r){return r(o)},Rg,t,n,e)}function Hg(t,n,e){return Vg(t,n,e).isSome()}function xa(t,n,e){return Rg(t,function(o){return Am(o,n)},e)}function cn(t,n){return function(e,o){var r=o===void 0?F.document:o.dom();return Mm(r)?d.none():d.from(r.querySelector(e)).map(z.fromDom)}(n,t)}function Fe(t,n,e){return Ig(Am,xa,t,n,e)}function Ng(){var t=N("aria-owns");return{id:y(t),link:function(n){lt(n,"aria-owns",t)},unlink:function(n){re(n,"aria-owns")}}}function AC(t,n){return function(e){return Vg(e,function(o){if(!ei(o))return!1;var r=Kt(o,"id");return r!==void 0&&-1<r.indexOf("aria-owns")}).bind(function(o){var r=Kt(o,"id"),i=Yn(o);return cn(i,'[aria-owns="'+r+'"]')})}(n).exists(function(e){return gr(t,e)})}var ii,ui,gr=function(t,n){return Hg(n,function(e){return nn(e,t.element())},y(!1))||AC(t,n)},MC="unknown";(ui=ii=ii||{})[ui.STOP=0]="STOP",ui[ui.NORMAL=1]="NORMAL",ui[ui.LOGGING=2]="LOGGING";function FC(t,n,e){switch(J(of.get(),t).orThunk(function(){var i=Ht(of.get());return fe(i,function(u){return-1<t.indexOf(u)?d.some(of.get()[u]):d.none()})}).getOr(ii.NORMAL)){case ii.NORMAL:return e(jC());case ii.LOGGING:var o=function(i,u){var a=[],s=new Date().getTime();return{logEventCut:function(c,f,l){a.push({outcome:"cut",target:f,purpose:l})},logEventStopped:function(c,f,l){a.push({outcome:"stopped",target:f,purpose:l})},logNoParent:function(c,f,l){a.push({outcome:"no-parent",target:f,purpose:l})},logEventNoHandlers:function(c,f){a.push({outcome:"no-handlers-left",target:f})},logEventResponse:function(c,f,l){a.push({outcome:"response",purpose:l,target:f})},write:function(){var c=new Date().getTime();Mt(["mousemove","mouseover","mouseout",Rs()],i)||F.console.log(i,{event:i,time:c-s,target:u.dom(),sequence:I(a,function(f){return Mt(["cut","stopped","response"],f.outcome)?"{"+f.purpose+"} "+f.outcome+" at ("+Do(f.target)+")":f.outcome})})}}}(t,n),r=e(o);return o.write(),r;case ii.STOP:return!0}}function Ys(t,n,e){return FC(t,n,e)}function wa(){return _o("markers",[E("backgroundMenu")].concat(np()).concat(rf()))}function pr(t){return _o("markers",I(t,E))}function Sa(t,n,e){return function(){var o=new Error;if(o.stack!==void 0){var r=o.stack.split(`
`);Xt(r,function(i){return 0<i.indexOf("alloy")&&!So(LC,function(u){return-1<i.indexOf(u)})}).getOr(MC)}}(),Wt(n,n,e,Ui(function(o){return ot.value(function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return o.apply(void 0,r)})}))}function dt(t){return Sa(0,t,ta(P))}function Nn(t){return Sa(0,t,ta(d.none))}function hr(t){return Sa(0,t,Be())}function qs(t){return Sa(0,t,Be())}function wt(t,n){return un(t,y(n))}function Pg(t){return un(t,bt)}function zg(t){return t.x()}function Lg(t,n){return t.x()+t.width()/2-n.width()/2}function jg(t,n){return t.x()+t.width()-n.width()}function Ks(t,n){return t.y()-n.height()}function Js(t){return t.y()+t.height()}function Ug(t,n){return t.y()+t.height()/2-n.height()/2}function Sn(t,n,e){return hn(zg(t),Js(t),e.southeast(),Oa(),"layout-se")}function Cn(t,n,e){return hn(jg(t,n),Js(t),e.southwest(),uf(),"layout-sw")}function Pn(t,n,e){return hn(zg(t),Ks(t,n),e.northeast(),af(),"layout-ne")}function zn(t,n,e){return hn(jg(t,n),Ks(t,n),e.northwest(),cf(),"layout-nw")}function $s(t,n,e){return hn(function(o){return o.x()+o.width()}(t),Ug(t,n),e.east(),GC(),"layout-e")}function Qs(t,n,e){return hn(function(o,r){return o.x()-r.width()}(t,n),Ug(t,n),e.west(),XC(),"layout-w")}function Wg(){return[Sn,Cn,Pn,zn,kn,Ln,$s,Qs]}function Gg(){return[Cn,Sn,zn,Pn,kn,Ln,$s,Qs]}function Xg(){return[Pn,zn,Sn,Cn,Ln,kn]}function Zs(){return[Sn,Cn,Pn,zn,kn,Ln]}function tf(){return[Cn,Sn,zn,Pn,kn,Ln]}function nf(t,n,e){return gC(function(o,r){e(o,t,n)})}function IC(t,n,e,o,r,i){var u=An(t),a=oe(n,[function(s,c){return Eo(s,An(c))}("config",t)]);return ip(u,a,n,e,o,r,i)}function RC(t,n,e){return function(o,r,i){var u=i.toString(),a=u.indexOf(")")+1,s=u.indexOf("("),c=u.substring(s+1,a-1).split(/,\s*/);return o.toFunctionAnnotation=function(){return{name:r,parameters:js(c.slice(0,1).concat(c.slice(3)))}},o}(function(o){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var u=[o].concat(r);return o.config({name:y(t)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+e)},function(a){var s=Array.prototype.slice.call(u,1);return n.apply(void 0,[o,a.config,a.state].concat(s))})},e,n)}function VC(t){return{key:t,value:void 0}}function A(t){return Xr(t)}function on(t){var n=mn("Creating behaviour: "+t.name,YC,t);return IC(n.fields,n.name,n.active,n.apis,n.extra,n.state)}function Yg(t){var n=mn("Creating behaviour: "+t.name,qC,t);return function(e,o,r,i,u,a){var s=e,c=oe(o,[Eo("config",e)]);return ip(s,c,o,r,i,u,a)}(me(n.branchKey,n.branches),n.name,n.active,n.apis,n.extra,n.state)}function Ho(t){t.dom().focus()}function go(t){var n=t!==void 0?t.dom():F.document;return d.from(n.activeElement).map(z.fromDom)}function Ie(t){return go(Yn(t)).filter(function(n){return t.dom().contains(n.dom())})}function qg(t,n){var e=Yn(n),o=go(e).bind(function(i){function u(a){return nn(i,a)}return u(n)?d.some(n):function(a,s){var c=function(f){for(var l=0;l<f.childNodes.length;l++){var m=z.fromDom(f.childNodes[l]);if(s(m))return d.some(m);var h=c(f.childNodes[l]);if(h.isSome())return h}return d.none()};return c(a.dom())}(n,u)}),r=t(n);return o.each(function(i){go(e).filter(function(u){return nn(u,i)}).fold(function(){Ho(i)},P)}),r}function Kg(t,n){function e(o){return o+"px"}xs(t,{position:d.some(n.position()),left:n.left().map(e),top:n.top().map(e),right:n.right().map(e),bottom:n.bottom().map(e)})}function Jg(t,n,e,o,r,i){var u=n.x()-e,a=n.y()-o,s=r-(u+n.width()),c=i-(a+n.height()),f=d.some(u),l=d.some(a),m=d.some(s),h=d.some(c),g=d.none();return function(b,p,x,v,S,w,C,_,T){return b.fold(p,x,v,S,w,C,_,T)}(n.direction(),function(){return Ve(t,f,l,g,g)},function(){return Ve(t,g,l,m,g)},function(){return Ve(t,f,g,g,h)},function(){return Ve(t,g,g,m,h)},function(){return Ve(t,f,l,g,g)},function(){return Ve(t,f,g,g,h)},function(){return Ve(t,f,l,g,g)},function(){return Ve(t,g,l,m,g)})}function $g(t,n){var e=ce(Ws,n),o=t.fold(e,e,function(){var u=mo();return Ws(n).translate(-u.left(),-u.top())}),r=cu(n),i=lr(n);return Me(o.left(),o.top(),r,i)}function ai(t,n,e,o){var r=t+n;return o<r?e:r<e?o:r}function po(t,n,e){return Math.min(Math.max(t,n),e)}function HC(t,n,e,o){var r=t.x(),i=t.y(),u=t.bubble().offset().left(),a=t.bubble().offset().top(),s=o.y(),c=o.bottom(),f=o.x(),l=o.right(),m=i+a,h=function(q,tt,St,Ot,Lt){var vn=Lt.x(),ne=Lt.y(),We=Lt.width(),En=Lt.height(),uo=vn<=q,Qt=ne<=tt,Ri=uo&&Qt,bn=q+St<=vn+We&&tt+Ot<=ne+En,qo=Math.abs(Math.min(St,uo?vn+We-q:vn-(q+St))),Ko=Math.abs(Math.min(Ot,Qt?ne+En-tt:ne-(tt+Ot)));return{originInBounds:Ri,sizeInBounds:bn,limitX:po(q,Lt.x(),Lt.right()),limitY:po(tt,Lt.y(),Lt.bottom()),deltaW:qo,deltaH:Ko}}(r+u,m,n,e,o),g=h.originInBounds,b=h.sizeInBounds,p=h.limitX,x=h.limitY,v=h.deltaW,S=h.deltaH,w=y(x+S-s),C=y(c-x),_=function(q,tt,St,Ot){return q.fold(tt,tt,Ot,Ot,tt,Ot,St,St)}(t.direction(),C,C,w),T=y(p+v-f),D=y(l-p),H=function(q,tt,St,Ot){return q.fold(tt,Ot,tt,Ot,St,St,tt,Ot)}(t.direction(),D,D,T),U=ap({x:p,y:x,width:v,height:S,maxHeight:_,maxWidth:H,direction:t.direction(),classes:{on:t.bubble().classesOn(),off:t.bubble().classesOff()},label:t.label(),candidateYforTest:m});return g&&b?br.fit(U):br.nofit(U,v,S)}function NC(t,n,e,o){_t(n,"max-height"),_t(n,"max-width");var r=function(i){return{width:y(cu(i)),height:y(lr(i))}}(n);return function(i,u,a,s,c){function f(h,g,b,p){var x=h(u,a,s);return HC(x,l,m,c).fold(br.fit,function(v,S,w){return p<w||b<S?br.nofit(v,S,w):br.nofit(g,b,p)})}var l=a.width(),m=a.height();return Dn(i,function(h,g){var b=ce(f,g);return h.fold(br.fit,b)},br.nofit(ap({x:u.x(),y:u.y(),width:a.width(),height:a.height(),maxHeight:a.height(),maxWidth:a.width(),direction:Oa(),classes:{on:[],off:[]},label:"none",candidateYforTest:u.y()}),-1,-1)).fold(bt,bt)}(o.preference(),t,r,e,o.bounds())}function PC(t,n,e){Kg(t,function(o,r){return o.fold(function(){return Ve("absolute",d.some(r.x()),d.some(r.y()),d.none(),d.none())},function(i,u,a,s){return Jg("absolute",r,i,u,a,s)},function(i,u,a,s){return Jg("fixed",r,i,u,a,s)})}(e.origin(),n))}function Qg(t,n){(function(e,o){var r=Gs.max(e,o,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);nt(e,"max-height",r+"px")})(t,Math.floor(n))}function Zg(t,n,e){return t[n]===void 0?e:t[n]}function zC(t,n,e,o,r,i){var u=Zg(i,"maxHeightFunction",ek()),a=Zg(i,"maxWidthFunction",P),s=t.anchorBox(),c=t.origin(),f=ok({bounds:function(l,m){return m.fold(function(){return l.fold(mr,mr,Me)},function(h){return l.fold(h,h,function(){var g=h(),b=up(l,g.x(),g.y());return Me(b.left(),b.top(),g.width(),g.height())})})}(c,r),origin:c,preference:o,maxHeightFunction:u,maxWidthFunction:a});rk(s,n,e,f)}function ci(t,n,e){function o(i){return J(e,i).getOr([])}function r(i,u,a){var s=os(ik,a);return{offset:function(){return Bt(i,u)},classesOn:function(){return At(a,o)},classesOff:function(){return At(s,o)}}}return{southeast:function(){return r(-t,n,["top","alignLeft"])},southwest:function(){return r(t,n,["top","alignRight"])},south:function(){return r(-t/2,n,["top","alignCentre"])},northeast:function(){return r(-t,-n,["bottom","alignLeft"])},northwest:function(){return r(t,-n,["bottom","alignRight"])},north:function(){return r(-t/2,-n,["bottom","alignCentre"])},east:function(){return r(t,-n/2,["valignCentre","left"])},west:function(){return r(-t,-n/2,["valignCentre","right"])},innerNorthwest:function(){return r(-t,n,["top","alignRight"])},innerNortheast:function(){return r(t,n,["top","alignLeft"])},innerNorth:function(){return r(-t/2,n,["top","alignCentre"])},innerSouthwest:function(){return r(-t,-n,["bottom","alignRight"])},innerSoutheast:function(){return r(t,-n,["bottom","alignLeft"])},innerSouth:function(){return r(-t/2,-n,["bottom","alignCentre"])},innerWest:function(){return r(t,-n/2,["valignCentre","right"])},innerEast:function(){return r(-t,-n/2,["valignCentre","left"])}}}function Ca(){return ci(0,0,{})}function ka(t){return t}function ef(t,n){return function(e){return uk(e)==="rtl"?n:t}}var vr,tp,of=V({}),LC=["alloy/data/Fields","alloy/debugging/Debugging"],jC=y({logEventCut:P,logEventStopped:P,logNoParent:P,logEventNoHandlers:P,logEventResponse:P,write:P}),np=y([E("menu"),E("selectedMenu")]),rf=y([E("item"),E("selectedItem")]),UC=(y(W(rf().concat(np()))),y(W(rf()))),WC=_o("initSize",[E("numColumns"),E("numRows")]),ep=y(WC),hn=Oe("x","y","bubble","direction","label"),No=Rn([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Oa=No.southeast,uf=No.southwest,af=No.northeast,cf=No.northwest,op=No.south,rp=No.north,GC=No.east,XC=No.west,Ln=function(t,n,e){return hn(Lg(t,n),Ks(t,n),e.north(),rp(),"layout-n")},kn=function(t,n,e){return hn(Lg(t,n),Js(t),e.south(),op(),"layout-s")},ip=function(t,n,e,o,r,i,u){function a(l){return ee(l,e)?l[e]():d.none()}var s=Pt(r,function(l,m){return RC(e,l,m)}),c=Pt(i,function(l,m){return hs(l,m)}),f=O(O(O({},c),s),{revoke:ce(VC,e),config:function(l){var m=mn(e+"-config",t,l);return{key:e,value:{config:m,me:f,configAsRaw:Co(function(){return mn(e+"-config",t,l)}),initialConfig:l,state:u}}},schema:function(){return n},exhibit:function(l,m){return a(l).bind(function(h){return J(o,"exhibit").map(function(g){return g(m,h.config,h.state)})}).getOr(Te({}))},name:function(){return e},handlers:function(l){return a(l).map(function(m){return J(o,"events").getOr(function(){return{}})(m.config,m.state)}).getOr({})}});return f},YC=An([E("fields"),E("name"),k("active",{}),k("apis",{}),k("state",Ae),k("extra",{})]),qC=An([E("branchKey"),E("branches"),E("name"),k("active",{}),k("apis",{}),k("state",Ae),k("extra",{})]),KC=y(void 0),JC=Object.freeze({__proto__:null,events:function(t){return xt([B(Zr(),function(n,e){var o=t.channels,r=Ht(o),i=e,u=function(a,s){return s.universal()?a:Ct(a,function(c){return Mt(s.channels(),c)})}(r,i);K(u,function(a){var s=o[a],c=s.schema,f=mn("channel["+a+`] data
Receiver: `+Do(n.element()),c,i.data());s.onReceive(n,f)})})])}}),$C=[Xn("channels",km(ot.value,An([hr("onReceive"),k("schema",ar())])))],Re=on({fields:$C,name:"receiving",active:JC}),QC=Object.freeze({__proto__:null,exhibit:function(t,n){return Te({classes:[],styles:n.useFixed()?{}:{position:"relative"}})}}),Ve=Oe("position","left","top","right","bottom"),sf=Rn([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),up=function(t,n,e){var o=Bt(n,e);return t.fold(y(o),y(o),function(){var r=mo();return o.translate(-r.left(),-r.top())})},ZC=(sf.none,sf.relative),tk=sf.fixed,nk=Oe("anchorBox","origin"),ap=ra(["x","y","width","height","maxHeight","maxWidth","direction","classes","label","candidateYforTest"],[]),br=Rn([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),ek=y(function(t,n){Qg(t,n),Jr(t,{"overflow-x":"hidden","overflow-y":"auto"})}),su=y(function(t,n){Qg(t,n)}),ok=ra(["bounds","origin","preference","maxHeightFunction","maxWidthFunction"],[]),rk=function(t,n,e,o){var r=NC(t,n,e,o);PC(n,r,o),function(i,u){var a=u.classes();Ao(i,a.off),qi(i,a.on)}(n,r),function(i,u,a){a.maxHeightFunction()(i,u.maxHeight())}(n,r,o),function(i,u,a){a.maxWidthFunction()(i,u.maxWidth())}(n,r,o)},ik=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],uk=function(t){return Ee(t,"direction")==="rtl"?"rtl":"ltr"};(tp=vr=vr||{}).TopToBottom="toptobottom",tp.BottomToTop="bottomtotop";function ak(t){return Hg(t,function(n){return ei(n)&&Kt(n,ff)===vr.BottomToTop})}function Po(){return oe("layouts",[E("onLtr"),E("onRtl"),ft("onBottomLtr"),ft("onBottomRtl")])}function _a(t,n,e,o,r,i,u){var a=u.map(ak).getOr(!1),s=n.layouts.map(function(m){return m.onLtr(t)}),c=n.layouts.map(function(m){return m.onRtl(t)}),f=a?n.layouts.bind(function(m){return m.onBottomLtr.map(function(h){return h(t)})}).or(s).getOr(r):s.getOr(e),l=a?n.layouts.bind(function(m){return m.onBottomRtl.map(function(h){return h(t)})}).or(c).getOr(i):c.getOr(o);return ef(f,l)(t)}function cp(t,n,e){var o=t.document.createRange();return function(r,i){i.fold(function(u){r.setStartBefore(u.dom())},function(u,a){r.setStart(u.dom(),a)},function(u){r.setStartAfter(u.dom())})}(o,n),function(r,i){i.fold(function(u){r.setEndBefore(u.dom())},function(u,a){r.setEnd(u.dom(),a)},function(u){r.setEndAfter(u.dom())})}(o,e),o}function sp(t,n,e,o,r){var i=t.document.createRange();return i.setStart(n.dom(),e),i.setEnd(o.dom(),r),i}function ck(t){return{left:y(t.left),top:y(t.top),right:y(t.right),bottom:y(t.bottom),width:y(t.width),height:y(t.height)}}function fp(t,n,e){return n(z.fromDom(e.startContainer),e.startOffset,z.fromDom(e.endContainer),e.endOffset)}function sk(t,n){return function(e,o){var r=o.ltr();return r.collapsed?o.rtl().filter(function(i){return i.collapsed===!1}).map(function(i){return lu.rtl(z.fromDom(i.endContainer),i.endOffset,z.fromDom(i.startContainer),i.startOffset)}).getOrThunk(function(){return fp(0,lu.ltr,r)}):fp(0,lu.ltr,r)}(0,function(e,o){return o.match({domRange:function(r){return{ltr:y(r),rtl:d.none}},relative:function(r,i){return{ltr:Co(function(){return cp(e,r,i)}),rtl:Co(function(){return d.some(cp(e,i,r))})}},exact:function(r,i,u,a){return{ltr:Co(function(){return sp(e,r,i,u,a)}),rtl:Co(function(){return d.some(sp(e,u,a,r,i))})}}})}(t,n))}var ff="data-alloy-vertical-dir",fk=[E("hotspot"),ft("bubble"),k("overrides",{}),Po(),wt("placement",function(t,n,e){var o=n.hotspot,r=$g(e,o.element()),i=_a(t.element(),n,Zs(),tf(),Xg(),[zn,Pn,Cn,Sn,Ln,kn],d.some(n.hotspot.element()));return d.some(ka({anchorBox:r,bubble:n.bubble.getOr(Ca()),overrides:n.overrides,layouts:i,placer:d.none()}))})],lk=[E("x"),E("y"),k("height",0),k("width",0),k("bubble",Ca()),k("overrides",{}),Po(),wt("placement",function(t,n,e){var o=up(e,n.x,n.y),r=Me(o.left(),o.top(),n.width,n.height),i=_a(t.element(),n,Wg(),Gg(),Wg(),Gg(),d.none());return d.some(ka({anchorBox:r,bubble:n.bubble,overrides:n.overrides,layouts:i,placer:d.none()}))})],lf={create:Oe("start","soffset","finish","foffset")},df=Rn([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),dk=(df.before,df.on,df.after,function(t){return t.fold(bt,bt,bt)}),Ta=Rn([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),fu={domRange:Ta.domRange,relative:Ta.relative,exact:Ta.exact,exactFromRange:function(t){return Ta.exact(t.start(),t.soffset(),t.finish(),t.foffset())},getWin:function(t){var n=function(e){return e.match({domRange:function(o){return z.fromDom(o.startContainer)},relative:function(o,r){return dk(o)},exact:function(o,r,i,u){return o}})}(t);return ia(n)},range:lf.create},lu=Rn([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);lu.ltr,lu.rtl;function lp(t){return Kp.getOption(t)}function mk(t){return function(n){return lp(n).filter(function(e){return e.trim().length!==0||-1<e.indexOf("\xA0")}).isSome()}(t)||Mt(Sk,qe(t))}function Jn(t,n){return ss(n,t)}function gk(t,n,e,o){var r=function(u,a,s,c){var f=Yn(u).dom().createRange();return f.setStart(u.dom(),a),f.setEnd(s.dom(),c),f}(t,n,e,o),i=nn(t,e)&&n===o;return r.collapsed&&!i}function pk(t){var n=z.fromDom(t.anchorNode),e=z.fromDom(t.focusNode);return gk(n,t.anchorOffset,e,t.focusOffset)?d.some(lf.create(n,t.anchorOffset,e,t.focusOffset)):function(o){if(0<o.rangeCount){var r=o.getRangeAt(0),i=o.getRangeAt(o.rangeCount-1);return d.some(lf.create(z.fromDom(r.startContainer),r.startOffset,z.fromDom(i.endContainer),i.endOffset))}return d.none()}(t)}function mf(t,n){return function(e){var o=e.getClientRects(),r=0<o.length?o[0]:e.getBoundingClientRect();return 0<r.width||0<r.height?d.some(r).map(ck):d.none()}(function(e,o){return sk(e,o).match({ltr:function(r,i,u,a){var s=e.document.createRange();return s.setStart(r.dom(),i),s.setEnd(u.dom(),a),s},rtl:function(r,i,u,a){var s=e.document.createRange();return s.setStart(u.dom(),a),s.setEnd(r.dom(),i),s}})}(t,n))}function hk(t,n){var e=_e(t);if(e.length===0)return Ef(t,n);if(n<e.length)return Ef(e[n],0);var o=e[e.length-1],r=oi(o)?function(i){return Kp.get(i)}(o).length:_e(o).length;return Ef(o,r)}function vk(t){return t.fold(bt,function(n,e,o){return n.translate(-e,-o)})}function bk(t){return t.fold(bt,bt)}function dp(t){return Dn(t,function(n,e){return n.translate(e.left(),e.top())},Bt(0,0))}function mp(t){var n=I(t,bk);return dp(n)}function gp(t,n,e){var o=Yn(t.element()),r=mo(o),i=function(u,a,s){var c=ia(s.root).dom();return d.from(c.frameElement).map(z.fromDom).filter(function(f){var l=Yn(f),m=Yn(u.element());return nn(l,m)}).map(dr)}(t,0,e).getOr(r);return Ok(i,r.left(),r.top())}function pp(t,n){return oi(t)?_k(t,n):hk(t,n)}function hp(t,n){return n.getSelection.getOrThunk(function(){return function(){return function(e){return d.from(e.getSelection()).filter(function(o){return 0<o.rangeCount}).bind(pk)}(t)}})().map(function(e){var o=pp(e.start(),e.soffset()),r=pp(e.finish(),e.foffset());return fu.range(o.element(),o.offset(),r.element(),r.offset())})}function vp(t){return t.x()+t.width()}function bp(t,n){return t.x()-n.width()}function yp(t,n){return t.y()-n.height()+t.height()}function xp(t){return t.y()}function wp(t,n,e){return hn(vp(t),xp(t),e.southeast(),Oa(),"link-layout-se")}function Sp(t,n,e){return hn(bp(t,n),xp(t),e.southwest(),uf(),"link-layout-sw")}function Cp(t,n,e){return hn(vp(t),yp(t,n),e.northeast(),af(),"link-layout-ne")}function kp(t,n,e){return hn(bp(t,n),yp(t,n),e.northwest(),cf(),"link-layout-nw")}function Op(){return[wp,Sp,Cp,kp]}function _p(){return[Sp,wp,kp,Cp]}function yk(t,n,e,o,r){var i=function(u,a){return nk(u,a)}(e.anchorBox,n);zC(i,r.element(),e.bubble,e.layouts,o,e.overrides)}function Tp(t,n){he(t.element(),n.element())}function Ep(t,n){var e=t.components();(function(r){K(r.components(),function(i){return Vo(i.element())}),gs(r.element()),r.syncComponents()})(t);var o=os(e,n);K(o,function(r){Ba(r),t.getSystem().removeFromWorld(r)}),K(n,function(r){r.getSystem().isConnected()?Tp(t,r):(t.getSystem().addToWorld(r),Tp(t,r),Mo(t.element())&&Da(r)),t.syncComponents()})}function yr(t,n){nh(t,n,he)}function Bp(t){Ba(t),Vo(t.element()),t.getSystem().removeFromWorld(t)}function xr(t){var n=Vn(t.element()).bind(function(e){return t.getSystem().getByDom(e).toOption()});Bp(t),n.each(function(e){e.syncComponents()})}function Dp(t){var n=t.components();K(n,Bp),gs(t.element()),t.syncComponents()}function gf(t,n){eh(t,n,he)}function Ap(t){var n=_e(t.element());K(n,function(e){t.getByDom(e).each(Ba)}),Vo(t.element())}function Mp(t,n,e,o){e.get().each(function(u){Dp(t)});var r=n.getAttachPoint(t);yr(r,t);var i=t.getSystem().build(o);return yr(t,i),e.set(i),i}function Fp(t,n,e,o){var r=Mp(t,n,e,o);return n.onOpen(t,r),r}function Ip(t,n,e){e.get().each(function(o){Dp(t),xr(t),n.onClose(t,o),e.clear()})}function Rp(t,n,e){return e.isOpen()}function pf(t){var n,e=mn("Dismissal",Vk,t);return(n={})[du()]={schema:An([E("target")]),onReceive:function(o,r){rt.isOpen(o)&&(rt.isPartOf(o,r.target)||e.isExtraPart(o,r.target)||e.fireEventInstead.fold(function(){return rt.close(o)},function(i){return ct(o,i.event)}))}},n}function hf(t){var n,e=mn("Reposition",Hk,t);return(n={})[mu()]={onReceive:function(o){rt.isOpen(o)&&e.fireEventInstead.fold(function(){return e.doReposition(o)},function(r){return ct(o,r.event)})}},n}function vf(t,n,e){n.store.manager.onLoad(t,n,e)}function Vp(t,n,e){n.store.manager.onUnload(t,n,e)}function Hp(){var t=V(null);return ve({set:t.set,get:t.get,isNotSet:function(){return t.get()===null},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})}function Np(){var t=V({}),n=V({});return ve({readState:function(){return{mode:"dataset",dataByValue:t.get(),dataByText:n.get()}},lookup:function(e){return J(t.get(),e).orThunk(function(){return J(n.get(),e)})},update:function(e){var o=t.get(),r=n.get(),i={},u={};K(e,function(a){i[a.value]=a,J(a,"meta").each(function(s){J(s,"text").each(function(c){u[c]=a})})}),t.set(O(O({},o),i)),n.set(O(O({},r),u))},clear:function(){t.set({}),n.set({})}})}function Pp(t,n,e,o){var r=n.store;e.update([o]),r.setValue(t,o),n.onSetValue(t,o)}function Gt(t,n){return Bm(t,{},I(n,function(e){return function(o,r){return Wt(o,o,Ss(),Qo(function(i){return $r("The field: "+o+" is forbidden. "+r)}))}(e.name(),"Cannot configure "+e.name()+" for "+t)}).concat([un("dump",bt)]))}function bf(t){return t.dump}function Jt(t,n){return O(O({},t.dump),A(n))}function yf(t){return qt(t,"uiType")}function xk(t,n,e,o){return yf(e)&&e.uiType===ih?function(r,i,u,a){return r.exists(function(s){return s!==u.owner})?Aa.single(!0,y(u)):J(a,u.name).fold(function(){throw new Error("Unknown placeholder component: "+u.name+`
Known: [`+Ht(a)+`]
Namespace: `+r.getOr("none")+`
Spec: `+JSON.stringify(u,null,2))},function(s){return s.replace()})}(t,0,e,o):Aa.single(!1,y(e))}function wk(t,n,e,o){var r=Pt(o,function(u,a){return function(s,c){var f=!1;return{name:y(s),required:function(){return c.fold(function(l,m){return l},function(l,m){return l})},used:function(){return f},replace:function(){if(f)throw new Error("Trying to use the same placeholder more than once: "+s);return f=!0,c}}}(a,u)}),i=function(u,a,s,c){return At(s,function(f){return uh(u,a,f,c)})}(t,n,e,r);return yn(r,function(u){if(u.used()===!1&&u.required())throw new Error("Placeholder: "+u.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(n.components,null,2))}),i}function zp(t){return t.fold(d.some,d.none,d.some,d.some)}function Lp(t){function n(e){return e.name}return t.fold(n,n,n,n)}function Ea(t,n){return function(e){var o=mn("Converting part type",n,e);return t(o)}}function xf(t,n,e,o){return yt(n.defaults(t,e,o),e,{uid:t.partUids[n.name]},n.overrides(t,e,o))}function wf(t,n){var e={};return K(n,function(o){zp(o).each(function(r){var i=Qk(t,r.pname);e[r.name]=function(u){var a=mn("Part: "+r.name+" in "+t,W(r.schema),u);return O(O({},i),{config:u,validated:a})}})}),e}function Sf(t,n,e){return{uiType:ch(),owner:t,name:n,config:e,validated:{}}}function jp(t){return At(t,function(n){return n.fold(d.none,d.some,d.none,d.none).map(function(e){return _o(e.name,e.schema.concat([Pg(Mf())]))}).toArray()})}function Up(t){return I(t,Lp)}function Cf(t,n,e){return function(o,r,i){var u={},a={};return K(i,function(s){s.fold(function(c){u[c.pname]=ah(!0,function(f,l,m){return c.factory.sketch(xf(f,c,l,m))})},function(c){var f=r.parts[c.name];a[c.name]=y(c.factory.sketch(xf(r,c,f[Mf()]),f))},function(c){u[c.pname]=ah(!1,function(f,l,m){return c.factory.sketch(xf(f,c,l,m))})},function(c){u[c.pname]=Gk(!0,function(f,l,m){var h=f[c.name];return I(h,function(g){return c.factory.sketch(yt(c.defaults(f,g,m),g,c.overrides(f,g)))})})})}),{internals:y(u),externals:y(a)}}(0,n,e)}function kf(t,n,e){return wk(d.some(t),n,n.components,e)}function vt(t,n,e){var o=n.partUids[e];return t.getSystem().getByUid(o).toOption()}function $e(t,n,e){return vt(t,n,e).getOrDie("Could not find part: "+e)}function Wp(t,n,e){var o={},r=n.partUids,i=t.getSystem();return K(e,function(u){o[u]=y(i.getByUid(r[u]))}),o}function Gp(t,n){var e=t.getSystem();return Pt(n.partUids,function(o,r){return y(e.getByUid(o))})}function Xp(t){return Ht(t.partUids)}function Of(t,n,e){var o={},r=n.partUids,i=t.getSystem();return K(e,function(u){o[u]=y(i.getByUid(r[u]).getOrDie())}),o}function Yp(t,n){var e=Up(n);return Xr(I(e,function(o){return{key:o,value:t+"-"+o}}))}function _f(t){return Wt("partUids","partUids",Qm(function(n){return Yp(n.uid,t)}),ar())}function qp(t,n,e,o,r){var i=function(u,a){return(0<u.length?[_o("parts",u)]:[]).concat([E("uid"),k("dom",{}),k("components",[]),Pg("originalSpec"),k("debug.sketcher",{})]).concat(a)}(o,r);return mn(t+" [SpecSchema]",An(i.concat(n)),e)}function Tf(t,n,e,o,r){var i=sh(r),u=jp(e),a=_f(e),s=qp(t,n,i,u,[a]),c=Cf(0,s,e);return o(s,kf(t,s,c.internals()),i,c.externals())}var Kp=function(n,e){var o=function(r){return n(r)?d.from(r.dom().nodeValue):d.none()};return{get:function(r){if(!n(r))throw new Error("Can only get "+e+" value of a "+e+" node");return o(r).getOr("")},getOption:o,set:function(r,i){if(!n(r))throw new Error("Can only set raw "+e+" value of a "+e+" node");r.dom().nodeValue=i}}}(oi,"text"),Sk=["img","br"],Ck=function(t,n){var e=function(o){for(var r=_e(o),i=r.length-1;0<=i;i--){var u=r[i];if(n(u))return d.some(u);var a=e(u);if(a.isSome())return a}return d.none()};return e(t)},Ef=Oe("element","offset"),Jp=Rn([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),kk=Jp.screen,Ok=Jp.absolute,$p=function(t,n,e,o){var r=t,i=n,u=e,a=o;t<0&&(r=0,u=e+t),n<0&&(i=0,a=o+n);var s=kk(Bt(r,i));return d.some(BC(s,u,a))},Qp=function(t,n,e,o,r){return t.map(function(i){var u=[n,i.point()],a=function(m,h,g,b){return m.fold(h,g,b)}(o,function(){return mp(u)},function(){return mp(u)},function(){return function(m){var h=I(m,vk);return dp(h)}(u)}),s=DC(a.left(),a.top(),i.width(),i.height()),c=e.showAbove?Xg():Zs(),f=(e.showAbove,tf()),l=_a(r,e,c,f,c,f,d.none());return ka({anchorBox:s,bubble:e.bubble.getOr(Ca()),overrides:e.overrides,layouts:l,placer:d.none()})})},_k=Oe("element","offset"),Tk=[ft("getSelection"),E("root"),ft("bubble"),Po(),k("overrides",{}),k("showAbove",!1),wt("placement",function(t,n,e){var o=ia(n.root).dom(),r=gp(t,0,n),i=hp(o,n).bind(function(a){return mf(o,fu.exactFromRange(a)).orThunk(function(){var s=z.fromText("\uFEFF");return ua(a.start(),s),mf(o,fu.exact(s,0,s,1)).map(function(c){return Vo(s),c})}).bind(function(s){return $p(s.left(),s.top(),s.width(),s.height())})}),u=hp(o,n).bind(function(a){return ei(a.start())?d.some(a.start()):Vn(a.start())}).getOr(t.element());return Qp(i,r,n,e,u)})],Ek=[E("node"),E("root"),ft("bubble"),Po(),k("overrides",{}),k("showAbove",!1),wt("placement",function(t,n,e){var o=gp(t,0,n);return n.node.bind(function(r){var i=r.dom().getBoundingClientRect(),u=$p(i.left,i.top,i.width,i.height),a=n.node.getOr(t.element());return Qp(u,o,n,e,a)})})],Bk=[E("item"),Po(),k("overrides",{}),wt("placement",function(t,n,e){var o=$g(e,n.item.element()),r=_a(t.element(),n,Op(),_p(),Op(),_p(),d.none());return d.some(ka({anchorBox:o,bubble:Ca(),overrides:n.overrides,layouts:r,placer:d.none()}))})],Dk=me("anchor",{selection:Tk,node:Ek,hotspot:fk,submenu:Bk,makeshift:lk}),Zp=function(t,n,e,o,r,i){var u=i.map(be);return th(t,n,e,o,r,u)},th=function(t,n,e,o,r,i){var u=mn("positioning anchor.info",Dk,o);qg(function(){nt(r.element(),"position","fixed");var a=gn(r.element(),"visibility");nt(r.element(),"visibility","hidden");var s=n.useFixed()?function(){var l=F.document.documentElement;return tk(0,0,l.clientWidth,l.clientHeight)}():function(l){var m=dr(l.element()),h=l.element().dom().getBoundingClientRect();return ZC(m.left(),m.top(),h.width,h.height)}(t),c=u.placement,f=i.map(y).or(n.getBounds);c(t,u,s).each(function(l){l.placer.getOr(yk)(t,s,l,f,r)}),a.fold(function(){_t(r.element(),"visibility")},function(l){nt(r.element(),"visibility",l)}),gn(r.element(),"left").isNone()&&gn(r.element(),"top").isNone()&&gn(r.element(),"right").isNone()&&gn(r.element(),"bottom").isNone()&&gn(r.element(),"position").is("fixed")&&_t(r.element(),"position")},r.element())},Ak=Object.freeze({__proto__:null,position:function(t,n,e,o,r){Zp(t,n,e,o,r,d.none())},positionWithin:Zp,positionWithinBounds:th,getMode:function(t,n,e){return n.useFixed()?"fixed":"absolute"}}),Mk=[k("useFixed",se),ft("getBounds")],Fn=on({fields:Mk,name:"positioning",active:QC,apis:Ak}),Ba=function(t){ct(t,va());var n=t.components();K(n,Ba)},Da=function(t){var n=t.components();K(n,Da),ct(t,ti())},nh=function(t,n,e){t.getSystem().addToWorld(n),e(t.element(),n.element()),Mo(t.element())&&Da(n),t.syncComponents()},eh=function(t,n,e){e(t,n.element());var o=_e(n.element());K(o,function(r){n.getByDom(r).each(Da)})},oh=function(t,n,e){var o=n.getAttachPoint(t);nt(t.element(),"position",Fn.getMode(o)),function(r,i,u,a){gn(r.element(),i).fold(function(){re(r.element(),u)},function(s){lt(r.element(),u,s)}),nt(r.element(),i,a)}(t,"visibility",n.cloakVisibilityAttr,"hidden")},rh=function(t,n,e){!function(o){return So(["top","left","right","bottom"],function(r){return gn(o,r).isSome()})}(t.element())&&_t(t.element(),"position"),function(o,r,i){if(or(o.element(),i)){var u=Kt(o.element(),i);nt(o.element(),r,u)}else _t(o.element(),r)}(t,"visibility",n.cloakVisibilityAttr)},Fk=Object.freeze({__proto__:null,cloak:oh,decloak:rh,open:Fp,openWhileCloaked:function(t,n,e,o,r){oh(t,n),Fp(t,n,e,o),r(),rh(t,n)},close:Ip,isOpen:Rp,isPartOf:function(t,n,e,o){return Rp(0,0,e)&&e.get().exists(function(r){return n.isPartOf(t,r,o)})},getState:function(t,n,e){return e.get()},setContent:function(t,n,e,o){return e.get().map(function(){return Mp(t,n,e,o)})}}),Ik=Object.freeze({__proto__:null,events:function(t,n){return xt([B(ha(),function(e,o){Ip(e,t,n)})])}}),Rk=[dt("onOpen"),dt("onClose"),E("isPartOf"),E("getAttachPoint"),k("cloakVisibilityAttr","data-precloak-visibility")],rt=on({fields:Rk,name:"sandboxing",active:Ik,apis:Fk,state:Object.freeze({__proto__:null,init:function(){var t=V(d.none()),n=y("not-implemented");return ve({readState:n,isOpen:function(){return t.get().isSome()},clear:function(){t.set(d.none())},set:function(e){t.set(d.some(e))},get:function(){return t.get()}})}})}),du=y("dismiss.popups"),mu=y("reposition.popups"),Bf=y("mouse.released"),Vk=An([k("isExtraPart",y(!1)),oe("fireEventInstead",[k("event",ni())])]),Hk=An([k("isExtraPart",y(!1)),oe("fireEventInstead",[k("event",bg())]),xn("doReposition")]),Nk=Object.freeze({__proto__:null,onLoad:vf,onUnload:Vp,setValue:function(t,n,e,o){n.store.manager.setValue(t,n,e,o)},getValue:function(t,n,e){return n.store.manager.getValue(t,n,e)},getState:function(t,n,e){return e}}),Pk=Object.freeze({__proto__:null,events:function(t,n){var e=t.resetOnDom?[It(function(o,r){vf(o,t,n)}),fo(function(o,r){Vp(o,t,n)})]:[nf(t,n,vf)];return xt(e)}}),zk=Object.freeze({__proto__:null,memory:Hp,dataset:Np,manual:function(){return ve({readState:function(){}})},init:function(t){return t.store.manager.state(t)}}),Lk=[ft("initialValue"),E("getFallbackEntry"),E("getDataKey"),E("setValue"),wt("manager",{setValue:Pp,getValue:function(t,n,e){var o=n.store,r=o.getDataKey(t);return e.lookup(r).fold(function(){return o.getFallbackEntry(r)},function(i){return i})},onLoad:function(t,n,e){n.store.initialValue.each(function(o){Pp(t,n,e,o)})},onUnload:function(t,n,e){e.clear()},state:Np})],jk=[E("getValue"),k("setValue",P),ft("initialValue"),wt("manager",{setValue:function(t,n,e,o){n.store.setValue(t,o),n.onSetValue(t,o)},getValue:function(t,n,e){return n.store.getValue(t)},onLoad:function(t,n,e){n.store.initialValue.each(function(o){n.store.setValue(t,o)})},onUnload:P,state:Ae.init})],Uk=[ft("initialValue"),wt("manager",{setValue:function(t,n,e,o){e.set(o),n.onSetValue(t,o)},getValue:function(t,n,e){return e.get()},onLoad:function(t,n,e){n.store.initialValue.each(function(o){e.isNotSet()&&e.set(o)})},onUnload:function(t,n,e){e.clear()},state:Hp})],Wk=[ge("store",{mode:"memory"},me("mode",{memory:Uk,manual:jk,dataset:Lk})),dt("onSetValue"),k("resetOnDom",!1)],M=on({fields:Wk,name:"representing",active:Pk,apis:Nk,extra:{setValueFrom:function(t,n){var e=M.getValue(n);M.setValue(t,e)}},state:zk}),si=Gt,fi=Jt,ih="placeholder",Aa=Rn([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),uh=function(t,n,e,o){return xk(t,0,e,o).fold(function(r,i){var u=yf(e)?i(n,e.config,e.validated):i(n),a=J(u,"components").getOr([]),s=At(a,function(c){return uh(t,n,c,o)});return[O(O({},u),{components:s})]},function(r,i){if(yf(e)){var u=i(n,e.config,e.validated);return e.validated.preprocess.getOr(bt)(u)}return i(n)})},ah=Aa.single,Gk=Aa.multiple,ch=y(ih),Ma=Rn([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Fa=k("factory",{sketch:bt}),Df=k("schema",[]),Ia=E("name"),Af=Wt("pname","pname",$i(function(t){return"<alloy."+N(t.name)+">"}),ar()),Xk=un("schema",function(){return[ft("preprocess")]}),Ra=k("defaults",y({})),Va=k("overrides",y({})),Yk=W([Fa,Df,Ia,Af,Ra,Va]),qk=W([Fa,Df,Ia,Ra,Va]),Kk=W([Fa,Df,Ia,Af,Ra,Va]),Jk=W([Fa,Xk,Ia,E("unit"),Af,Ra,Va]),sn=Ea(Ma.required,Yk),ye=Ea(Ma.external,qk),He=Ea(Ma.optional,Kk),Ha=Ea(Ma.group,Jk),Mf=y("entirety"),$k=Object.freeze({__proto__:null,required:sn,external:ye,optional:He,group:Ha,asNamedPart:zp,name:Lp,asCommon:function(t){return t.fold(bt,bt,bt,bt)},original:Mf}),Qk=function(t,n){return{uiType:ch(),owner:t,name:n}},Zk=Object.freeze({__proto__:null,generate:wf,generateOne:Sf,schemas:jp,names:Up,substitutes:Cf,components:kf,defaultUids:Yp,defaultUidsSchema:_f,getAllParts:Gp,getAllPartNames:Xp,getPart:vt,getPartOrDie:$e,getParts:Wp,getPartsOrDie:Of}),sh=function(t){return function(n){return qt(n,"uid")}(t)?t:O(O({},t),{uid:Yi("uid")})};function ie(t){var n=mn("Sketcher for "+t.name,iO,t),e=Pt(n.apis,ca),o=Pt(n.extraApis,function(r,i){return hs(r,i)});return O(O({name:y(n.name),configFields:y(n.configFields),sketch:function(r){return function(i,u,a,s){var c=sh(s);return a(qp(i,u,c,[],[]),c)}(n.name,n.configFields,n.factory,r)}},e),o)}function On(t){var n=mn("Sketcher for "+t.name,uO,t),e=wf(n.name,n.partFields),o=Pt(n.apis,ca),r=Pt(n.extraApis,function(i,u){return hs(i,u)});return O(O({name:y(n.name),partFields:y(n.partFields),configFields:y(n.configFields),sketch:function(i){return Tf(n.name,n.configFields,n.partFields,n.factory,i)},parts:y(e)},o),r)}function li(t){for(var n=[],e=function(r){n.push(r)},o=0;o<t.length;o++)t[o].each(e);return n}function di(t){return qe(t)==="input"&&Kt(t,"type")!=="radio"||qe(t)==="textarea"}function fh(t,n,e,o){var r=Jn(t.element(),"."+n.highlightClass);K(r,function(i){So(o,function(u){return u.element()===i})||(Ut(i,n.highlightClass),t.getSystem().getByDom(i).each(function(u){n.onDehighlight(t,u),ct(u,Ps())}))})}function gu(t,n,e,o){fh(t,n,0,[o]),If(t,n,e,o)||(en(o.element(),n.highlightClass),n.onHighlight(t,o),ct(o,Sg()))}function lh(t,n,e,o){var r=Jn(t.element(),"."+n.itemClass);return Ur(r,function(i){return Ke(i,n.highlightClass)}).bind(function(i){var u=ai(i,o,0,r.length-1);return t.getSystem().getByDom(r[u]).toOption()})}function tO(t,n,e){var o=Hi(t.slice(0,n)),r=Hi(t.slice(n+1));return Xt(o.concat(r),e)}function nO(t,n,e){var o=Hi(t.slice(0,n));return Xt(o,e)}function eO(t,n,e){var o=t.slice(0,n),r=t.slice(n+1);return Xt(r.concat(o),e)}function oO(t,n,e){var o=t.slice(n+1);return Xt(o,e)}function et(t){return function(n){var e=n.raw();return Mt(t,e.which)}}function Ne(t){return function(n){return Wr(t,function(e){return e(n)})}}function mi(t){return t.raw().shiftKey===!0}function rO(t){return t.raw().ctrlKey===!0}function it(t,n){return{matches:t,classification:n}}function dh(t,n,e){n.exists(function(o){return e.exists(function(r){return nn(r,o)})})||j(t,yg(),{prevFocus:n,newFocus:e})}function Na(){function t(n){return Ie(n.element())}return{get:t,set:function(n,e){var o=t(n);n.getSystem().triggerFocus(e,n.element());var r=t(n);dh(n,o,r)}}}function mh(){function t(n){return mt.getHighlighted(n).map(function(e){return e.element()})}return{get:t,set:function(n,e){var o=t(n);n.getSystem().getByDom(e).fold(P,function(i){mt.highlight(n,i)});var r=t(n);dh(n,o,r)}}}var Pa,Ff,iO=An([E("name"),E("factory"),E("configFields"),k("apis",{}),k("extraApis",{})]),uO=An([E("name"),E("factory"),E("configFields"),E("partFields"),k("apis",{}),k("extraApis",{})]),aO=Object.freeze({__proto__:null,getCurrent:function(t,n,e){return n.find(t)}}),cO=[E("find")],at=on({fields:cO,name:"composing",apis:aO}),If=function(t,n,e,o){return Ke(o.element(),n.highlightClass)},sO=function(t,n,e,o){var r=Jn(t.element(),"."+n.itemClass);return d.from(r[o]).fold(function(){return ot.error("No element found with index "+o)},t.getSystem().getByDom)},gh=function(t,n,e){return cn(t.element(),"."+n.itemClass).bind(function(o){return t.getSystem().getByDom(o).toOption()})},ph=function(t,n,e){var o=Jn(t.element(),"."+n.itemClass);return(0<o.length?d.some(o[o.length-1]):d.none()).bind(function(r){return t.getSystem().getByDom(r).toOption()})},hh=function(t,n,e){var o=Jn(t.element(),"."+n.itemClass);return li(I(o,function(r){return t.getSystem().getByDom(r).toOption()}))},fO=Object.freeze({__proto__:null,dehighlightAll:function(t,n,e){return fh(t,n,0,[])},dehighlight:function(t,n,e,o){If(t,n,e,o)&&(Ut(o.element(),n.highlightClass),n.onDehighlight(t,o),ct(o,Ps()))},highlight:gu,highlightFirst:function(t,n,e){gh(t,n).each(function(o){gu(t,n,e,o)})},highlightLast:function(t,n,e){ph(t,n).each(function(o){gu(t,n,e,o)})},highlightAt:function(t,n,e,o){sO(t,n,e,o).fold(function(r){throw new Error(r)},function(r){gu(t,n,e,r)})},highlightBy:function(t,n,e,o){var r=hh(t,n);Xt(r,o).each(function(i){gu(t,n,e,i)})},isHighlighted:If,getHighlighted:function(t,n,e){return cn(t.element(),"."+n.highlightClass).bind(function(o){return t.getSystem().getByDom(o).toOption()})},getFirst:gh,getLast:ph,getPrevious:function(t,n,e){return lh(t,n,0,-1)},getNext:function(t,n,e){return lh(t,n,0,1)},getCandidates:hh}),lO=[E("highlightClass"),E("itemClass"),dt("onHighlight"),dt("onDehighlight")],mt=on({fields:lO,name:"highlighting",apis:fO}),pu=Vi(mi);(Ff=Pa=Pa||{}).OnFocusMode="onFocus",Ff.OnEnterOrSpaceMode="onEnterOrSpace",Ff.OnApiMode="onApi";function wr(t,n,e,o,r){function i(a,s,c,f,l){return function(m,h){return Xt(m,function(g){return g.matches(h)}).map(function(g){return g.classification})}(c(a,s,f,l),s.event()).bind(function(m){return m(a,s,f,l)})}var u={schema:function(){return t.concat([k("focusManager",Na()),ge("focusInside","onFocus",Ui(function(a){return Mt(["onFocus","onEnterOrSpace","onApi"],a)?ot.value(a):ot.error("Invalid value for focusInside")})),wt("handler",u),wt("state",n),wt("sendFocusIn",r)])},processKey:i,toEvents:function(a,s){var c=a.focusInside!==Pa.OnFocusMode?d.none():r(a).map(function(f){return B(fr(),function(l,m){f(l,a,s),m.stop()})});return xt(c.toArray().concat([B(pa(),function(f,l){i(f,l,e,a,s).fold(function(){(function(m,h){var g=et([32].concat([13]))(h.event());a.focusInside===Pa.OnEnterOrSpaceMode&&g&&Im(m,h)&&r(a).each(function(b){b(m,a,s),h.stop()})})(f,l)},function(m){l.stop()})}),B(cC(),function(f,l){i(f,l,o,a,s).each(function(m){l.stop()})})]))}};return u}function vh(t){function n(s,c){var f=s.visibilitySelector.bind(function(l){return Fe(c,l)}).getOr(c);return 0<Hn(f)}function e(s,c,f){(function(l,m){var h=Jn(l.element(),m.selector),g=Ct(h,function(b){return n(m,b)});return d.from(g[m.firstTabstop])})(s,c).each(function(l){c.focusManager.set(s,l)})}function o(s,c,f,l,m){return m(c,f,function(h){return function(g,b){return n(g,b)&&g.useTabstopAt(b)}(l,h)}).fold(function(){return l.cyclic?d.some(!0):d.none()},function(h){return l.focusManager.set(s,h),d.some(!0)})}function r(s,c,f,l){var m=Jn(s.element(),f.selector);return function(h,g){return g.focusManager.get(h).bind(function(b){return Fe(b,g.selector)})}(s,f).bind(function(h){return Ur(m,ce(nn,h)).bind(function(g){return o(s,m,g,f,l)})})}var i=[ft("onEscape"),ft("onEnter"),k("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),k("firstTabstop",0),k("useTabstopAt",y(!0)),ft("visibilitySelector")].concat([t]),u=y([it(Ne([mi,et([9])]),function(s,c,f){var l=f.cyclic?tO:nO;return r(s,0,f,l)}),it(et([9]),function(s,c,f){var l=f.cyclic?eO:oO;return r(s,0,f,l)}),it(et([27]),function(s,c,f){return f.onEscape.bind(function(l){return l(s,c)})}),it(Ne([pu,et([13])]),function(s,c,f){return f.onEnter.bind(function(l){return l(s,c)})})]),a=y([]);return wr(i,Ae.init,u,a,function(){return d.some(e)})}function hu(t,n,e){return di(e)&&et([32])(n.event())?d.none():function(o,r,i){return fs(o,i,Ro()),d.some(!0)}(t,0,e)}function gi(t,n){return d.some(!0)}function bh(t,n,e){return e.execute(t,n,t.element())}function yh(){var t=V(d.none());return ve({readState:function(){return t.get().map(function(n){return{numRows:String(n.numRows()),numColumns:String(n.numColumns())}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(n,e){t.set(d.some({numRows:y(n),numColumns:y(e)}))},getNumRows:function(){return t.get().map(function(n){return n.numRows()})},getNumColumns:function(){return t.get().map(function(n){return n.numColumns()})}})}function xh(t){return function(n,e,o,r){var i=t(n.element());return iv(i,n,e,o,r)}}function Rf(t,n){var e=ef(t,n);return xh(e)}function Vf(t,n){var e=ef(n,t);return xh(e)}function Hf(t){return function(n,e,o,r){return iv(t,n,e,o,r)}}function wh(t){return!function(n){return n.offsetWidth<=0&&n.offsetHeight<=0}(t.dom())}function Sh(t,n,e){var o=Jn(t,e);return function(r,i){return Ur(r,i).map(function(u){return{index:y(u),candidates:y(r)}})}(Ct(o,wh),function(r){return nn(r,n)})}function Ch(t,n){return Ur(t,function(e){return nn(n,e)})}function kh(t,n,e,o){return o(Math.floor(n/e),n%e).bind(function(r){var i=r.row()*e+r.column();return 0<=i&&i<t.length?d.some(t[i]):d.none()})}function Oh(t,n,e,o,r){return kh(t,n,o,function(i,u){var a=i===e-1?t.length-i*o:o,s=ai(u,r,0,a-1);return d.some({row:y(i),column:y(s)})})}function _h(t,n,e,o,r){return kh(t,n,o,function(i,u){var a=ai(i,r,0,e-1),s=a===e-1?t.length-a*o:o,c=po(u,0,s-1);return d.some({row:y(a),column:y(c)})})}function dO(t,n,e){cn(t.element(),n.selector).each(function(o){n.focusManager.set(t,o)})}function za(t){return function(n,e,o,r){return Sh(n,e,o.selector).bind(function(i){return t(i.candidates(),i.index(),r.getNumRows().getOr(o.initSize.numRows),r.getNumColumns().getOr(o.initSize.numColumns))})}}function Th(t,n,e){return e.captureTab?d.some(!0):d.none()}function La(t,n,e,o){var r=function(i,u,a){var s=ai(u,o,0,a.length-1);return s===i?d.none():function(c){return qe(c)==="button"&&Kt(c,"disabled")==="disabled"}(a[s])?r(i,s,a):d.from(a[s])};return Sh(t,e,n).bind(function(i){var u=i.index(),a=i.candidates();return r(u,u,a)})}function Nf(t,n,e){return function(o,r){return r.focusManager.get(o).bind(function(i){return Fe(i,r.selector)})}(t,e).bind(function(o){return e.execute(t,n,o)})}function mO(t,n,e){n.getInitial(t).orThunk(function(){return cn(t.element(),n.selector)}).each(function(o){n.focusManager.set(t,o)})}function Eh(t,n,e){return La(t,e.selector,n,-1)}function Bh(t,n,e){return La(t,e.selector,n,1)}function Dh(t){return function(n,e,o,r){return t(n,e,o,r).bind(function(){return o.executeOnMove?Nf(n,e,o):d.some(!0)})}}function gO(t,n,e){return e.onEscape(t,n)}function ja(t,n,e){return d.from(t[n]).bind(function(o){return d.from(o[e]).map(function(r){return MO({rowIndex:n,columnIndex:e,cell:r})})})}function Ah(t,n,e,o){var r=t[n].length,i=ai(e,o,0,r-1);return ja(t,n,i)}function Mh(t,n,e,o){var r=ai(e,o,0,t.length-1),i=t[r].length,u=po(n,0,i-1);return ja(t,r,u)}function Fh(t,n,e,o){var r=t[n].length,i=po(e+o,0,r-1);return ja(t,n,i)}function Ih(t,n,e,o){var r=po(e+o,0,t.length-1),i=t[r].length,u=po(n,0,i-1);return ja(t,r,u)}function pO(t,n,e){n.previousSelector(t).orThunk(function(){var o=n.selectors;return cn(t.element(),o.cell)}).each(function(o){n.focusManager.set(t,o)})}function Ua(t,n){return function(e,o,r){var i=r.cycles?t:n;return Fe(o,r.selectors.row).bind(function(u){var a=Jn(u,r.selectors.cell);return Ch(a,o).bind(function(s){var c=Jn(e,r.selectors.row);return Ch(c,u).bind(function(f){var l=function(m,h){return I(m,function(g){return Jn(g,h.selectors.cell)})}(c,r);return i(l,f,s).map(function(m){return m.cell()})})})})}}function Rh(t,n,e){return e.focusManager.get(t).bind(function(o){return e.execute(t,n,o)})}function hO(t,n,e){cn(t.element(),n.selector).each(function(o){n.focusManager.set(t,o)})}function Vh(t,n,e){return La(t,e.selector,n,-1)}function Hh(t,n,e){return La(t,e.selector,n,1)}function Pf(t,n,e,o){var r=t.getSystem().build(o);nh(t,r,e)}function Nh(t,n,e,o){var r=Ya(t);Xt(r,function(i){return nn(o.element(),i.element())}).each(xr)}function Ph(t,n,e,o,r){var i=Ya(t);return d.from(i[o]).map(function(u){return Nh(t,0,0,u),r.each(function(a){Pf(t,0,function(s,c){(function(f,l,m){ms(f,m).fold(function(){he(f,l)},function(h){ua(h,l)})})(s,c,o)},a)}),u})}function Z(t,n){return{key:t,value:{config:{},me:function(e,o){var r=xt(o);return on({fields:[E("enabled")],name:e,active:{events:y(r)}})}(t,n),configAsRaw:y({}),initialConfig:{},state:Ae}}}function zh(t,n){n.ignore||(Ho(t.element()),n.onFocus(t))}function Lh(t,n,e){var o=n.aria;o.update(t,o,e.get())}function jh(t,n,e){n.toggleClass.each(function(o){e.get()?en(t.element(),o):Ut(t.element(),o)})}function Uh(t,n,e){Xf(t,n,e,!e.get())}function Wh(t,n,e){e.set(!0),jh(t,n,e),Lh(t,n,e)}function Gh(t,n,e){e.set(!1),jh(t,n,e),Lh(t,n,e)}function Xh(t,n,e){Xf(t,n,e,n.selected)}function Yh(){function t(n,e){e.stop(),nr(n)}return[B(ru(),t),B(uu(),t),er(Io()),er(De())]}function Wa(t){return xt(Zt([t.map(function(n){return lo(function(e,o){n(e),o.stop()})}).toArray(),Yh()]))}function qh(t){(Ie(t.element()).isNone()||Y.isFocused(t))&&(Y.isFocused(t)||Y.focus(t),j(t,mv,{item:t}))}function Kh(t){j(t,gv,{item:t})}function vO(t,n){var e={};yn(t,function(u,a){K(u,function(s){e[s]=a})});var o=n,r=function(u){return pm(u,function(a,s){return{k:a,v:s}})}(n),i=Pt(r,function(u,a){return[a].concat(vv(e,o,r,a))});return Pt(e,function(u){return J(i,u).getOr([u])})}function Jh(t){return t.x()}function $h(t,n){return t.x()+t.width()/2-n.width()/2}function Qh(t,n){return t.x()+t.width()-n.width()}function zf(t){return t.y()}function Lf(t,n){return t.y()+t.height()-n.height()}function pi(t,n,e){return hn(Jh(t),Lf(t,n),e.innerSoutheast(),Oa(),"layout-se")}function hi(t,n,e){return hn(Qh(t,n),Lf(t,n),e.innerSouthwest(),uf(),"layout-sw")}function Sr(t,n,e){return hn(Jh(t),zf(t),e.innerNortheast(),af(),"layout-ne")}function Cr(t,n,e){return hn(Qh(t,n),zf(t),e.innerNorthwest(),cf(),"layout-nw")}function Zh(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))}function tv(t){return t.getParam("width",vi.DOM.getStyle(t.getElement(),"width"))}function nv(t){return d.from(t.settings.min_width).filter(co)}function ev(t){return d.from(t.settings.min_height).filter(co)}function jf(t){return d.from(t.getParam("max_width")).filter(co)}function ov(t){return d.from(t.getParam("max_height")).filter(co)}function Uf(t){return t.getParam("menubar",!0,"boolean")!==!1}function Wf(t){var n=t.getParam("toolbar",!0),e=n===!0,o=Yt(n),r=ao(n)&&0<n.length;return!qa(t)&&(r||o||e)}function rv(t){var n=Ht(t.settings),e=Ct(n,function(i){return/^toolbar([1-9])$/.test(i)}),o=I(e,function(i){return t.getParam(i,!1,"string")}),r=Ct(o,function(i){return typeof i=="string"});return 0<r.length?d.some(r):d.none()}var Gf,$n,Ga,bO=vh(un("cyclic",y(!1))),yO=vh(un("cyclic",y(!0))),xO=[k("execute",hu),k("useSpace",!1),k("useEnter",!0),k("useControlEnter",!1),k("useDown",!1)],wO=wr(xO,Ae.init,function(t,n,e,o){var r=e.useSpace&&!di(t.element())?[32]:[],i=e.useEnter?[13]:[],u=e.useDown?[40]:[],a=r.concat(i).concat(u);return[it(et(a),bh)].concat(e.useControlEnter?[it(Ne([rO,et([13])]),bh)]:[])},function(t,n,e,o){return e.useSpace&&!di(t.element())?[it(et([32]),gi)]:[]},function(){return d.none()}),SO=Object.freeze({__proto__:null,flatgrid:yh,init:function(t){return t.state(t)}}),iv=function(t,n,e,o,r){return o.focusManager.get(n).bind(function(i){return t(n.element(),i,o,r)}).map(function(i){return o.focusManager.set(n,i),!0})},uv=Hf,av=Hf,Xa=Hf,CO=[E("selector"),k("execute",hu),Nn("onEscape"),k("captureTab",!1),ep()],cv=za(function(t,n,e,o){return Oh(t,n,e,o,-1)}),sv=za(function(t,n,e,o){return Oh(t,n,e,o,1)}),kO=za(function(t,n,e,o){return _h(t,n,e,o,-1)}),OO=za(function(t,n,e,o){return _h(t,n,e,o,1)}),_O=y([it(et([37]),Rf(cv,sv)),it(et([39]),Vf(cv,sv)),it(et([38]),uv(kO)),it(et([40]),av(OO)),it(Ne([mi,et([9])]),Th),it(Ne([pu,et([9])]),Th),it(et([27]),function(t,n,e){return e.onEscape(t,n)}),it(et([32].concat([13])),function(t,n,e,o){return function(r,i){return i.focusManager.get(r).bind(function(u){return Fe(u,i.selector)})}(t,e).bind(function(r){return e.execute(t,n,r)})})]),TO=y([it(et([32]),gi)]),EO=wr(CO,yh,_O,TO,function(){return d.some(dO)}),BO=[E("selector"),k("getInitial",d.none),k("execute",hu),Nn("onEscape"),k("executeOnMove",!1),k("allowVertical",!0)],DO=y([it(et([32]),gi)]),AO=wr(BO,Ae.init,function(t,n,e,o){var r=[37].concat(e.allowVertical?[38]:[]),i=[39].concat(e.allowVertical?[40]:[]);return[it(et(r),Dh(Rf(Eh,Bh))),it(et(i),Dh(Vf(Eh,Bh))),it(et([13]),Nf),it(et([32]),Nf),it(et([27]),gO)]},DO,function(){return d.some(mO)}),MO=ra(["rowIndex","columnIndex","cell"],[]),FO=[_o("selectors",[E("row"),E("cell")]),k("cycles",!0),k("previousSelector",d.none),k("execute",hu)],fv=Ua(function(t,n,e){return Ah(t,n,e,-1)},function(t,n,e){return Fh(t,n,e,-1)}),lv=Ua(function(t,n,e){return Ah(t,n,e,1)},function(t,n,e){return Fh(t,n,e,1)}),IO=Ua(function(t,n,e){return Mh(t,e,n,-1)},function(t,n,e){return Ih(t,e,n,-1)}),RO=Ua(function(t,n,e){return Mh(t,e,n,1)},function(t,n,e){return Ih(t,e,n,1)}),VO=y([it(et([37]),Rf(fv,lv)),it(et([39]),Vf(fv,lv)),it(et([38]),uv(IO)),it(et([40]),av(RO)),it(et([32].concat([13])),function(t,n,e){return Ie(t.element()).bind(function(o){return e.execute(t,n,o)})})]),HO=y([it(et([32]),gi)]),NO=wr(FO,Ae.init,VO,HO,function(){return d.some(pO)}),PO=[E("selector"),k("execute",hu),k("moveOnTab",!1)],zO=y([it(et([38]),Xa(Vh)),it(et([40]),Xa(Hh)),it(Ne([mi,et([9])]),function(t,n,e,o){return e.moveOnTab?Xa(Vh)(t,n,e,o):d.none()}),it(Ne([pu,et([9])]),function(t,n,e,o){return e.moveOnTab?Xa(Hh)(t,n,e,o):d.none()}),it(et([13]),Rh),it(et([32]),Rh)]),LO=y([it(et([32]),gi)]),jO=wr(PO,Ae.init,zO,LO,function(){return d.some(hO)}),UO=[Nn("onSpace"),Nn("onEnter"),Nn("onShiftEnter"),Nn("onLeft"),Nn("onRight"),Nn("onTab"),Nn("onShiftTab"),Nn("onUp"),Nn("onDown"),Nn("onEscape"),k("stopSpaceKeyup",!1),ft("focusIn")],WO=wr(UO,Ae.init,function(t,n,e){return[it(et([32]),e.onSpace),it(Ne([pu,et([13])]),e.onEnter),it(Ne([mi,et([13])]),e.onShiftEnter),it(Ne([mi,et([9])]),e.onShiftTab),it(Ne([pu,et([9])]),e.onTab),it(et([38]),e.onUp),it(et([40]),e.onDown),it(et([37]),e.onLeft),it(et([39]),e.onRight),it(et([32]),e.onSpace),it(et([27]),e.onEscape)]},function(t,n,e){return e.stopSpaceKeyup?[it(et([32]),gi)]:[]},function(t){return t.focusIn}),GO=bO.schema(),XO=yO.schema(),YO=AO.schema(),qO=EO.schema(),KO=NO.schema(),JO=wO.schema(),$O=jO.schema(),QO=WO.schema(),L=Yg({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:GO,cyclic:XO,flow:YO,flatgrid:qO,matrix:KO,execution:JO,menu:$O,special:QO}),name:"keying",active:{events:function(t,n){return t.handler.toEvents(t,n)}},apis:{focusIn:function(t,n,e){n.sendFocusIn(n).fold(function(){t.getSystem().triggerFocus(t.element(),t.element())},function(o){o(t,n,e)})},setGridSize:function(t,n,e,o,r){(function(i){return ee(i,"setGridSize")})(e)?e.setGridSize(o,r):F.console.error("Layout does not support setGridSize")}},state:SO}),Ya=function(t,n){return t.components()},G=on({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(t,n,e,o){Pf(t,0,he,o)},prepend:function(t,n,e,o){Pf(t,0,_S,o)},remove:Nh,replaceAt:Ph,replaceBy:function(t,n,e,o,r){var i=Ya(t);return Ur(i,o).bind(function(u){return Ph(t,0,0,u,r)})},set:function(t,n,e,o){qg(function(){var r=I(o,t.getSystem().build);Ep(t,r)},t.element())},contents:Ya})}),ZO=Object.freeze({__proto__:null,focus:zh,blur:function(t,n){n.ignore||function(e){e.dom().blur()}(t.element())},isFocused:function(t){return function(n){var e=Yn(n).dom();return n.dom()===e.activeElement}(t.element())}}),t1=Object.freeze({__proto__:null,exhibit:function(t,n){var e=n.ignore?{}:{attributes:{tabindex:"-1"}};return Te(e)},events:function(t){return xt([B(fr(),function(n,e){zh(n,t),e.stop()})].concat(t.stopMousedown?[B(De(),function(n,e){e.event().prevent()})]:[]))}}),n1=[dt("onFocus"),k("stopMousedown",!1),k("ignore",!1)],Y=on({fields:n1,name:"focusing",active:t1,apis:ZO}),Xf=function(t,n,e,o){(o?Wh:Gh)(t,n,e)},e1=Object.freeze({__proto__:null,onLoad:Xh,toggle:Uh,isOn:function(t,n,e){return e.get()},on:Wh,off:Gh,set:Xf}),o1=Object.freeze({__proto__:null,exhibit:function(){return Te({})},events:function(t,n){var e=function(r,i,u){return lo(function(a){u(a,r,i)})}(t,n,Uh),o=nf(t,n,Xh);return xt(Zt([t.toggleOnExecute?[e]:[],[o]]))}}),dv=function(t,n,e){lt(t.element(),"aria-expanded",e)},r1=[k("selected",!1),ft("toggleClass"),k("toggleOnExecute",!0),ge("aria",{mode:"none"},me("mode",{pressed:[k("syncWithExpanded",!1),wt("update",function(t,n,e){lt(t.element(),"aria-pressed",e),n.syncWithExpanded&&dv(t,n,e)})],checked:[wt("update",function(t,n,e){lt(t.element(),"aria-checked",e)})],expanded:[wt("update",dv)],selected:[wt("update",function(t,n,e){lt(t.element(),"aria-selected",e)})],none:[wt("update",P)]}))],ut=on({fields:r1,name:"toggling",active:o1,apis:e1,state:(Gf=!1,{init:function(){var t=V(Gf);return{get:function(){return t.get()},set:function(n){return t.set(n)},clear:function(){return t.set(Gf)},readState:function(){return t.get()}}}})}),mv="alloy.item-hover",gv="alloy.item-focus",pv=y(mv),i1=y(gv),u1=[E("data"),E("components"),E("dom"),k("hasSubmenu",!1),ft("toggling"),si("itemBehaviours",[ut,Y,L,M]),k("ignoreFocus",!1),k("domModification",{}),wt("builder",function(t){return{dom:t.dom,domModification:O(O({},t.domModification),{attributes:O(O(O({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:fi(t.itemBehaviours,[t.toggling.fold(ut.revoke,function(n){return ut.config(O({aria:{mode:"checked"}},n))}),Y.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(n){Kh(n)}}),L.config({mode:"execution"}),M.config({store:{mode:"memory",initialValue:t.data}}),Z("item-type-events",jt(Yh(),[B(cr(),qh),B(iu(),Y.focus)]))]),components:t.components,eventOrder:t.eventOrder}}),k("eventOrder",{})],a1=[E("dom"),E("components"),wt("builder",function(t){return{dom:t.dom,components:t.components,events:xt([function(n){return B(n,function(e,o){o.stop()})}(iu())])}})],Yf=y([sn({name:"widget",overrides:function(t){return{behaviours:A([M.config({store:{mode:"manual",getValue:function(n){return t.data},setValue:function(){}}})])}}})]),c1=[E("uid"),E("data"),E("components"),E("dom"),k("autofocus",!1),k("ignoreFocus",!1),si("widgetBehaviours",[M,Y,L]),k("domModification",{}),_f(Yf()),wt("builder",function(t){function n(i){return vt(i,t,"widget").map(function(u){return L.focusIn(u),u})}function e(i,u){return di(u.event().target())||t.autofocus&&u.setSource(i.element()),d.none()}var o=Cf(0,t,Yf()),r=kf("item-widget",t,o.internals());return{dom:t.dom,components:r,domModification:t.domModification,events:xt([lo(function(i,u){n(i).each(function(a){u.stop()})}),B(cr(),qh),B(iu(),function(i,u){t.autofocus?n(i):Y.focus(i)})]),behaviours:fi(t.widgetBehaviours,[M.config({store:{mode:"memory",initialValue:t.data}}),Y.config({ignore:t.ignoreFocus,onFocus:function(i){Kh(i)}}),L.config({mode:"special",focusIn:t.autofocus?function(i){n(i)}:KC(),onLeft:e,onRight:e,onEscape:function(i,u){return Y.isFocused(i)||t.autofocus?(t.autofocus&&u.setSource(i.element()),d.none()):(Y.focus(i),d.some(!0))}})])}})],s1=me("type",{widget:c1,item:u1,separator:a1}),f1=y([Ha({factory:{sketch:function(t){var n=mn("menu.spec item",s1,t);return n.builder(n)}},name:"items",unit:"item",defaults:function(t,n){return n.hasOwnProperty("uid")?n:O(O({},n),{uid:Yi("item")})},overrides:function(t,n){return{type:n.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),l1=y([E("value"),E("items"),E("dom"),E("components"),k("eventOrder",{}),Gt("menuBehaviours",[mt,M,at,L]),ge("movement",{mode:"menu",moveOnTab:!0},me("mode",{grid:[ep(),wt("config",function(t,n){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:n.initSize.numColumns,numRows:n.initSize.numRows},focusManager:t.focusManager}})],matrix:[wt("config",function(t,n){return{mode:"matrix",selectors:{row:n.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}}),E("rowSelector")],menu:[k("moveOnTab",!0),wt("config",function(t,n){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:n.moveOnTab,focusManager:t.focusManager}})]})),Xn("markers",UC()),k("fakeFocus",!1),k("focusManager",Na()),dt("onHighlight")]),hv=y("alloy.menu-focus"),zo=On({name:"Menu",configFields:l1(),partFields:f1(),factory:function(t,n,e,o){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Jt(t.menuBehaviours,[mt.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),M.config({store:{mode:"memory",initialValue:t.value}}),at.config({find:d.some}),L.config(t.movement.config(t,t.movement))]),events:xt([B(i1(),function(r,i){var u=i.event();r.getSystem().getByDom(u.target()).each(function(a){mt.highlight(r,a),i.stop(),j(r,hv(),{menu:r,item:a})})}),B(pv(),function(r,i){var u=i.event().item();mt.highlight(r,u)})]),components:n,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),vv=function(t,n,e,o){return J(e,o).bind(function(r){return J(t,r).bind(function(i){var u=vv(t,n,e,i);return d.some([i].concat(u))})}).getOr([])},bv=function(t){return t.type==="prepared"?d.some(t.menu):d.none()},yv={init:function(){function t(c,f,l){return u(c).bind(function(m){return function(h){return mm(n.get(),function(g,b){return g===h})}(c).bind(function(h){return f(h).map(function(g){return{triggeredMenu:m,triggeringItem:g,triggeringPath:l}})})})}var n=V({}),e=V({}),o=V({}),r=V(d.none()),i=V({}),u=function(c){return a(c).bind(bv)},a=function(c){return J(e.get(),c)},s=function(c){return J(n.get(),c)};return{setMenuBuilt:function(c,f){var l;e.set(O(O({},e.get()),((l={})[c]={type:"prepared",menu:f},l)))},setContents:function(c,f,l,m){r.set(d.some(c)),n.set(l),e.set(f),i.set(m);var h=vO(m,l);o.set(h)},expand:function(c){return J(n.get(),c).map(function(f){var l=J(o.get(),c).getOr([]);return[f].concat(l)})},refresh:function(c){return J(o.get(),c)},collapse:function(c){return J(o.get(),c).bind(function(f){return 1<f.length?d.some(f.slice(1)):d.none()})},lookupMenu:a,lookupItem:s,otherMenus:function(c){var f=i.get();return os(Ht(f),c)},getPrimary:function(){return r.get().bind(u)},getMenus:function(){return e.get()},clear:function(){n.set({}),e.set({}),o.set({}),r.set(d.none())},isClear:function(){return r.get().isNone()},getTriggeringPath:function(c,f){var l=Ct(s(c).toArray(),function(m){return u(m).isSome()});return J(o.get(),c).bind(function(m){var h=Hi(l.concat(m));return function(g){for(var b=[],p=0;p<g.length;p++){var x=g[p];if(!x.isSome())return d.none();b.push(x.getOrDie())}return d.some(b)}(At(h,function(g,b){return t(g,f,h.slice(0,b+1)).fold(function(){return r.get().is(g)?[]:[d.none()]},function(p){return[d.some(p)]})}))})}}},extractPreparedMenu:bv},d1=y("collapse-item"),kr=ie({name:"TieredMenu",configFields:[qs("onExecute"),qs("onEscape"),hr("onOpenMenu"),hr("onOpenSubmenu"),dt("onRepositionMenu"),dt("onCollapseMenu"),k("highlightImmediately",!0),_o("data",[E("primary"),E("menus"),E("expansions")]),k("fakeFocus",!1),dt("onHighlight"),dt("onHover"),wa(),E("dom"),k("navigateOnHover",!0),k("stayInDom",!1),Gt("tmenuBehaviours",[L,mt,at,G]),k("eventOrder",{})],apis:{collapseMenu:function(t,n){t.collapseMenu(n)},highlightPrimary:function(t,n){t.highlightPrimary(n)},repositionMenus:function(t,n){t.repositionMenus(n)}},factory:function(t,n){function e(w){var C=function(T,D,H){return Pt(H,function(U,q){function tt(){return zo.sketch(O(O({dom:U.dom},U),{value:q,items:U.items,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:t.fakeFocus?mh():Na()}))}return q===D?{type:"prepared",menu:T.getSystem().build(tt())}:{type:"notbuilt",nbMenu:tt}})}(w,t.data.primary,t.data.menus),_=h();return m.setContents(t.data.primary,C,t.data.expansions,_),m.getPrimary()}function o(w){return M.getValue(w).value}function r(w,C){mt.highlight(w,C),mt.getHighlighted(C).orThunk(function(){return mt.getFirst(C)}).each(function(_){fs(w,_.element(),iu())})}function i(w,C){return li(I(C,function(_){return w.lookupMenu(_).bind(function(T){return T.type==="prepared"?d.some(T.menu):d.none()})}))}function u(w,C,_){var T=i(C,C.otherMenus(_));K(T,function(D){Ao(D.element(),[t.markers.backgroundMenu]),t.stayInDom||G.remove(w,D)})}function a(w,C){var _=function(T){return l.get().getOrThunk(function(){var D={},H=Jn(T.element(),"."+t.markers.item),U=Ct(H,function(q){return Kt(q,"aria-haspopup")==="true"});return K(U,function(q){T.getSystem().getByDom(q).each(function(tt){var St=o(tt);D[St]=tt})}),l.set(d.some(D)),D})}(w);yn(_,function(T,D){var H=Mt(C,D);lt(T.element(),"aria-expanded",H)})}function s(w,C,_){return d.from(_[0]).bind(function(T){return C.lookupMenu(T).bind(function(D){if(D.type==="notbuilt")return d.none();var H=D.menu,U=i(C,_.slice(1));return K(U,function(q){en(q.element(),t.markers.backgroundMenu)}),Mo(H.element())||G.append(w,Kn(H)),Ao(H.element(),[t.markers.backgroundMenu]),r(w,H),u(w,C,_),d.some(H)})})}var c,f,l=V(d.none()),m=yv.init(),h=function(w){return Pt(t.data.menus,function(C,_){return At(C.items,function(T){return T.type==="separator"?[]:[T.data.value]})})};(f=c=c||{})[f.HighlightSubmenu=0]="HighlightSubmenu",f[f.HighlightParent=1]="HighlightParent";function g(w,C,_){_===void 0&&(_=c.HighlightSubmenu);var T=o(C);return m.expand(T).bind(function(D){return a(w,D),d.from(D[0]).bind(function(H){return m.lookupMenu(H).bind(function(U){var q=function(tt,St,Ot){if(Ot.type!=="notbuilt")return Ot.menu;var Lt=tt.getSystem().build(Ot.nbMenu());return m.setMenuBuilt(St,Lt),Lt}(w,H,U);return Mo(q.element())||G.append(w,Kn(q)),t.onOpenSubmenu(w,C,q,Hi(D)),_===c.HighlightSubmenu?(mt.highlightFirst(q),s(w,m,D)):(mt.dehighlightAll(q),d.some(C))})})})}function b(w,C){var _=o(C);return m.collapse(_).bind(function(T){return a(w,T),s(w,m,T).map(function(D){return t.onCollapseMenu(w,C,D),D})})}function p(w){return function(C,_){return Fe(_.getSource(),"."+t.markers.item).bind(function(T){return C.getSystem().getByDom(T).toOption().bind(function(D){return w(C,D).map(function(){return!0})})})}}function x(w){return mt.getHighlighted(w).bind(mt.getHighlighted)}var v=xt([B(hv(),function(w,C){var _=C.event().item();m.lookupItem(o(_)).each(function(){var T=C.event().menu();mt.highlight(w,T);var D=o(C.event().item());m.refresh(D).each(function(H){return u(w,m,H)})})}),lo(function(w,C){var _=C.event().target();w.getSystem().getByDom(_).each(function(T){o(T).indexOf("collapse-item")===0&&b(w,T),g(w,T,c.HighlightSubmenu).fold(function(){t.onExecute(w,T)},function(){})})}),It(function(w,C){e(w).each(function(_){G.append(w,Kn(_)),t.onOpenMenu(w,_),t.highlightImmediately&&r(w,_)})})].concat(t.navigateOnHover?[B(pv(),function(w,C){var _=C.event().item();(function(T,D){var H=o(D);m.refresh(H).bind(function(U){return a(T,U),s(T,m,U)})})(w,_),g(w,_,c.HighlightParent),t.onHover(w,_)})]:[])),S={collapseMenu:function(w){x(w).each(function(C){b(w,C)})},highlightPrimary:function(w){m.getPrimary().each(function(C){r(w,C)})},repositionMenus:function(w){m.getPrimary().bind(function(C){return x(w).bind(function(_){var T=o(_),D=Ju(m.getMenus()),H=li(I(D,yv.extractPreparedMenu));return m.getTriggeringPath(T,function(U){return function(q,tt,St){return fe(tt,function(Ot){if(!Ot.getSystem().isConnected())return d.none();var Lt=mt.getCandidates(Ot);return Xt(Lt,function(vn){return o(vn)===St})})}(0,H,U)})}).map(function(_){return{primary:C,triggeringPath:_}})}).fold(function(){(function(C){return d.from(C.components()[0]).filter(function(_){return Kt(_.element(),"role")==="menu"})})(w).each(function(C){t.onRepositionMenu(w,C,[])})},function(C){var _=C.primary,T=C.triggeringPath;t.onRepositionMenu(w,_,T)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Jt(t.tmenuBehaviours,[L.config({mode:"special",onRight:p(function(w,C){return di(C.element())?d.none():g(w,C,c.HighlightSubmenu)}),onLeft:p(function(w,C){return di(C.element())?d.none():b(w,C)}),onEscape:p(function(w,C){return b(w,C).orThunk(function(){return t.onEscape(w,C).map(function(){return w})})}),focusIn:function(w,C){m.getPrimary().each(function(_){fs(w,_.element(),iu())})}}),mt.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),at.config({find:function(w){return mt.getHighlighted(w)}}),G.config({})]),eventOrder:t.eventOrder,apis:S,events:v}},extraApis:{tieredData:function(t,n,e){return{primary:t,menus:n,expansions:e}},singleData:function(t,n){return{primary:t,menus:Xe(t,n),expansions:{}}},collapseItem:function(t){return{value:N(d1()),meta:{text:t}}}}}),kt=ie({name:"InlineView",configFields:[E("lazySink"),dt("onShow"),dt("onHide"),Gi("onEscape"),Gt("inlineBehaviours",[rt,M,Re]),oe("fireDismissalEventInstead",[k("event",ni())]),oe("fireRepositionEventInstead",[k("event",bg())]),k("getRelated",d.none),k("eventOrder",d.none)],factory:function(t,n){function e(a){rt.isOpen(a)&&M.getValue(a).each(function(s){switch(s.mode){case"menu":rt.getState(a).each(function(f){kr.repositionMenus(f)});break;case"position":var c=t.lazySink(a).getOrDie();Fn.positionWithinBounds(c,s.anchor,a,s.getBounds())}})}var o=function(a,s,c,f){r(a,s,c,function(){return f.map(function(l){return be(l)})})},r=function(a,s,c,f){var l=t.lazySink(a).getOrDie();rt.openWhileCloaked(a,c,function(){return Fn.positionWithinBounds(l,s,a,f())}),M.setValue(a,d.some({mode:"position",anchor:s,getBounds:f}))},i=function(a,s,c,f){var l=function(m,h,g,b,p){function x(){return m.lazySink(h)}function v(w){return function(C){return C.length===2}(w)?S:{}}var S=b.type==="horizontal"?{layouts:{onLtr:function(){return Zs()},onRtl:function(){return tf()}}}:{};return kr.sketch({dom:{tag:"div"},data:b.data,markers:b.menu.markers,highlightImmediately:b.menu.highlightImmediately,onEscape:function(){return rt.close(h),m.onEscape.map(function(w){return w(h)}),d.some(!0)},onExecute:function(){return d.some(!0)},onOpenMenu:function(w,C){Fn.positionWithinBounds(x().getOrDie(),g,C,p())},onOpenSubmenu:function(w,C,_,T){var D=x().getOrDie();Fn.position(D,O({anchor:"submenu",item:C},v(T)),_)},onRepositionMenu:function(w,C,_){var T=x().getOrDie();Fn.positionWithinBounds(T,g,C,p()),K(_,function(D){var H=v(D.triggeringPath);Fn.position(T,O({anchor:"submenu",item:D.triggeringItem},H),D.triggeredMenu)})}})}(t,a,s,c,f);rt.open(a,l),M.setValue(a,d.some({mode:"menu",menu:l}))},u={setContent:function(a,s){rt.setContent(a,s)},showAt:function(a,s,c){o(a,s,c,d.none())},showWithin:o,showWithinBounds:r,showMenuAt:function(a,s,c){i(a,s,c,function(){return d.none()})},showMenuWithinBounds:i,hide:function(a){rt.isOpen(a)&&(M.setValue(a,d.none()),rt.close(a))},getContent:function(a){return rt.getState(a)},reposition:e,isOpen:rt.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Jt(t.inlineBehaviours,[rt.config({isPartOf:function(a,s,c){return gr(s,c)||function(f,l){return t.getRelated(f).exists(function(m){return gr(m,l)})}(a,c)},getAttachPoint:function(a){return t.lazySink(a).getOrDie()},onOpen:function(a){t.onShow(a)},onClose:function(a){t.onHide(a)}}),M.config({store:{mode:"memory",initialValue:d.none()}}),Re.config({channels:O(O({},pf(O({isExtraPart:y(!1)},t.fireDismissalEventInstead.map(function(a){return{fireEventInstead:{event:a.event}}}).getOr({})))),hf(O(O({isExtraPart:y(!1)},t.fireRepositionEventInstead.map(function(a){return{fireEventInstead:{event:a.event}}}).getOr({})),{doReposition:e})))})]),eventOrder:t.eventOrder,apis:u}},apis:{showAt:function(t,n,e,o){t.showAt(n,e,o)},showWithin:function(t,n,e,o,r){t.showWithin(n,e,o,r)},showWithinBounds:function(t,n,e,o,r){t.showWithinBounds(n,e,o,r)},showMenuAt:function(t,n,e,o){t.showMenuAt(n,e,o)},showMenuWithinBounds:function(t,n,e,o,r){t.showMenuWithinBounds(n,e,o,r)},hide:function(t,n){t.hide(n)},isOpen:function(t,n){return t.isOpen(n)},getContent:function(t,n){return t.getContent(n)},setContent:function(t,n,e){t.setContent(n,e)},reposition:function(t,n){t.reposition(n)}}}),ho=function(t,n,e){return hn($h(t,n),zf(t),e.innerNorth(),rp(),"layout-n")},Or=function(t,n,e){return hn($h(t,n),Lf(t,n),e.innerSouth(),op(),"layout-s")},Pe=tinymce.util.Tools.resolve("tinymce.util.Delay"),vi=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),m1=tinymce.util.Tools.resolve("tinymce.EditorManager"),qa=function(t){return rv(t).fold(function(){return 0<t.getParam("toolbar",[],"string[]").length},function(){return!0})};(Ga=$n=$n||{}).default="wrap",Ga.floating="floating",Ga.sliding="sliding",Ga.scrolling="scrolling";function vu(t){return t.getParam("toolbar_mode","","string")}var Ka,xv;(xv=Ka=Ka||{}).top="top",xv.bottom="bottom";function wv(t){var n=function(e){return e.getParam("fixed_toolbar_container","","string")}(t);return 0<n.length&&t.inline?cn(Je(),n):d.none()}function Ja(t){return t.inline&&wv(t).isSome()}function Sv(t){return t.inline&&!Uf(t)&&!Wf(t)&&!qa(t)}function $a(t){return(t.getParam("toolbar_sticky",!1,"boolean")||t.inline)&&!Ja(t)&&!Sv(t)}function gt(t){var n=function(o){return o.uid!==void 0}(t)&&ee(t,"uid")?t.uid:Yi("memento");return{get:function(e){return e.getSystem().getByUid(n).getOrDie()},getOpt:function(e){return e.getSystem().getByUid(n).toOption()},asSpec:function(){return O(O({},t),{uid:n})}}}function qf(t){return d.from(t()["temporary-placeholder"]).getOr("!not found!")}function jn(t,n){return d.from(n()[t]).getOrThunk(function(){return qf(n)})}var Qe=function(t){return t.getParam("toolbar_location",Ka.top,"string")!==Ka.bottom},_n=ie({name:"Button",factory:function(t){function n(r){return J(t.dom,"attributes").bind(function(i){return J(i,r)})}var e=Wa(t.action),o=t.dom.tag;return{uid:t.uid,dom:t.dom,components:t.components,events:e,behaviours:fi(t.buttonBehaviours,[Y.config({}),L.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if(o!=="button")return{role:n("role").getOr("button")};var r=n("type").getOr("button"),i=n("role").map(function(u){return{role:u}}).getOr({});return O({type:r},i)}()},eventOrder:t.eventOrder}},configFields:[k("uid",void 0),E("dom"),k("components",[]),si("buttonBehaviours",[Y,L]),ft("action"),ft("role"),k("eventOrder",{})]}),g1={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Kf=ie({name:"Notification",factory:function(t){function n(a){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+a+"%"}}}}function e(a){return{dom:{tag:"div",classes:["tox-text"],innerHtml:a+"%"}}}var o=gt({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:A([G.config({})])}),r=gt({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(0)]},e(0)],behaviours:A([G.config({})])}),i={updateProgress:function(a,s){a.getSystem().isConnected()&&r.getOpt(a).each(function(c){G.set(c,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(s)]},e(s)])})},updateText:function(a,s){if(a.getSystem().isConnected()){var c=o.get(a);G.set(c,[Fo(s)])}}},u=Zt([t.icon.toArray(),t.level.toArray(),t.level.bind(function(a){return d.from(g1[a])}).toArray()]);return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(function(a){return["tox-notification","tox-notification--in","tox-notification--"+a]}).getOr(["tox-notification","tox-notification--in"])},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:function(a,s){return fe(a,function(c){return d.from(s()[c])}).getOrThunk(function(){return qf(s)})}(u,t.iconProvider)}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[o.asSpec()],behaviours:A([G.config({})])}].concat(t.progress?[r.asSpec()]:[]).concat(t.closeButton?[_n.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:jn("close",t.iconProvider),attributes:{"aria-label":t.translationProvider("Close")}}}],action:function(a){t.onAction(a)}})]:[]),apis:i}},configFields:[ft("level"),E("progress"),E("icon"),E("onAction"),E("text"),E("iconProvider"),E("translationProvider"),tn("closeButton",!0)],apis:{updateProgress:function(t,n,e){t.updateProgress(n,e)},updateText:function(t,n,e){t.updateText(n,e)}}});function p1(t,n,e){var o=n.backstage,r=Qe(t);return{open:function(i,u){function a(){u(),kt.hide(f)}var s=!i.closeButton&&i.timeout&&(0<i.timeout||i.timeout<0),c=wn(Kf.sketch({text:i.text,level:Mt(["success","error","warning","warn","info"],i.type)?i.type:void 0,progress:i.progressBar===!0,icon:d.from(i.icon),closeButton:!s,onAction:a,iconProvider:o.shared.providers.icons,translationProvider:o.shared.providers.translate})),f=wn(kt.sketch(O({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:n.backstage.shared.getSink,fireDismissalEventInstead:{}},r?{}:{fireRepositionEventInstead:{}})));return e.add(f),0<i.timeout&&Pe.setTimeout(function(){a()},i.timeout),{close:a,moveTo:function(l,m){kt.showAt(f,{anchor:"makeshift",x:l,y:m},Kn(c))},moveRel:function(l,m){if(m!=="banner"){var h=function(b){switch(b){case"bc-bc":return Or;case"tc-tc":return ho;case"tc-bc":return Ln;case"bc-tc":default:return kn}}(m),g={anchor:"node",root:Je(),node:d.some(z.fromDom(l)),layouts:{onRtl:function(){return[h]},onLtr:function(){return[h]}}};kt.showAt(f,g,Kn(c))}else kt.showAt(f,n.backstage.shared.anchors.banner(),Kn(c))},text:function(l){Kf.updateText(c,l)},settings:i,getEl:function(){return c.element().dom()},progressBar:{value:function(l){Kf.updateProgress(c,l)}}}},close:function(i){i.close()},reposition:function(i){(function(u){K(u,function(a){return a.moveTo(0,0)})})(i),function(u){0<u.length&&(zi(u).each(function(a){return a.moveRel(null,"banner")}),K(u,function(a,s){0<s&&a.moveRel(u[s-1].getEl(),"bc-tc")}))}(i)},getArgs:function(i){return i.settings}}}function Cv(t,n){var e=null;return{cancel:function(){e!==null&&(F.clearTimeout(e),e=null)},throttle:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];e!==null&&F.clearTimeout(e),e=F.setTimeout(function(){t.apply(null,o),e=null},n)}}}function kv(t,n,e,o,r){var i=D1(t,function(u){return function(a,s){return a.isBlock(s)||Mt(["BR","IMG","HR","INPUT"],s.nodeName)||a.getContentEditable(s)==="false"}(t,u)});return d.from(i.backwards(n,e,o,r))}function h1(t,n){return tc(z.fromDom(t.selection.getNode())).getOrThunk(function(){var e=z.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return he(e,z.fromDom(n.extractContents())),n.insertNode(e.dom()),Vn(e).each(function(o){return o.dom().normalize()}),function(o){return Ck(o,mk)}(e).map(function(o){t.selection.setCursorLocation(o.dom(),function(r){return qe(r)==="img"?1:lp(r).fold(function(){return _e(r).length},function(i){return i.length})}(o))}),e})}function Ov(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")}function _v(t){return t!==""&&` \xA0\f
\r	\v`.indexOf(t)!==-1}function Jf(t,n){return t.substring(n.length)}function v1(t,n,e,o){if(o===void 0&&(o=0),!function(i){return i.collapsed&&i.startContainer.nodeType===3}(n))return d.none();var r=t.getParent(n.startContainer,t.isBlock)||t.getRoot();return kv(t,n.startContainer,n.startOffset,function(i,u,a){return function(s,c,f){var l;for(l=c-1;0<=l;l--){var m=s.charAt(l);if(_v(m))return d.none();if(m===f)break}return d.some(l)}(a,u,e).getOr(u)},r).bind(function(i){var u=n.cloneRange();if(u.setStart(i.container,i.offset),u.setEnd(n.endContainer,n.endOffset),u.collapsed)return d.none();var a=Ov(u);return a.lastIndexOf(e)!==0||Jf(a,e).length<o?d.none():d.some({text:Jf(a,e),range:u,triggerChar:e})})}function $f(t,n,e,o){return o===void 0&&(o=0),tc(z.fromDom(n.startContainer)).fold(function(){return v1(t,n,e,o)},function(r){var i=t.createRng();i.selectNode(r.dom());var u=Ov(i);return d.some({range:i,text:Jf(u,e),triggerChar:e})})}function Qf(t,n){return{container:t,offset:n}}function b1(t){return function(n){var e=Vv(n.startContainer,n.startOffset);return!function(o,r){return kv(o,r.container,r.offset,function(i,u){return u===0?-1:u},o.getRoot()).filter(function(i){var u=i.container.data.charAt(i.offset-1);return!_v(u)}).isSome()}(t,e)}}function y1(t,n){var e=n(),o=t.selection.getRng();return function(r,i,u){return fe(u.triggerChars,function(a){return $f(r,i,a)})}(t.dom,o,e).bind(function(r){return Hv(t,n,r)})}function x1(t){var n=t.ui.registry.getAll().popups,e=Pt(n,function(i){return function(u){return Et("Autocompleter",F1,u)}(i).fold(function(u){throw new Error(ur(u))},function(u){return u})}),o=function(i){var u={};return K(i,function(a){u[a]={}}),Ht(u)}(Zu(e,function(i){return i.ch})),r=Ju(e);return{dataset:e,triggerChars:o,lookupByChar:function(i){return Ct(r,function(u){return u.ch===i})}}}function Zf(t,n,e){var o=Jn(t.element(),"."+e);if(0<o.length){var r=Ur(o,function(i){var u=i.dom().getBoundingClientRect().top,a=o[0].dom().getBoundingClientRect().top;return Math.abs(u-a)>n}).getOr(o.length);return d.some({numColumns:r,numRows:Math.ceil(o.length/r)})}return d.none()}function w1(t,n){return A([Z(t,n)])}function Tv(t,n,e){t.getSystem().broadcastOn([Pv],{})}function Ev(t){return J(j1,t).getOr(el)}function S1(t){return{dom:{tag:"div",classes:[Uv],innerHtml:t}}}function Bv(t){return{dom:{tag:"div",classes:[rl]},components:[Fo(ue.translate(t))]}}function C1(t,n){return{dom:{tag:"div",classes:[rl]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Fo(ue.translate(n))]}]}}function k1(t){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:U1(t)}}}function Dv(t){return{dom:{tag:"div",classes:[Uv,"tox-collection__item-checkmark"],innerHtml:jn("checkmark",t)}}}function O1(t,n,e,o,r){var i=e?t.checkMark.orThunk(function(){return n.or(d.some("")).map(S1)}):d.none(),u=t.ariaLabel.map(function(a){return{attributes:{title:ue.translate(a)}}}).getOr({});return{dom:O({tag:"div",classes:[el,ol].concat(r?["tox-collection__item-icon-rtl"]:[])},u),optComponents:[i,t.htmlContent.fold(function(){return t.textContent.map(o)},function(a){return d.some(function(s){return{dom:{tag:"div",classes:[rl],innerHtml:s}}}(a))}),t.shortcutContent.map(k1),t.caret]}}function bu(t,n,e,o){o===void 0&&(o=d.none());var r=ue.isRtl()&&t.iconContent.exists(function(a){return Mt(G1,a)}),i=t.iconContent.map(function(a){return ue.isRtl()&&Mt(W1,a)?a+"-rtl":a}).map(function(a){return function(s,c,f){return d.from(c()[s]).or(f).getOrThunk(function(){return qf(c)})}(a,n.icons,o)}),u=d.from(t.meta).fold(function(){return Bv},function(a){return qt(a,"style")?ce(C1,a.style):Bv});return t.presets==="color"?function(a,s,c,f){var l,m;return{dom:(l=c.getOr(""),m={tag:"div",attributes:a.map(function(h){return{title:f.translate(h)}}).getOr({}),classes:["tox-swatch"]},O(O({},m),s==="custom"?{tag:"button",classes:jt(m.classes,["tox-swatches__picker-btn"]),innerHtml:l}:s==="remove"?{classes:jt(m.classes,["tox-swatch--remove"]),innerHtml:l}:{attributes:O(O({},m.attributes),{"data-mce-color":s}),styles:{"background-color":s}})),optComponents:[]}}(t.ariaLabel,t.value,i,n):O1(t,i,e,u,r)}function Av(t,n,e){n.disabled&&ul(t,n)}function tl(t,n){return n.useNative===!0&&Mt(X1,qe(t.element()))}function _1(t){lt(t.element(),"disabled","disabled")}function T1(t){re(t.element(),"disabled")}function E1(t){lt(t.element(),"aria-disabled","true")}function B1(t){lt(t.element(),"aria-disabled","false")}function Mv(t,n,e){n.disableClass.each(function(o){Ut(t.element(),o)}),(tl(t,n)?T1:B1)(t),n.onEnabled(t)}function Fv(t,n){return tl(t,n)?function(e){return or(e.element(),"disabled")}(t):function(e){return Kt(e.element(),"aria-disabled")==="true"}(t)}function Qa(t,n){var e=t.getApi(n);return function(o){o(e)}}function yu(t,n){return It(function(e){Qa(t,e)(function(o){var r=t.onSetup(o);r!=null&&n.set(r)})})}function xu(t,n){return fo(function(e){return Qa(t,e)(n.get())})}var nl,Za,D1=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),tc=function(t){return Fe(t,"[data-mce-autocompleter]")},A1=function(t,n){n.on("keypress compositionend",t.onKeypress.throttle),n.on("remove",t.onKeypress.cancel);function e(o,r){j(o,pa(),{raw:r})}n.on("keydown",function(o){function r(){return t.getView().bind(mt.getHighlighted)}o.which===8&&t.onKeypress.throttle(o),t.isActive()&&(o.which===27&&t.cancelIfNecessary(),t.isMenuOpen()?o.which===13?(r().each(nr),o.preventDefault()):o.which===40?(r().fold(function(){t.getView().each(mt.highlightFirst)},function(i){e(i,o)}),o.preventDefault(),o.stopImmediatePropagation()):o.which!==37&&o.which!==38&&o.which!==39||r().each(function(i){e(i,o),o.preventDefault(),o.stopImmediatePropagation()}):o.which!==13&&o.which!==38&&o.which!==40||t.cancelIfNecessary())}),n.on("NodeChange",function(o){t.isActive()&&!t.isProcessingAction()&&tc(z.fromDom(o.element)).isNone()&&t.cancelIfNecessary()})},Iv=tinymce.util.Tools.resolve("tinymce.util.Promise"),Rv=function(t){if(function(e){return e.nodeType===F.Node.TEXT_NODE}(t))return Qf(t,t.data.length);var n=t.childNodes;return 0<n.length?Rv(n[n.length-1]):Qf(t,n.length)},Vv=function(t,n){var e=t.childNodes;return 0<e.length&&n<e.length?Vv(e[n],0):0<e.length&&function(o){return o.nodeType===F.Node.ELEMENT_NODE}(t)&&e.length===n?Rv(e[e.length-1]):Qf(t,n)},Hv=function(t,n,e,o){o===void 0&&(o={});var r=n(),i=t.selection.getRng().startContainer.nodeValue,u=Ct(r.lookupByChar(e.triggerChar),function(s){return e.text.length>=s.minChars&&s.matches.getOrThunk(function(){return b1(t.dom)})(e.range,i,e.text)});if(u.length===0)return d.none();var a=Iv.all(I(u,function(s){return s.fetch(e.text,s.maxResults,o).then(function(c){return{matchText:e.text,items:c,columns:s.columns,onAction:s.onAction}})}));return d.some({lookupData:a,context:e})},Nv=W([Q("type"),Tt("text")]),M1=W([un("type",function(){return"autocompleteitem"}),un("active",function(){return!1}),un("disabled",function(){return!1}),k("meta",{}),Q("value"),Tt("text"),Tt("icon")]),F1=W([Q("type"),Q("ch"),as("minChars",1),k("columns",1),as("maxResults",10),Gi("matches"),xn("fetch"),xn("onAction")]),wu=[tn("disabled",!1),Tt("text"),Tt("shortcut"),Wt("value","value",$i(function(){return N("menuitem-value")}),ar()),k("meta",{})],I1=W([Q("type"),Ft("onSetup",function(){return P}),Ft("onAction",P),Tt("icon")].concat(wu)),R1=W([Q("type"),xn("getSubmenuItems"),Ft("onSetup",function(){return P}),Tt("icon")].concat(wu)),V1=W([Q("type"),tn("active",!1),Ft("onSetup",function(){return P}),xn("onAction")].concat(wu)),H1=W([Q("type"),tn("active",!1),Tt("icon")].concat(wu)),N1=W([Q("type"),Wi("fancytype",["inserttable","colorswatch"]),Ft("onAction",P)]),nc=function(t){return w1(N("unnamed-events"),t)},P1=[E("lazySink"),E("tooltipDom"),k("exclusive",!0),k("tooltipComponents",[]),k("delay",300),Zo("mode","normal",["normal","follow-highlight"]),k("anchor",function(t){return{anchor:"hotspot",hotspot:t,layouts:{onLtr:y([kn,Ln,Sn,Pn,Cn,zn]),onRtl:y([kn,Ln,Sn,Pn,Cn,zn])}}}),dt("onHide"),dt("onShow")],z1=Object.freeze({__proto__:null,init:function(){function t(){n.get().each(function(r){F.clearTimeout(r)})}var n=V(d.none()),e=V(d.none()),o=y("not-implemented");return ve({getTooltip:function(){return e.get()},isShowing:function(){return e.get().isSome()},setTooltip:function(r){e.set(d.some(r))},clearTooltip:function(){e.set(d.none())},clearTimer:t,resetTimer:function(r,i){t(),n.set(d.some(F.setTimeout(function(){r()},i)))},readState:o})}}),Pv=N("tooltip.exclusive"),Su=N("tooltip.show"),Cu=N("tooltip.hide"),L1=Object.freeze({__proto__:null,hideAllExclusive:Tv,setComponents:function(t,n,e,o){e.getTooltip().each(function(r){r.getSystem().isConnected()&&G.set(r,o)})}}),zv=on({fields:P1,name:"tooltipping",active:Object.freeze({__proto__:null,events:function(t,n){function e(o){n.getTooltip().each(function(r){xr(r),t.onHide(o,r),n.clearTooltip()}),n.clearTimer()}return xt(Zt([[B(Su,function(o){n.resetTimer(function(){(function(r){if(!n.isShowing()){Tv(r);var i=t.lazySink(r).getOrDie(),u=r.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:xt(t.mode==="normal"?[B(cr(),function(a){ct(r,Su)}),B(Bs(),function(a){ct(r,Cu)})]:[]),behaviours:A([G.config({})])});n.setTooltip(u),yr(i,u),t.onShow(r,u),Fn.position(i,t.anchor(r),u)}})(o)},t.delay)}),B(Cu,function(o){n.resetTimer(function(){e(o)},t.delay)}),B(Zr(),function(o,r){Mt(r.channels(),Pv)&&e(o)}),fo(function(o){e(o)})],t.mode==="normal"?[B(sr(),function(o){ct(o,Su)}),B(Ms(),function(o){ct(o,Cu)}),B(cr(),function(o){ct(o,Su)}),B(Bs(),function(o){ct(o,Cu)})]:[B(Sg(),function(o,r){ct(o,Su)}),B(Ps(),function(o){ct(o,Cu)})]]))}}),state:z1,apis:L1}),ue=tinymce.util.Tools.resolve("tinymce.util.I18n"),el="tox-menu-nav__js",ol="tox-collection__item",Lv="tox-swatch",j1={normal:el,color:Lv},jv="tox-collection__item--enabled",Uv="tox-collection__item-icon",rl="tox-collection__item-label",Wv="tox-collection__item-caret",ku="tox-collection__item--active",il=tinymce.util.Tools.resolve("tinymce.Env"),U1=function(t){var n=il.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},e=t.split("+"),o=I(e,function(r){var i=r.toLowerCase().trim();return qt(n,i)?n[i]:r});return il.mac?o.join(""):o.join("+")},W1=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],G1=["list-bull-circle","list-bull-default","list-bull-square"],X1=["input","button","textarea","select"],ul=function(t,n,e){n.disableClass.each(function(o){en(t.element(),o)}),(tl(t,n)?_1:E1)(t),n.onDisabled(t)},Y1=Object.freeze({__proto__:null,enable:Mv,disable:ul,isDisabled:Fv,onLoad:Av,set:function(t,n,e,o){(o?ul:Mv)(t,n,e)}}),q1=Object.freeze({__proto__:null,exhibit:function(t,n){return Te({classes:n.disabled?n.disableClass.map(fS).getOr([]):[]})},events:function(t,n){return xt([Vm(Ro(),function(e,o){return Fv(e,t)}),nf(t,n,Av)])}}),K1=[k("disabled",!1),k("useNative",!0),ft("disableClass"),dt("onDisabled"),dt("onEnabled")],X=on({fields:K1,name:"disabling",active:q1,apis:Y1}),J1=function(t){return X.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},al=function(t){return X.config({disabled:t})},$1=function(t){return X.config({disabled:t,disableClass:"tox-tbtn--disabled"})},Q1=function(t){return X.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})};(Za=nl=nl||{})[Za.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",Za[Za.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";function bi(t){return At(t,function(n){return n.toArray()})}function Ou(t,n,e){var o=V(P);return{type:"item",dom:n.dom,components:bi(n.optComponents),data:t.data,eventOrder:n_,hasSubmenu:t.triggersSubmenu,itemBehaviours:A([Z("item-events",[function(r,i){return lo(function(u,a){Qa(r,u)(r.onAction),r.triggersSubmenu||i!==Ze.CLOSE_ON_EXECUTE||(ct(u,ha()),a.stop())})}(t,e),yu(t,o),xu(t,o)]),J1(t.disabled),G.config({})].concat(t.itemBehaviours))}}function _u(t){return{value:t.value,meta:O({text:t.text.getOr("")},t.meta)}}function Z1(t,n){var e=function(r){return vi.DOM.encode(r)}(ue.translate(t));if(0<n.length){var o=new RegExp(function(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(n),"gi");return e.replace(o,function(r){return'<span class="tox-autocompleter-highlight">'+r+"</span>"})}return e}function t_(t,n,e){function o(u){return j(u,Yv,{row:t,col:n})}function r(u,a){a.stop(),o(u)}var i;return wn({dom:{tag:"div",attributes:(i={role:"button"},i["aria-labelledby"]=e,i)},behaviours:A([Z("insert-table-picker-cell",[B(cr(),Y.focus),B(Ro(),o),B(ru(),r),B(uu(),r)]),ut.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Y.config({onFocus:function(u){return j(u,Xv,{row:t,col:n})}})])})}var Ze=nl,n_={"alloy.execute":["disabling","alloy.base.behaviour","toggling","item-events"]},Gv=y(wf("item-widget",Yf())),Xv=N("cell-over"),Yv=N("cell-execute");function qv(t){return{value:y(t)}}function e_(t){return Qv.test(t)||Zv.test(t)}function o_(t){var n=function(o){var r=o.value().replace(Qv,function(i,u,a,s){return u+u+a+a+s+s});return{value:y(r)}}(t),e=Zv.exec(n.value());return e===null?["FFFFFF","FF","FF","FF"]:e}function cl(t){var n=t.toString(16);return n.length===1?"0"+n:n}function ec(t){var n=cl(t.red())+cl(t.green())+cl(t.blue());return qv(n)}function _r(t,n,e,o){return{red:y(t),green:y(n),blue:y(e),alpha:y(o)}}function sl(t){var n=parseInt(t,10);return n.toString()===t&&0<=n&&n<=255}function Kv(t){var n,e,o,r=(t.hue()||0)%360,i=t.saturation()/100,u=t.value()/100;if(i=nb(0,tb(i,1)),u=nb(0,tb(u,1)),i===0)return n=e=o=oc(255*u),_r(n,e,o,1);var a=r/60,s=u*i,c=s*(1-Math.abs(a%2-1)),f=u-s;switch(Math.floor(a)){case 0:n=s,e=c,o=0;break;case 1:n=c,e=s,o=0;break;case 2:n=0,e=s,o=c;break;case 3:n=0,e=c,o=s;break;case 4:n=c,e=0,o=s;break;case 5:n=s,e=0,o=c;break;default:n=e=o=0}return n=oc(255*(n+f)),e=oc(255*(e+f)),o=oc(255*(o+f)),_r(n,e,o,1)}function fl(t){var n=o_(t),e=parseInt(n[1],16),o=parseInt(n[2],16),r=parseInt(n[3],16);return _r(e,o,r,1)}function Jv(t,n,e,o){var r=parseInt(t,10),i=parseInt(n,10),u=parseInt(e,10),a=parseFloat(o);return _r(r,i,u,a)}function $v(t){return"rgba("+t.red()+","+t.green()+","+t.blue()+","+t.alpha()+")"}var Qv=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Zv=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,tb=Math.min,nb=Math.max,oc=Math.round,r_=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,i_=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,eb=y(_r(255,0,0,1)),ob=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),rb="tinymce-custom-colors";function u_(t){var n=[],e=F.document.createElement("canvas");e.height=1,e.width=1;for(var o=e.getContext("2d"),r=function(a,s){var c=s/255;return("0"+Math.round(a*c+255*(1-c)).toString(16)).slice(-2).toUpperCase()},i=function(a){if(/^[0-9A-Fa-f]{6}$/.test(a))return"#"+a.toUpperCase();o.clearRect(0,0,e.width,e.height),o.fillStyle="#FFFFFF",o.fillStyle=a,o.fillRect(0,0,1,1);var s=o.getImageData(0,0,1,1).data,c=s[0],f=s[1],l=s[2],m=s[3];return"#"+r(c,m)+r(f,m)+r(l,m)},u=0;u<t.length;u+=2)n.push({text:t[u+1],value:i(t[u]),type:"choiceitem"});return n}function a_(t){return t.getParam("color_map")}function ib(t,n){var e;return t.dom.getParents(t.selection.getStart(),function(o){var r;(r=o.style[n==="forecolor"?"color":"background-color"])&&(e=e||r)}),e}function ub(t){return Math.max(5,Math.ceil(Math.sqrt(t)))}function ab(t){var n=vl(t),e=ub(n.length);return l_(t,e)}function ll(t,n,e,o){e==="custom"?bb(t)(function(r){r.each(function(i){hb(i),t.execCommand("mceApplyTextcolor",n,i),o(i)})},"#000000"):e==="remove"?(o(""),t.execCommand("mceRemoveTextcolor",n)):(o(e),t.execCommand("mceApplyTextcolor",n,e))}function cb(t,n){return t.concat(d_().concat(function(e){var o="choiceitem",r={type:o,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[r,{type:o,text:"Custom color",icon:"color-picker",value:"custom"}]:[r]}(n)))}function sb(t,n){return function(e){e(cb(t,n))}}function fb(t,n,e){var o,r;o=n==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",r=e,t.setIconFill(o,r),t.setIconStroke(o,r)}function lb(t,n,e,o,r){t.ui.registry.addSplitButton(n,{tooltip:o,presets:"color",icon:n==="forecolor"?"text-color":"highlight-bg-color",select:function(i){return d.from(ib(t,e)).bind(function(u){return function(a){if(a==="transparent")return d.some(_r(0,0,0,0));var s=r_.exec(a);if(s!==null)return d.some(Jv(s[1],s[2],s[3],"1"));var c=i_.exec(a);return c!==null?d.some(Jv(c[1],c[2],c[3],c[4])):d.none()}(u).map(function(a){var s=ec(a).value();return an(i.toLowerCase(),s)})}).getOr(!1)},columns:ab(t),fetch:sb(vl(t),pb(t)),onAction:function(i){r.get()!==null&&ll(t,e,r.get(),function(){})},onItemAction:function(i,u){ll(t,e,u,function(a){r.set(a),v_(t,{name:n,color:a})})},onSetup:function(i){r.get()!==null&&fb(i,n,r.get());function u(a){a.name===n&&fb(i,a.name,a.color)}return t.on("TextColorChange",u),function(){t.off("TextColorChange",u)}}})}function db(t,n,e,o){t.ui.registry.addNestedMenuItem(n,{text:o,icon:n==="forecolor"?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(r){ll(t,e,r.value,P)}}]}})}function dl(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:function(n){return n==="color"?"tox-swatches":"tox-menu"}(t),tieredMenu:"tox-tiered-menu"}}function yi(t){var n=dl(t);return{backgroundMenu:n.backgroundMenu,selectedMenu:n.selectedMenu,menu:n.menu,selectedItem:n.selectedItem,item:Ev(t)}}function rc(t,n,e){var o=dl(e);return{dom:{tag:"div",classes:Zt([[o.tieredMenu]])},markers:yi(e)}}function ml(t,n){return function(e){var o=lm(e,n);return I(o,function(r){return{dom:t,components:r}})}}function mb(t,n){var e=[],o=[];return K(t,function(r,i){n(r,i)?(0<o.length&&e.push(o),o=[],qt(r.dom,"innerHtml")&&o.push(r)):o.push(r)}),0<o.length&&e.push(o),I(e,function(r){return{dom:{tag:"div",classes:["tox-collection__group"]},components:r}})}function gl(t,n,e){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[zo.parts().items({preprocess:function(o){return t!=="auto"&&1<t?ml({tag:"div",classes:["tox-collection__group"]},t)(o):mb(o,function(r,i){return n[i].type==="separator"})}})]}}function c_(t){return t.icon!==void 0||t.type==="togglemenuitem"||t.type==="choicemenuitem"}function Lo(t){return F.console.error(ur(t)),F.console.log(t),d.none()}function s_(t,n,e,o,r){var i=function(u){return{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[zo.parts().items({preprocess:function(a){return mb(a,function(s,c){return u[c].type==="separator"})}})]}}(e);return{value:t,dom:i.dom,components:i.components,items:e}}function pl(t,n,e,o,r){var i;return r==="color"?{value:t,dom:(i=function(u){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[zo.parts().items({preprocess:u!=="auto"?ml({tag:"div",classes:["tox-swatches__row"]},u):bt})]}]}}(o)).dom,components:i.components,items:e}:r==="normal"&&o==="auto"?{value:t,dom:(i=gl(o,e)).dom,components:i.components,items:e}:r==="normal"&&o===1?{value:t,dom:(i=gl(1,e)).dom,components:i.components,items:e}:r==="normal"?{value:t,dom:(i=gl(o,e)).dom,components:i.components,items:e}:r!=="listpreview"||o==="auto"?{value:t,dom:function(u,a,s){var c=dl(s);return{tag:"div",classes:Zt([[c.menu,"tox-menu-"+a+"-column"],u?[c.hasIcons]:[]])}}(n,o,r),components:b_,items:e}:{value:t,dom:(i=function(u){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[zo.parts().items({preprocess:ml({tag:"div",classes:["tox-collection__group"]},u)})]}}(o)).dom,components:i.components,items:e}}function hl(t,n,e,o,r,i,u,a){var s=function(f){return So(f,c_)}(n),c=y_(n,e,o,r!=="color"?"normal":"color",i,u,a);return pl(t,s,c,o,r)}function ic(t,n){var e=yi(n);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+e.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(n==="color"?"tox-swatches__row":"tox-collection__group")}}var zt="choiceitem",f_=[{type:zt,text:"Light Green",value:"#BFEDD2"},{type:zt,text:"Light Yellow",value:"#FBEEB8"},{type:zt,text:"Light Red",value:"#F8CAC6"},{type:zt,text:"Light Purple",value:"#ECCAFA"},{type:zt,text:"Light Blue",value:"#C2E0F4"},{type:zt,text:"Green",value:"#2DC26B"},{type:zt,text:"Yellow",value:"#F1C40F"},{type:zt,text:"Red",value:"#E03E2D"},{type:zt,text:"Purple",value:"#B96AD9"},{type:zt,text:"Blue",value:"#3598DB"},{type:zt,text:"Dark Turquoise",value:"#169179"},{type:zt,text:"Orange",value:"#E67E23"},{type:zt,text:"Dark Red",value:"#BA372A"},{type:zt,text:"Dark Purple",value:"#843FA1"},{type:zt,text:"Dark Blue",value:"#236FA1"},{type:zt,text:"Light Gray",value:"#ECF0F1"},{type:zt,text:"Medium Gray",value:"#CED4D9"},{type:zt,text:"Gray",value:"#95A5A6"},{type:zt,text:"Dark Gray",value:"#7E8C8D"},{type:zt,text:"Navy Blue",value:"#34495E"},{type:zt,text:"Black",value:"#000000"},{type:zt,text:"White",value:"#ffffff"}],gb=function(n){n===void 0&&(n=10);var e,o=ob.getItem(rb),r=Yt(o)?JSON.parse(o):[],i=n-(e=r).length<0?e.slice(0,n):e,u=function(a){i.splice(a,1)};return{add:function(a){(function(s,c){var f=fm(s,c);return f===-1?d.none():d.some(f)})(i,a).each(u),i.unshift(a),i.length>n&&i.pop(),ob.setItem(rb,JSON.stringify(i))},state:function(){return i.slice(0)}}}(10),l_=function(t,n){return t.getParam("color_cols",n,"number")},pb=function(t){return t.getParam("custom_colors")!==!1},vl=function(t){var n=a_(t);return n!==void 0?u_(n):f_},d_=function(){return I(gb.state(),function(t){return{type:zt,text:t,value:t}})},hb=function(t){gb.add(t)},m_=function(t){return t.fire("SkinLoaded")},g_=function(t,n){return t.fire("SkinLoadError",n)},p_=function(t){return t.fire("ResizeEditor")},h_=function(t,n){return t.fire("ScrollContent",n)},vb=function(t,n){return t.fire("ResizeContent",n)},v_=function(t,n){return t.fire("TextColorChange",n)},bb=function(t){return function(n,e){var o,r={colorpicker:e},i=(o=n,function(u){var a=u.getData();o(d.from(a.colorpicker)),u.close()});t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onAction:function(u,a){a.name==="hex-valid"&&(a.value?u.enable("ok"):u.disable("ok"))},onSubmit:i,onClose:function(){},onCancel:function(){n(d.none())}})}},Tu={register:function(t){(function(o){o.addCommand("mceApplyTextcolor",function(r,i){(function(u,a,s){u.undoManager.transact(function(){u.focus(),u.formatter.apply(a,{value:s}),u.nodeChanged()})})(o,r,i)}),o.addCommand("mceRemoveTextcolor",function(r){(function(i,u){i.undoManager.transact(function(){i.focus(),i.formatter.remove(u,{value:null},null,!0),i.nodeChanged()})})(o,r)})})(t);var n=V(null),e=V(null);lb(t,"forecolor","forecolor","Text color",n),lb(t,"backcolor","hilitecolor","Background color",e),db(t,"forecolor","forecolor","Text color"),db(t,"backcolor","hilitecolor","Background color")},getColors:cb,getFetch:sb,colorPickerDialog:bb,getCurrentColor:ib,getColorCols:ab,calcCols:ub},b_=[zo.parts().items({})],y_=function(t,n,e,o,r,i,u){return li(I(t,function(a){return a.type==="choiceitem"?function(s){return Et("choicemenuitem",H1,s)}(a).fold(Lo,function(s){return d.some(function(c,f,l,m,h,g,b){var p=bu({presets:l,textContent:f?c.text:d.none(),htmlContent:d.none(),ariaLabel:c.text,iconContent:c.icon,shortcutContent:f?c.shortcut:d.none(),checkMark:f?d.some(Dv(b.icons)):d.none(),caret:d.none(),value:c.value},b,!0);return yt(Ou({data:_u(c),disabled:c.disabled,getApi:function(x){return{setActive:function(v){ut.set(x,v)},isActive:function(){return ut.isOn(x)},isDisabled:function(){return X.isDisabled(x)},setDisabled:function(v){return X.set(x,v)}}},onAction:function(x){return m(c.value)},onSetup:function(x){return x.setActive(h),function(){}},triggersSubmenu:!1,itemBehaviours:[]},p,g),{toggling:{toggleClass:jv,toggleOnExecute:!1,selected:c.active}})}(s,e===1,o,n,i(a.value),r,u))}):d.none()}))},Eu,uc,x_={inserttable:function(n){var e=N("size-label"),o=function(i,u,a){for(var s=[],c=0;c<u;c++){for(var f=[],l=0;l<a;l++)f.push(t_(c,l,i));s.push(f)}return s}(e,10,10),r=gt({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:e}},components:[Fo("0x0")],behaviours:A([G.config({})])});return{type:"widget",data:{value:N("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Gv().widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:function(i){return At(i,function(u){return I(u,Kn)})}(o).concat(r.asSpec()),behaviours:A([Z("insert-table-picker",[ds(Xv,function(i,u,a){var s=a.event().row(),c=a.event().col();(function(f,l,m,h,g){for(var b=0;b<h;b++)for(var p=0;p<g;p++)ut.set(f[b][p],b<=l&&p<=m)})(o,s,c,10,10),G.set(r.get(i),[function(f,l){return Fo(l+1+"x"+(f+1))}(s,c)])}),ds(Yv,function(i,u,a){n.onAction({numRows:a.event().row()+1,numColumns:a.event().col()+1}),ct(i,ha())})]),L.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(n,e){var o=Tu.getColors(e.colorinput.getColors(),e.colorinput.hasCustomColors()),r=e.colorinput.getColorCols(),i=hl(N("menu-value"),o,function(a){n.onAction({value:a})},r,"color",Ze.CLOSE_ON_EXECUTE,function(){return!1},e.shared.providers),u=O(O({},i),{markers:yi("color"),movement:ic(r,"color")});return{type:"widget",data:{value:N("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Gv().widget(zo.sketch(u))]}}},w_=function(t,n,e,o,r,i,u,a){a===void 0&&(a=!0);var s=bu({presets:o,textContent:d.none(),htmlContent:e?t.text.map(function(c){return Z1(c,n)}):d.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:d.none(),checkMark:d.none(),caret:d.none(),value:t.value},u.providers,a,t.icon);return Ou({data:_u(t),disabled:t.disabled,getApi:function(){return{}},onAction:function(c){return r(t.value,t.meta)},onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:function(c,f){return J(c,"tooltipWorker").map(function(l){return[zv.config({lazySink:f.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(m){return{anchor:"submenu",item:m,overrides:{maxHeightFunction:su}}},mode:"follow-highlight",onShow:function(m,h){l(function(g){zv.setComponents(m,[Us({element:z.fromDom(g)})])})}})]}).getOr([])}(t.meta,u)},s,i)},yb=function(t){var n=t.text.fold(function(){return{}},function(e){return{innerHtml:e}});return{type:"separator",dom:O({tag:"div",classes:[ol,"tox-collection__group-heading"]},n),components:[]}},S_=function(t,n,e,o){o===void 0&&(o=!0);var r=bu({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:d.none(),ariaLabel:t.text,caret:d.none(),checkMark:d.none(),shortcutContent:t.shortcut},e,o);return Ou({data:_u(t),getApi:function(i){return{isDisabled:function(){return X.isDisabled(i)},setDisabled:function(u){return X.set(i,u)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,n)},C_=function(t,n,e,o,r){o===void 0&&(o=!0),r===void 0&&(r=!1);var i=r?function(a){return{dom:{tag:"div",classes:[Wv],innerHtml:jn("chevron-down",a)}}}(e.icons):function(a){return{dom:{tag:"div",classes:[Wv],innerHtml:jn("chevron-right",a)}}}(e.icons),u=bu({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:d.none(),ariaLabel:t.text,caret:d.some(i),checkMark:d.none(),shortcutContent:t.shortcut},e,o);return Ou({data:_u(t),getApi:function(a){return{isDisabled:function(){return X.isDisabled(a)},setDisabled:function(s){return X.set(a,s)}}},disabled:t.disabled,onAction:P,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},u,n)},k_=function(t,n,e){var o=bu({iconContent:d.none(),textContent:t.text,htmlContent:d.none(),ariaLabel:t.text,checkMark:d.some(Dv(e.icons)),caret:d.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},e,!0);return yt(Ou({data:_u(t),disabled:t.disabled,getApi:function(r){return{setActive:function(i){ut.set(r,i)},isActive:function(){return ut.isOn(r)},isDisabled:function(){return X.isDisabled(r)},setDisabled:function(i){return X.set(r,i)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,n),{toggling:{toggleClass:jv,toggleOnExecute:!1,selected:t.active}})},O_=function(t,n){return function(e,o){return Object.prototype.hasOwnProperty.call(e,o)?d.some(e[o]):d.none()}(x_,t.fancytype).map(function(e){return e(t,n)})};(uc=Eu=Eu||{})[uc.ContentFocus=0]="ContentFocus",uc[uc.UiFocus=1]="UiFocus";function __(t){return t.icon!==void 0||t.type==="togglemenuitem"||t.type==="choicemenuitem"}function xb(t){return So(t,__)}function T_(t,n,e,o,r){function i(a){return r?O(O({},a),{shortcut:d.none(),icon:a.text.isSome()?d.none():a.icon}):a}var u=e.shared.providers;switch(t.type){case"menuitem":return function(a){return Et("menuitem",I1,a)}(t).fold(Lo,function(a){return d.some(S_(i(a),n,u,o))});case"nestedmenuitem":return function(a){return Et("nestedmenuitem",R1,a)}(t).fold(Lo,function(a){return d.some(C_(i(a),n,u,o,r))});case"togglemenuitem":return function(a){return Et("togglemenuitem",V1,a)}(t).fold(Lo,function(a){return d.some(k_(i(a),n,u))});case"separator":return function(a){return Et("separatormenuitem",Nv,a)}(t).fold(Lo,function(a){return d.some(yb(a))});case"fancymenuitem":return function(a){return Et("fancymenuitem",N1,a)}(t).fold(Lo,function(a){return O_(i(a),e)});default:return F.console.error("Unknown item in general menu",t),d.none()}}function E_(t,n,e,o,r,i){var u=o===1,a=!u||xb(t);return li(I(t,function(s){return s.type==="separator"?function(c){return Et("Autocompleter.Separator",Nv,c)}(s).fold(Lo,function(c){return d.some(yb(c))}):function(c){return Et("Autocompleter.Item",M1,c)}(s).fold(Lo,function(c){return d.some(w_(c,n,u,"normal",e,r,i,a))})}))}function wb(t,n,e,o,r){var i=xb(n),u=li(I(n,function(a){function s(c){return T_(c,e,o,function(f){return r?!f.hasOwnProperty("text"):i}(c),r)}return a.type==="nestedmenuitem"&&a.getSubmenuItems().length<=0?s(O(O({},a),{disabled:!0})):s(a)}));return(r?s_:pl)(t,i,u,1,"normal")}function Sb(t){return kr.singleData(t.value,t)}function xe(t,n,e){return function(o,r,i,u){return Eg(o,r,i,u,!1)}(t,n,kb,e)}function bl(t,n,e){return function(o,r,i,u){return Eg(o,r,i,u,!0)}(t,n,kb,e)}function Cb(t,n,e){return Fe(t,n,e).isSome()}var B_=function(t,n){function e(){return i.get().isSome()}function o(){e()&&kt.hide(a)}function r(m,h,g,b){m.matchLength=h.text.length;var p=fe(g,function(x){return d.from(x.columns)}).getOr(1);kt.showAt(a,{anchor:"node",root:z.fromDom(t.getBody()),node:d.from(m.element)},zo.sketch(function(x,v,S,w){var C=S===Eu.ContentFocus?mh():Na(),_=ic(v,w),T=yi(w);return{dom:x.dom,components:x.components,items:x.items,value:x.value,markers:{selectedItem:T.selectedItem,item:T.item},movement:_,fakeFocus:S===Eu.ContentFocus,focusManager:C,menuBehaviours:nc(v!=="auto"?[]:[It(function(D,H){Zf(D,4,T.item).each(function(U){var q=U.numColumns,tt=U.numRows;L.setGridSize(D,tt,q)})})])}}(pl("autocompleter-value",!0,b,p,"normal"),p,Eu.ContentFocus,"normal"))),kt.getContent(a).each(mt.highlightFirst)}var i=V(d.none()),u=V(!1),a=wn(kt.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:A([Z("dismissAutocompleter",[B(ni(),function(){return s()})])]),lazySink:n.getSink})),s=function(){if(e()){var m=i.get().map(function(h){return h.element});tc(m.getOr(z.fromDom(t.selection.getNode()))).each(TS),o(),i.set(d.none()),u.set(!1)}},c=Co(function(){return x1(t)}),f=function(m){(function(h){return i.get().map(function(g){return $f(t.dom,t.selection.getRng(),g.triggerChar).bind(function(b){return Hv(t,c,b,h)})}).getOrThunk(function(){return y1(t,c)})})(m).fold(s,function(h){(function(g){if(!e()){var b=h1(t,g.range);i.set(d.some({triggerChar:g.triggerChar,element:b,matchLength:g.text.length})),u.set(!1)}})(h.context),h.lookupData.then(function(g){i.get().map(function(b){var p=h.context;if(b.triggerChar===p.triggerChar){var x=function(v,S){var w=fe(S,function(C){return d.from(C.columns)}).getOr(1);return At(S,function(C){var _=C.items;return E_(_,C.matchText,function(T,D){var H=t.selection.getRng();$f(t.dom,H,v).fold(function(){return F.console.error("Lost context. Cursor probably moved")},function(U){var q=U.range,tt={hide:function(){s()},reload:function(St){o(),f(St)}};u.set(!0),C.onAction(tt,q,T,D),u.set(!1)})},w,Ze.BUBBLE_TO_SANDBOX,n)})}(p.triggerChar,g);0<x.length?r(b,p,g,x):10<=p.text.length-b.matchLength?s():o()}})})})},l={onKeypress:Cv(function(m){m.which!==27&&f()},50),cancelIfNecessary:s,isMenuOpen:function(){return kt.isOpen(a)},isActive:e,isProcessingAction:u.get,getView:function(){return kt.getContent(a)}};A1(l,t)},kb=y(!0),Ob=Tg;function _b(t,n){var e=null;return{cancel:function(){e!==null&&(F.clearTimeout(e),e=null)},schedule:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];e=F.setTimeout(function(){t.apply(null,o),e=null},n)}}}function Tb(t){var n=t.raw();return n.touches===void 0||n.touches.length!==1?d.none():d.some(n.touches[0])}function D_(t){var n=V(d.none()),e=V(!1),o=_b(function(i){t.triggerEvent(lC(),i),e.set(!0)},400),r=Xr([{key:Io(),value:function(i){return Tb(i).each(function(u){o.cancel();var a={x:y(u.clientX),y:y(u.clientY),target:i.target};o.schedule(i),e.set(!1),n.set(d.some(a))}),d.none()}},{key:tu(),value:function(i){return o.cancel(),Tb(i).each(function(u){n.get().each(function(a){!function(s,c){var f=Math.abs(s.clientX-c.x()),l=Math.abs(s.clientY-c.y());return 5<f||5<l}(u,a)||n.set(d.none())})}),d.none()}},{key:nu(),value:function(i){return o.cancel(),n.get().filter(function(u){return nn(u.target(),i.target())}).map(function(u){return e.get()?(i.prevent(),!1):t.triggerEvent(uu(),i)})}}]);return{fireIfReady:function(i,u){return J(r,u).bind(function(a){return a(i)})}}}function A_(t,n){var e=mn("Getting GUI events settings",F_,n),o=D_(e),r=I(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(l){return xe(t,l,function(m){o.fireIfReady(m,l).each(function(h){h&&m.kill()}),e.triggerEvent(l,m)&&m.kill()})}),i=V(d.none()),u=xe(t,"paste",function(l){o.fireIfReady(l,"paste").each(function(m){m&&l.kill()}),e.triggerEvent("paste",l)&&l.kill(),i.set(d.some(F.setTimeout(function(){e.triggerEvent(Fs(),l)},0)))}),a=xe(t,"keydown",function(l){e.triggerEvent("keydown",l)?l.kill():e.stopBackspace===!0&&function(m){return m.raw().which===8&&!Mt(["input","textarea"],qe(m.target()))&&!Cb(m.target(),'[contenteditable="true"]')}(l)&&l.prevent()}),s=function(l,m){return Db?bl(l,"focus",m):xe(l,"focusin",m)}(t,function(l){e.triggerEvent("focusin",l)&&l.kill()}),c=V(d.none()),f=function(l,m){return Db?bl(l,"blur",m):xe(l,"focusout",m)}(t,function(l){e.triggerEvent("focusout",l)&&l.kill(),c.set(d.some(F.setTimeout(function(){e.triggerEvent(Ms(),l)},0)))});return{unbind:function(){K(r,function(l){l.unbind()}),a.unbind(),s.unbind(),f.unbind(),u.unbind(),i.get().each(F.clearTimeout),c.get().each(F.clearTimeout)}}}function Eb(t,n){var e=J(t,"target").map(function(o){return o()}).getOr(n);return V(e)}function Bb(t,n,e,o,r,i){var u=t(n,o),a=function(s,c){var f=V(!1),l=V(!1);return{stop:function(){f.set(!0)},cut:function(){l.set(!0)},isStopped:f.get,isCut:l.get,event:y(s),setSource:c.set,getSource:c.get}}(e,r);return u.fold(function(){return i.logEventNoHandlers(n,o),Bu.complete()},function(s){var c=s.descHandler();return vs(c)(a),a.isStopped()?(i.logEventStopped(n,s.element(),c.purpose()),Bu.stopped()):a.isCut()?(i.logEventCut(n,s.element(),c.purpose()),Bu.complete()):Vn(s.element()).fold(function(){return i.logNoParent(n,s.element(),c.purpose()),Bu.complete()},function(f){return i.logEventResponse(n,s.element(),c.purpose()),Bu.resume(f)})})}function M_(t,n,e){var o=function(r){var i=V(!1);return{stop:function(){i.set(!0)},cut:P,isStopped:i.get,isCut:y(!1),event:y(r),setSource:ts("Cannot set source of a broadcasted event"),getSource:ts("Cannot get source of a broadcasted event")}}(n);return K(t,function(r){var i=r.descHandler();vs(i)(o)}),o.isStopped()}var Db=pe().browser.isFirefox(),F_=An([xn("triggerEvent"),k("stopBackspace",!0)]),Bu=Rn([{stopped:[]},{resume:["element"]},{complete:[]}]),Ab=function(t,n,e,o,r,i){return Bb(t,n,e,o,r,i).fold(function(){return!0},function(u){return Ab(t,n,e,u,r,i)},function(){return!1})},Mb=function(t,n,e,o,r){var i=Eb(e,o);return Ab(t,n,e,o,i,r)},I_=Oe("element","descHandler"),R_=function(t,n){return{id:y(t),descHandler:y(n)}};function V_(){var t={};return{registerId:function(n,e,o){yn(o,function(r,i){var u=t[i]!==void 0?t[i]:{};u[e]=CC(r,n),t[i]=u})},unregisterId:function(n){yn(t,function(e,o){e.hasOwnProperty(n)&&delete e[n]})},filterByType:function(n){return J(t,n).map(function(e){return Zu(e,function(o,r){return R_(r,o)})}).getOr([])},find:function(n,e,o){var r=J(t,e);return hg(o,function(i){return function(u,a){return au(a).fold(function(){return d.none()},function(s){return u.bind(function(c){return J(c,s)}).map(function(c){return I_(a,c)})})}(r,i)},n)}}}function H_(){function t(r){var i=r.element();return au(i).fold(function(){return function(u,a){var s=N(xC+u);return Ls(a,s),s}("uid-",r.element())},function(u){return u})}var n=V_(),e={},o=function(r){au(r.element()).each(function(i){delete e[i],n.unregisterId(i)})};return{find:function(r,i,u){return n.find(r,i,u)},filter:function(r){return n.filterByType(r)},register:function(r){var i=t(r);ee(e,i)&&function(a,s){var c=e[s];if(c!==a)throw new Error('The tagId "'+s+'" is already used by: '+Do(c.element())+`
Cannot use it for: `+Do(a.element())+`
The conflicting element is`+(Mo(c.element())?" ":" not ")+"already in the DOM");o(a)}(r,i);var u=[r];n.registerId(u,i,r.events()),e[i]=r},unregister:o,getById:function(r){return J(e,r)}}}function Fb(t){function n(p){return Vn(t.element()).fold(function(){return!0},function(x){return nn(p,x)})}function e(p,x){return r.find(n,p,x)}function o(p){var x=r.filter(Zr());K(x,function(v){var S=v.descHandler();vs(S)(p)})}var r=H_(),i=A_(t.element(),{triggerEvent:function(p,x){return Ys(p,x.target(),function(v){return function(S,w,C,_){var T=C.target();return Mb(S,w,C,T,_)}(e,p,x,v)})}}),u={debugInfo:y("real"),triggerEvent:function(p,x,v){Ys(p,x,function(S){return Mb(e,p,v,x,S)})},triggerFocus:function(p,x){au(p).fold(function(){Ho(p)},function(v){Ys(fr(),p,function(S){return function(w,C,_,T,D){var H=Eb(_,T);Bb(w,C,_,T,H,D)}(e,fr(),{originator:y(x),kill:P,prevent:P,target:y(p)},p,S),!1})})},triggerEscape:function(p,x){u.triggerEvent("keydown",p.element(),x.event())},getByUid:function(p){return g(p)},getByDom:function(p){return b(p)},build:wn,addToGui:function(p){c(p)},removeFromGui:function(p){f(p)},addToWorld:function(p){a(p)},removeFromWorld:function(p){s(p)},broadcast:function(p){l(p)},broadcastOn:function(p,x){m(p,x)},broadcastEvent:function(p,x){h(p,x)},isConnected:y(!0)},a=function(p){p.connect(u),oi(p.element())||(r.register(p),K(p.components(),a),u.triggerEvent(Rs(),p.element(),{target:y(p.element())}))},s=function(p){oi(p.element())||(K(p.components(),s),r.unregister(p)),p.disconnect()},c=function(p){yr(t,p)},f=function(p){xr(p)},l=function(p){o({universal:y(!0),data:y(p)})},m=function(p,x){o({universal:y(!1),channels:y(p),data:y(x)})},h=function(p,x){var v=r.filter(p);return M_(v,x)},g=function(p){return r.getById(p).fold(function(){return ot.error(new Error('Could not find component with uid: "'+p+'" in system.'))},ot.value)},b=function(p){var x=au(p).getOr("not found");return g(x)};return a(t),{root:y(t),element:t.element,destroy:function(){i.unbind(),Vo(t.element())},add:c,remove:f,getByUid:g,getByDom:b,addToWorld:a,removeFromWorld:s,broadcast:l,broadcastOn:m,broadcastEvent:h}}function Ib(t){return A([Y.config({onFocus:t.selectOnFocus?function(n){var e=n.element(),o=rr(e);e.dom().setSelectionRange(0,o.length)}:P})])}function Rb(t){return{tag:t.tag,attributes:O({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}}var ac,Vb,yl,Du,fn=ie({name:"Container",factory:function(t){var n=t.dom,e=n.attributes,o=qu(n,["attributes"]);return{uid:t.uid,dom:O({tag:"div",attributes:O({role:"presentation"},e)},o),components:t.components,behaviours:bf(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[k("components",[]),Gt("containerBehaviours",[]),k("events",{}),k("domModification",{}),k("eventOrder",{})]}),ae=N("form-component-change"),Au=N("form-close"),Tr=N("form-cancel"),to=N("form-action"),Mu=N("form-submit"),xl=N("form-block"),wl=N("form-unblock"),Hb=N("form-tabchange"),Nb=N("form-resize"),N_=y([k("prefix","form-field"),Gt("fieldBehaviours",[at,M])]),P_=y([He({schema:[E("dom")],name:"label"}),He({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[E("text")],name:"aria-descriptor"}),sn({factory:{sketch:function(t){var n=hS(t,["factory"]);return t.factory.sketch(n)}},schema:[E("factory")],name:"field"})]),pt=On({name:"FormField",configFields:N_(),partFields:P_(),factory:function(t,n,e,o){var r=Jt(t.fieldBehaviours,[at.config({find:function(a){return vt(a,t,"field")}}),M.config({store:{mode:"manual",getValue:function(a){return at.getCurrent(a).bind(M.getValue)},setValue:function(a,s){at.getCurrent(a).each(function(c){M.setValue(c,s)})}}})]),i=xt([It(function(a,s){var c=Wp(a,t,["label","field","aria-descriptor"]);c.field().each(function(f){var l=N(t.prefix);c.label().each(function(m){lt(m.element(),"for",l),lt(f.element(),"id",l)}),c["aria-descriptor"]().each(function(m){var h=N(t.prefix);lt(m.element(),"id",h),lt(f.element(),"aria-describedby",h)})})})]),u={getField:function(a){return vt(a,t,"field")},getLabel:function(a){return vt(a,t,"label")}};return{uid:t.uid,dom:t.dom,components:n,behaviours:r,events:i,apis:u}},apis:{getField:function(t,n){return t.getField(n)},getLabel:function(t,n){return t.getLabel(n)}}}),Pb=y([ft("data"),k("inputAttributes",{}),k("inputStyles",{}),k("tag","input"),k("inputClasses",[]),dt("onSetValue"),k("styles",{}),k("eventOrder",{}),Gt("inputBehaviours",[M,Y]),k("selectOnFocus",!0)]),Fu=ie({name:"Input",configFields:Pb(),factory:function(t,n){return{uid:t.uid,dom:Rb(t),components:[],behaviours:function(e){return O(O({},Ib(e)),Jt(e.inputBehaviours,[M.config({store:O(O({mode:"manual"},e.data.map(function(o){return{initialValue:o}}).getOr({})),{getValue:function(o){return rr(o.element())},setValue:function(o,r){rr(o.element())!==r&&fa(o.element(),r)}}),onSetValue:e.onSetValue})]))}(t),eventOrder:t.eventOrder}}}),zb={},Lb={exports:zb};ac=void 0,Vb=zb,yl=Lb,Du=void 0,function(t){typeof Vb=="object"&&yl!==void 0?yl.exports=t():typeof ac=="function"&&ac.amd?ac([],t):(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this).EphoxContactWrapper=t()}(function(){return function t(n,e,o){function r(a,s){if(!e[a]){if(!n[a]){var c=typeof Du=="function"&&Du;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var l=e[a]={exports:{}};n[a][0].call(l.exports,function(m){return r(n[a][1][m]||m)},l,l.exports,t,n,e,o)}return e[a].exports}for(var i=typeof Du=="function"&&Du,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(t,n,e){var o,r,i=n.exports={};function u(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(x){if(o===setTimeout)return setTimeout(x,0);if((o===u||!o)&&setTimeout)return o=setTimeout,setTimeout(x,0);try{return o(x,0)}catch(v){try{return o.call(null,x,0)}catch(S){return o.call(this,x,0)}}}(function(){try{o=typeof setTimeout=="function"?setTimeout:u}catch(x){o=u}try{r=typeof clearTimeout=="function"?clearTimeout:a}catch(x){r=a}})();var c,f=[],l=!1,m=-1;function h(){l&&c&&(l=!1,c.length?f=c.concat(f):m=-1,f.length&&g())}function g(){if(!l){var x=s(h);l=!0;for(var v=f.length;v;){for(c=f,f=[];++m<v;)c&&c[m].run();m=-1,v=f.length}c=null,l=!1,function(w){if(r===clearTimeout)return clearTimeout(w);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(w);try{return r(w)}catch(C){try{return r.call(null,w)}catch(_){return r.call(this,w)}}}(x)}}function b(x,v){this.fun=x,this.array=v}function p(){}i.nextTick=function(x){var v=new Array(arguments.length-1);if(1<arguments.length)for(var S=1;S<arguments.length;S++)v[S-1]=arguments[S];f.push(new b(x,v)),f.length!==1||l||s(g)},b.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(x){return[]},i.binding=function(x){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(x){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(t,n,e){(function(o){function r(){}function i(g){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof g!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(g,this)}function u(g,b){for(;g._state===3;)g=g._value;g._state!==0?(g._handled=!0,i._immediateFn(function(){var p=g._state===1?b.onFulfilled:b.onRejected;if(p!==null){var x;try{x=p(g._value)}catch(v){return void s(b.promise,v)}a(b.promise,x)}else(g._state===1?a:s)(b.promise,g._value)})):g._deferreds.push(b)}function a(g,b){try{if(b===g)throw new TypeError("A promise cannot be resolved with itself.");if(b&&(typeof b=="object"||typeof b=="function")){var p=b.then;if(b instanceof i)return g._state=3,g._value=b,void c(g);if(typeof p=="function")return void l(function(v,S){return function(){v.apply(S,arguments)}}(p,b),g)}g._state=1,g._value=b,c(g)}catch(x){s(g,x)}}function s(g,b){g._state=2,g._value=b,c(g)}function c(g){g._state===2&&g._deferreds.length===0&&i._immediateFn(function(){g._handled||i._unhandledRejectionFn(g._value)});for(var b=0,p=g._deferreds.length;b<p;b++)u(g,g._deferreds[b]);g._deferreds=null}function f(g,b,p){this.onFulfilled=typeof g=="function"?g:null,this.onRejected=typeof b=="function"?b:null,this.promise=p}function l(g,b){var p=!1;try{g(function(x){p||(p=!0,a(b,x))},function(x){p||(p=!0,s(b,x))})}catch(x){if(p)return;p=!0,s(b,x)}}var m,h;m=this,h=setTimeout,i.prototype.catch=function(g){return this.then(null,g)},i.prototype.then=function(g,b){var p=new this.constructor(r);return u(this,new f(g,b,p)),p},i.all=function(g){var b=Array.prototype.slice.call(g);return new i(function(p,x){if(b.length===0)return p([]);var v=b.length;function S(C,_){try{if(_&&(typeof _=="object"||typeof _=="function")){var T=_.then;if(typeof T=="function")return void T.call(_,function(D){S(C,D)},x)}b[C]=_,--v==0&&p(b)}catch(D){x(D)}}for(var w=0;w<b.length;w++)S(w,b[w])})},i.resolve=function(g){return g&&typeof g=="object"&&g.constructor===i?g:new i(function(b){b(g)})},i.reject=function(g){return new i(function(b,p){p(g)})},i.race=function(g){return new i(function(b,p){for(var x=0,v=g.length;x<v;x++)g[x].then(b,p)})},i._immediateFn=typeof o=="function"?function(g){o(g)}:function(g){h(g,0)},i._unhandledRejectionFn=function(g){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",g)},i._setImmediateFn=function(g){i._immediateFn=g},i._setUnhandledRejectionFn=function(g){i._unhandledRejectionFn=g},n!==void 0&&n.exports?n.exports=i:m.Promise||(m.Promise=i)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(t,n,e){(function(o,r){var i=t("process/browser.js").nextTick,u=Function.prototype.apply,a=Array.prototype.slice,s={},c=0;function f(l,m){this._id=l,this._clearFn=m}e.setTimeout=function(){return new f(u.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new f(u.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(l){l.close()},f.prototype.unref=f.prototype.ref=function(){},f.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(l,m){clearTimeout(l._idleTimeoutId),l._idleTimeout=m},e.unenroll=function(l){clearTimeout(l._idleTimeoutId),l._idleTimeout=-1},e._unrefActive=e.active=function(l){clearTimeout(l._idleTimeoutId);var m=l._idleTimeout;0<=m&&(l._idleTimeoutId=setTimeout(function(){l._onTimeout&&l._onTimeout()},m))},e.setImmediate=typeof o=="function"?o:function(l){var m=c++,h=!(arguments.length<2)&&a.call(arguments,1);return s[m]=!0,i(function(){s[m]&&(h?l.apply(null,h):l.call(null),e.clearImmediate(m))}),m},e.clearImmediate=typeof r=="function"?r:function(l){delete s[l]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,n,e){var o=t("promise-polyfill"),r=typeof window!="undefined"?window:Function("return this;")();n.exports={boltExport:r.Promise||o}},{"promise-polyfill":2}]},{},[4])(4)});function z_(t){F.setTimeout(function(){throw t},0)}function jb(t){var n=qe(t);return Mt(j_,n)}function Ub(t,n){var e=n.getRoot(t).getOr(t.element());Ut(e,n.invalidClass),n.notify.each(function(o){jb(t.element())&&lt(t.element(),"aria-invalid",!1),o.getContainer(t).each(function(r){Xi(r,o.validHtml)}),o.onValid(t)})}function Wb(t,n,e,o){var r=n.getRoot(t).getOr(t.element());en(r,n.invalidClass),n.notify.each(function(i){jb(t.element())&&lt(t.element(),"aria-invalid",!0),i.getContainer(t).each(function(u){Xi(u,o)}),i.onInvalid(t,o)})}function Gb(t,n,e){return n.validator.fold(function(){return vo(ot.value(!0))},function(o){return o.validate(t)})}function Sl(t,n,e){return n.notify.each(function(o){o.onValidate(t)}),Gb(t,n).map(function(o){return t.getSystem().isConnected()?o.fold(function(r){return Wb(t,n,0,r),ot.error(r)},function(r){return Ub(t,n),ot.value(r)}):ot.error("No longer in system")})}function Iu(t,n,e,o){var r=q_(t,n,e,o);return pt.sketch(r)}function Er(t,n){return pt.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(t)}})}var ze,cc,Xb=Lb.exports.boltExport,Cl=function(t){var n=d.none(),e=[],o=function(a){r()?u(a):e.push(a)},r=function(){return n.isSome()},i=function(a){K(a,u)},u=function(a){n.each(function(s){F.setTimeout(function(){a(s)},0)})};return t(function(a){n=d.some(a),i(e),e=[]}),{get:o,map:function(a){return Cl(function(s){o(function(c){s(a(c))})})},isReady:r}},L_={nu:Cl,pure:function(t){return Cl(function(n){n(t)})}},xi=function(t){function n(e){t().then(e,z_)}return{map:function(e){return xi(function(){return t().then(e)})},bind:function(e){return xi(function(){return t().then(function(o){return e(o).toPromise()})})},anonBind:function(e){return xi(function(){return t().then(function(){return e.toPromise()})})},toLazy:function(){return L_.nu(n)},toCached:function(){var e=null;return xi(function(){return e===null&&(e=t()),e})},toPromise:t,get:n}},jo=function(t){return xi(function(){return new Xb(t)})},vo=function(t){return xi(function(){return Xb.resolve(t)})},j_=["input","textarea"],U_=Object.freeze({__proto__:null,markValid:Ub,markInvalid:Wb,query:Gb,run:Sl,isInvalid:function(t,n){var e=n.getRoot(t).getOr(t.element());return Ke(e,n.invalidClass)}}),W_=Object.freeze({__proto__:null,events:function(t,n){return t.validator.map(function(e){return xt([B(e.onEvent,function(o){Sl(o,t).get(bt)})].concat(e.validateOnLoad?[It(function(o){Sl(o,t).get(P)})]:[]))}).getOr({})}}),G_=[E("invalidClass"),k("getRoot",d.none),oe("notify",[k("aria","alert"),k("getContainer",d.none),k("validHtml",""),dt("onValid"),dt("onInvalid"),dt("onValidate")]),oe("validator",[E("validate"),k("onEvent","input"),k("validateOnLoad",!0)])],no=on({fields:G_,name:"invalidating",active:W_,apis:U_,extra:{validation:function(t){return function(n){var e=M.getValue(n);return vo(t(e))}}}}),X_=Object.freeze({__proto__:null,exhibit:function(t,n){return Te({attributes:Xr([{key:n.tabAttr,value:"true"}])})}}),Y_=[k("tabAttr","data-alloy-tabstop")],Rt=on({fields:Y_,name:"tabstopping",active:X_}),q_=function(t,n,e,o){return{dom:Yb(e),components:t.toArray().concat([n]),fieldBehaviours:A(o)}},Yb=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},K_=Object.freeze({__proto__:null,getCoupled:function(t,n,e,o){return e.getOrCreate(t,n,o)}}),J_=[Xn("others",km(ot.value,ar()))],Vt=on({fields:J_,name:"coupling",apis:K_,state:Object.freeze({__proto__:null,init:function(){var t={},n=y({});return ve({readState:n,getOrCreate:function(e,o,r){var i=Ht(o.others);if(i)return J(t,r).getOrThunk(function(){var u=J(o.others,r).getOrDie("No information found for coupled component: "+r)(e),a=e.getSystem().build(u);return t[r]=a});throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+JSON.stringify(i,null,2))}})}})}),qb=y("sink"),Kb=y(He({name:qb(),overrides:y({dom:{tag:"div"},behaviours:A([Fn.config({useFixed:$o})]),events:xt([er(pa()),er(De()),er(ru())])})}));(cc=ze=ze||{})[cc.HighlightFirst=0]="HighlightFirst",cc[cc.HighlightNone=1]="HighlightNone";function Jb(t,n){var e=t.getHotspot(n).getOr(n),o=t.getAnchorOverrides();return t.layouts.fold(function(){return{anchor:"hotspot",hotspot:e,overrides:o}},function(r){return{anchor:"hotspot",hotspot:e,overrides:o,layouts:r}})}function kl(t,n,e,o,r,i,u){return function(a,s,c,f,l,m,h){var g=function(p,x,v){return(0,p.fetch)(v).map(x)}(a,s,f),b=Ty(f,a);return g.map(function(p){return p.bind(function(x){return d.from(kr.sketch(O(O({},m.menu()),{uid:Yi(""),data:x,highlightImmediately:h===ze.HighlightFirst,onOpenMenu:function(v,S){var w=b().getOrDie();Fn.position(w,c,S),rt.decloak(l)},onOpenSubmenu:function(v,S,w){var C=b().getOrDie();Fn.position(C,{anchor:"submenu",item:S},w),rt.decloak(l)},onRepositionMenu:function(v,S,w){var C=b().getOrDie();Fn.position(C,c,S),K(w,function(_){Fn.position(C,{anchor:"submenu",item:_.triggeringItem},_.triggeredMenu)})},onEscape:function(){return Y.focus(f),rt.close(l),d.some(!0)}})))})})}(t,n,Jb(t,e),e,o,r,u).map(function(a){return a.fold(function(){rt.isOpen(o)&&rt.close(o)},function(s){rt.cloak(o),rt.open(o,s),i(o)}),o})}function $_(t,n,e,o,r,i,u){return rt.close(o),vo(o)}function wi(t,n,e,o,r,i){var u=Vt.getCoupled(e,"sandbox");return(rt.isOpen(u)?$_:kl)(t,n,e,u,o,r,i)}function Q_(t,n,e){var o=at.getCurrent(n).getOr(n),r=Mn(t.element());e?nt(o.element(),"min-width",r+"px"):function(i,u){ya.set(i,u)}(o.element(),r)}function $b(t){rt.getState(t).each(function(n){kr.repositionMenus(n)})}function Ol(t,n,e){var o=Ng(),r=Ty(n,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:o.id(),role:"listbox"}},behaviours:fi(t.sandboxBehaviours,[M.config({store:{mode:"memory",initialValue:n}}),rt.config({onOpen:function(i,u){var a=Jb(t,n);o.link(n.element()),t.matchWidth&&Q_(a.hotspot,u,t.useMinWidth),t.onOpen(a,i,u),e!==void 0&&e.onOpen!==void 0&&e.onOpen(i,u)},onClose:function(i,u){o.unlink(n.element()),e!==void 0&&e.onClose!==void 0&&e.onClose(i,u)},isPartOf:function(i,u,a){return gr(u,a)||gr(n,a)},getAttachPoint:function(){return r().getOrDie()}}),at.config({find:function(i){return rt.getState(i).bind(function(u){return at.getCurrent(u)})}}),Re.config({channels:O(O({},pf({isExtraPart:y(!1)})),hf({isExtraPart:y(!1),doReposition:$b}))})])}}function Qb(t){var n=Vt.getCoupled(t,"sandbox");$b(n)}function _l(){return[k("sandboxClasses",[]),si("sandboxBehaviours",[at,Re,rt,M])]}function Z_(t,n,e){function o(a,s){j(a,By,{value:s})}var r=pt.parts().field({factory:Fu,inputClasses:["tox-textfield"],onSetValue:function(a){return no.run(a).get(function(){})},inputBehaviours:A([Rt.config({}),no.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(a){return Vn(a.element())},notify:{onValid:function(a){var s=M.getValue(a);j(a,Ey,{color:s})}},validator:{validateOnLoad:!1,validate:function(a){var s=M.getValue(a);if(s.length===0)return vo(ot.value(!0));var c=z.fromTag("span");nt(c,"background-color",s);var f=gn(c,"background-color").fold(function(){return ot.error("blah")},function(l){return ot.value(s)});return vo(f)}}})]),selectOnFocus:!1}),i=t.label.map(function(a){return Er(a,n.providers)}),u=gt(function(a,s){return Ce.sketch({dom:a.dom,components:a.components,toggleClass:"mce-active",dropdownBehaviours:A([Ru.config({}),Rt.config({})]),layouts:a.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:function(c){return jo(function(f){return a.fetch(f)}).map(function(f){return d.from(Sb(yt(hl(N("menu-value"),f,function(l){a.onItemAction(c,l)},a.columns,a.presets,Ze.CLOSE_ON_EXECUTE,function(){return!1},s.providers),{movement:ic(a.columns,a.presets)})))})},parts:{menu:rc(0,0,a.presets)}})}({dom:{tag:"span",attributes:{"aria-label":n.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[Sn]},onLtr:function(){return[Cn]}},components:[],fetch:Tu.getFetch(e.getColors(),e.hasCustomColors()),columns:e.getColorCols(),presets:"color",onItemAction:function(a,s){u.getOpt(a).each(function(c){s==="custom"?e.colorPicker(function(f){f.fold(function(){return ct(c,Dy)},function(l){o(c,l),hb(l)})},"#ffffff"):o(c,s==="remove"?"":s)})}},n));return pt.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:i.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[r,u.asSpec()]}]),fieldBehaviours:A([Z("form-field-events",[B(Ey,function(a,s){u.getOpt(a).each(function(c){nt(c.element(),"background-color",s.event().color())}),j(a,ae,{name:t.name})}),B(By,function(a,s){pt.getField(a).each(function(c){M.setValue(c,s.event().value()),at.getCurrent(a).each(Y.focus)})}),B(Dy,function(a,s){pt.getField(a).each(function(c){at.getCurrent(a).each(Y.focus)})})])])})}function sc(t,n,e){return{hue:y(t),saturation:y(n),value:y(e)}}function Uo(t){return He({name:t+"-edge",overrides:function(n){return n.model.manager.edgeActions[t].fold(function(){return{}},function(e){return{events:xt([ls(Io(),function(o,r,i){return e(o,i)},[n]),ls(De(),function(o,r,i){return e(o,i)},[n]),ls(ga(),function(o,r,i){i.mouseIsDown.get()&&e(o,i)},[n])])}})}})}function Tl(t){var n=t.event().raw();if(function(r){return r.type.indexOf("touch")!==-1}(n)){var e=n;return e.touches!==void 0&&e.touches.length===1?d.some(e.touches[0]).map(function(r){return Bt(r.clientX,r.clientY)}):d.none()}var o=n;return o.clientX!==void 0?d.some(o).map(function(r){return Bt(r.clientX,r.clientY)}):d.none()}function Br(t){return t.model.minX}function Dr(t){return t.model.minY}function fc(t){return t.model.minX-1}function lc(t){return t.model.minY-1}function Ar(t){return t.model.maxX}function Mr(t){return t.model.maxY}function dc(t){return t.model.maxX+1}function mc(t){return t.model.maxY+1}function Zb(t,n,e){return n(t)-e(t)}function El(t){return Zb(t,Ar,Br)}function Bl(t){return Zb(t,Mr,Dr)}function ty(t){return El(t)/2}function ny(t){return Bl(t)/2}function Si(t){return t.stepSize}function ey(t){return t.snapToGrid}function oy(t){return t.snapStart}function ry(t){return t.rounded}function gc(t,n){return t[n+"-edge"]!==void 0}function iy(t){return gc(t,"left")}function uy(t){return gc(t,"right")}function ay(t){return gc(t,"top")}function cy(t){return gc(t,"bottom")}function bo(t){return t.model.value.get()}function sy(t){return{x:y(t)}}function fy(t){return{y:y(t)}}function Wo(t,n){return{x:y(t),y:y(n)}}function we(t,n){j(t,Vu(),{value:n})}function Dl(t,n,e,o){return t<n?t:e<t?e:t===n?n-1:Math.max(n,t-o)}function Al(t,n,e,o){return e<t?t:t<n?n:t===e?e+1:Math.min(e,t+o)}function ly(t,n,e){return Math.max(n,Math.min(e,t))}function dy(t){var n=t.min,e=t.max,o=t.range,r=t.value,i=t.step,u=t.snap,a=t.snapStart,s=t.rounded,c=t.hasMinEdge,f=t.hasMaxEdge,l=t.minBound,m=t.maxBound,h=t.screenRange,g=c?n-1:n,b=f?e+1:e;if(r<l)return g;if(m<r)return b;var p=function(v,S,w){return Math.min(w,Math.max(v,S))-S}(r,l,m),x=ly(p/h*o+n,g,b);return u&&n<=x&&x<=e?function(v,S,w,C,_){return _.fold(function(){var T=v-S,D=Math.round(T/C)*C;return ly(S+D,S-1,w+1)},function(T){var D=(v-T)%C,H=Math.round(D/C),U=Math.floor((v-T)/C),q=Math.floor((w-T)/C),tt=T+Math.min(q,U+H)*C;return Math.max(T,tt)})}(x,n,e,i,a):s?Math.round(x):x}function my(t){var n=t.min,e=t.max,o=t.range,r=t.value,i=t.hasMinEdge,u=t.hasMaxEdge,a=t.maxBound,s=t.maxOffset,c=t.centerMinEdge,f=t.centerMaxEdge;return r<n?i?0:c:e<r?u?a:f:(r-n)/o*s}function eo(t){return t.element().dom().getBoundingClientRect()}function Se(t,n){return t[n]}function pc(t){var n=eo(t);return Se(n,Vl)}function gy(t){var n=eo(t);return Se(n,"right")}function hc(t){var n=eo(t);return Se(n,"top")}function py(t){var n=eo(t);return Se(n,"bottom")}function hy(t){var n=eo(t);return Se(n,"width")}function vy(t){var n=eo(t);return Se(n,"height")}function by(t,n,e){return(t+n)/2-e}function yy(t,n){var e=eo(t),o=eo(n),r=Se(e,Vl),i=Se(e,"right"),u=Se(o,Vl);return by(r,i,u)}function xy(t,n){var e=eo(t),o=eo(n),r=Se(e,"top"),i=Se(e,"bottom"),u=Se(o,"top");return by(r,i,u)}function vc(t,n){j(t,Vu(),{value:n})}function bc(t){return{x:y(t)}}function Ml(t,n,e){var o={min:Br(n),max:Ar(n),range:El(n),value:e,step:Si(n),snap:ey(n),snapStart:oy(n),rounded:ry(n),hasMinEdge:iy(n),hasMaxEdge:uy(n),minBound:pc(t),maxBound:gy(t),screenRange:hy(t)};return dy(o)}function wy(t){return function(n,e){return function(o,r,i){var u=(0<o?Al:Dl)(bo(i).x(),Br(i),Ar(i),Si(i));return vc(r,bc(u)),d.some(u)}(t,n,e).map(function(){return!0})}}function Fl(t,n,e,o,r,i){var u=function(a,s,c,f,l){var m=hy(a),h=f.bind(function(p){return d.some(yy(p,a))}).getOr(0),g=l.bind(function(p){return d.some(yy(p,a))}).getOr(m),b={min:Br(s),max:Ar(s),range:El(s),value:c,hasMinEdge:iy(s),hasMaxEdge:uy(s),minBound:pc(a),minOffset:0,maxBound:gy(a),maxOffset:m,centerMinEdge:h,centerMaxEdge:g};return my(b)}(n,i,e,o,r);return pc(n)-pc(t)+u}function yc(t,n){j(t,Vu(),{value:n})}function xc(t){return{y:y(t)}}function Il(t,n,e){var o={min:Dr(n),max:Mr(n),range:Bl(n),value:e,step:Si(n),snap:ey(n),snapStart:oy(n),rounded:ry(n),hasMinEdge:ay(n),hasMaxEdge:cy(n),minBound:hc(t),maxBound:py(t),screenRange:vy(t)};return dy(o)}function Sy(t){return function(n,e){return function(o,r,i){var u=(0<o?Al:Dl)(bo(i).y(),Dr(i),Mr(i),Si(i));return yc(r,xc(u)),d.some(u)}(t,n,e).map(function(){return!0})}}function Rl(t,n,e,o,r,i){var u=function(a,s,c,f,l){var m=vy(a),h=f.bind(function(p){return d.some(xy(p,a))}).getOr(0),g=l.bind(function(p){return d.some(xy(p,a))}).getOr(m),b={min:Dr(s),max:Mr(s),range:Bl(s),value:c,hasMinEdge:ay(s),hasMaxEdge:cy(s),minBound:hc(a),minOffset:0,maxBound:py(a),maxOffset:m,centerMinEdge:h,centerMaxEdge:g};return my(b)}(n,i,e,o,r);return hc(n)-hc(t)+u}function wc(t,n){j(t,Vu(),{value:n})}function Sc(t,n){return{x:y(t),y:y(n)}}function Cc(t,n){return function(e,o){return function(r,i,u,a){var s=0<r?Al:Dl,c=i?bo(a).x():s(bo(a).x(),Br(a),Ar(a),Si(a)),f=i?s(bo(a).y(),Dr(a),Mr(a),Si(a)):bo(a).y();return wc(u,Sc(c,f)),d.some(c)}(t,n,e,o).map(function(){return!0})}}function Cy(t){return"<alloy.field."+t+">"}function tT(t,n,e,o){function r(s,c,f,l,m){var h=t(Hl+"range"),g=[pt.parts().label({dom:{tag:"label",innerHtml:f,attributes:{"aria-label":l}}}),pt.parts().field({data:m,factory:Fu,inputAttributes:O({type:"text"},c==="hex"?{"aria-live":"polite"}:{}),inputClasses:[n("textfield")],inputBehaviours:A([function(p,x){return no.config({invalidClass:n("invalid"),notify:{onValidate:function(v){j(v,Ry,{type:p})},onValid:function(v){j(v,Fy,{type:p,value:M.getValue(v)})},onInvalid:function(v){j(v,Iy,{type:p,value:M.getValue(v)})}},validator:{validate:function(v){var S=M.getValue(v),w=x(S)?ot.value(!0):ot.error(t("aria.input.invalid"));return vo(w)},validateOnLoad:!1}})}(c,s),Rt.config({})]),onSetValue:function(p){no.isInvalid(p)&&no.run(p).get(P)}})],b=c!=="hex"?[pt.parts()["aria-descriptor"]({text:h})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:g.concat(b)}}function i(s,c){var f=c.red(),l=c.green(),m=c.blue();M.setValue(s,{red:f,green:l,blue:m})}function u(s,c){a.getOpt(s).each(function(f){nt(f.element(),"background-color","#"+c.value())})}var a=gt({dom:{tag:"div",classes:[n("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}});return ie({factory:function(){function s(w){return g[w]().get()}function c(w,C){g[w]().set(C)}function f(w,C){var _=C.event();_.type()!=="hex"?c(_.type(),d.none()):o(w)}function l(w,C,_){var T=parseInt(_,10);c(C,d.some(T)),s("red").bind(function(D){return s("green").bind(function(H){return s("blue").map(function(U){return _r(D,H,U,1)})})}).each(function(D){var H=function(U,q){var tt=ec(q);return Ci.getField(U,"hex").each(function(St){Y.isFocused(St)||M.setValue(U,{hex:tt.value()})}),tt}(w,D);u(w,H)})}function m(w,C){var _=C.event();(function(T){return T.type()==="hex"})(_)?function(T,D){e(T);var H=qv(D);c("hex",d.some(D));var U=fl(H);i(T,U),b(U),j(T,sT(),{hex:H}),u(T,H)}(w,_.value()):l(w,_.type(),_.value())}function h(w){return{label:t(Hl+w+".label"),description:t(Hl+w+".description")}}var g={red:y(V(d.some(255))),green:y(V(d.some(255))),blue:y(V(d.some(255))),hex:y(V(d.some("ffffff")))},b=function(w){var C=w.red(),_=w.green(),T=w.blue();c("red",d.some(C)),c("green",d.some(_)),c("blue",d.some(T))},p=h("red"),x=h("green"),v=h("blue"),S=h("hex");return yt(Ci.sketch(function(w){return{dom:{tag:"form",classes:[n("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[w.field("red",pt.sketch(r(sl,"red",p.label,p.description,255))),w.field("green",pt.sketch(r(sl,"green",x.label,x.description,255))),w.field("blue",pt.sketch(r(sl,"blue",v.label,v.description,255))),w.field("hex",pt.sketch(r(e_,"hex",S.label,S.description,"ffffff"))),a.asSpec()],formBehaviours:A([no.config({invalidClass:n("form-invalid")}),Z("rgb-form-events",[B(Fy,m),B(Iy,f),B(Ry,f)])])}}),{apis:{updateHex:function(w,C){M.setValue(w,{hex:C.value()}),function(_,T){var D=fl(T);i(_,D),b(D)}(w,C),u(w,C)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(s,c,f){s.updateHex(c,f)}},extraApis:{}})}function nT(t,n){function e(i,u){var a=i.width,s=i.height,c=i.getContext("2d");if(c!==null){c.fillStyle=u,c.fillRect(0,0,a,s);var f=c.createLinearGradient(0,0,a,0);f.addColorStop(0,"rgba(255,255,255,1)"),f.addColorStop(1,"rgba(255,255,255,0)"),c.fillStyle=f,c.fillRect(0,0,a,s);var l=c.createLinearGradient(0,0,0,s);l.addColorStop(0,"rgba(0,0,0,0)"),l.addColorStop(1,"rgba(0,0,0,1)"),c.fillStyle=l,c.fillRect(0,0,a,s)}}var o=oo.parts().spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[n("sv-palette-spectrum")]}}),r=oo.parts().thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[n("sv-palette-thumb")],innerHtml:"<div class="+n("sv-palette-inner-thumb")+' role="presentation"></div>'}});return ie({factory:function(i){var u=y({x:y(0),y:y(0)}),a=A([at.config({find:d.some}),Y.config({})]);return oo.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[n("sv-palette")]},model:{mode:"xy",getInitialValue:u},rounded:!1,components:[o,r],onChange:function(s,c,f){j(s,My(),{value:f})},onInit:function(s,c,f,l){e(f.element().dom(),$v(eb()))},sliderBehaviours:a})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(i,u,a){(function(s,c){var f=s.components()[0].element().dom();e(f,$v(c))})(u,a)}},extraApis:{}})}function eT(t,n){return ie({name:"ColourPicker",configFields:[E("dom"),k("onValidHex",P),k("onInvalidHex",P)],factory:function(e){function o(h,g){l.getOpt(h).each(function(b){var p=fl(g);f.paletteRgba().set(p),c.setRgba(b,p)})}function r(h,g){m.getOpt(h).each(function(b){s.updateHex(b,g)})}function i(h,g,b){K(b,function(p){p(h,g)})}var u,a,s=tT(t,n,e.onValidHex,e.onInvalidHex),c=nT(0,n),f={paletteRgba:y(V(eb()))},l=gt(c.sketch({})),m=gt(s.sketch({}));return{uid:e.uid,dom:e.dom,components:[l.asSpec(),function(h,g){var b=oo.parts().spectrum({dom:{tag:"div",classes:[g("hue-slider-spectrum")],attributes:{role:"presentation"}}}),p=oo.parts().thumb({dom:{tag:"div",classes:[g("hue-slider-thumb")],attributes:{role:"presentation"}}});return oo.sketch({dom:{tag:"div",classes:[g("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:y({y:y(0)})},components:[b,p],sliderBehaviours:A([Y.config({})]),onChange:function(x,v,S){j(x,Ay(),{value:S})}})}(0,n),m.asSpec()],behaviours:A([Z("colour-picker-events",[B(My(),(a=[r],function(h,g){var b=g.event().value(),p=function(w){var C,_=0,T=0,D=w.red()/255,H=w.green()/255,U=w.blue()/255,q=Math.min(D,Math.min(H,U)),tt=Math.max(D,Math.max(H,U));return q===tt?sc(0,0,100*(T=q)):(_=60*((_=D===q?3:U===q?1:5)-(D===q?H-U:U===q?D-H:U-D)/(tt-q)),C=(tt-q)/tt,T=tt,sc(Math.round(_),Math.round(100*C),Math.round(100*T)))}(f.paletteRgba().get()),x=sc(p.hue(),b.x(),100-b.y()),v=Kv(x),S=ec(v);i(h,S,a)})),B(Ay(),(u=[o,r],function(h,g){var b=function(p){var x=sc((100-p)/100*360,100,100),v=Kv(x);return ec(v)}(g.event().value().y());i(h,b,u)}))]),at.config({find:function(h){return m.getOpt(h)}}),L.config({mode:"acyclic"})])}}})}function oT(t){return function(n){return zT[n]}(t)}function ky(t,n,e){return M.config(yt({store:{mode:"manual",getValue:n,setValue:e}},t.map(function(o){return{store:{initialValue:o}}}).getOr({})))}function rT(t,n,e){return ky(t,function(o){return n(o.element())},function(o,r){return e(o.element(),r)})}function iT(t,n){function e(f,l){l.stop()}function o(f){return function(l,m){K(f,function(h){h(l,m)})}}function r(f,l){if(!X.isDisabled(f)){var m=l.event().raw();u(f,m.dataTransfer.files)}}function i(f,l){var m=l.event().raw().target.files;u(f,m)}var u=function(f,l){M.setValue(f,function(m){var h=new RegExp("("+".jpg,.jpeg,.png,.gif".split(/\s*,\s*/).join("|")+")$","i");return Ct(mS(m),function(g){return h.test(g.name)})}(l)),j(f,ae,{name:t.name})},a=gt({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:A([Z("input-file-events",[er(ru()),er(uu())])])}),s=t.label.map(function(f){return Er(f,n)}),c=pt.parts().field({factory:{sketch:function(f){return{uid:f.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:A([kc([]),Fr(),X.config({}),ut.config({toggleClass:"dragenter",toggleOnExecute:!1}),Z("dropzone-events",[B("dragenter",o([e,ut.toggle])),B("dragleave",o([e,ut.toggle])),B("dragover",e),B("drop",o([e,r])),B(ou(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:n.translate("Drop an image here")}},_n.sketch({dom:{tag:"button",innerHtml:n.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[a.asSpec()],action:function(l){a.get(l).element().dom().click()},buttonBehaviours:A([Rt.config({})])})]}]}}}});return Iu(s,c,["tox-form__group--stretched"],[])}function Oy(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:A([Y.config({ignore:!0}),Rt.config({})])}}function _y(t,n){j(t,pa(),{raw:{which:9,shiftKey:n}})}function uT(t,n){var e=YT&&t.sandboxed,o=O(O({},t.label.map(function(a){return{title:a}}).getOr({})),e?{sandbox:"allow-scripts allow-same-origin"}:{}),r=function(a){var s=V("");return{getValue:function(c){return s.get()},setValue:function(c,f){if(a)lt(c.element(),"srcdoc",f);else{lt(c.element(),"src","javascript:''");var l=c.element().dom().contentWindow.document;l.open(),l.write(f),l.close()}s.set(f)}}}(e),i=t.label.map(function(a){return Er(a,n)}),u=pt.parts().field({factory:{sketch:function(a){return Vy({uid:a.uid,dom:{tag:"iframe",attributes:o},behaviours:A([Rt.config({}),Y.config({}),WT(d.none(),r.getValue,r.setValue)])})}}});return Iu(i,u,["tox-form__group--stretched"],[])}var Ty=function(t,n){return t.getSystem().getByUid(n.uid+"-"+qb()).map(function(e){return function(){return ot.value(e)}}).getOrThunk(function(){return n.lazySink.fold(function(){return function(){return ot.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(e){return function(){return e(t)}})})},aT=y([E("dom"),E("fetch"),dt("onOpen"),Nn("onExecute"),k("getHotspot",d.some),k("getAnchorOverrides",y({})),Po(),Gt("dropdownBehaviours",[ut,Vt,L,Y]),E("toggleClass"),k("eventOrder",{}),ft("lazySink"),k("matchWidth",!1),k("useMinWidth",!1),ft("role")].concat(_l())),cT=y([ye({schema:[wa()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),Kb()]),Ce=On({name:"Dropdown",configFields:aT(),partFields:cT(),factory:function(t,n,e,o){function r(c){rt.getState(c).each(function(f){kr.highlightPrimary(f)})}function i(c,f){return nr(c),d.some(!0)}var u,a,s={expand:function(c){ut.isOn(c)||wi(t,function(f){return f},c,o,P,ze.HighlightNone).get(P)},open:function(c){ut.isOn(c)||wi(t,function(f){return f},c,o,P,ze.HighlightFirst).get(P)},isOpen:ut.isOn,close:function(c){ut.isOn(c)&&wi(t,function(f){return f},c,o,P,ze.HighlightFirst).get(P)},repositionMenus:function(c){ut.isOn(c)&&Qb(c)}};return{uid:t.uid,dom:t.dom,components:n,behaviours:Jt(t.dropdownBehaviours,[ut.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Vt.config({others:{sandbox:function(c){return Ol(t,c,{onOpen:function(){ut.on(c)},onClose:function(){ut.off(c)}})}}}),L.config({mode:"special",onSpace:i,onEnter:i,onDown:function(c,f){if(Ce.isOpen(c)){var l=Vt.getCoupled(c,"sandbox");r(l)}else Ce.open(c);return d.some(!0)},onEscape:function(c,f){return Ce.isOpen(c)?(Ce.close(c),d.some(!0)):d.none()}}),Y.config({})]),events:Wa(d.some(function(c){wi(t,function(f){return f},c,o,r,ze.HighlightFirst).get(P)})),eventOrder:O(O({},t.eventOrder),(u={},u[Ro()]=["disabling","toggling","alloy.base.behaviour"],u)),apis:s,domModification:{attributes:O(O({"aria-haspopup":"true"},t.role.fold(function(){return{}},function(c){return{role:c}})),t.dom.tag==="button"?{type:(a="type",J(t.dom,"attributes").bind(function(c){return J(c,a)})).getOr("button")}:{})}}},apis:{open:function(t,n){return t.open(n)},expand:function(t,n){return t.expand(n)},close:function(t,n){return t.close(n)},isOpen:function(t,n){return t.isOpen(n)},repositionMenus:function(t,n){return t.repositionMenus(n)}}}),Ru=on({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return xt([Vm(sC(),y(!0))])},exhibit:function(){return Te({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),Ey=N("color-input-change"),By=N("color-swatch-change"),Dy=N("color-picker-cancel"),sT=y(N("rgb-hex-update")),Ay=y(N("slider-update")),My=y(N("palette-update")),fT=He({schema:[E("dom")],name:"label"}),lT=Uo("top-left"),dT=Uo("top"),mT=Uo("top-right"),gT=Uo("right"),pT=Uo("bottom-right"),hT=Uo("bottom"),vT=Uo("bottom-left"),bT=[fT,Uo("left"),gT,dT,hT,lT,mT,vT,pT,sn({name:"thumb",defaults:y({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:xt([qr(Io(),t,"spectrum"),qr(tu(),t,"spectrum"),qr(nu(),t,"spectrum"),qr(De(),t,"spectrum"),qr(ga(),t,"spectrum"),qr(Ds(),t,"spectrum")])}}}),sn({schema:[un("mouseIsDown",function(){return V(!1)})],name:"spectrum",overrides:function(t){function n(o,r){return e.getValueFromEvent(r).map(function(i){return e.setValueFrom(o,t,i)})}var e=t.model.manager;return{behaviours:A([L.config({mode:"special",onLeft:function(o){return e.onLeft(o,t)},onRight:function(o){return e.onRight(o,t)},onUp:function(o){return e.onUp(o,t)},onDown:function(o){return e.onDown(o,t)}}),Y.config({})]),events:xt([B(Io(),n),B(tu(),n),B(De(),n),B(ga(),function(o,r){t.mouseIsDown.get()&&n(o,r)})])}}})],Vu=y("slider.change.value"),Vl="left",yT=wy(-1),xT=wy(1),wT=d.none,ST=d.none,CT={"top-left":d.none(),top:d.none(),"top-right":d.none(),right:d.some(function(t,n){we(t,sy(dc(n)))}),"bottom-right":d.none(),bottom:d.none(),"bottom-left":d.none(),left:d.some(function(t,n){we(t,sy(fc(n)))})},kT=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){var o=Ml(t,n,e),r=bc(o);return vc(t,r),o},setToMin:function(t,n){var e=Br(n);vc(t,bc(e))},setToMax:function(t,n){var e=Ar(n);vc(t,bc(e))},findValueOfOffset:Ml,getValueFromEvent:function(t){return Tl(t).map(function(n){return n.left()})},findPositionOfValue:Fl,setPositionFromValue:function(t,n,e,o){var r=bo(e),i=Fl(t,o.getSpectrum(t),r.x(),o.getLeftEdge(t),o.getRightEdge(t),e),u=Mn(n.element())/2;nt(n.element(),"left",i-u+"px")},onLeft:yT,onRight:xT,onUp:wT,onDown:ST,edgeActions:CT}),OT=d.none,_T=d.none,TT=Sy(-1),ET=Sy(1),BT={"top-left":d.none(),top:d.some(function(t,n){we(t,fy(lc(n)))}),"top-right":d.none(),right:d.none(),"bottom-right":d.none(),bottom:d.some(function(t,n){we(t,fy(mc(n)))}),"bottom-left":d.none(),left:d.none()},DT=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){var o=Il(t,n,e),r=xc(o);return yc(t,r),o},setToMin:function(t,n){var e=Dr(n);yc(t,xc(e))},setToMax:function(t,n){var e=Mr(n);yc(t,xc(e))},findValueOfOffset:Il,getValueFromEvent:function(t){return Tl(t).map(function(n){return n.top()})},findPositionOfValue:Rl,setPositionFromValue:function(t,n,e,o){var r=bo(e),i=Rl(t,o.getSpectrum(t),r.y(),o.getTopEdge(t),o.getBottomEdge(t),e),u=Hn(n.element())/2;nt(n.element(),"top",i-u+"px")},onLeft:OT,onRight:_T,onUp:TT,onDown:ET,edgeActions:BT}),AT=Cc(-1,!1),MT=Cc(1,!1),FT=Cc(-1,!0),IT=Cc(1,!0),RT={"top-left":d.some(function(t,n){we(t,Wo(fc(n),lc(n)))}),top:d.some(function(t,n){we(t,Wo(ty(n),lc(n)))}),"top-right":d.some(function(t,n){we(t,Wo(dc(n),lc(n)))}),right:d.some(function(t,n){we(t,Wo(dc(n),ny(n)))}),"bottom-right":d.some(function(t,n){we(t,Wo(dc(n),mc(n)))}),bottom:d.some(function(t,n){we(t,Wo(ty(n),mc(n)))}),"bottom-left":d.some(function(t,n){we(t,Wo(fc(n),mc(n)))}),left:d.some(function(t,n){we(t,Wo(fc(n),ny(n)))})},VT=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){var o=Ml(t,n,e.left()),r=Il(t,n,e.top()),i=Sc(o,r);return wc(t,i),i},setToMin:function(t,n){var e=Br(n),o=Dr(n);wc(t,Sc(e,o))},setToMax:function(t,n){var e=Ar(n),o=Mr(n);wc(t,Sc(e,o))},getValueFromEvent:function(t){return Tl(t)},setPositionFromValue:function(t,n,e,o){var r=bo(e),i=Fl(t,o.getSpectrum(t),r.x(),o.getLeftEdge(t),o.getRightEdge(t),e),u=Rl(t,o.getSpectrum(t),r.y(),o.getTopEdge(t),o.getBottomEdge(t),e),a=Mn(n.element())/2,s=Hn(n.element())/2;nt(n.element(),"left",i-a+"px"),nt(n.element(),"top",u-s+"px")},onLeft:AT,onRight:MT,onUp:FT,onDown:IT,edgeActions:RT}),oo=On({name:"Slider",configFields:[k("stepSize",1),k("onChange",P),k("onChoose",P),k("onInit",P),k("onDragStart",P),k("onDragEnd",P),k("snapToGrid",!1),k("rounded",!0),ft("snapStart"),Xn("model",me("mode",{x:[k("minX",0),k("maxX",100),un("value",function(t){return V(t.mode.minX)}),E("getInitialValue"),wt("manager",kT)],y:[k("minY",0),k("maxY",100),un("value",function(t){return V(t.mode.minY)}),E("getInitialValue"),wt("manager",DT)],xy:[k("minX",0),k("maxX",100),k("minY",0),k("maxY",100),un("value",function(t){return V({x:y(t.mode.minX),y:y(t.mode.minY)})}),E("getInitialValue"),wt("manager",VT)]})),Gt("sliderBehaviours",[L,M]),un("mouseIsDown",function(){return V(!1)})],partFields:bT,factory:function(t,n,e,o){function r(v){return $e(v,t,"thumb")}function i(v){return $e(v,t,"spectrum")}function u(v){return vt(v,t,"left-edge")}function a(v){return vt(v,t,"right-edge")}function s(v){return vt(v,t,"top-edge")}function c(v){return vt(v,t,"bottom-edge")}function f(v,S){x.setPositionFromValue(v,S,t,{getLeftEdge:u,getRightEdge:a,getTopEdge:s,getBottomEdge:c,getSpectrum:i})}function l(v,S){p.value.set(S);var w=r(v);return f(v,w),t.onChange(v,w,S),d.some(!0)}function m(v){var S=t.mouseIsDown.get();t.mouseIsDown.set(!1),S&&vt(v,t,"thumb").each(function(w){var C=p.value.get();t.onChoose(v,w,C)})}function h(v,S){S.stop(),t.mouseIsDown.set(!0),t.onDragStart(v,r(v))}function g(v,S){S.stop(),t.onDragEnd(v,r(v)),m(v)}var b,p=t.model,x=p.manager;return{uid:t.uid,dom:t.dom,components:n,behaviours:Jt(t.sliderBehaviours,[L.config({mode:"special",focusIn:function(v){return vt(v,t,"spectrum").map(L.focusIn).map(y(!0))}}),M.config({store:{mode:"manual",getValue:function(v){return p.value.get()}}}),Re.config({channels:(b={},b[Bf()]={onReceive:m},b)})]),events:xt([B(Vu(),function(v,S){l(v,S.event().value())}),It(function(v,S){var w=p.getInitialValue();p.value.set(w);var C=r(v);f(v,C);var _=i(v);t.onInit(v,C,_,p.value.get())}),B(Io(),h),B(nu(),g),B(De(),h),B(Ds(),g)]),apis:{resetToMin:function(v){x.setToMin(v,t)},resetToMax:function(v){x.setToMax(v,t)},changeValue:l,refresh:f},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(t,n){t.resetToMin(n)},resetToMax:function(t,n){t.resetToMax(n)},refresh:function(t,n){t.refresh(n)}}}),HT=[Gt("formBehaviours",[M])],NT=function(t,n){return{uid:t.uid,dom:t.dom,components:n,behaviours:Jt(t.formBehaviours,[M.config({store:{mode:"manual",getValue:function(e){var o=Gp(e,t);return Pt(o,function(r,i){return r().bind(function(u){return function(a,s){return a.fold(function(){return ot.error(s)},ot.value)}(at.getCurrent(u),new Error("Cannot find a current component to extract the value from for form part '"+i+"': "+Do(u.element())))}).map(M.getValue)})},setValue:function(e,o){yn(o,function(r,i){vt(e,t,i).each(function(u){at.getCurrent(u).each(function(a){M.setValue(a,r)})})})}}})]),apis:{getField:function(e,o){return vt(e,t,o).bind(at.getCurrent)}}}},Ci={getField:ca(function(t,n,e){return t.getField(n,e)}),sketch:function(t){var n,e=(n=[],{field:function(u,a){return n.push(u),Sf("form",Cy(u),a)},record:function(){return n}}),o=t(e),r=e.record(),i=I(r,function(u){return sn({name:u,pname:Cy(u)})});return Tf("form",HT,i,NT,o)}},Fy=N("valid-input"),Iy=N("invalid-input"),Ry=N("validating-input"),Hl="colorcustom.rgb.",Fr=function(){return at.config({find:d.some})},PT=function(t){return at.config({find:t.getOpt})},Nl=function(t){return at.config({find:function(n){return ms(n.element(),t).bind(function(e){return n.getSystem().getByDom(e).toOption()})}})},zT={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},LT=tinymce.util.Tools.resolve("tinymce.Resource"),jT=W([k("preprocess",bt),k("postprocess",bt)]),UT=function(t,n){var e=mn("RepresentingConfigs.memento processors",jT,n);return M.config({store:{mode:"manual",getValue:function(o){var r=t.get(o),i=M.getValue(r);return e.postprocess(i)},setValue:function(o,r){var i=e.preprocess(r),u=t.get(o);M.setValue(u,i)}}})},WT=ky,GT=function(t){return rT(t,ps,Xi)},kc=function(t){return M.config({store:{mode:"memory",initialValue:t}})},Pl=N("alloy-fake-before-tabstop"),zl=N("alloy-fake-after-tabstop"),Hu=function(t){return Cb(t,["."+Pl,"."+zl].join(","),y(!1))},XT=function(t,n){var e=n.element();Ke(e,Pl)?_y(t,!0):Ke(e,zl)&&_y(t,!1)},Vy=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[Oy([Pl]),t,Oy([zl])],behaviours:A([Nl(1)])}},YT=!(pe().browser.isIE()||pe().browser.isEdge());function ki(t,n){return Hy(F.document.createElement("canvas"),t,n)}function qT(t){var n=ki(t.width,t.height);return yo(n).drawImage(t,0,0),n}function yo(t){return t.getContext("2d")}function Hy(t,n,e){return t.width=n,t.height=e,t}function Ll(t){return t.naturalWidth||t.width}function jl(t){return t.naturalHeight||t.height}var Ny,Py,Ir=window.Promise?window.Promise:(Ny=Qn.immediateFn||typeof window.setImmediate=="function"&&window.setImmediate||function(t){F.setTimeout(t,1)},Py=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},Qn.prototype.catch=function(t){return this.then(null,t)},Qn.prototype.then=function(t,n){var e=this;return new Qn(function(o,r){zy.call(e,new KT(t,n,o,r))})},Qn.all=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=Array.prototype.slice.call(t.length===1&&Py(t[0])?t[0]:t);return new Qn(function(o,r){if(e.length===0)return o([]);var i=e.length;function u(s,c){try{if(c&&(typeof c=="object"||typeof c=="function")){var f=c.then;if(typeof f=="function")return void f.call(c,function(l){u(s,l)},r)}e[s]=c,--i==0&&o(e)}catch(l){r(l)}}for(var a=0;a<e.length;a++)u(a,e[a])})},Qn.resolve=function(t){return t&&typeof t=="object"&&t.constructor===Qn?t:new Qn(function(n){n(t)})},Qn.reject=function(t){return new Qn(function(n,e){e(t)})},Qn.race=function(t){return new Qn(function(n,e){for(var o=0,r=t;o<r.length;o++)r[o].then(n,e)})},Qn);function Qn(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],Uy(t,Nu(Ly,this),Nu(Ul,this))}function Nu(t,n){return function(){return t.apply(n,arguments)}}function zy(t){var n=this;this._state!==null?Ny(function(){var e=n._state?t.onFulfilled:t.onRejected;if(e!==null){var o;try{o=e(n._value)}catch(r){return void t.reject(r)}t.resolve(o)}else(n._state?t.resolve:t.reject)(n._value)}):this._deferreds.push(t)}function Ly(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var n=t.then;if(typeof n=="function")return void Uy(Nu(n,t),Nu(Ly,this),Nu(Ul,this))}this._state=!0,this._value=t,jy.call(this)}catch(e){Ul.call(this,e)}}function Ul(t){this._state=!1,this._value=t,jy.call(this)}function jy(){for(var t=0,n=this._deferreds;t<n.length;t++){var e=n[t];zy.call(this,e)}this._deferreds=[]}function KT(t,n,e,o){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.resolve=e,this.reject=o}function Uy(t,n,e){var o=!1;try{t(function(r){o||(o=!0,n(r))},function(r){o||(o=!0,e(r))})}catch(r){if(o)return;o=!0,e(r)}}function JT(t){return new Ir(function(n,e){(function(r){var i=r.split(","),u=/data:([^;]+)/.exec(i[0]);if(!u)return d.none();for(var a=u[1],s=i[1],c=F.atob(s),f=c.length,l=Math.ceil(f/1024),m=new Array(l),h=0;h<l;++h){for(var g=1024*h,b=Math.min(1024+g,f),p=new Array(b-g),x=g,v=0;x<b;++v,++x)p[v]=c[x].charCodeAt(0);m[h]=new Uint8Array(p)}return d.some(new F.Blob(m,{type:a}))})(t).fold(function(){e("uri is not base64: "+t)},n)})}function Wy(t,n,e){return n=n||"image/png",F.HTMLCanvasElement.prototype.toBlob?new Ir(function(o,r){t.toBlob(function(i){i?o(i):r()},n,e)}):JT(t.toDataURL(n,e))}function $T(t){return function(e){return new Ir(function(o,r){var i=F.URL.createObjectURL(e),u=new F.Image,a=function(){u.removeEventListener("load",s),u.removeEventListener("error",c)};function s(){a(),o(u)}function c(){a(),r("Unable to load data of type "+e.type+": "+i)}u.addEventListener("load",s),u.addEventListener("error",c),u.src=i,u.complete&&s()})}(t).then(function(n){(function(r){F.URL.revokeObjectURL(r.src)})(n);var e=ki(Ll(n),jl(n));return yo(e).drawImage(n,0,0),e})}function Gy(t,n,e){var o=n.type;function r(i,u){return t.then(function(a){return function(c,f,l){return f=f||"image/png",c.toDataURL(f,l)}(a,i,u)})}return{getType:y(o),toBlob:function(){return Ir.resolve(n)},toDataURL:function(){return e},toBase64:function(){return e.split(",")[1]},toAdjustedBlob:function(u,a){return t.then(function(s){return Wy(s,u,a)})},toAdjustedDataURL:r,toAdjustedBase64:function(u,a){return r(u,a).then(function(s){return s.split(",")[1]})},toCanvas:function(){return t.then(qT)}}}function QT(t){return function(e){return new Ir(function(o){var r=new F.FileReader;r.onloadend=function(){o(r.result)},r.readAsDataURL(e)})}(t).then(function(n){return Gy($T(t),t,n)})}function Rr(t,n){return Wy(t,n).then(function(e){return Gy(Ir.resolve(t),e,t.toDataURL())})}function Pu(t,n,e){var o=typeof t=="string"?parseFloat(t):t;return e<o?o=e:o<n&&(o=n),o}var Wl=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];function Gl(t,n){for(var e,o=[],r=new Array(25),i=0;i<5;i++){for(var u=0;u<5;u++)o[u]=n[u+5*i];for(u=0;u<5;u++){for(var a=e=0;a<5;a++)e+=t[u+5*a]*o[a];r[u+5*i]=e}}return r}function Xl(t,n){return t.toCanvas().then(function(e){return function(r,i,u){var a=yo(r),s=function(f,l){for(var m,h,g,b,p=f.data,x=l[0],v=l[1],S=l[2],w=l[3],C=l[4],_=l[5],T=l[6],D=l[7],H=l[8],U=l[9],q=l[10],tt=l[11],St=l[12],Ot=l[13],Lt=l[14],vn=l[15],ne=l[16],We=l[17],En=l[18],uo=l[19],Qt=0;Qt<p.length;Qt+=4)m=p[Qt],h=p[Qt+1],g=p[Qt+2],b=p[Qt+3],p[Qt]=m*x+h*v+g*S+b*w+C,p[Qt+1]=m*_+h*T+g*D+b*H+U,p[Qt+2]=m*q+h*tt+g*St+b*Ot+Lt,p[Qt+3]=m*vn+h*ne+g*We+b*En+uo;return f}(a.getImageData(0,0,r.width,r.height),u);return a.putImageData(s,0,0),Rr(r,i)}(e,t.getType(),n)})}function ZT(t,n){return t.toCanvas().then(function(e){return function(r,i,u){var a=yo(r),s=a.getImageData(0,0,r.width,r.height),c=a.getImageData(0,0,r.width,r.height);return c=function(l,m,h){function g(vn,ne,We){return We<vn?vn=We:vn<ne&&(vn=ne),vn}for(var b=Math.round(Math.sqrt(h.length)),p=Math.floor(b/2),x=l.data,v=m.data,S=l.width,w=l.height,C=0;C<w;C++)for(var _=0;_<S;_++){for(var T=0,D=0,H=0,U=0;U<b;U++)for(var q=0;q<b;q++){var tt=g(_+q-p,0,S-1),St=4*(g(C+U-p,0,w-1)*S+tt),Ot=h[U*b+q];T+=x[St]*Ot,D+=x[1+St]*Ot,H+=x[2+St]*Ot}var Lt=4*(C*S+_);v[Lt]=g(T,0,255),v[1+Lt]=g(D,0,255),v[2+Lt]=g(H,0,255)}return m}(s,c,u),a.putImageData(c,0,0),Rr(r,i)}(e,t.getType(),n)})}function Xy(t){return function(n,e){return Xl(n,t([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],e))}}function tE(t,n,e,o){return Xl(t,function(i,u,a,s){return Gl(i,[u=Pu(u,0,2),0,0,0,0,0,a=Pu(a,0,2),0,0,0,0,0,s=Pu(s,0,2),0,0,0,0,0,1,0,0,0,0,0,1])}([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n,e,o))}var nE=function(n){return function(e){return Xl(e,n)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1]),eE=Xy(function(n,e){return Gl(n,[1,0,0,0,e=Pu(255*e,-255,255),0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])}),oE=Xy(function(n,e){var o;return e=Pu(e,-1,1),Gl(n,[(o=(e*=100)<0?127+e/100*127:127*(o=(o=e%1)==0?Wl[e]:Wl[Math.floor(e)]*(1-o)+Wl[Math.floor(e)+1]*o)+127)/127,0,0,0,.5*(127-o),0,o/127,0,0,.5*(127-o),0,0,o/127,0,.5*(127-o),0,0,0,1,0,0,0,0,0,1])}),rE=function(n){return function(e){return ZT(e,n)}}([0,-1,0,-1,5,-1,0,-1,0]),iE=function(n){return function(e,o){return e.toCanvas().then(function(r){return function(i,u,a){for(var s=yo(i),c=new Array(256),f=0;f<c.length;f++)c[f]=n(f,a);var l=function(h,g){for(var b=h.data,p=0;p<b.length;p+=4)b[p]=g[b[p]],b[p+1]=g[b[p+1]],b[p+2]=g[b[p+2]];return h}(s.getImageData(0,0,i.width,i.height),c);return s.putImageData(l,0,0),Rr(i,u)}(r,e.getType(),o)})}}(function(t,n){return 255*Math.pow(t/255,1-n)});function Yy(t,n,e){var o=Ll(t),r=jl(t),i=n/o,u=e/r,a=!1;(i<.5||2<i)&&(i=i<.5?.5:2,a=!0),(u<.5||2<u)&&(u=u<.5?.5:2,a=!0);var s=function(f,l,m){return new Ir(function(h){var g=Ll(f),b=jl(f),p=Math.floor(g*l),x=Math.floor(b*m),v=ki(p,x);yo(v).drawImage(f,0,0,g,b,0,0,p,x),h(v)})}(t,i,u);return a?s.then(function(c){return Yy(c,n,e)}):s}function uE(t,n){return t.toCanvas().then(function(e){return function(r,i,u){var a=ki(r.width,r.height),s=yo(a),c=0,f=0;return(u=u<0?360+u:u)!==90&&u!==270||Hy(a,a.height,a.width),u!==90&&u!==180||(c=a.width),u!==270&&u!==180||(f=a.height),s.translate(c,f),s.rotate(u*Math.PI/180),s.drawImage(r,0,0),Rr(a,i)}(e,t.getType(),n)})}function aE(t,n){return t.toCanvas().then(function(e){return function(r,i,u){var a=ki(r.width,r.height),s=yo(a);return u==="v"?(s.scale(1,-1),s.drawImage(r,0,-a.height)):(s.scale(-1,1),s.drawImage(r,-a.width,0)),Rr(a,i)}(e,t.getType(),n)})}function cE(t,n,e,o,r){return t.toCanvas().then(function(i){return function(a,s,c,f,l,m){var h=ki(l,m);return yo(h).drawImage(a,-c,-f),Rr(h,s)}(i,t.getType(),n,e,o,r)})}function sE(t){return nE(t)}function fE(t){return rE(t)}function lE(t,n){return iE(t,n)}function dE(t,n){return eE(t,n)}function mE(t,n){return oE(t,n)}function qy(t,n){return aE(t,n)}function gE(t,n,e){return function(r,i,u){return r.toCanvas().then(function(a){return Yy(a,i,u).then(function(s){return Rr(s,r.getType())})})}(t,n,e)}function Ky(t,n){return uE(t,n)}function Jy(t,n){return O({dom:{tag:"span",innerHtml:t,classes:["tox-icon","tox-tbtn__icon-wrap"]}},n)}function Oc(t,n){return Jy(jn(t,n),{})}function $y(t,n){return Jy(jn(t,n),{behaviours:A([G.config({})])})}function Yl(t,n,e){return{dom:{tag:"span",innerHtml:e.translate(t),classes:[n+"__select-label"]},behaviours:A([G.config({})])}}function Qy(t,n,e){function o(c,f){var l=M.getValue(c);return Y.focus(l),j(l,"keydown",{raw:f.event().raw()}),Ce.close(l),d.some(!0)}var r=V(P),i=t.text.map(function(c){return gt(Yl(c,n,e.providers))}),u=t.icon.map(function(c){return gt($y(c,e.providers.icons))}),a=t.role.fold(function(){return{}},function(c){return{role:c}}),s=t.tooltip.fold(function(){return{}},function(c){var f=e.providers.translate(c);return{title:f,"aria-label":f}});return gt(Ce.sketch(O(O({},a),{dom:{tag:"button",classes:[n,n+"--select"].concat(I(t.classes,function(c){return n+"--"+c})),attributes:O({},s)},components:bi([u.map(function(c){return c.asSpec()}),i.map(function(c){return c.asSpec()}),d.some({dom:{tag:"div",classes:[n+"__select-chevron"],innerHtml:jn("chevron-down",e.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:A(jt(t.dropdownBehaviours,[al(t.disabled),Ru.config({}),G.config({}),Z("dropdown-events",[yu(t,r),xu(t,r)]),Z("menubutton-update-display-text",[B(Lu,function(c,f){i.bind(function(l){return l.getOpt(c)}).each(function(l){G.set(l,[Fo(e.providers.translate(f.event().text()))])})}),B(sx,function(c,f){u.bind(function(l){return l.getOpt(c)}).each(function(l){G.set(l,[$y(f.event().icon(),e.providers.icons)])})})])])),eventOrder:yt(cx,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:A([L.config({mode:"special",onLeft:o,onRight:o})]),lazySink:e.getSink,toggleClass:n+"--active",parts:{menu:rc(0,t.columns,t.presets)},fetch:function(){return jo(t.fetch)}}))).asSpec()}function ql(t){return t.type==="separator"}function pE(t,n){var e=Dn(t,function(o,r){return function(i){return Yt(i)}(r)?r===""?o:r==="|"?0<o.length&&!ql(o[o.length-1])?o.concat([SE]):o:qt(n,r.toLowerCase())?o.concat([n[r.toLowerCase()]]):o:o.concat([r])},[]);return 0<e.length&&ql(e[e.length-1])&&e.pop(),e}function hE(t,n){return function(e){return qt(e,"getSubmenuItems")}(t)?function(e,o){var r=e.getSubmenuItems(),i=fx(r,o);return{item:e,menus:yt(i.menus,Xe(e.value,i.items)),expansions:yt(i.expansions,Xe(e.value,e.value))}}(t,n):{item:t,menus:{},expansions:{}}}function zu(t,n,e,o){var r=N("primary-menu"),i=fx(t,e.shared.providers.menuItems());if(i.items.length===0)return d.none();var u=wb(r,i.items,n,e,o),a=Pt(i.menus,function(c,f){return wb(f,c,n,e,!1)}),s=yt(a,Xe(r,u));return d.from(kr.tieredData(r,s,i.expansions))}function vE(t){return{isDisabled:function(){return X.isDisabled(t)},setDisabled:function(n){return X.set(t,n)},setActive:function(n){var e=t.element();n?(en(e,"tox-tbtn--enabled"),lt(e,"aria-pressed",!0)):(Ut(e,"tox-tbtn--enabled"),re(e,"aria-pressed"))},isActive:function(){return Ke(t.element(),"tox-tbtn--enabled")}}}function Kl(t,n,e,o){return Qy({text:t.text,icon:t.icon,tooltip:t.tooltip,role:o,fetch:function(r){t.fetch(function(i){r(zu(i,Ze.CLOSE_ON_EXECUTE,e,!1))})},onSetup:t.onSetup,getApi:vE,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Rt.config({})]},n,e.shared)}function bE(t,n,e){return function(o){o(I(t,function(r){var i=r.text.fold(function(){return{}},function(u){return{text:u}});return O(O({type:r.type,active:!1},i),{onAction:function(u){return function(a){var s=!a.isActive();a.setActive(s),u.storage.set(s),e.shared.getSink().each(function(c){n().getOpt(c).each(function(f){Ho(f.element()),j(f,to,{name:u.name,value:u.storage.get()})})})}}(r),onSetup:function(u){return function(a){a.setActive(u.storage.get())}}(r)})}))}}function Zy(t,n,e,o,r){e===void 0&&(e=[]);var i=n.fold(function(){return{}},function(s){return{action:s}}),u=O({buttonBehaviours:A([al(t.disabled),Rt.config({}),Z("button press",[Hm("click"),Hm("mousedown")])].concat(e)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},i),a=yt(u,{dom:o});return yt(a,{components:r})}function tx(t,n,e,o){o===void 0&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map(function(a){return{"aria-label":e.translate(a),title:e.translate(a)}}).getOr({})},i=t.icon.map(function(a){return Oc(a,e.icons)}),u=bi([i]);return Zy(t,n,o,r,u)}function nx(t,n,e,o){o===void 0&&(o=[]);var r=tx(t,d.some(n),e,o);return _n.sketch(r)}function ex(t,n,e,o,r){o===void 0&&(o=[]),r===void 0&&(r=[]);var i=e.translate(t.text),u=t.icon?t.icon.map(function(l){return Oc(l,e.icons)}):d.none(),a=u.isSome()?bi([u]):[],s=u.isSome()?{}:{innerHtml:i},c=jt(t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],u.isSome()?["tox-button--icon"]:[],t.borderless?["tox-button--naked"]:[],r),f=O(O({tag:"button",classes:c},s),{attributes:{title:i}});return Zy(t,n,o,f,a)}function Jl(t,n,e,o,r){o===void 0&&(o=[]),r===void 0&&(r=[]);var i=ex(t,d.some(n),e,o,r);return _n.sketch(i)}function ox(t,n){return function(e){n==="custom"?j(e,to,{name:t,value:{}}):n==="submit"?ct(e,Mu):n==="cancel"?ct(e,Tr):F.console.error("Unknown button type: ",n)}}function _c(t,n,e){if(function(s,c){return c==="menu"}(0,n)){var o=t,r=O(O({},t),{onSetup:function(s){return s.setDisabled(t.disabled),P},fetch:bE(o.items,function(){return i},e)}),i=gt(Kl(r,"tox-tbtn",e,d.none()));return i.asSpec()}if(function(s,c){return c==="custom"||c==="cancel"||c==="submit"}(0,n)){var u=ox(t.name,n),a=O(O({},t),{borderless:!1});return Jl(a,u,e.shared.providers,[])}F.console.error("Unknown footer button type: ",n)}function yE(t,n){var e=ox(t.name,"custom");return function(o,r){return Iu(o,r,[],[])}(d.none(),pt.parts().field(O({factory:_n},ex(t,d.some(e),n,[kc(""),Fr()]))))}function rx(t,n){return sn({factory:pt,name:t,overrides:function(e){return{fieldBehaviours:A([Z("coupled-input-behaviour",[B(eu(),function(o){(function(r,i,u){return vt(r,i,u).bind(at.getCurrent)})(o,e,n).each(function(r){vt(o,e,"lock").each(function(i){ut.isOn(i)&&e.onLockedChange(o,r,i)})})})])])}}})}function $l(t){var n=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(n===null)return ot.error(t);var e=parseFloat(n[1]),o=n[2];return ot.value({value:e,unit:o})}function ix(t,n){function e(r){return Object.prototype.hasOwnProperty.call(o,r)}var o={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1};return t.unit===n?d.some(t.value):e(t.unit)&&e(n)?o[t.unit]===o[n]?d.some(t.value):d.some(t.value/o[t.unit]*o[n]):d.none()}function Ql(t){return d.none()}function xE(t,n){return function(e,o,r){return e.isSome()&&o.isSome()?d.some(r(e.getOrDie(),o.getOrDie())):d.none()}($l(t).toOption(),$l(n).toOption(),function(e,o){return ix(e,o.unit).map(function(r){return o.value/r}).map(function(r){return function(i,u){return function(a){return ix(a,u).map(function(s){return{value:s*i,unit:u}})}}(r,o.unit)}).getOr(Ql)}).getOr(Ql)}function ux(t,n){function e(f){return{dom:{tag:"div",classes:["tox-form__group"]},components:f}}function o(f){return pt.parts().field({factory:Fu,inputClasses:["tox-textfield"],inputBehaviours:A([X.config({disabled:t.disabled}),Rt.config({}),Z("size-input-events",[B(sr(),function(l,m){j(l,u,{isField1:f})}),B(ou(),function(l,m){j(l,ae,{name:t.name})})])]),selectOnFocus:!1})}function r(f){return{dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(f)}}}var i=Ql,u=N("ratio-event"),a=Zn.parts().lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:n.translate(t.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:jn("lock",n.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:jn("unlock",n.icons)}}],buttonBehaviours:A([al(t.disabled),Rt.config({})])}),s=Zn.parts().field1(e([pt.parts().label(r("Width")),o(!0)])),c=Zn.parts().field2(e([pt.parts().label(r("Height")),o(!1)]));return Zn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[s,c,e([r("&nbsp;"),a])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(f,l,m){$l(M.getValue(f)).each(function(h){i(h).each(function(g){M.setValue(l,function(b){var p,x={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},v=b.value.toFixed((p=b.unit)in x?x[p]:1);return v.indexOf(".")!==-1&&(v=v.replace(/\.?0*$/,"")),v+b.unit}(g))})})},coupledFieldBehaviours:A([X.config({disabled:t.disabled,onDisabled:function(f){Zn.getField1(f).bind(pt.getField).each(X.disable),Zn.getField2(f).bind(pt.getField).each(X.disable),Zn.getLock(f).each(X.disable)},onEnabled:function(f){Zn.getField1(f).bind(pt.getField).each(X.enable),Zn.getField2(f).bind(pt.getField).each(X.enable),Zn.getLock(f).each(X.enable)}}),Z("size-input-events2",[B(u,function(f,l){var m=l.event().isField1(),h=m?Zn.getField1(f):Zn.getField2(f),g=m?Zn.getField2(f):Zn.getField1(f),b=h.map(M.getValue).getOr(""),p=g.map(M.getValue).getOr("");i=xE(b,p)})])])})}function wE(t,n){function e(R,$,st,ht){return gt(Jl({name:R,text:R,disabled:st,primary:ht,icon:d.none(),borderless:!1},$,n))}function o(R,$,st,ht){return gt(nx({name:R,icon:d.some(R),tooltip:d.some($),disabled:ht,primary:!1,borderless:!1},st,n))}function r(R,$){R.map(function(st){var ht=st.get($);ht.hasConfigured(X)&&X.disable(ht)})}function i(R,$){R.map(function(st){var ht=st.get($);ht.hasConfigured(X)&&X.enable(ht)})}function u(R,$,st){j(R,$,st)}function a(R){return ct(R,In.disable())}function s(R){return ct(R,In.enable())}function c(R,$){a(R),u(R,ln.transform(),{transform:$}),s(R)}function f(R){return function(){Ge.getOpt(R).each(function($){G.set($,[dn])})}}function l(R,$){a(R),u(R,ln.transformApply(),{transform:$,swap:f(R)}),s(R)}function m(){return e("Back",function(R){return u(R,ln.back(),{swap:f(R)})},!1,!1)}function h(){return gt({dom:{tag:"div",classes:["tox-spacer"]},behaviours:A([X.config({})])})}function g(){return e("Apply",function(R){return u(R,ln.apply(),{swap:f(R)})},!0,!0)}function b(){return function(R){var $=t.getRect();return function(st,ht,rn,Gn,Bn){return cE(st,ht,rn,Gn,Bn)}(R,$.x,$.y,$.w,$.h)}}function p(R,$){return function(st){return R(st,$)}}function x(R,$){(function(st,ht){a(st),u(st,ln.tempTransform(),{transform:ht}),s(st)})(R,$)}function v(R,$,st,ht,rn){var Gn=oo.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(R)}}),Bn=oo.parts().spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),wo=oo.parts().thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return gt(oo.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:st,maxX:rn,getInitialValue:y({x:y(ht)})},components:[Gn,Bn,wo],sliderBehaviours:A([Y.config({})]),onChoose:$}))}function S(R,$,st,ht,rn){return[m(),function(Gn,Bn,wo,nm,em){return v(Gn,function(om,cS,rm){var im=p(Bn,rm.x()/100);c(om,im)},wo,nm,em)}(R,$,st,ht,rn),g()]}function w(R,$,st,ht,rn){var Gn=S(R,$,st,ht,rn);return fn.sketch({dom:D,components:Gn.map(function(Bn){return Bn.asSpec()}),containerBehaviours:A([Z("image-tools-filter-panel-buttons-events",[B(In.disable(),function(Bn,wo){r(Gn,Bn)}),B(In.enable(),function(Bn,wo){i(Gn,Bn)})])])})}function C(R,$,st){return function(ht){return function(rn,Gn,Bn,wo){return tE(rn,Gn,Bn,wo)}(ht,R,$,st)}}function _(R){return v(R,function($,st,ht){var rn=Jc.getOpt($),Gn=Qc.getOpt($),Bn=$c.getOpt($);rn.each(function(wo){Gn.each(function(nm){Bn.each(function(em){var om=M.getValue(wo).x()/100,cS=M.getValue(em).x()/100,rm=M.getValue(nm).x()/100,im=C(om,cS,rm);c($,im)})})})},0,100,200)}function T(R,$,st){return function(ht){u(ht,ln.swap(),{transform:$,swap:function(){Ge.getOpt(ht).each(function(rn){G.set(rn,[R]),st(rn)})}})}}var D={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},H=P,U=[m(),h(),e("Apply",function(R){var $=b();l(R,$),t.hideCrop()},!1,!0)],q=fn.sketch({dom:D,components:U.map(function(R){return R.asSpec()}),containerBehaviours:A([Z("image-tools-crop-buttons-events",[B(In.disable(),function(R,$){r(U,R)}),B(In.enable(),function(R,$){i(U,R)})])])}),tt=gt(ux({name:"size",label:d.none(),constrain:!0,disabled:!1},n)),St=[m(),h(),tt,h(),e("Apply",function(R){tt.getOpt(R).each(function($){var st=M.getValue($),ht=function(rn,Gn){return function(Bn){return gE(Bn,rn,Gn)}}(parseInt(st.width,10),parseInt(st.height,10));l(R,ht)})},!1,!0)],Ot=fn.sketch({dom:D,components:St.map(function(R){return R.asSpec()}),containerBehaviours:A([Z("image-tools-resize-buttons-events",[B(In.disable(),function(R,$){r(St,R)}),B(In.enable(),function(R,$){i(St,R)})])])}),Lt=p(qy,"h"),vn=p(qy,"v"),ne=p(Ky,-90),We=p(Ky,90),En=[m(),h(),o("flip-horizontally","Flip horizontally",function(R){x(R,Lt)},!1),o("flip-vertically","Flip vertically",function(R){x(R,vn)},!1),o("rotate-left","Rotate counterclockwise",function(R){x(R,ne)},!1),o("rotate-right","Rotate clockwise",function(R){x(R,We)},!1),h(),g()],uo=fn.sketch({dom:D,components:En.map(function(R){return R.asSpec()}),containerBehaviours:A([Z("image-tools-fliprotate-buttons-events",[B(In.disable(),function(R,$){r(En,R)}),B(In.enable(),function(R,$){i(En,R)})])])}),Qt=[m(),h(),g()],Ri=fn.sketch({dom:D,components:Qt.map(function(R){return R.asSpec()})}),bn=w("Brightness",dE,-100,0,100),qo=w("Contrast",mE,-100,0,100),Ko=w("Gamma",lE,-100,0,100),Jc=_("R"),$c=_("G"),Qc=_("B"),Jd=[m(),Jc,$c,Qc,g()],$d=fn.sketch({dom:D,components:Jd.map(function(R){return R.asSpec()})}),Qd=d.some(fE),Zd=d.some(sE),tm=[o("crop","Crop",T(q,d.none(),function(R){t.showCrop()}),!1),o("resize","Resize",T(Ot,d.none(),function(R){tt.getOpt(R).each(function($){var st=t.getMeasurements(),ht=st.width,rn=st.height;M.setValue($,{width:ht,height:rn})})}),!1),o("orientation","Orientation",T(uo,d.none(),H),!1),o("brightness","Brightness",T(bn,d.none(),H),!1),o("sharpen","Sharpen",T(Ri,Qd,H),!1),o("contrast","Contrast",T(qo,d.none(),H),!1),o("color-levels","Color levels",T($d,d.none(),H),!1),o("gamma","Gamma",T(Ko,d.none(),H),!1),o("invert","Invert",T(Ri,Zd,H),!1)],dn=fn.sketch({dom:D,components:tm.map(function(R){return R.asSpec()})}),Jo=fn.sketch({dom:{tag:"div"},components:[dn],containerBehaviours:A([G.config({})])}),Ge=gt(Jo);return{memContainer:Ge,getApplyButton:function(R){return Ge.getOpt(R).map(function($){var st=$.components()[0];return st.components()[st.components().length-1]})}}}var ax=N("toolbar.button.execute"),cx={"alloy.execute":["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},Lu=N("update-menu-text"),sx=N("update-menu-icon"),SE={type:"separator"},fx=function(t,n){var e=pE(Yt(t)?t.split(" "):t,n);return jr(e,function(o,r){var i=function(a){if(ql(a))return a;var s=J(a,"value").getOrThunk(function(){return N("generated-menu-item")});return yt({value:s},a)}(r),u=hE(i,n);return{menus:yt(o.menus,u.menus),items:[u.item].concat(o.items),expansions:yt(o.expansions,u.expansions)}},{menus:{},expansions:{},items:[]})},CE=y([k("field1Name","field1"),k("field2Name","field2"),hr("onLockedChange"),pr(["lockClass"]),k("locked",!1),si("coupledFieldBehaviours",[at,M])]),kE=y([rx("field1","field2"),rx("field2","field1"),sn({factory:_n,schema:[E("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:A([ut.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),Zn=On({name:"FormCoupledInputs",configFields:CE(),partFields:kE(),factory:function(t,n,e,o){return{uid:t.uid,dom:t.dom,components:n,behaviours:fi(t.coupledFieldBehaviours,[at.config({find:d.some}),M.config({store:{mode:"manual",getValue:function(r){var i,u=Of(r,t,["field1","field2"]);return(i={})[t.field1Name]=M.getValue(u.field1()),i[t.field2Name]=M.getValue(u.field2()),i},setValue:function(r,i){var u=Of(r,t,["field1","field2"]);ee(i,t.field1Name)&&M.setValue(u.field1(),i[t.field1Name]),ee(i,t.field2Name)&&M.setValue(u.field2(),i[t.field2Name])}}})]),apis:{getField1:function(r){return vt(r,t,"field1")},getField2:function(r){return vt(r,t,"field2")},getLock:function(r){return vt(r,t,"lock")}}}},apis:{getField1:function(t,n){return t.getField1(n)},getField2:function(t,n){return t.getField2(n)},getLock:function(t,n){return t.getLock(n)}}}),ln={undo:y(N("undo")),redo:y(N("redo")),zoom:y(N("zoom")),back:y(N("back")),apply:y(N("apply")),swap:y(N("swap")),transform:y(N("transform")),tempTransform:y(N("temp-transform")),transformApply:y(N("transform-apply"))},OE=y("save-state"),_E=y("disable"),TE=y("enable"),In={formActionEvent:to,saveState:OE,disable:_E,enable:TE},Un=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),lx=tinymce.util.Tools.resolve("tinymce.geom.Rect"),EE=tinymce.util.Tools.resolve("tinymce.util.Observable"),Tn=tinymce.util.Tools.resolve("tinymce.util.Tools"),Oi=tinymce.util.Tools.resolve("tinymce.util.VK");function Zl(t){var n,e;if(t.changedTouches)for(n="screenX screenY pageX pageY clientX clientY".split(" "),e=0;e<n.length;e++)t[n[e]]=t.changedTouches[0][n[e]]}function BE(t,n){var e,o,r,i,u,a,s,c=n.document||F.document;n=n||{};var f=c.getElementById(n.handle||t);r=function(l){var m,h,g=function(p){var x,v,S,w,C,_,T,D=Math.max;return x=p.documentElement,v=p.body,S=D(x.scrollWidth,v.scrollWidth),w=D(x.clientWidth,v.clientWidth),C=D(x.offsetWidth,v.offsetWidth),_=D(x.scrollHeight,v.scrollHeight),T=D(x.clientHeight,v.clientHeight),{width:S<C?w:S,height:_<D(x.offsetHeight,v.offsetHeight)?T:_}}(c);Zl(l),l.preventDefault(),o=l.button,m=f,a=l.screenX,s=l.screenY,h=F.window.getComputedStyle?F.window.getComputedStyle(m,null).getPropertyValue("cursor"):m.runtimeStyle.cursor,e=Un("<div></div>").css({position:"absolute",top:0,left:0,width:g.width,height:g.height,zIndex:2147483647,opacity:1e-4,cursor:h}).appendTo(c.body),Un(c).on("mousemove touchmove",u).on("mouseup touchend",i),n.start(l)},u=function(l){if(Zl(l),l.button!==o)return i(l);l.deltaX=l.screenX-a,l.deltaY=l.screenY-s,l.preventDefault(),n.drag(l)},i=function(l){Zl(l),Un(c).off("mousemove touchmove",u).off("mouseup touchend",i),e.remove(),n.stop&&n.stop(l)},this.destroy=function(){Un(f).off()},Un(f).on("mousedown touchstart",r)}function DE(t){function n(f,l){c.getOpt(f).each(function(m){var h=r.get(),g=Mn(m.element()),b=Hn(m.element()),p=l.dom().naturalWidth*h,x=l.dom().naturalHeight*h,v=Math.max(0,g/2-p/2),S=Math.max(0,b/2-x/2),w={left:v.toString()+"px",top:S.toString()+"px",width:p.toString()+"px",height:x.toString()+"px",position:"absolute"};Jr(l,w),o.getOpt(m).each(function(C){Jr(C.element(),w)}),i.get().each(function(C){var _=u.get();C.setRect({x:_.x*h+v,y:_.y*h+S,w:_.w*h,h:_.h*h}),C.setClampRect({x:v,y:S,w:p,h:x}),C.setViewPortRect({x:0,y:0,w:g,h:b})})})}function e(f,l){var m=z.fromTag("img");return lt(m,"src",l),function(h){return new Iv(function(g){var b=function(){h.removeEventListener("load",b),g(h)};h.complete?g(h):h.addEventListener("load",b)})}(m.dom()).then(function(){return c.getOpt(f).map(function(h){var g=Us({element:m});G.replaceAt(h,1,d.some(g));var b=a.get(),p={x:0,y:0,w:m.dom().naturalWidth,h:m.dom().naturalHeight};a.set(p);var x=lx.inflate(p,-20,-20);return u.set(x),b.w===p.w&&b.h===p.h||function(v,S){c.getOpt(v).each(function(w){var C=Mn(w.element()),_=Hn(w.element()),T=S.dom().naturalWidth,D=S.dom().naturalHeight,H=Math.min(C/T,_/D);1<=H?r.set(1):r.set(H)})}(h,m),n(h,m),m})})}var o=gt({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),r=V(1),i=V(d.none()),u=V({x:0,y:0,w:1,h:1}),a=V({x:0,y:0,w:1,h:1}),s=fn.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[o.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:A([Z("image-panel-crop-events",[It(function(f){c.getOpt(f).each(function(l){var m=l.element().dom(),h=ME({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},m,function(){});h.toggleVisibility(!1),h.on("updateRect",function(g){var b=g.rect,p=r.get(),x={x:Math.round(b.x/p),y:Math.round(b.y/p),w:Math.round(b.w/p),h:Math.round(b.h/p)};u.set(x)}),i.set(d.some(h))})})])])}],containerBehaviours:A([G.config({}),Z("image-panel-events",[It(function(f){e(f,t)})])])}),c=gt(s);return{memContainer:c,updateSrc:e,zoom:function(f,l){var m=r.get(),h=0<l?Math.min(2,m+.1):Math.max(.1,m-.1);r.set(h),c.getOpt(f).each(function(g){var b=g.components()[1].element();n(g,b)})},showCrop:function(){i.get().each(function(f){f.toggleVisibility(!0)})},hideCrop:function(){i.get().each(function(f){f.toggleVisibility(!1)})},getRect:function(){return u.get()},getMeasurements:function(){var f=a.get();return{width:f.w,height:f.h}}}}function Tc(t,n,e,o,r){return nx({name:t,icon:d.some(n),disabled:e,tooltip:d.some(t),primary:!1,borderless:!1},o,r)}function dx(t,n){n?X.enable(t):X.disable(t)}var AE=0,ME=function(t,n,e,o,r){var i,u,a,s="tox-",c="tox-crid-"+AE++,f=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}];a=["top","right","bottom","left"];var l=function(x,v){return{x:v.x+x.x,y:v.y+x.y,w:v.w,h:v.h}},m=function(x,v){return{x:v.x-x.x,y:v.y-x.y,w:v.w,h:v.h}};function h(x,v,S,w){var C,_,T,D,H;C=v.x,_=v.y,T=v.w,D=v.h,C+=S*x.deltaX,_+=w*x.deltaY,(T+=S*x.deltaW)<20&&(T=20),(D+=w*x.deltaH)<20&&(D=20),H=t=lx.clamp({x:C,y:_,w:T,h:D},e,x.name==="move"),H=m(e,H),i.fire("updateRect",{rect:H}),p(H)}function g(x){function v(S,w){w.h<0&&(w.h=0),w.w<0&&(w.w=0),Un("#"+c+"-"+S,o).css({left:w.x,top:w.y,width:w.w,height:w.h})}Tn.each(f,function(S){Un("#"+c+"-"+S.name,o).css({left:x.w*S.xMul+x.x,top:x.h*S.yMul+x.y})}),v("top",{x:n.x,y:n.y,w:n.w,h:x.y-n.y}),v("right",{x:x.x+x.w,y:x.y,w:n.w-x.x-x.w+n.x,h:x.h}),v("bottom",{x:n.x,y:x.y+x.h,w:n.w,h:n.h-x.y-x.h+n.y}),v("left",{x:n.x,y:x.y,w:x.x-n.x,h:x.h}),v("move",x)}function b(x){g(t=x)}function p(x){b(l(e,x))}return function(){Un('<div id="'+c+'" class="'+s+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),Tn.each(a,function(v){Un("#"+c,o).append('<div id="'+c+"-"+v+'"class="'+s+'croprect-block" style="display: none" data-mce-bogus="all">')}),Tn.each(f,function(v){Un("#"+c,o).append('<div id="'+c+"-"+v.name+'" class="'+s+"croprect-handle "+s+"croprect-handle-"+v.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+v.label+'" aria-grabbed="false" title="'+v.label+'">')}),u=Tn.map(f,function(S){var w;return new BE(c,{document:o.ownerDocument,handle:c+"-"+S.name,start:function(){w=t},drag:function(C){h(S,w,C.deltaX,C.deltaY)}})}),g(t),Un(o).on("focusin focusout",function(v){Un(v.target).attr("aria-grabbed",v.type==="focus"?"true":"false")}),Un(o).on("keydown",function(v){var S;function w(C,_,T,D,H){C.stopPropagation(),C.preventDefault(),h(S,T,D,H)}switch(Tn.each(f,function(C){if(v.target.id===c+"-"+C.name)return S=C,!1}),v.keyCode){case Oi.LEFT:w(v,0,t,-10,0);break;case Oi.RIGHT:w(v,0,t,10,0);break;case Oi.UP:w(v,0,t,0,-10);break;case Oi.DOWN:w(v,0,t,0,10);break;case Oi.ENTER:case Oi.SPACEBAR:v.preventDefault(),r()}})}(),i=Tn.extend({toggleVisibility:function(v){var S;S=Tn.map(f,function(w){return"#"+c+"-"+w.name}).concat(Tn.map(a,function(w){return"#"+c+"-"+w})).join(","),v?Un(S,o).show():Un(S,o).hide()},setClampRect:function(v){e=v,g(t)},setRect:b,getInnerRect:function(){return m(e,t)},setInnerRect:p,setViewPortRect:function(v){n=v,g(t)},destroy:function(){Tn.each(u,function(v){v.destroy()}),u=[]}},EE)};function FE(t){var n=V(t),e=V(d.none()),o=function(){var f=[],l=-1;function m(){return 0<l}function h(){return l!==-1&&l<f.length-1}return{data:f,add:function(b){var p;return p=f.splice(++l),f.push(b),{state:b,removed:p}},undo:function(){if(m())return f[--l]},redo:function(){if(h())return f[++l]},canUndo:m,canRedo:h}}();function r(c){n.set(c)}function i(c){F.URL.revokeObjectURL(c.url)}function u(c){var f=a(c);return r(f),function(l){Tn.each(l,i)}(o.add(f).removed),f.url}o.add(t);var a=function(c){return{blob:c,url:F.URL.createObjectURL(c)}},s=function(){e.get().each(i),e.set(d.none())};return{getBlobState:function(){return n.get()},setBlobState:r,addBlobState:u,getTempState:function(){return e.get().fold(function(){return n.get()},function(c){return c})},updateTempState:function(c){var f=a(c);return s(),e.set(d.some(f)),f.url},addTempState:function(c){var f=a(c);return e.set(d.some(f)),f.url},applyTempState:function(c){return e.get().fold(function(){},function(f){u(f.blob),c()})},destroyTempState:s,undo:function(){var c=o.undo();return r(c),c.url},redo:function(){var c=o.redo();return r(c),c.url},getHistoryStates:function(){return{undoEnabled:o.canUndo(),redoEnabled:o.canRedo()}}}}function IE(t,n){function e(g){var b=a.getHistoryStates();m.updateButtonUndoStates(g,b.undoEnabled,b.redoEnabled),j(g,In.formActionEvent,{name:In.saveState(),value:b.undoEnabled})}function o(g){return g.toBlob()}function r(g){j(g,In.formActionEvent,{name:In.disable(),value:{}})}function i(g,b,p,x,v){return r(g),function(S){return QT(S)}(b).then(p).then(o).then(x).then(function(S){return c(g,S).then(function(w){return e(g),v(),s(g),w})}).catch(function(S){return F.console.log(S),s(g),S})}function u(g,b,p){var x=a.getBlobState().blob;i(g,x,b,function(v){return a.updateTempState(v)},p)}var a=FE(t.currentState),s=function(g){h.getApplyButton(g).each(function(b){X.enable(b)}),j(g,In.formActionEvent,{name:In.enable(),value:{}})},c=function(g,b){return r(g),l.updateSrc(g,b)},f=function(g){var b=a.getBlobState().url;return a.destroyTempState(),e(g),b},l=DE(t.currentState.url),m=function(g){var b=gt(Tc("Undo","undo",!0,function(x){j(x,ln.undo(),{direction:1})},g)),p=gt(Tc("Redo","redo",!0,function(x){j(x,ln.redo(),{direction:1})},g));return{container:fn.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[b.asSpec(),p.asSpec(),Tc("Zoom in","zoom-in",!1,function(x){j(x,ln.zoom(),{direction:1})},g),Tc("Zoom out","zoom-out",!1,function(x){j(x,ln.zoom(),{direction:-1})},g)]}),updateButtonUndoStates:function(x,v,S){b.getOpt(x).each(function(w){dx(w,v)}),p.getOpt(x).each(function(w){dx(w,S)})}}}(n),h=wE(l,n);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[h.memContainer.asSpec(),l.memContainer.asSpec(),m.container],behaviours:A([M.config({store:{mode:"manual",getValue:function(){return a.getBlobState()}}}),Z("image-tools-events",[B(ln.undo(),function(g,b){var p=a.undo();c(g,p).then(function(x){s(g),e(g)})}),B(ln.redo(),function(g,b){var p=a.redo();c(g,p).then(function(x){s(g),e(g)})}),B(ln.zoom(),function(g,b){var p=b.event().direction();l.zoom(g,p)}),B(ln.back(),function(g,b){(function(p){var x=f(p);c(p,x).then(function(v){s(p)})})(g),b.event().swap()(),l.hideCrop()}),B(ln.apply(),function(g,b){a.applyTempState(function(){f(g),b.event().swap()()})}),B(ln.transform(),function(g,b){return u(g,b.event().transform(),P)}),B(ln.tempTransform(),function(g,b){return function(p,x){var v=a.getTempState().blob;i(p,v,x,function(S){return a.addTempState(S)},P)}(g,b.event().transform())}),B(ln.transformApply(),function(g,b){return function(p,x,v){var S=a.getBlobState().blob;i(p,S,x,function(w){var C=a.addBlobState(w);return f(p),C},v)}(g,b.event().transform(),b.event().swap())}),B(ln.swap(),function(g,b){(function(v){m.updateButtonUndoStates(v,!1,!1)})(g);var p=b.event().transform(),x=b.event().swap();p.fold(function(){x()},function(v){u(g,v,x)})})]),Fr()])}}function mx(t,n){var e=t.label.map(function(l){return Er(l,n)}),o=[X.config({disabled:t.disabled}),L.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:function(l){return ct(l,Mu),d.some(!0)}}),Z("textfield-change",[B(eu(),function(l,m){j(l,ae,{name:t.name})}),B(Fs(),function(l,m){j(l,ae,{name:t.name})})]),Rt.config({})],r=t.validation.map(function(l){return no.config({getRoot:function(m){return Vn(m.element())},invalidClass:"tox-invalid",validator:{validate:function(m){var h=M.getValue(m),g=l.validator(h);return vo(g===!0?ot.value(h):ot.error(g))},validateOnLoad:l.validateOnLoad}})}).toArray(),i=t.placeholder.fold(y({}),function(l){return{placeholder:n.translate(l)}}),u=t.inputMode.fold(y({}),function(l){return{inputmode:l}}),a=O(O({},i),u),s=pt.parts().field({tag:t.multiline===!0?"textarea":"input",inputAttributes:a,inputClasses:[t.classname],inputBehaviours:A(Zt([o,r])),selectOnFocus:!1,factory:Fu}),c=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),f=[X.config({disabled:t.disabled,onDisabled:function(l){pt.getField(l).each(X.disable)},onEnabled:function(l){pt.getField(l).each(X.enable)}})];return Iu(e,s,c,f)}function gx(t){var n=V(null);return ve({readState:function(){return{timer:n.get()!==null?"set":"unset"}},setTimer:function(e){n.set(e)},cancel:function(){var e=n.get();e!==null&&e.cancel()}})}function Ec(t,n,e){var o=M.getValue(e);M.setValue(n,o),ow(n)}function px(t,n){var e=t.element(),o=rr(e),r=e.dom();Kt(e,"type")!=="number"&&n(r,o)}function RE(t,n,e){if(t.selectsOver){var o=M.getValue(n),r=t.getDisplayText(o),i=M.getValue(e);return t.getDisplayText(i).indexOf(r)===0?d.some(function(){Ec(0,n,e),function(u,a){px(u,function(s,c){return s.setSelectionRange(a,c.length)})}(n,r.length)}):d.none()}return d.none()}function VE(t){return Vr(jo(t))}function HE(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:function(){}}}function td(t,n){return{type:"menuitem",value:n,text:t,meta:{attach:void 0},onAction:function(){}}}function hx(t,n){return function(e){return I(e,HE)}(function(e,o){return Ct(o,function(r){return r.type===e})}(t,n))}function nd(t,n){var e=t.toLowerCase();return Ct(n,function(o){var r=o.meta!==void 0&&o.meta.text!==void 0?o.meta.text:o.text;return an(r.toLowerCase(),e)||an(o.value.toLowerCase(),e)})}function NE(t,n,e){var o=M.getValue(n),r=o.meta.text!==void 0?o.meta.text:o.value;return e.getLinkInformation().fold(function(){return[]},function(i){var u=nd(r,function(a){return I(a,function(s){return td(s,s)})}(e.getHistory(t)));return t==="file"?function(a){return Dn(a,function(s,c){return s.length===0||c.length===0?s.concat(c):s.concat(vB,c)},[])}([u,nd(r,function(a){return hx("header",a.targets)}(i)),nd(r,Zt([function(a){return d.from(a.anchorTop).map(function(s){return td("<top>",s)}).toArray()}(i),function(a){return hx("anchor",a.targets)}(i),function(a){return d.from(a.anchorBottom).map(function(s){return td("<bottom>",s)}).toArray()}(i)]))]):u})}function PE(t,n,e){function o(v){var S=M.getValue(v);e.addToHistory(S.value,t.filetype)}var r,i,u,a,s,c=n.shared.providers,f=pt.parts().field({factory:pB,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":rw,type:"url"},minChars:0,responseTime:0,fetch:function(v){var S=NE(t.filetype,v,e),w=zu(S,Ze.BUBBLE_TO_SANDBOX,n,!1);return vo(w)},getHotspot:function(v){return p.getOpt(v)},onSetValue:function(v,S){v.hasConfigured(no)&&no.run(v).get(P)},typeaheadBehaviours:A(Zt([e.getValidationHandler().map(function(v){return no.config({getRoot:function(S){return Vn(S.element())},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(S,w){m.getOpt(S).each(function(C){lt(C.element(),"title",c.translate(w))})}},validator:{validate:function(S){var w=M.getValue(S);return hB(function(C){v({type:t.filetype,url:w.value},function(_){if(_.status==="invalid"){var T=ot.error(_.message);C(T)}else{var D=ot.value(_.message);C(D)}})})},validateOnLoad:!1}})}).toArray(),[X.config({disabled:t.disabled}),Rt.config({}),Z("urlinput-events",Zt([t.filetype==="file"?[B(eu(),function(v){j(v,ae,{name:t.name})})]:[],[B(ou(),function(v){j(v,ae,{name:t.name}),o(v)}),B(Fs(),function(v){j(v,ae,{name:t.name}),o(v)})]]))]])),eventOrder:(r={},r[eu()]=["streaming","urlinput-events","invalidating"],r),model:{getDisplayText:function(v){return v.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:n.shared.getSink,parts:{menu:rc(0,0,"normal")},onExecute:function(v,S,w){j(S,Mu,{})},onItemExecute:function(v,S,w,C){o(v),j(v,ae,{name:t.name})}}),l=t.label.map(function(v){return Er(v,c)}),m=gt((i="invalid",u=d.some(rw),(a="warning")===void 0&&(a=i),s===void 0&&(s=i),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+i],innerHtml:jn(a,c.icons),attributes:O({title:c.translate(s),"aria-live":"polite"},u.fold(function(){return{}},function(v){return{id:v}}))}})),h=gt({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[m.asSpec()]}),g=e.getUrlPicker(t.filetype),b=N("browser.url.event"),p=gt({dom:{tag:"div",classes:["tox-control-wrap"]},components:[f,h.asSpec()],behaviours:A([X.config({disabled:t.disabled})])}),x=gt(Jl({name:t.name,icon:d.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},function(v){return ct(v,b)},c,[],["tox-browse-url"]));return pt.sketch({dom:Yb([]),components:l.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Zt([[p.asSpec()],g.map(function(){return x.asSpec()}).toArray()])}]),fieldBehaviours:A([X.config({disabled:t.disabled,onDisabled:function(v){pt.getField(v).each(X.disable),x.getOpt(v).each(X.disable)},onEnabled:function(v){pt.getField(v).each(X.enable),x.getOpt(v).each(X.enable)}}),Z("url-input-events",[B(b,function(v){at.getCurrent(v).each(function(S){var w=M.getValue(S),C=O({fieldname:t.name},w);g.each(function(_){_(C).get(function(T){M.setValue(S,T),j(v,ae,{name:t.name})})})})})])])})}function zE(t,n){function e(a){return function(s,c){Fe(c.event().target(),"[data-collection-item-value]").each(function(f){a(s,c,f,Kt(f,"data-collection-item-value"))})}}var o=t.label.map(function(a){return Er(a,n)}),r=e(function(a,s,c,f){s.stop(),j(a,to,{name:t.name,value:f})}),i=[B(cr(),e(function(a,s,c){Ho(c)})),B(ru(),r),B(uu(),r),B(sr(),e(function(a,s,c){cn(a.element(),"."+ku).each(function(f){Ut(f,ku)}),en(c,ku)})),B(aC(),e(function(a){cn(a.element(),"."+ku).each(function(s){Ut(s,ku)})})),lo(e(function(a,s,c,f){j(a,to,{name:t.name,value:f})}))],u=pt.parts().field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:bt},behaviours:A([G.config({}),M.config({store:{mode:"memory",initialValue:[]},onSetValue:function(a,s){(function(c,f){var l=I(f,function(g){var b=ue.translate(g.text),p=t.columns===1?'<div class="tox-collection__item-label">'+b+"</div>":"",x='<div class="tox-collection__item-icon">'+g.icon+"</div>",v={_:" "," - ":" ","-":" "},S=b.replace(/\_| \- |\-/g,function(w){return v[w]});return'<div class="tox-collection__item" tabindex="-1" data-collection-item-value="'+function(w){return w==='"'?"&quot;":w}(g.value)+'" title="'+S+'" aria-label="'+S+'">'+x+p+"</div>"}),m=1<t.columns&&t.columns!=="auto"?lm(l,t.columns):[l],h=I(m,function(g){return'<div class="tox-collection__group">'+g.join("")+"</div>"});Xi(c.element(),h.join(""))})(a,s),t.columns==="auto"&&Zf(a,5,"tox-collection__item").each(function(c){var f=c.numRows,l=c.numColumns;L.setGridSize(a,f,l)}),ct(a,Nb)}}),Rt.config({}),L.config(function(a,s){return a===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:a==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?"."+Lv:"."+ol}}}(t.columns,"normal")),Z("collection-events",i)])});return Iu(o,u,["tox-form__group--collection"],[])}function $t(t){return function(n,e,o){return J(e,"name").fold(function(){return t(e,o)},function(r){return n.field(r,t(e,o))})}}function vx(t,n,e){var o=yt(e,{shared:{interpreter:function(r){return dd(t,r,o)}}});return dd(t,n,o)}function LE(t){return{colorPicker:function(n){return function(e,o){Tu.colorPickerDialog(n)(e,o)}}(t),hasCustomColors:function(n){return function(){return pb(n)}}(t),getColors:function(n){return function(){return vl(n)}}(t),getColorCols:function(n){return function(){return Tu.getColorCols(n)}}(t)}}function bx(t){return function(n){return d.from(n.getParam("style_formats")).filter(ao)}(t).map(function(n){var e=function(o,r){function i(a){K(a,function(s){o.formatter.has(s.name)||o.formatter.register(s.name,s.format)})}var u=aw(r);return o.formatter?i(u.customFormats):o.on("init",function(){i(u.customFormats)}),u.formats}(t,n);return function(o){return o.getParam("style_formats_merge",!1,"boolean")}(t)?uw.concat(e):e}).getOr(uw)}function yx(t,n,e){var o={type:"formatter",isSelected:n(t.format),getStylePreview:e(t.format)};return yt(t,o)}function xx(t,n,e,o){var r=function(i){return I(i,function(u){var a=Ht(u);if(ee(u,"items")){var s=r(u.items);return yt(function(c){return yt(c,{type:"submenu"})}(u),{getStyleItems:function(){return s}})}return ee(u,"format")?function(c){return yx(c,e,o)}(u):a.length===1&&Mt(a,"title")?yt(u,{type:"separator"}):function(c){var f=N(c.title),l={type:"formatter",format:f,isSelected:e(f),getStylePreview:o(f)},m=yt(c,l);return t.formatter.register(f,m),m}(u)})};return r(n)}function wx(t){return function(n){return!!(n&&n.nodeType===1&&(n.contentEditable===t||n.getAttribute("data-mce-contenteditable")===t))}}function Sx(t,n,e,o,r){return{type:t,title:n,url:e,level:o,attach:r}}function Cx(t){return t.innerText||t.textContent}function jE(t){return function(n){return n&&n.nodeName==="A"&&(n.id||n.name)!==void 0}(t)&&cw(t)}function kx(t){return t&&/^(H[1-6])$/.test(t.nodeName)}function UE(t){return kx(t)&&cw(t)}function WE(t){var n=function(e){return e.id?e.id:N("h")}(t);return Sx("header",Cx(t),"#"+n,function(e){return kx(e)?parseInt(e.nodeName.substr(1),10):0}(t),function(){t.id=n})}function GE(t){var n=t.id||t.name,e=Cx(t);return Sx("anchor",e||"#"+n,"#"+n,0,P)}function XE(t){return function(n,e){return I(Jn(z.fromDom(e),n),function(o){return o.dom()})}("h1,h2,h3,h4,h5,h6,a:not([href])",t)}function YE(t){return 0<wB(t.title).length}function Ox(t){return Yt(t)&&/^https?/.test(t)}function _x(t){return ko(t)&&mm(t,function(n){return!function(e){return ao(e)&&e.length<=5&&Wr(e,Ox)}(n)}).isNone()}function Tx(){var t,n=F.localStorage.getItem(Ic);if(n===null)return{};try{t=JSON.parse(n)}catch(e){if(e instanceof SyntaxError)return F.console.log("Local storage "+Ic+" was not valid JSON",e),{};throw e}return _x(t)?t:(F.console.log("Local storage "+Ic+" was not valid format",t),{})}function qE(t){var n=Tx();return Object.prototype.hasOwnProperty.call(n,t)?n[t]:[]}function KE(t,n){if(Ox(t)){var e=Tx(),o=Object.prototype.hasOwnProperty.call(e,n)?e[n]:[],r=Ct(o,function(i){return i!==t});e[n]=[t].concat(r).slice(0,5),function(i){if(!_x(i))throw new Error(`Bad format for history:
`+JSON.stringify(i));F.localStorage.setItem(Ic,JSON.stringify(i))}(e)}}function ed(t){return!!t}function JE(t){return Pt(Tn.makeMap(t,/[, ]/),ed)}function Ex(t,n,e){var o=function(r,i){return OB.call(r,i)?d.some(r[i]):d.none()}(t,n).getOr(e);return Yt(o)?d.some(o):d.none()}function od(t){return d.some(t.file_picker_callback).filter(de)}function $E(t,n){var e=function(o){var r=d.some(o.file_picker_types).filter(ed),i=d.some(o.file_browser_callback_types).filter(ed),u=r.or(i).map(JE);return od(o).fold(function(){return!1},function(a){return u.fold(function(){return!0},function(s){return 0<Ht(s).length&&s})})}(t);return Pi(e)?e?od(t):d.none():e[n]?od(t):d.none()}function QE(t){return{getHistory:qE,addToHistory:KE,getLinkInformation:function(){return function(n){return n.settings.typeahead_urls===!1?d.none():d.some({targets:kB(n.getBody()),anchorTop:Ex(n.settings,"anchor_top","#top").getOrUndefined(),anchorBottom:Ex(n.settings,"anchor_bottom","#bottom").getOrUndefined()})}(t)},getValidationHandler:function(){return function(n){return d.from(n.settings.file_picker_validator_handler).filter(de).orThunk(function(){return d.from(n.settings.filepicker_validator_handler).filter(de)})}(t)},getUrlPicker:function(n){return function(e,o){return $E(e.settings,o).map(function(r){return function(i){return jo(function(u){var a=O({filetype:o,fieldname:i.fieldname},d.from(i.meta).getOr({}));r.call(e,function(s,c){if(!Yt(s))throw new Error("Expected value to be string");if(c!==void 0&&!ko(c))throw new Error("Expected meta to be a object");u({value:s,meta:c})},i.value,a)})}})}(t,n)}}}function ZE(t,n,e){var o=V(!1),r={shared:{providers:{icons:function(){return n.ui.registry.getAll().icons},menuItems:function(){return n.ui.registry.getAll().menuItems},translate:ue.translate},interpreter:function(i){return function(u,a){return dd(yB,u,a)}(i,r)},anchors:xB(n,e),getSink:function(){return ot.value(t)}},urlinput:QE(n),styleselect:function(i){function u(g){return function(){return i.formatter.match(g)}}function a(g){return function(){var b=i.formatter.get(g);return b!==void 0?d.some({tag:0<b.length&&(b[0].inline||b[0].block)||"div",styles:i.dom.parseStyle(i.formatter.getCssText(g))}):d.none()}}var s=function(g){var b=g.items;return b!==void 0&&0<b.length?At(b,s):[g.format]},c=V([]),f=V([]),l=V([]),m=V([]),h=V(!1);return i.on("PreInit",function(g){var b=bx(i),p=xx(i,b,u,a);c.set(p),f.set(At(p,s))}),i.on("addStyleModifications",function(g){var b=xx(i,g.items,u,a);l.set(b),h.set(g.replace),m.set(At(b,s))}),{getData:function(){var g=h.get()?[]:c.get(),b=l.get();return g.concat(b)},getFlattenedKeys:function(){var g=h.get()?[]:f.get(),b=m.get();return g.concat(b)}}}(n),colorinput:LE(n),dialog:function(i){return{isDraggableModal:function(u){return function(){return function(a){return a.getParam("draggable_modal",!1,"boolean")}(u)}}(i)}}(n),isContextMenuOpen:function(){return o.get()},setContextMenuState:function(i){return o.set(i)}};return r}function Bx(t,n,e){var o=function(a,s){return Dn(a,function(c,f){return s(f,c.len).fold(y(c),function(l){return{len:l.finish(),list:c.list.concat([l])}})},{len:0,list:[]}).list}(t,function(a,s){var c=e(a);return d.some({element:y(a),start:y(s),finish:y(s+c),width:y(c)})}),r=Ct(o,function(a){return a.finish()<=n}),i=jr(r,function(a,s){return a+s.width()},0),u=o.slice(r.length);return{within:y(r),extra:y(u),withinWidth:y(i)}}function Bc(t){return I(t,function(n){return n.element()})}function tB(t,n,e,o){var r=function(s,c,f){var l=Bx(c,s,f);return l.extra().length===0?d.some(l):d.none()}(t,n,e).getOrThunk(function(){return Bx(n,t-e(o),e)}),i=r.within(),u=r.extra(),a=r.withinWidth();return u.length===1&&u[0].width()<=e(o)?function(s,c,f){var l=Bc(s.concat(c));return gd(l,[],f)}(i,u,a):1<=u.length?function(s,c,f,l){var m=Bc(s).concat([f]);return gd(m,Bc(c),l)}(i,u,o,a):function(s,c,f){return gd(Bc(s),[],f)}(i,0,a)}function Dx(t,n){var e=I(n,function(o){return Kn(o)});Le.setGroups(t,e)}function Ax(t,n,e){var o=$e(t,n,"primary"),r=Vt.getCoupled(t,"overflowGroup");nt(o.element(),"visibility","hidden");var i=n.builtGroups.get().concat([r]),u=function(c){return fe(c,function(f){return Ie(f.element()).bind(function(l){return f.getSystem().getByDom(l).toOption()})})}(i);e([]),Dx(o,i);var a=Mn(o.element()),s=tB(a,n.builtGroups.get(),function(c){return Mn(c.element())},r);s.extra().length===0?(G.remove(o,r),e([])):(Dx(o,s.within()),e(s.extra())),_t(o.element(),"visibility"),Ji(o.element()),u.each(Y.focus)}function Mx(t,n){var e=Vt.getCoupled(t,"toolbarSandbox");rt.isOpen(e)?rt.close(e):rt.open(e,n.toolbar())}function rd(t,n,e,o){var r=e.getBounds.map(function(u){return u()}),i=e.lazySink(t).getOrDie();Fn.positionWithinBounds(i,{anchor:"hotspot",hotspot:t,layouts:o,overrides:{maxWidthFunction:md()}},n,r)}function Fx(t,n,e,o,r){Le.setGroups(n,r),rd(t,n,e,o),ut.on(t)}function Ix(t){return I(t,function(n){return Kn(n)})}function Rx(t,n,e){Ax(t,e,function(o){e.overflowGroups.set(o),n.getOpt(t).each(function(r){Di.setGroups(r,Ix(o))})})}function ju(t,n){return n.getAnimationRoot.fold(function(){return t.element()},function(e){return e(t)})}function Go(t){return t.dimension.property}function _i(t,n){return t.dimension.getDimension(n)}function id(t,n){var e=ju(t,n);Ao(e,[n.shrinkingClass,n.growingClass])}function ud(t,n){Ut(t.element(),n.openClass),en(t.element(),n.closedClass),nt(t.element(),Go(n),"0px"),Ji(t.element())}function Vx(t,n){Ut(t.element(),n.closedClass),en(t.element(),n.openClass),_t(t.element(),Go(n))}function Hx(t,n,e,o){e.setCollapsed(),nt(t.element(),Go(n),_i(n,t.element())),Ji(t.element()),id(t,n),ud(t,n),n.onStartShrink(t),n.onShrunk(t)}function nB(t,n,e,o){var r=o.getOrThunk(function(){return _i(n,t.element())});e.setCollapsed(),nt(t.element(),Go(n),r),Ji(t.element());var i=ju(t,n);Ut(i,n.growingClass),en(i,n.shrinkingClass),ud(t,n),n.onStartShrink(t)}function Nx(t,n,e){var o=_i(n,t.element());(o==="0px"?Hx:nB)(t,n,e,d.some(o))}function Px(t,n,e){var o=ju(t,n),r=Ke(o,n.shrinkingClass),i=_i(n,t.element());Vx(t,n);var u=_i(n,t.element());(r?function(){nt(t.element(),Go(n),i),Ji(t.element())}:function(){ud(t,n)})(),Ut(o,n.shrinkingClass),en(o,n.growingClass),Vx(t,n),nt(t.element(),Go(n),u),e.setExpanded(),n.onStartGrow(t)}function zx(t,n,e){var o=ju(t,n);return Ke(o,n.growingClass)===!0}function Lx(t,n,e){var o=ju(t,n);return Ke(o,n.shrinkingClass)===!0}function jx(t,n){var e=t.outerContainer;(function(o,r){var i=o.outerContainer.element();r&&(o.mothership.broadcastOn([du()],{target:i}),o.uiMothership.broadcastOn([du()],{target:i})),o.mothership.broadcastOn([vd],{readonly:r}),o.uiMothership.broadcastOn([vd],{readonly:r})})(t,n),ss("*",e.element()).forEach(function(o){e.getSystem().getByDom(o).each(function(r){r.hasConfigured(X)&&X.set(r,n)})})}function Ux(t,n){t.on("init",function(){t.readonly&&jx(n,!0)}),t.on("SwitchMode",function(){return jx(n,t.readonly)}),function(e){return e.getParam("readonly",!1,"boolean")}(t)&&t.setMode("readonly")}function eB(t){var n;return Re.config({channels:(n={},n[vd]={schema:NB,onReceive:function(e,o){t(e).each(function(r){(function(i,u){ss("*",i.element()).forEach(function(a){i.getSystem().getByDom(a).each(function(s){s.hasConfigured(X)&&X.set(s,u)})})})(r,o.readonly)})}},n)})}function Wx(t){var n=t.title.fold(function(){return{}},function(e){return{attributes:{title:e}}});return{dom:O({tag:"div",classes:["tox-toolbar__group"]},n),components:[Rc.parts().items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:A([Rt.config({}),Y.config({})])}}function Dc(t){return Rc.sketch(Wx(t))}function Gx(t,n,e){var o=It(function(r){var i=I(t.initGroups,Dc);Le.setGroups(r,i)});return A([L.config({mode:n,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Z("toolbar-events",[o]),eB(e)])}function Xx(t,n){var e=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":Wx({title:d.none(),items:[]}),"overflow-button":tx({name:"more",icon:d.some("more-drawer"),disabled:!1,tooltip:d.some("More..."),primary:!1,borderless:!1},d.none(),t.backstage.shared.providers)},splitToolbarBehaviours:Gx(t,e,n)}}function oB(t){var n=Xx(t,Vc.getOverflow),e=Vc.parts().primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return Vc.sketch(O(O({},n),{lazySink:t.getSink,getOverflowBounds:function(){var o=t.moreDrawerData.lazyHeader().element(),r=ri(o),i=Pm(o),u=ri(i);return Me(r.x()+4,u.y(),r.width()-8,u.height())},parts:O(O({},n.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[e],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))}function rB(t){var n=pd.parts().primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),e=pd.parts().overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=Xx(t,d.none);return pd.sketch(O(O({},o),{components:[n,e],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(r){r.getSystem().broadcastOn([hd()],{type:"opened"})},onClosed:function(r){r.getSystem().broadcastOn([hd()],{type:"closed"})}}))}function Ac(t){var n=t.cyclicKeying?"cyclic":"acyclic";return Le.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===$n.scrolling?["tox-toolbar--scrolling"]:[])},components:[Le.parts().groups({})],toolbarBehaviours:Gx(t,n,y(d.none()))})}function Yx(t){return Et("toolbarbutton",PB,t)}function qx(t){return Et("menubutton",LB,t)}function Kx(t){return Et("ToggleButton",UB,t)}function iB(t){return{isDisabled:function(){return X.isDisabled(t)},setDisabled:function(n){return X.set(t,n)}}}function uB(t){return{setActive:function(n){ut.set(t,n)},isActive:function(){return ut.isOn(t)},isDisabled:function(){return X.isDisabled(t)},setDisabled:function(n){return X.set(t,n)}}}function Jx(t,n){return t.map(function(e){return{"aria-label":n.translate(e),title:n.translate(e)}}).getOr({})}function ad(t,n,e,o,r,i){function u(c){return ue.isRtl()&&Mt(uD,c)?c+"-rtl":c}var a,s=ue.isRtl()&&t.exists(function(c){return Mt(aD,c)});return{dom:{tag:"button",classes:["tox-tbtn"].concat(n.isSome()?["tox-tbtn--select"]:[]).concat(s?["tox-tbtn__icon-rtl"]:[]),attributes:Jx(e,i)},components:bi([t.map(function(c){return Oc(u(c),i.icons)}),n.map(function(c){return Yl(c,"tox-tbtn",i)})]),eventOrder:(a={},a[De()]=["focusing","alloy.base.behaviour","common-button-display-events"],a),buttonBehaviours:A([Z("common-button-display-events",[B(De(),function(c,f){f.event().prevent(),ct(c,dw)})])].concat(o.map(function(c){return ke.config({channel:c,initialData:{icon:t,text:n},renderComponents:function(f,l){return bi([f.icon.map(function(m){return Oc(u(m),i.icons)}),f.text.map(function(m){return Yl(m,"tox-tbtn",i)})])}})}).toArray()).concat(r.getOr([])))}}function $x(t,n,e){var o=V(P),r=ad(t.icon,t.text,t.tooltip,d.none(),d.none(),e);return _n.sketch({dom:r.dom,components:r.components,eventOrder:cx,buttonBehaviours:A([Z("toolbar-button-events",[function(i){return lo(function(u,a){Qa(i,u)(function(s){j(u,ax,{buttonApi:s}),i.onAction(s)})})}({onAction:t.onAction,getApi:n.getApi}),yu(n,o),xu(n,o)]),Q1(t.disabled)].concat(n.toolbarButtonBehaviours))})}function aB(t,n){function e(a){return{isDisabled:function(){return X.isDisabled(a)},setDisabled:function(s){return X.set(a,s)},setIconFill:function(s,c){cn(a.element(),'svg path[id="'+s+'"], rect[id="'+s+'"]').each(function(f){lt(f,"fill",c)})},setIconStroke:function(s,c){cn(a.element(),'svg path[id="'+s+'"], rect[id="'+s+'"]').each(function(f){lt(f,"stroke",c)})},setActive:function(s){lt(a.element(),"aria-pressed",s),cn(a.element(),"span").each(function(c){a.getSystem().getByDom(c).each(function(f){return ut.set(f,s)})})},isActive:function(){return cn(a.element(),"span").exists(function(s){return a.getSystem().getByDom(s).exists(ut.isOn)})}}}var o,r=N("channel-update-split-dropdown-display"),i=V(P),u={getApi:e,onSetup:t.onSetup};return Nc.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:O({"aria-pressed":!1},Jx(t.tooltip,n.providers))},onExecute:function(a){t.onAction(e(a))},onItemExecute:function(a,s,c){},splitDropdownBehaviours:A([$1(!1),Z("split-dropdown-events",[B(dw,Y.focus),yu(u,i),xu(u,i)]),Ru.config({})]),eventOrder:(o={},o[ti()]=["alloy.base.behaviour","split-dropdown-events"],o),toggleClass:"tox-tbtn--enabled",lazySink:n.getSink,fetch:function(a,s,c){return function(f){return jo(function(l){return s.fetch(l)}).map(function(l){return d.from(Sb(yt(hl(N("menu-value"),l,function(m){s.onItemAction(a(f),m)},s.columns,s.presets,Ze.CLOSE_ON_EXECUTE,s.select.getOr(function(){return!1}),c),{movement:ic(s.columns,s.presets),menuBehaviours:nc(s.columns!=="auto"?[]:[It(function(m,h){Zf(m,4,Ev(s.presets)).each(function(g){var b=g.numRows,p=g.numColumns;L.setGridSize(m,b,p)})})])})))})}}(e,t,n.providers),parts:{menu:rc(0,t.columns,t.presets)},components:[Nc.parts().button(ad(t.icon,t.text,d.none(),d.some(r),d.some([ut.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),n.providers)),Nc.parts().arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:jn("chevron-down",n.providers.icons)}}),Nc.parts()["aria-descriptor"]({text:n.providers.translate("To open the popup, press Shift+Enter")})]})}function Qx(t,n){return B(ax,function(e,o){var r=function(i){return{hide:function(){return ct(i,ha())},getValue:function(){return M.getValue(i)}}}(t.get(e));n.onAction(r,o.event().buttonApi())})}function cB(t,n,e){var o={backstage:{shared:{providers:e}}};return n.type==="contextformtogglebutton"?function(r,i,u){var a=i.original,s=(a.primary,qu(a,["primary"])),c=Ye(Kx(O(O({},s),{type:"togglebutton",onAction:function(){}})));return gw(c,u.backstage.shared.providers,[Qx(r,i)])}(t,n,o):function(r,i,u){var a=i.original,s=(a.primary,qu(a,["primary"])),c=Ye(Yx(O(O({},s),{type:"button",onAction:function(){}})));return mw(c,u.backstage.shared.providers,[Qx(r,i)])}(t,n,o)}function Zx(t){var n=Ag(F.window),e=be(z.fromDom(t.getContentAreaContainer())),o=Uf(t)||Wf(t)||qa(t),r=function(f,l){var m=Math.max(l.x(),f.x()),h=f.right()-m,g=l.width()-(m-l.x());return{x:m,width:Math.min(h,g)}}(e,n),i=r.x,u=r.width;if(t.inline&&!o)return Me(i,n.y(),u,n.height());var a=function(f,l,m){var h=z.fromDom(f.getContainer()),g=cn(h,".tox-editor-header").getOr(h),b=be(g),p=b.y()>=l.bottom(),x=Qe(f)&&!p;if(f.inline&&x)return{y:Math.max(b.bottom(),m.y()),bottom:m.bottom()};if(f.inline&&!x)return{y:m.y(),bottom:Math.min(b.y(),m.bottom())};var v=be(h);return x?{y:Math.max(b.bottom(),m.y()),bottom:Math.min(v.bottom(),m.bottom())}:{y:Math.max(v.y(),m.y()),bottom:Math.min(b.y(),m.bottom())}}(t,e,n),s=a.y,c=a.bottom;return Me(i,s,u,c-s)}function cd(t,n){return fe(n,function(e){return e.predicate(t.dom())?d.some({toolbarApi:e,elem:t}):d.none()})}function Mc(t,n){return function(e){function o(){e.setActive(t.formatter.match(n));var i=t.formatter.formatChanged(n,e.setActive).unbind;r.set(d.some(i))}var r=V(d.none());return t.initialized?o():t.on("init",o),function(){return r.get().each(function(i){return i()})}}}function sd(t){return function(n){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("mceToggleFormat",!1,n.format)})}}}function Ti(t,n,e){var o=e.dataset,r=o.type==="basic"?function(){return I(o.data,function(i){return yx(i,e.isSelectedFor,e.getPreviewFor)})}:o.getData;return{items:function(i,u,a){function s(l,m,h,g){var b=u.shared.providers.translate(l.title);if(l.type==="separator")return d.some({type:"separator",text:b});if(l.type!=="submenu")return d.some(O({type:"togglemenuitem",text:b,active:l.isSelected(g),disabled:h,onAction:a.onAction(l)},l.getStylePreview().fold(function(){return{}},function(x){return{meta:{style:x}}})));var p=At(l.getStyleItems(),function(x){return f(x,m,g)});return m===0&&p.length<=0?d.none():d.some({type:"nestedmenuitem",text:b,disabled:p.length<=0,getSubmenuItems:function(){return At(l.getStyleItems(),function(x){return f(x,m,g)})}})}function c(l){var m=a.getCurrentValue(),h=a.shouldHide?0:1;return At(l,function(g){return f(g,h,m)})}var f=function(l,m,h){var g=l.type==="formatter"&&a.isInvalid(l);return m===0?g?[]:s(l,m,!1,h).toArray():s(l,m,g,h).toArray()};return{validateItems:c,getFetch:function(l,m){return function(h){var g=m(),b=c(g);h(zu(b,Ze.CLOSE_ON_EXECUTE,l,!1))}}}}(0,n,e),getStyleItems:r}}function Uu(t,n,e){var o=Ti(0,n,e),r=o.items,i=o.getStyleItems;return Qy({text:e.icon.isSome()?d.none():d.some(""),icon:e.icon,tooltip:d.from(e.tooltip),role:d.none(),fetch:r.getFetch(n,i),onSetup:function(u){return e.setInitialValue.each(function(a){return a(u.getComponent())}),e.nodeChangeHandler.map(function(a){var s=a(u.getComponent());return t.on("NodeChange",s),function(){t.off("NodeChange",s)}}).getOr(P)},getApi:function(u){return{getComponent:function(){return u}}},columns:1,presets:"normal",classes:e.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",n.shared)}var tw,nw,fd,Ei,Fc,sB=ie({name:"HtmlSelect",configFields:[E("options"),Gt("selectBehaviours",[Y,M]),k("selectClasses",[]),k("selectAttributes",{}),ft("data")],factory:function(t,n){var e=I(t.options,function(r){return{dom:{tag:"option",value:r.value,innerHtml:r.text}}}),o=t.data.map(function(r){return Xe("initialValue",r)}).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:e,behaviours:Jt(t.selectBehaviours,[Y.config({}),M.config({store:O({mode:"manual",getValue:function(r){return rr(r.element())},setValue:function(r,i){Xt(t.options,function(u){return u.value===i}).isSome()&&fa(r.element(),i)}},o)})])}}}),fB=Object.freeze({__proto__:null,events:function(t,n){var e=t.stream.streams.setup(t,n);return xt([B(t.event,e),fo(function(){return n.cancel()})].concat(t.cancelEvent.map(function(o){return[B(o,function(){return n.cancel()})]}).getOr([])))}}),lB=Object.freeze({__proto__:null,throttle:gx,init:function(t){return t.stream.streams.state(t)}}),dB=[Xn("stream",me("mode",{throttle:[E("delay"),k("stopEvent",!0),wt("streams",{setup:function(t,n){var e=t.stream,o=Cv(t.onStream,e.delay);return n.setTimer(o),function(r,i){o.throttle(r,i),e.stopEvent&&i.stop()}},state:gx})]})),k("event","input"),ft("cancelEvent"),hr("onStream")],ew=on({fields:dB,name:"streaming",active:fB,state:lB}),ow=function(t){px(t,function(n,e){return n.setSelectionRange(e.length,e.length)})},ld=y("alloy.typeahead.itemexecute"),mB=y([ft("lazySink"),E("fetch"),k("minChars",5),k("responseTime",1e3),dt("onOpen"),k("getHotspot",d.some),k("getAnchorOverrides",y({})),k("layouts",d.none()),k("eventOrder",{}),Bm("model",{},[k("getDisplayText",function(t){return t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value}),k("selectsOver",!0),k("populateFromBrowse",!0)]),dt("onSetValue"),Nn("onExecute"),dt("onItemExecute"),k("inputClasses",[]),k("inputAttributes",{}),k("inputStyles",{}),k("matchWidth",!0),k("useMinWidth",!1),k("dismissOnBlur",!0),pr(["openClass"]),ft("initialData"),Gt("typeaheadBehaviours",[Y,M,ew,L,ut,Vt]),un("previewing",function(){return V(!0)})].concat(Pb()).concat(_l())),gB=y([ye({schema:[wa()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(n,e){t.previewing.get()?n.getSystem().getByUid(t.uid).each(function(o){RE(t.model,o,e).fold(function(){return mt.dehighlight(n,e)},function(r){return r()})}):n.getSystem().getByUid(t.uid).each(function(o){t.model.populateFromBrowse&&Ec(t.model,o,e)}),t.previewing.set(!1)},onExecute:function(n,e){return n.getSystem().getByUid(t.uid).toOption().map(function(o){return j(o,ld(),{item:e}),!0})},onHover:function(n,e){t.previewing.set(!1),n.getSystem().getByUid(t.uid).each(function(o){t.model.populateFromBrowse&&Ec(t.model,o,e)})}}}})]),pB=On({name:"Typeahead",configFields:mB(),partFields:gB(),factory:function(t,n,e,o){function r(s,c,f){t.previewing.set(!1);var l=Vt.getCoupled(s,"sandbox");rt.isOpen(l)?at.getCurrent(l).each(function(m){mt.getHighlighted(m).fold(function(){f(m)},function(){Rm(l,m.element(),"keydown",c)})}):kl(t,u(s),s,l,o,function(m){at.getCurrent(m).each(f)},ze.HighlightFirst).get(P)}var i=Ib(t),u=function(s){return function(c){return c.map(function(f){var l=Ju(f.menus),m=At(l,function(h){return Ct(h.items,function(g){return g.type==="item"})});return M.getState(s).update(I(m,function(h){return h.data})),f})}},a=[Y.config({}),M.config({onSetValue:t.onSetValue,store:O({mode:"dataset",getDataKey:function(s){return rr(s.element())},getFallbackEntry:function(s){return{value:s,meta:{}}},setValue:function(s,c){fa(s.element(),t.model.getDisplayText(c))}},t.initialData.map(function(s){return Xe("initialValue",s)}).getOr({}))}),ew.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(s,c){var f=Vt.getCoupled(s,"sandbox");if(Y.isFocused(s)&&rr(s.element()).length>=t.minChars){var l=at.getCurrent(f).bind(function(m){return mt.getHighlighted(m).map(M.getValue)});t.previewing.set(!0),kl(t,u(s),s,f,o,function(m){at.getCurrent(f).each(function(h){l.fold(function(){t.model.selectsOver&&mt.highlightFirst(h)},function(g){mt.highlightBy(h,function(b){return M.getValue(b).value===g.value}),mt.getHighlighted(h).orThunk(function(){return mt.highlightFirst(h),d.none()})})})},ze.HighlightFirst).get(P)}},cancelEvent:Is()}),L.config({mode:"special",onDown:function(s,c){return r(s,c,mt.highlightFirst),d.some(!0)},onEscape:function(s){var c=Vt.getCoupled(s,"sandbox");return rt.isOpen(c)?(rt.close(c),d.some(!0)):d.none()},onUp:function(s,c){return r(s,c,mt.highlightLast),d.some(!0)},onEnter:function(s){var c=Vt.getCoupled(s,"sandbox"),f=rt.isOpen(c);if(f&&!t.previewing.get())return at.getCurrent(c).bind(function(m){return mt.getHighlighted(m)}).map(function(m){return j(s,ld(),{item:m}),!0});var l=M.getValue(s);return ct(s,Is()),t.onExecute(c,s,l),f&&rt.close(c),d.some(!0)}}),ut.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Vt.config({others:{sandbox:function(s){return Ol(t,s,{onOpen:function(){return ut.on(s)},onClose:function(){return ut.off(s)}})}}}),Z("typeaheadevents",[lo(function(s){var c=P;wi(t,u(s),s,o,c,ze.HighlightFirst).get(P)}),B(ld(),function(s,c){var f=Vt.getCoupled(s,"sandbox");Ec(t.model,s,c.event().item()),ct(s,Is()),t.onItemExecute(s,f,c.event().item(),M.getValue(s)),rt.close(f),ow(s)})].concat(t.dismissOnBlur?[B(Ms(),function(s){var c=Vt.getCoupled(s,"sandbox");Ie(c.element()).isNone()&&rt.close(c)})]:[]))];return{uid:t.uid,dom:Rb(yt(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:O(O({},i),Jt(t.typeaheadBehaviours,a)),eventOrder:t.eventOrder}}}),Vr=function(t){return O(O({},t),{toCached:function(){return Vr(t.toCached())},bindFuture:function(n){return Vr(t.bind(function(e){return e.fold(function(o){return vo(ot.error(o))},function(o){return n(o)})}))},bindResult:function(n){return Vr(t.map(function(e){return e.bind(n)}))},mapResult:function(n){return Vr(t.map(function(e){return e.map(n)}))},mapError:function(n){return Vr(t.map(function(e){return e.mapError(n)}))},foldResult:function(n,e){return t.map(function(o){return o.fold(n,e)})},withTimeout:function(n,e){return Vr(jo(function(o){var r=!1,i=F.setTimeout(function(){r=!0,o(ot.error(e()))},n);t.get(function(u){r||(F.clearTimeout(i),o(u))})}))}})},hB=VE,vB={type:"separator"},rw=N("aria-invalid"),bB={bar:$t(function(t,n){return function(e,o){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:I(e.items,o.interpreter)}}(t,n.shared)}),collection:$t(function(t,n){return zE(t,n.shared.providers)}),alertbanner:$t(function(t,n){return function(e,o){return fn.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+e.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[_n.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:jn(e.icon,o.icons),attributes:{title:o.translate(e.iconTooltip)}},action:function(r){j(r,to,{name:"alert-banner",value:e.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:o.translate(e.text)}}]})}(t,n.shared.providers)}),input:$t(function(t,n){return function(e,o){return mx({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:e.disabled,classname:"tox-textfield",validation:d.none(),maximized:e.maximized},o)}(t,n.shared.providers)}),textarea:$t(function(t,n){return function(e,o){return mx({name:e.name,multiline:!0,label:e.label,inputMode:d.none(),placeholder:e.placeholder,flex:!0,disabled:e.disabled,classname:"tox-textarea",validation:d.none(),maximized:e.maximized},o)}(t,n.shared.providers)}),label:$t(function(t,n){return function(e,o){var r={dom:{tag:"label",innerHtml:o.providers.translate(e.label),classes:["tox-label"]}},i=I(e.items,o.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[r].concat(i),behaviours:A([Fr(),G.config({}),GT(d.none()),L.config({mode:"acyclic"})])}}(t,n.shared)}),iframe:(tw=function(t,n){return uT(t,n.shared.providers)},function(t,n,e){var o=yt(n,{source:"dynamic"});return $t(tw)(t,o,e)}),button:$t(function(t,n){return yE(t,n.shared.providers)}),checkbox:$t(function(t,n){return function(e,o){function r(f){return f.element().dom().click(),d.some(!0)}function i(f){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+f],innerHtml:jn(f==="checked"?"selected":"unselected",o.icons)}}}var u=M.config({store:{mode:"manual",getValue:function(f){return f.element().dom().checked},setValue:function(f,l){f.element().dom().checked=l}}}),a=pt.parts().field({factory:{sketch:bt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:A([Fr(),X.config({disabled:e.disabled}),Rt.config({}),Y.config({}),u,L.config({mode:"special",onEnter:r,onSpace:r,stopSpaceKeyup:!0}),Z("checkbox-events",[B(ou(),function(f,l){j(f,ae,{name:e.name})})])])}),s=pt.parts().label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:o.translate(e.label)},behaviours:A([Ru.config({})])}),c=gt({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[i("checked"),i("unchecked")]});return pt.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[a,c.asSpec(),s],fieldBehaviours:A([X.config({disabled:e.disabled,disableClass:"tox-checkbox--disabled",onDisabled:function(f){pt.getField(f).each(X.disable)},onEnabled:function(f){pt.getField(f).each(X.enable)}})])})}(t,n.shared.providers)}),colorinput:$t(function(t,n){return Z_(t,n.shared,n.colorinput)}),colorpicker:$t(function(t){function n(r){return"tox-"+r}var e=eT(oT,n),o=gt(e.sketch({dom:{tag:"div",classes:[n("color-picker-container")],attributes:{role:"presentation"}},onValidHex:function(r){j(r,to,{name:"hex-valid",value:!0})},onInvalidHex:function(r){j(r,to,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[o.asSpec()],behaviours:A([M.config({store:{mode:"manual",getValue:function(r){var i=o.get(r);return at.getCurrent(i).bind(function(u){return M.getValue(u).hex}).map(function(u){return"#"+u}).getOr("")},setValue:function(r,i){var u=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(i),a=o.get(r);at.getCurrent(a).fold(function(){F.console.log("Can not find form")},function(s){M.setValue(s,{hex:d.from(u[1]).getOr("")}),Ci.getField(s,"hex").each(function(c){ct(c,eu())})})}}}),Fr()])}}),dropzone:$t(function(t,n){return iT(t,n.shared.providers)}),grid:$t(function(t,n){return function(e,o){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+e.columns+"col"]},components:I(e.items,o.interpreter)}}(t,n.shared)}),selectbox:$t(function(t,n){return function(e,o){var r=I(e.items,function(c){return{text:o.translate(c.text),value:c.value}}),i=e.label.map(function(c){return Er(c,o)}),u=pt.parts().field({dom:{},selectAttributes:{size:e.size},options:r,factory:sB,selectBehaviours:A([X.config({disabled:e.disabled}),Rt.config({}),Z("selectbox-change",[B(ou(),function(c,f){j(c,ae,{name:e.name})})])])}),a=1<e.size?d.none():d.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:jn("chevron-down",o.icons)}}),s={dom:{tag:"div",classes:["tox-selectfield"]},components:Zt([[u],a.toArray()])};return pt.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Zt([i.toArray(),[s]]),fieldBehaviours:A([X.config({disabled:e.disabled,onDisabled:function(c){pt.getField(c).each(X.disable)},onEnabled:function(c){pt.getField(c).each(X.enable)}})])})}(t,n.shared.providers)}),sizeinput:$t(function(t,n){return ux(t,n.shared.providers)}),urlinput:$t(function(t,n){return PE(t,n,n.urlinput)}),customeditor:$t(function(t){var n=V(d.none()),e=gt({dom:{tag:t.tag}}),o=V(d.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:A([Z("editor-foo-events",[It(function(r){e.getOpt(r).each(function(i){(function(u){return Object.prototype.hasOwnProperty.call(u,"init")}(t)?t.init(i.element().dom()):LT.load(t.scriptId,t.scriptUrl).then(function(u){return u(i.element().dom(),t.settings)})).then(function(u){o.get().each(function(a){u.setValue(a)}),o.set(d.none()),n.set(d.some(u))})})})]),M.config({store:{mode:"manual",getValue:function(){return n.get().fold(function(){return o.get().getOr("")},function(r){return r.getValue()})},setValue:function(r,i){n.get().fold(function(){o.set(d.some(i))},function(u){return u.setValue(i)})}}}),Fr()]),components:[e.asSpec()]}}),htmlpanel:$t(function(t){return t.presets==="presentation"?fn.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):fn.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:A([Rt.config({}),Y.config({})])})}),imagetools:$t(function(t,n){return IE(t,n.shared.providers)}),table:$t(function(t,n){return function(e,o){function r(c){return{dom:{tag:"th",innerHtml:o.translate(c)}}}function i(c){return{dom:{tag:"td",innerHtml:o.translate(c)}}}function u(c){return{dom:{tag:"tr"},components:I(c,i)}}var a,s;return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(s=e.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:I(s,r)}]}),(a=e.cells,{dom:{tag:"tbody"},components:I(a,u)})],behaviours:A([Rt.config({}),Y.config({})])}}(t,n.shared.providers)}),panel:$t(function(t,n){return function(e,o){return{dom:{tag:"div",classes:e.classes},components:I(e.items,o.shared.interpreter)}}(t,n)})},yB={field:function(t,n){return n}},dd=function(t,n,e){return J(bB,n.type).fold(function(){return F.console.error('Unknown factory type "'+n.type+'", defaulting to container: ',n),n},function(o){return o(t,n,e)})},iw={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},xB=function(t,n){function e(){return z.fromDom(t.getBody())}var o=Ja(t)||!Qe(t);return{inlineDialog:function(r,i,u){return u?function(){return{anchor:"node",root:r(),node:d.from(r()),bubble:ci(-12,-12,iw),layouts:{onRtl:function(){return[Sr]},onLtr:function(){return[Cr]}},overrides:{maxHeightFunction:su()}}}:function(){return{anchor:"hotspot",hotspot:i(),bubble:ci(-12,12,iw),layouts:{onRtl:function(){return[Sn]},onLtr:function(){return[Cn]}},overrides:{maxHeightFunction:su()}}}}(e,n,o),banner:function(r,i,u){return u?function(){return{anchor:"node",root:r(),node:d.from(r()),layouts:{onRtl:function(){return[ho]},onLtr:function(){return[ho]}}}}:function(){return{anchor:"hotspot",hotspot:i(),layouts:{onRtl:function(){return[kn]},onLtr:function(){return[kn]}}}}}(e,n,o),cursor:function(r,i){return function(){return{anchor:"selection",root:i(),getSelection:function(){var u=r.selection.getRng();return d.some(fu.range(z.fromDom(u.startContainer),u.startOffset,z.fromDom(u.endContainer),u.endOffset))}}}}(t,e),node:function(r){return function(i){return{anchor:"node",root:r(),node:i}}}(e)}},uw=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strike-through",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}]}],aw=function(t){return Dn(t,function(n,e){if(function(i){return qt(i,"items")}(e)){var o=aw(e.items);return{customFormats:n.customFormats.concat(o.customFormats),formats:n.formats.concat([{title:e.title,items:o.formats}])}}if(function(i){return qt(i,"inline")}(e)||function(i){return qt(i,"block")}(e)||function(i){return qt(i,"selector")}(e)){var r="custom-"+e.title.toLowerCase();return{customFormats:n.customFormats.concat([{name:r,format:e}]),formats:n.formats.concat([{title:e.title,format:r,icon:e.icon}])}}return O(O({},n),{formats:n.formats.concat(e)})},{customFormats:[],formats:[]})},wB=Tn.trim,SB=wx("true"),CB=wx("false"),cw=function(t){return function(n){for(;n=n.parentNode;){var e=n.contentEditable;if(e&&e!=="inherit")return SB(n)}return!1}(t)&&!CB(t)},kB=function(t){var n=XE(t);return Ct(function(e){return I(Ct(e,UE),WE)}(n).concat(function(e){return I(Ct(e,jE),GE)}(n)),YE)},Ic="tinymce-url-history",OB=Object.prototype.hasOwnProperty,md=y(function(t,n){(function(e,o){var r=ya.max(e,o,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);nt(e,"max-width",r+"px")})(t,Math.floor(n))}),sw="contexttoolbar-hide",_B=y([E("items"),pr(["itemSelector"]),Gt("tgroupBehaviours",[L])]),TB=y([Ha({name:"items",unit:"item"})]),Rc=On({name:"ToolbarGroup",configFields:_B(),partFields:TB(),factory:function(t,n,e,o){return{uid:t.uid,dom:t.dom,components:n,behaviours:Jt(t.tgroupBehaviours,[L.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),Bi=y([E("dom"),k("shell",!0),Gt("toolbarBehaviours",[G])]),EB=y([He({name:"groups",overrides:function(){return{behaviours:A([G.config({})])}}})]),Le=On({name:"Toolbar",configFields:Bi(),partFields:EB(),factory:function(t,n,e,o){var r=function(u){return t.shell?d.some(u):vt(u,t,"groups")},i=t.shell?{behaviours:[G.config({})],components:[]}:{behaviours:[],components:n};return{uid:t.uid,dom:t.dom,components:i.components,behaviours:Jt(t.toolbarBehaviours,i.behaviours),apis:{setGroups:function(u,a){r(u).fold(function(){throw F.console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(s){G.set(s,a)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,n,e){t.setGroups(n,e)}}}),gd=Oe("within","extra","withinWidth"),fw=y([Gt("splitToolbarBehaviours",[Vt]),un("builtGroups",function(){return V([])})]),BB=y([pr(["overflowToggledClass"]),Gi("getOverflowBounds"),E("lazySink"),un("overflowGroups",function(){return V([])})].concat(fw())),DB=y([sn({factory:Le,schema:Bi(),name:"primary"}),ye({schema:Bi(),name:"overflow"}),ye({name:"overflow-button"}),ye({name:"overflow-group"})]),AB=y([pr(["toggledClass"]),E("lazySink"),xn("fetch"),Gi("getBounds"),oe("fireDismissalEventInstead",[k("event",ni())]),Po()]),MB=y([ye({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:A([ut.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),ye({factory:Le,schema:Bi(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:A([L.config({mode:"cyclic",onEscape:function(n){return vt(n,t,"button").each(Y.focus),d.none()}})])}}})]),Di=On({name:"FloatingToolbarButton",factory:function(t,n,e,o){return O(O({},_n.sketch(O(O({},o.button()),{action:function(r){Mx(r,o)},buttonBehaviours:fi({dump:o.button().buttonBehaviours},[Vt.config({others:{toolbarSandbox:function(r){return function(i,u,a){var s=Ng();return{dom:{tag:"div",attributes:{id:s.id()}},behaviours:A([L.config({mode:"special",onEscape:function(c){return rt.close(c),d.some(!0)}}),rt.config({onOpen:function(c,f){a.fetch().get(function(l){Fx(i,f,a,u.layouts,l),s.link(i.element()),L.focusIn(f)})},onClose:function(){ut.off(i),Y.focus(i),s.unlink(i.element())},isPartOf:function(c,f,l){return gr(f,l)||gr(i,l)},getAttachPoint:function(){return a.lazySink(i).getOrDie()}}),Re.config({channels:O(O({},pf(O({isExtraPart:y(!1)},a.fireDismissalEventInstead.map(function(c){return{fireEventInstead:{event:c.event}}}).getOr({})))),hf({isExtraPart:y(!1),doReposition:function(){rt.getState(Vt.getCoupled(i,"toolbarSandbox")).each(function(c){rd(i,c,a,u.layouts)})}}))})])}}(r,e,t)}}})])}))),{apis:{setGroups:function(r,i){rt.getState(Vt.getCoupled(r,"toolbarSandbox")).each(function(u){Fx(r,u,t,e.layouts,i)})},reposition:function(r){rt.getState(Vt.getCoupled(r,"toolbarSandbox")).each(function(i){rd(r,i,t,e.layouts)})},toggle:function(r){Mx(r,o)},getToolbar:function(r){return rt.getState(Vt.getCoupled(r,"toolbarSandbox"))}}})},configFields:AB(),partFields:MB(),apis:{setGroups:function(t,n,e){t.setGroups(n,e)},reposition:function(t,n){t.reposition(n)},toggle:function(t,n){t.toggle(n)},getToolbar:function(t,n){return t.getToolbar(n)}}}),Vc=On({name:"SplitFloatingToolbar",configFields:BB(),partFields:DB(),factory:function(t,n,e,o){var r=gt(Di.sketch({fetch:function(){return jo(function(i){i(Ix(t.overflowGroups.get()))})},layouts:{onLtr:function(){return[Cn]},onRtl:function(){return[Sn]},onBottomLtr:function(){return[zn]},onBottomRtl:function(){return[Pn]}},getBounds:e.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()}}));return{uid:t.uid,dom:t.dom,components:n,behaviours:Jt(t.splitToolbarBehaviours,[Vt.config({others:{overflowGroup:function(){return Rc.sketch(O(O({},o["overflow-group"]()),{items:[r.asSpec()]}))}}})]),apis:{setGroups:function(i,u){t.builtGroups.set(I(u,i.getSystem().build)),Rx(i,r,t)},refresh:function(i){return Rx(i,r,t)},toggle:function(i){r.getOpt(i).each(function(u){Di.toggle(u)})},reposition:function(i){r.getOpt(i).each(function(u){Di.reposition(u)})},getOverflow:function(i){return r.getOpt(i).bind(function(u){return Di.getToolbar(u)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,n,e){t.setGroups(n,e)},refresh:function(t,n){t.refresh(n)},reposition:function(t,n){t.reposition(n)},toggle:function(t,n){t.toggle(n)},getOverflow:function(t,n){return t.getOverflow(n)}}}),FB=Object.freeze({__proto__:null,refresh:function(t,n,e){if(e.isExpanded()){_t(t.element(),Go(n));var o=_i(n,t.element());nt(t.element(),Go(n),o)}},grow:function(t,n,e){e.isExpanded()||Px(t,n,e)},shrink:function(t,n,e){e.isExpanded()&&Nx(t,n,e)},immediateShrink:function(t,n,e){e.isExpanded()&&Hx(t,n,e,d.none())},hasGrown:function(t,n,e){return e.isExpanded()},hasShrunk:function(t,n,e){return e.isCollapsed()},isGrowing:zx,isShrinking:Lx,isTransitioning:function(t,n,e){return zx(t,n)===!0||Lx(t,n)===!0},toggleGrow:function(t,n,e){(e.isExpanded()?Nx:Px)(t,n,e)},disableTransitions:id}),IB=Object.freeze({__proto__:null,exhibit:function(t,n){var e=n.expanded;return Te(e?{classes:[n.openClass],styles:{}}:{classes:[n.closedClass],styles:Xe(n.dimension.property,"0px")})},events:function(t,n){return xt([Kr(As(),function(e,o){o.event().raw().propertyName===t.dimension.property&&(id(e,t),n.isExpanded()&&_t(e.element(),t.dimension.property),(n.isExpanded()?t.onGrown:t.onShrunk)(e))})])}}),RB=[E("closedClass"),E("openClass"),E("shrinkingClass"),E("growingClass"),ft("getAnimationRoot"),dt("onShrunk"),dt("onStartShrink"),dt("onGrown"),dt("onStartGrow"),k("expanded",!1),Xn("dimension",me("property",{width:[wt("property","width"),wt("getDimension",function(t){return Mn(t)+"px"})],height:[wt("property","height"),wt("getDimension",function(t){return Hn(t)+"px"})]}))],je=on({fields:RB,name:"sliding",active:IB,apis:FB,state:Object.freeze({__proto__:null,init:function(t){var n=V(t.expanded);return ve({isExpanded:function(){return n.get()===!0},isCollapsed:function(){return n.get()===!1},setCollapsed:ce(n.set,!1),setExpanded:ce(n.set,!0),readState:function(){return"expanded: "+n.get()}})}})}),VB=y([pr(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),dt("onOpened"),dt("onClosed")].concat(fw())),HB=y([sn({factory:Le,schema:Bi(),name:"primary"}),sn({factory:Le,schema:Bi(),name:"overflow",overrides:function(t){return{toolbarBehaviours:A([je.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(n){vt(n,t,"overflow-button").each(function(e){ut.off(e),Y.focus(e)}),t.onClosed(n)},onGrown:function(n){L.focusIn(n),t.onOpened(n)},onStartGrow:function(n){vt(n,t,"overflow-button").each(ut.on)}}),L.config({mode:"acyclic",onEscape:function(n){return vt(n,t,"overflow-button").each(Y.focus),d.some(!0)}})])}}}),ye({name:"overflow-button",overrides:function(t){return{buttonBehaviours:A([ut.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),ye({name:"overflow-group"})]),Hc=function(t,n){vt(t,n,"overflow").each(function(e){Ax(t,n,function(o){var r=I(o,function(i){return Kn(i)});Le.setGroups(e,r)}),vt(t,n,"overflow-button").each(function(o){je.hasGrown(e)&&ut.on(o)}),je.refresh(e)})},pd=On({name:"SplitSlidingToolbar",configFields:VB(),partFields:HB(),factory:function(t,n,e,o){var r="alloy.toolbar.toggle";return{uid:t.uid,dom:t.dom,components:n,behaviours:Jt(t.splitToolbarBehaviours,[Vt.config({others:{overflowGroup:function(i){return Rc.sketch(O(O({},o["overflow-group"]()),{items:[_n.sketch(O(O({},o["overflow-button"]()),{action:function(u){ct(i,r)}}))]}))}}}),Z("toolbar-toggle-events",[B(r,function(i){vt(i,t,"overflow").each(function(u){Hc(i,t),je.toggleGrow(u)})})])]),apis:{setGroups:function(i,u){(function(a,s){var c=I(s,a.getSystem().build);t.builtGroups.set(c)})(i,u),Hc(i,t)},refresh:function(i){return Hc(i,t)},toggle:function(i){return function(u,a){vt(u,a,"overflow").each(function(s){Hc(u,a),je.toggleGrow(s)})}(i,t)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,n,e){t.setGroups(n,e)},refresh:function(t,n){t.refresh(n)},toggle:function(t,n){t.toggle(n)}}}),hd=y(N("toolbar-height-change")),vd="silver.readonly",NB=W([(nw="readonly",Xn(nw,la))]),Wu=[tn("disabled",!1),Tt("tooltip"),Tt("icon"),Tt("text"),Ft("onSetup",function(){return P})],PB=W([Q("type"),xn("onAction")].concat(Wu)),zB=[Tt("text"),Tt("tooltip"),Tt("icon"),xn("fetch"),Ft("onSetup",function(){return P})],LB=W(jt([Q("type")],zB)),jB=W([Q("type"),Tt("tooltip"),Tt("icon"),Tt("text"),Gi("select"),xn("fetch"),Ft("onSetup",function(){return P}),Zo("presets","normal",["normal","color","listpreview"]),k("columns",1),xn("onAction"),xn("onItemAction")]),bd=[tn("active",!1)].concat(Wu),UB=W(bd.concat([Q("type"),xn("onAction")])),WB=W([Q("type"),Xn("items",(fd=[Cm([Q("name"),To("items",pn)]),pn],{extract:function(t,n,e){for(var o=[],r=0,i=fd;r<i.length;r++){var u=i[r].extract(t,n,e);if(u.stype===le.Value)return u;o.push(u)}return Zm(o)},toString:function(){return"oneOf("+I(fd,function(t){return t.toString()}).join(", ")+")"}}))].concat(Wu)),lw=[Ft("predicate",function(){return!1}),Zo("scope","node",["node","editor"]),Zo("position","selection",["node","selection","line"])],GB=Wu.concat([k("type","contextformbutton"),k("primary",!1),xn("onAction"),un("original",bt)]),XB=bd.concat([k("type","contextformbutton"),k("primary",!1),xn("onAction"),un("original",bt)]),YB=Wu.concat([k("type","contextformbutton")]),qB=bd.concat([k("type","contextformtogglebutton")]),KB=me("type",{contextformbutton:GB,contextformtogglebutton:XB}),JB=W([k("type","contextform"),Ft("initValue",function(){return""}),Tt("label"),To("commands",KB),Eo("launch",me("type",{contextformbutton:YB,contextformtogglebutton:qB}))].concat(lw)),$B=W([k("type","contexttoolbar"),Q("items")].concat(lw)),QB=Object.freeze({__proto__:null,getState:function(t,n,e){return e}}),ZB=Object.freeze({__proto__:null,events:function(t,n){function e(o,r){t.updateState.each(function(i){var u=i(o,r);n.set(u)}),t.renderComponents.each(function(i){var u=i(r,n.get()),a=I(u,o.getSystem().build);Ep(o,a)})}return xt([B(Zr(),function(o,r){var i=r,u=t.channel;Mt(i.channels(),u)&&e(o,i.data())}),It(function(o,r){t.initialData.each(function(i){e(o,i)})})])}}),tD=Object.freeze({__proto__:null,init:function(){var t=V(d.none());return{readState:function(){return t.get().fold(function(){return"none"},function(n){return n})},get:function(){return t.get()},set:function(n){return t.set(n)},clear:function(){return t.set(d.none())}}}}),nD=[E("channel"),ft("renderComponents"),ft("updateState"),ft("initialData")],ke=on({fields:nD,name:"reflecting",active:ZB,apis:QB,state:tD}),eD=y([E("toggleClass"),E("fetch"),hr("onExecute"),k("getHotspot",d.some),k("getAnchorOverrides",y({})),Po(),hr("onItemExecute"),ft("lazySink"),E("dom"),dt("onOpen"),Gt("splitDropdownBehaviours",[Vt,L,Y]),k("matchWidth",!1),k("useMinWidth",!1),k("eventOrder",{}),ft("role")].concat(_l())),oD=sn({factory:_n,schema:[E("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:A([Y.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(n){n.getSystem().getByUid(t.uid).each(nr)},buttonBehaviours:A([ut.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),rD=sn({factory:_n,schema:[E("dom")],name:"button",defaults:function(){return{buttonBehaviours:A([Y.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(n){n.getSystem().getByUid(t.uid).each(function(e){t.onExecute(e,n)})}}}}),iD=y([oD,rD,He({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[E("text")],name:"aria-descriptor"}),ye({schema:[wa()],name:"menu",defaults:function(t){return{onExecute:function(n,e){n.getSystem().getByUid(t.uid).each(function(o){t.onItemExecute(o,n,e)})}}}}),Kb()]),Nc=On({name:"SplitDropdown",configFields:eD(),partFields:iD(),factory:function(t,n,e,o){function r(c){at.getCurrent(c).each(function(f){mt.highlightFirst(f),L.focusIn(f)})}function i(c){wi(t,function(f){return f},c,o,r,ze.HighlightFirst).get(P)}function u(c){var f=$e(c,t,"button");return nr(f),d.some(!0)}var a=O(O({},xt([It(function(c,f){vt(c,t,"aria-descriptor").each(function(l){var m=N("aria");lt(l.element(),"id",m),lt(c.element(),"aria-describedby",m)})})])),Wa(d.some(i))),s={repositionMenus:function(c){ut.isOn(c)&&Qb(c)}};return{uid:t.uid,dom:t.dom,components:n,apis:s,eventOrder:O(O({},t.eventOrder),{"alloy.execute":["disabling","toggling","alloy.base.behaviour"]}),events:a,behaviours:Jt(t.splitDropdownBehaviours,[Vt.config({others:{sandbox:function(c){var f=$e(c,t,"arrow");return Ol(t,c,{onOpen:function(){ut.on(f),ut.on(c)},onClose:function(){ut.off(f),ut.off(c)}})}}}),L.config({mode:"special",onSpace:u,onEnter:u,onDown:function(c){return i(c),d.some(!0)}}),Y.config({}),ut.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,n){return t.repositionMenus(n)}}}),dw=N("focus-button"),uD=["checklist","ordered-list"],aD=["indent","outdent","table-insert-column-after","table-insert-column-before","unordered-list"],mw=function(t,n,e){return $x(t,{toolbarButtonBehaviours:[].concat(0<e.length?[Z("toolbarButtonWith",e)]:[]),getApi:iB,onSetup:t.onSetup},n)},gw=function(t,n,e){return yt($x(t,{toolbarButtonBehaviours:[G.config({}),ut.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<e.length?[Z("toolbarToggleButtonWith",e)]:[]),getApi:uB,onSetup:t.onSetup},n))},cD=function(t,n,e){var o=n.label.fold(function(){return{}},function(u){return{"aria-label":u}}),r=gt(Fu.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:n.initValue(),inputAttributes:o,selectOnFocus:!0,inputBehaviours:A([L.config({mode:"special",onEnter:function(u){return i.findPrimary(u).map(function(a){return nr(a),!0})},onLeft:function(u,a){return a.cut(),d.none()},onRight:function(u,a){return a.cut(),d.none()}})])})),i=function(u,a,s){var c=I(a,function(f){return gt(cB(u,f,s))});return{asSpecs:function(){return I(c,function(f){return f.asSpec()})},findPrimary:function(f){return fe(a,function(l,m){return l.primary?d.from(c[m]).bind(function(h){return h.getOpt(f)}).filter(Vi(X.isDisabled)):d.none()})}}}(r,n.commands,e.shared.providers);return Ac({type:t,uid:N("context-toolbar"),initGroups:[{title:d.none(),items:[r.asSpec()]},{title:d.none(),items:i.asSpecs()}],onEscape:d.none,cyclicKeying:!0})},sD=function(t,n){function e(i){return nn(i,o)}var o=z.fromDom(n.getBody()),r=z.fromDom(n.selection.getNode());return ma(r,o)?d.none():cd(r,t.inNodeScope).orThunk(function(){return cd(r,t.inEditorScope).orThunk(function(){return Fm(r,function(i){return e(i)?d.none():cd(i,t.inNodeScope)},e)})})},fD=function(t,n){function e(f,l){var m=Ye(function(h){return Et("ContextForm",JB,h)}(l));(r[f]=m).launch.map(function(h){a["form:"+f]=O(O({},l.launch),{type:h.type==="contextformtogglebutton"?"togglebutton":"button",onAction:function(){n(m)}})}),m.scope==="editor"?u.push(m):i.push(m),s[f]=m}function o(f,l){(function(m){return Et("ContextToolbar",$B,m)})(l).each(function(m){l.scope==="editor"?u.push(m):i.push(m),s[f]=m})}var r={},i=[],u=[],a={},s={},c=Ht(t);return K(c,function(f){var l=t[f];l.type==="contextform"?e(f,l):l.type==="contexttoolbar"&&o(f,l)}),{forms:r,inNodeScope:i,inEditorScope:u,lookupTable:s,formNavigators:a}},pw=N("forward-slide"),hw=N("backward-slide"),yd=N("change-slide-event"),xd="tox-pop--resizing";(Fc=Ei=Ei||{})[Fc.SemiColon=0]="SemiColon",Fc[Fc.Space=1]="Space";function wd(t,n,e,o){return{type:"basic",data:function(r){return I(r,function(i){var u=i,a=i,s=i.split("=");return 1<s.length&&(u=s[0],a=s[1]),{title:u,format:a}})}(function(r,i){return i===Ei.SemiColon?r.replace(/;$/,"").split(";"):r.split(" ")}(J(t.settings,n).getOr(e),o))}}function vw(t){function n(i){var u=Xt(c0,function(a){return t.formatter.match(a.format)}).fold(function(){return"left"},function(a){return a.title.toLowerCase()});j(i,sx,{icon:"align-"+u})}var e=d.some(function(i){return function(){return n(i)}}),o=d.some(function(i){return n(i)}),r=function(i){return{type:"basic",data:i}}(c0);return{tooltip:"Align",icon:d.some("align-left"),isSelectedFor:function(i){return function(){return t.formatter.match(i)}},getCurrentValue:y(d.none()),getPreviewFor:function(i){return function(){return d.none()}},onAction:sd(t),setInitialValue:o,nodeChangeHandler:e,dataset:r,shouldHide:!1,isInvalid:function(i){return!t.formatter.canApply(i.format)}}}function bw(t){var n=t.split(/\s*,\s*/);return I(n,function(e){return e.replace(/^['"]+|['"]+$/g,"")})}function yw(t){function n(){function u(f){return f?bw(f)[0]:""}var a=t.queryCommandValue("FontName"),s=i.data,c=a?a.toLowerCase():"";return{matchOpt:Xt(s,function(f){var l=f.format;return l.toLowerCase()===c||u(l).toLowerCase()===u(c).toLowerCase()}).orThunk(function(){return function(f){var l;return f.indexOf("-apple-system")===0&&(l=bw(f.toLowerCase()),Wr(HD,function(m){return-1<l.indexOf(m.toLowerCase())}))}(c)?d.from({title:"System Font",format:c}):d.none()}),font:a}}function e(u){var a=n(),s=a.matchOpt,c=a.font,f=s.fold(function(){return c},function(l){return l.title});j(u,Lu,{text:f})}var o=d.some(function(u){return function(){return e(u)}}),r=d.some(function(u){return e(u)}),i=wd(t,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",Ei.SemiColon);return{tooltip:"Fonts",icon:d.none(),isSelectedFor:function(u){return function(a){return a.exists(function(s){return s.format===u})}},getCurrentValue:function(){return n().matchOpt},getPreviewFor:function(u){return function(){return d.some({tag:"div",styles:u.indexOf("dings")===-1?{"font-family":u}:{}})}},onAction:function(u){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("FontName",!1,u.format)})}},setInitialValue:r,nodeChangeHandler:o,dataset:i,shouldHide:!1,isInvalid:function(){return!1}}}function lD(t,n){return/[0-9.]+px$/.test(t)?function(e,o){var r=Math.pow(10,o);return Math.round(e*r)/r}(72*parseInt(t,10)/96,n||0)+"pt":t}function xw(t){function n(){var a=d.none(),s=u.data,c=t.queryCommandValue("FontSize");if(c)for(var f=function(m){var h=lD(c,m),g=function(b){return J(ND,b).getOr("")}(h);a=Xt(s,function(b){return b.format===c||b.format===h||b.format===g})},l=3;a.isNone()&&0<=l;l--)f(l);return{matchOpt:a,size:c}}function e(a){var s=n(),c=s.matchOpt,f=s.size,l=c.fold(function(){return f},function(m){return m.title});j(a,Lu,{text:l})}var o=y(y(d.none())),r=d.some(function(a){return function(){return e(a)}}),i=d.some(function(a){return e(a)}),u=wd(t,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",Ei.Space);return{tooltip:"Font sizes",icon:d.none(),isSelectedFor:function(a){return function(s){return s.exists(function(c){return c.format===a})}},getPreviewFor:o,getCurrentValue:function(){return n().matchOpt},onAction:function(a){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("FontSize",!1,a.format)})}},setInitialValue:i,nodeChangeHandler:r,dataset:u,shouldHide:!1,isInvalid:function(){return!1}}}function ww(t,n,e){var o=n();return fe(e,function(r){return Xt(o,function(i){return t.formatter.matchNode(r,i.format)})}).orThunk(function(){return t.formatter.match("p")?d.some({title:"Paragraph",format:"p"}):d.none()})}function Sw(t){var n=t.selection.getStart(!0)||t.getBody();return t.dom.getParents(n,function(){return!0},t.getBody())}function Cw(t){function n(i,u){var a=function(s){return ww(t,function(){return r.data},s)}(i).fold(function(){return"Paragraph"},function(s){return s.title});j(u,Lu,{text:a})}var e=d.some(function(i){return function(u){return n(u.parents,i)}}),o=d.some(function(i){var u=Sw(t);n(u,i)}),r=wd(t,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",Ei.SemiColon);return{tooltip:"Blocks",icon:d.none(),isSelectedFor:function(i){return function(){return t.formatter.match(i)}},getCurrentValue:y(d.none()),getPreviewFor:function(i){return function(){var u=t.formatter.get(i);return d.some({tag:0<u.length&&(u[0].inline||u[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(i))})}},onAction:sd(t),setInitialValue:o,nodeChangeHandler:e,dataset:r,shouldHide:!1,isInvalid:function(i){return!t.formatter.canApply(i.format)}}}function kw(t,n){function e(i,u){var a=function(f){var l=f.items;return l!==void 0&&0<l.length?At(l,a):[{title:f.title,format:f.format}]},s=At(bx(t),a),c=ww(t,function(){return s},i).fold(function(){return"Paragraph"},function(f){return f.title});j(u,Lu,{text:c})}var o=d.some(function(i){return function(u){return e(u.parents,i)}}),r=d.some(function(i){var u=Sw(t);e(u,i)});return{tooltip:"Formats",icon:d.none(),isSelectedFor:function(i){return function(){return t.formatter.match(i)}},getCurrentValue:y(d.none()),getPreviewFor:function(i){return function(){var u=t.formatter.get(i);return u!==void 0?d.some({tag:0<u.length&&(u[0].inline||u[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(i))}):d.none()}},onAction:sd(t),setInitialValue:r,nodeChangeHandler:o,shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(i){return!t.formatter.canApply(i.format)},dataset:n}}function Gu(t,n){return function(e,o,r){var i=t(e).mapError(function(u){return ur(u)}).getOrDie();return n(i,o,r)}}function dD(t){var n=t.toolbar,e=t.buttons;return n===!1?[]:n===void 0||n===!0?function(o){var r=I(PD,function(i){var u=Ct(i.items,function(a){return qt(o,a)||qt(s0,a)});return{name:i.name,items:u}});return Ct(r,function(i){return 0<i.items.length})}(e):Yt(n)?function(o){var r=o.split("|");return I(r,function(i){return{items:i.trim().split(" ")}})}(n):function(o){return sm(o,function(r){return qt(r,"name")&&qt(r,"items")})}(n)?n:(F.console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])}function mD(t,n,e,o,r,i){return J(n,e.toLowerCase()).orThunk(function(){return i.bind(function(u){return fe(u,function(a){return J(n,a+e.toLowerCase())})})}).fold(function(){return J(s0,e.toLowerCase()).map(function(u){return u(t,r)}).orThunk(function(){return d.none()})},function(u){return u.type!=="grouptoolbarbutton"||o?function(a,s,c){return J(Fi,a.type).fold(function(){return F.console.error("skipping button defined by",a),d.none()},function(f){return d.some(f(a,s,c))})}(u,r,t):(F.console.warn("Ignoring the '"+e+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),d.none())})}function Ow(t){return(gn(t,"position").is("fixed")?d.none():zm(t)).orThunk(function(){var n=z.fromTag("span");return Vn(t).bind(function(e){he(e,n);var o=zm(n);return Vo(n),o})})}function _w(t){return Ow(t).map(dr).getOrThunk(function(){return Bt(0,0)})}function gD(t,n){var e=t.element();en(e,n.transitionClass),Ut(e,n.fadeOutClass),en(e,n.fadeInClass),n.onShow(t)}function pD(t,n){var e=t.element();en(e,n.transitionClass),Ut(e,n.fadeInClass),en(e,n.fadeOutClass),n.onHide(t)}function Tw(t,n,e){return Wr(t,function(o){switch(o){case"bottom":return function(r,i){return r.bottom()<=i.bottom()}(n,e);case"top":return function(r,i){return r.y()>=i.y()}(n,e)}})}function Ew(t,n){return n.getInitialPosition().map(function(e){return Me(e.bounds.x(),e.bounds.y(),Mn(t),Hn(t))})}function hD(t,n,e){e.setInitialPosition(d.some({style:function(o){var r={},i=o.dom();if(Ki(i))for(var u=0;u<i.style.length;u++){var a=i.style.item(u);r[a]=i.style[a]}return r}(t),position:Ee(t,"position")||"static",bounds:n}))}function Bw(t,n,e){return e.getInitialPosition().bind(function(o){switch(e.setInitialPosition(d.none()),o.position){case"static":return d.some(Bd.static());case"absolute":var r=Ow(t).map(be).getOrThunk(function(){return be(Je())});return d.some(Bd.absolute(Ve("absolute",J(o.style,"left").map(function(i){return n.x()-r.x()}),J(o.style,"top").map(function(i){return n.y()-r.y()}),J(o.style,"right").map(function(i){return r.right()-n.right()}),J(o.style,"bottom").map(function(i){return r.bottom()-n.bottom()}))));default:return d.none()}})}function vD(t,n,e,o){var r=t.element();return gn(r,"position").is("fixed")?function(i,u,a,s){return Ew(i,s).filter(function(c){return Tw(u.modes,c,a)}).bind(function(c){return Bw(i,c,s)})}(r,n,e,o):function(i,u,a,s){var c=be(i);if(Tw(u.modes,c,a))return d.none();hD(i,c,s);var f=mr(),l=c.x()-f.x(),m=a.y()-f.y(),h=f.bottom()-a.bottom(),g=c.y()<=a.y();return d.some(Bd.fixed(Ve("fixed",d.some(l),g?d.some(m):d.none(),d.none(),g?d.none():d.some(h))))}(r,n,e,o)}function Dw(t,n){K(["left","right","top","bottom","position"],function(e){return _t(t.element(),e)}),n.onUndocked(t)}function Sd(t,n,e){Kg(t.element(),e),(e.position()==="fixed"?n.onDocked:n.onUndocked)(t)}function Aw(t,n,e,o,r){r===void 0&&(r=!1),n.contextual.each(function(i){i.lazyContext(t).each(function(u){var a=function(s,c){return s.y()<c.bottom()&&s.bottom()>c.y()}(u,o);a!==e.isVisible()&&(e.setVisible(a),r&&!a?(qi(t.element(),[i.fadeOutClass]),i.onHide(t)):(a?gD:pD)(t,i))})})}function bD(t,n,e){var o=t.element();e.setDocked(!1),function(r,i){var u=r.element();return Ew(u,i).bind(function(a){return Bw(u,a,i)})}(t,e).each(function(r){r.fold(function(){return Dw(t,n)},function(i){return Sd(t,n,i)},P)}),e.setVisible(!0),n.contextual.each(function(r){Ao(o,[r.fadeInClass,r.fadeOutClass,r.transitionClass]),r.onShow(t)}),Dd(t,n,e)}function Mw(t,n,e){e.isDocked()&&bD(t,n,e)}function Cd(t,n){var e=t.element();Vn(e).each(function(o){var r="padding-"+(n?"top":"bottom");if(Wn.isDocked(t)){var i=Mn(o);nt(e,"width",i+"px"),nt(o,r,function(u){return lr(u)+(parseInt(Ee(u,"margin-top"),10)||0)+(parseInt(Ee(u,"margin-bottom"),10)||0)}(e)+"px")}else _t(e,"width"),_t(o,r)})}function Fw(t,n){n?(Ut(t,ro.fadeOutClass),qi(t,[ro.transitionClass,ro.fadeInClass])):(Ut(t,ro.fadeInClass),qi(t,[ro.fadeOutClass,ro.transitionClass]))}function Iw(t,n){var e=z.fromDom(t.getContainer());n?(en(e,m0),Ut(e,g0)):(en(e,g0),Ut(e,m0))}function Rw(t,n){function e(a){n().each(function(s){return a(s.element())})}function o(a){t.inline||Cd(a,i),Iw(t,Wn.isDocked(a)),a.getSystem().broadcastOn([mu()],{}),n().each(function(s){return s.getSystem().broadcastOn([mu()],{})})}var r=V(d.none()),i=Qe(t),u=t.inline?[]:function(a){var s;return[Re.config({channels:(s={},s[hd()]={onReceive:function(c){Cd(c,a)}},s)})]}(i);return jt([Y.config({}),Wn.config({contextual:O({lazyContext:function(a){var s=lr(a.element()),c=t.inline?t.getContentAreaContainer():t.getContainer(),f=be(z.fromDom(c)),l=f.height()-s,m=f.y()+(i?0:s);return d.some(Me(f.x(),m,f.width(),l))},onShow:function(){e(function(a){return Fw(a,!0)})},onShown:function(a){e(function(s){return Ao(s,[ro.transitionClass,ro.fadeInClass])}),r.get().each(function(s){(function(c,f){var l=Yn(f);go(l).filter(function(m){return!nn(f,m)}).filter(function(m){return nn(m,z.fromDom(l.dom().body))||ma(c,m)}).each(function(){return Ho(f)})})(a.element(),s),r.set(d.none())})},onHide:function(a){r.set(function(s,c){return Ie(s).orThunk(function(){return c().toOption().bind(function(f){return Ie(f.element())})})}(a.element(),n)),e(function(s){return Fw(s,!1)})},onHidden:function(){e(function(a){return Ao(a,[ro.transitionClass])})}},ro),modes:[i?"top":"bottom"],onDocked:o,onUndocked:o})],u)}function Vw(t){return"<alloy.field."+t+">"}function yD(t){return{element:function(){return t.element().dom()}}}function xD(t,n){var e=I(Ht(n),function(o){var r=n[o],i=Ye(function(u){return Et("sidebar",oA,u)}(r));return{name:o,getApi:yD,onSetup:i.onSetup,onShow:i.onShow,onHide:i.onHide}});return I(e,function(o){var r=V(P);return t.slot(o.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:nc([yu(o,r),xu(o,r),B(Ns(),function(i,u){var a=u.event();Xt(e,function(s){return s.name===a.name()}).each(function(s){(a.visible()?s.onShow:s.onHide)(s.getApi(i))})})])})})}function wD(t,n){at.getCurrent(t).each(function(e){return G.set(e,[function(o){return io.sketch(function(r){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:xD(r,o),slotBehaviours:nc([It(function(i){return io.hideAllSlots(i)})])}})}(n)])})}function SD(t){return at.getCurrent(t).bind(function(n){return je.isGrowing(n)||je.hasGrown(n)?at.getCurrent(n).bind(function(e){return Xt(io.getSlotNames(e),function(o){return io.isShowing(e,o)})}):d.none()})}function Xo(t){var n=z.fromHtml(t),e=_e(n),o=function(u){var a=u.dom().attributes!==void 0?u.dom().attributes:[];return Dn(a,function(s,c){var f;return c.name==="class"?s:O(O({},s),((f={})[c.name]=c.value,f))},{})}(n),r=function(u){return Array.prototype.slice.call(u.dom().classList,0)}(n),i=e.length===0?{}:{innerHtml:ps(n)};return O({tag:qe(n),classes:r,attributes:o},i)}function CD(t,n,e){var o=t.element();n===!0?(G.set(t,[function(r){return{dom:{tag:"div",attributes:{"aria-label":r.translate("Loading...")},classes:["tox-throbber__busy-spinner"]},components:[{dom:Xo('<div class="tox-spinner"><div></div><div></div><div></div></div>')}],behaviours:A([L.config({mode:"special",onTab:function(){return d.some(!0)},onShiftTab:function(){return d.some(!0)}}),Y.config({})])}}(e)]),_t(o,"display"),re(o,"aria-hidden")):(G.set(t,[]),nt(o,"display","none"),lt(o,"aria-hidden","true"))}function kd(t){return typeof t=="string"?t.split(" "):t}function Hw(t,n){var e=O(O({},v0),n.menus),o=0<Ht(n.menus).length,r=n.menubar===void 0||n.menubar===!0?kd("file edit view insert format tools table help"):kd(n.menubar===!1?"":n.menubar),i=Ct(r,function(a){return o&&n.menus.hasOwnProperty(a)&&n.menus[a].hasOwnProperty("items")||v0.hasOwnProperty(a)}),u=I(i,function(a){var s=e[a];return function(c,f,l){var m=function(h){return h.getParam("removed_menuitems","")}(l).split(/[ ,]/);return{text:c.title,getItems:function(){return At(c.items,function(h){var g=h.toLowerCase();return g.trim().length===0?[]:So(m,function(b){return b===g})?[]:g==="separator"||g==="|"?[{type:"separator"}]:f.menuItems[g]?[f.menuItems[g]]:[]})}}}({title:s.title,items:kd(s.items)},n,t)});return Ct(u,function(a){return 0<a.getItems().length&&So(a.getItems(),function(s){return s.type!=="separator"})})}function Nw(t,n){var e,o=function(r){var i=r.settings,u=i.skin,a=i.skin_url;if(u!==!1){var s=u||"oxide";a=a?r.documentBaseURI.toAbsolute(a):m1.baseURL+"/skins/ui/"+s}return a}(n);o&&(e=o+"/skin.min.css",n.contentCSS.push(o+(t?"/content.inline":"/content")+".min.css")),function(r){return r.getParam("skin")===!1}(n)===!1&&e?vi.DOM.styleSheetLoader.load(e,b0(n),lA(n,"Skin could not be loaded")):b0(n)()}function Pw(t,n,e,o){var r=n.outerContainer,i=e.toolbar,u=e.buttons;if(sm(i,Yt)){var a=i.map(function(s){var c={toolbar:s,buttons:u,allowToolbarGroups:e.allowToolbarGroups};return Wc(t,c,{backstage:o},d.none())});Dt.setToolbars(r,a)}else Dt.setToolbar(r,Wc(t,e,{backstage:o},d.none()))}function kD(t){return function(n){var e=Zh(n),o=ev(n),r=ov(n);return Id(e).map(function(i){return Xc(i,o,r)})}(t).getOr(Zh(t))}function zw(t){var n=tv(t),e=nv(t),o=jf(t);return Id(n).map(function(r){return Xc(r,e,o)})}function Lw(t,n){var e=be(t);return n?e.y():e.bottom()}function Od(t,n){return function(){t.execCommand("mceToggleFormat",!1,n)}}function OD(t){(function(n){Tn.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(r,i){n.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onSetup:Mc(n,r.name),onAction:Od(n,r.name)})});for(var e=1;e<=6;e++){var o="h"+e;n.ui.registry.addToggleButton(o,{text:o.toUpperCase(),tooltip:"Heading "+e,onSetup:Mc(n,o),onAction:Od(n,o)})}})(t),function(n){Tn.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(e){n.ui.registry.addButton(e.name,{tooltip:e.text,icon:e.icon,onAction:function(){return n.execCommand(e.action)}})})}(t),function(n){Tn.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(e){n.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onAction:function(){return n.execCommand(e.action)},onSetup:Mc(n,e.name)})})}(t)}function Pc(t,n,e){function o(){return!!n.undoManager&&n.undoManager[e]()}function r(){t.setDisabled(n.readonly||!o())}return t.setDisabled(!o()),n.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r),function(){return n.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r)}}function Xu(t,n){return{anchor:"makeshift",x:t,y:n}}function jw(t){return t.type==="longpress"||t.type.indexOf("touch")===0}function _D(t,n){var e=vi.DOM.getPos(t);return function(o,r,i){return Xu(o.x+r,o.y+i)}(n,e.x,e.y)}function Uw(t,n){return n.type==="contextmenu"||n.type==="longpress"?t.inline?function(e){if(jw(e)){var o=e.touches[0];return Xu(o.pageX,o.pageY)}return Xu(e.pageX,e.pageY)}(n):_D(t.getContentAreaContainer(),function(e){if(jw(e)){var o=e.touches[0];return Xu(o.clientX,o.clientY)}return Xu(e.clientX,e.clientY)}(n)):kA(t)}function Ww(t){return{anchor:"node",node:d.some(z.fromDom(t.selection.getNode())),root:z.fromDom(t.getBody())}}function TD(t,n,e,o,r,i){var u=e(),a=function(s,c,f){return f?Ww(s):Uw(s,c)}(t,n,i);zu(u,Ze.CLOSE_ON_EXECUTE,o,!1).map(function(s){n.preventDefault(),kt.showMenuAt(r,a,{menu:{markers:yi("normal")},data:s})})}function ED(t,n,e,o,r,i,u){var a=function(s,c,f){var l=c?Ww(s):Uw(s,f);return O({bubble:ci(0,12,_A),layouts:OA,overrides:{maxWidthFunction:md(),maxHeightFunction:su()}},l)}(t,i,n);zu(e,Ze.CLOSE_ON_EXECUTE,o,!0).map(function(s){n.preventDefault(),kt.showMenuWithinBounds(r,a,{menu:{markers:yi("normal"),highlightImmediately:u},data:s,type:"horizontal"},function(){return d.some(Zx(t))}),t.fire(sw)})}function BD(t,n,e,o,r,i){function u(){var h=e();ED(t,n,h,o,r,i,!(f||s||c&&l))}var a=pe(),s=a.os.isiOS(),c=a.os.isOSX(),f=a.os.isAndroid(),l=a.deviceType.isTouch();if(!c&&!s||i)f&&!i&&t.selection.setCursorLocation(n.target,0),u();else{var m=function(){(function(h){function g(){Pe.setEditorTimeout(h,function(){h.selection.setRng(b)},10),v()}var b=h.selection.getRng();h.once("touchend",g);function p(S){S.preventDefault(),S.stopImmediatePropagation()}h.on("mousedown",p,!0);function x(){return v()}h.once("longpresscancel",x);var v=function(){h.off("touchend",g),h.off("longpresscancel",x),h.off("mousedown",p)}})(t),u()};(function(h,g){var b=h.selection;if(b.isCollapsed()||g.touches.length<1)return!1;var p=g.touches[0],x=b.getRng();return mf(h.getWin(),fu.domRange(x)).exists(function(v){return v.left()<=p.clientX&&v.right()>=p.clientX&&v.top()<=p.clientY&&v.bottom()>=p.clientY})})(t,n)?m():(t.once("selectionchange",m),t.once("touchend",function(){return t.off("selectionchange",m)}))}}function Gw(t){return typeof t=="string"?t.split(/[ ,]/):t}function Xw(t){return Yt(t)?t==="|":t.type==="separator"}function Yw(t,n){if(n.length===0)return t;var e=rs(t).filter(function(o){return!Xw(o)}).fold(function(){return[]},function(o){return[Vd]});return t.concat(e).concat(n).concat([Vd])}function DD(t,n,e){function o(a){return kt.hide(u)}function r(a){if(x0(t)&&a.preventDefault(),!function(c,f){return f.ctrlKey&&!x0(c)}(t,a)&&!EA(t)){var s=function(c,f){return f.type!=="longpress"&&(f.button!==2||f.target===c.getBody()&&f.pointerType==="")}(t,a);(i()?BD:TD)(t,a,function(){var c=s?t.selection.getStart(!0):a.target,f=t.ui.registry.getAll(),l=TA(t);return function(m,h,g){var b=Dn(h,function(p,x){if(qt(m,x)){var v=m[x].update(g);if(Yt(v))return Yw(p,v.split(" "));if(0<v.length){var S=I(v,w0);return Yw(p,S)}return p}return p.concat([x])},[]);return 0<b.length&&Xw(b[b.length-1])&&b.pop(),b}(f.contextMenus,l,c)},e,u,s)}}var i=pe().deviceType.isTouch,u=wn(kt.sketch({dom:{tag:"div"},lazySink:n,onEscape:function(){return t.focus()},onShow:function(){return e.setContextMenuState(!0)},onHide:function(){return e.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:A([Z("dismissContextMenu",[B(ni(),function(a,s){rt.close(a),t.focus()})])])}));t.on("init",function(){var a="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(i()?"":" ResizeWindow");t.on(a,o),t.on("longpress contextmenu",r)})}function zc(t){return function(n){return n.translate(-t.left(),-t.top())}}function Lc(t){return function(n){return n.translate(t.left(),t.top())}}function xo(t){return function(n,e){return Dn(t,function(o,r){return r(o)},Bt(n,e))}}function jc(t,n,e){return t.fold(xo([Lc(e),zc(n)]),xo([zc(n)]),xo([]))}function Ai(t,n,e){return t.fold(xo([Lc(e)]),xo([]),xo([Lc(n)]))}function qw(t,n,e){return t.fold(xo([]),xo([zc(e)]),xo([Lc(n),zc(e)]))}function Kw(t,n,e){var o=t.fold(function(r,i){return{position:d.some("absolute"),left:d.some(r+"px"),top:d.some(i+"px")}},function(r,i){return{position:d.some("absolute"),left:d.some(r-e.left()+"px"),top:d.some(i-e.top()+"px")}},function(r,i){return{position:d.some("fixed"),left:d.some(r+"px"),top:d.some(i+"px")}});return O({right:d.none(),bottom:d.none()},o)}function _d(t,n,e,o){function r(i,u){return function(a,s){var c=i(n,e,o);return u(a.getOr(c.left()),s.getOr(c.top()))}}return t.fold(r(qw,Yc),r(Ai,Yo),r(jc,Pr))}function AD(t,n,e,o){return function(r,i){var u=r.element(),a=parseInt(Kt(u,i.leftAttr),10),s=parseInt(Kt(u,i.topAttr),10);return isNaN(a)||isNaN(s)?d.none():d.some(Bt(a,s))}(t,n).fold(function(){return e},function(r){return Pr(r.left()+o.left(),r.top()+o.top())})}function MD(t,n,e,o,r,i){var u=AD(t,n,e,o),a=n.mustSnap?BA(t,n,u,r,i):DA(t,n,u,r,i),s=jc(u,r,i);return function(c,f,l){var m=c.element();lt(m,f.leftAttr,l.left()+"px"),lt(m,f.topAttr,l.top()+"px")}(t,n,s),a.fold(function(){return{coord:Pr(s.left(),s.top()),extra:d.none()}},function(c){return{coord:c.output(),extra:c.extra()}})}function FD(t,n){(function(e,o){var r=e.element();re(r,o.leftAttr),re(r,o.topAttr)})(t,n)}function Jw(t,n,e,o){return fe(t,function(r){var i=r.sensor();return function(u,a,s,c,f,l){var m=Ai(u,f,l),h=Ai(a,f,l);return Math.abs(m.left()-h.left())<=s&&Math.abs(m.top()-h.top())<=c}(n,i,r.range().left(),r.range().top(),e,o)?d.some({output:y(_d(r.output(),n,e,o)),extra:r.extra}):d.none()})}function $w(t,n){t.getSystem().addToGui(n),function(e){Vn(e.element()).filter(ei).each(function(o){gn(o,"z-index").each(function(r){lt(o,qc,r)}),nt(o,"z-index",Ee(e.element(),"z-index"))})}(n)}function ID(t){(function(n){Vn(n.element()).filter(ei).each(function(e){var o=Kt(e,qc);or(e,qc)?nt(e,"z-index",o):_t(e,"z-index"),re(e,qc)})})(t),t.getSystem().removeFromGui(t)}function Qw(t,n,e){return t.getSystem().build(fn.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[n]},events:e}))}function RD(t){return function(n,e,o,r){return n.isSome()&&e.isSome()&&o.isSome()?d.some(r(n.getOrDie(),e.getOrDie(),o.getOrDie())):d.none()}(gn(t,"left"),gn(t,"top"),gn(t,"position"),function(n,e,o){return(o==="fixed"?Pr:Yc)(parseInt(n,10),parseInt(e,10))}).getOrThunk(function(){var n=dr(t);return Yo(n.left(),n.top())})}function VD(t,n,e,o,r,i,u){return function(a,s,c,f,l){var m=l.bounds,h=Ai(s,c,f),g=po(h.left(),m.x(),m.x()+m.width()-l.width),b=po(h.top(),m.y(),m.y()+m.height()-l.height),p=Yo(g,b);return s.fold(function(){var x=qw(p,c,f);return Yc(x.left(),x.top())},function(){return p},function(){var x=jc(p,c,f);return Pr(x.left(),x.top())})}(0,n.fold(function(){var a=function(c,f,l){return c.fold(function(m,h){return Yc(m+f,h+l)},function(m,h){return Yo(m+f,h+l)},function(m,h){return Pr(m+f,h+l)})}(e,i.left(),i.top()),s=jc(a,o,r);return Pr(s.left(),s.top())},function(a){var s=MD(t,a,e,i,o,r);return s.extra.each(function(c){a.onSensor(t,c)}),s.coord}),o,r,u)}function Zw(t,n){return{bounds:t.getBounds(),height:lr(n.element()),width:cu(n.element())}}function Td(t,n,e,o,r){var i=e.update(o,r),u=e.getStartData().getOrThunk(function(){return Zw(n,t)});i.each(function(a){(function(s,c,f,l){var m=c.getTarget(s.element());if(c.repositionTarget){var h=Yn(s.element()),g=mo(h),b=_w(m),p=RD(m),x=VD(s,c.snaps,p,g,b,l,f),v=Kw(x,0,b);xs(m,v)}c.onDrag(s,m,l)})(t,n,u,a)})}function Uc(t,n,e,o){n.each(ID),e.snaps.each(function(i){FD(t,i)});var r=e.getTarget(t.element());o.reset(),e.onDrop(t,r)}function Ed(t){return function(n,e){function o(r){e.setStartData(Zw(n,r))}return xt(jt([B(Vs(),function(r){e.getStartData().each(function(){return o(r)})})],t(n,e,o)))}}function t0(t,n,e){return[B(De(),function(o,r){if(r.event().raw().button===0){r.stop();var i=function(){return Uc(o,d.some(s),t,n)},u=_b(i,200),a={drop:i,delayDrop:u.schedule,forceDrop:i,move:function(c){u.cancel(),Td(o,t,n,FA,c)}},s=Qw(o,t.blockerClass,function(c){return xt([B(De(),c.forceDrop),B(Ds(),c.drop),B(ga(),function(f,l){c.move(l.event())}),B(Bs(),c.delayDrop)])}(a));e(o),$w(o,s)}})]}function n0(t,n,e){var o=V(d.none());return[B(Io(),function(r,i){i.stop();function u(){Uc(r,o.get(),t,n),o.set(d.none())}var a={drop:u,delayDrop:function(){},forceDrop:u,move:function(c){Td(r,t,n,S0,c)}},s=Qw(r,t.blockerClass,function(c){return xt([B(Io(),c.forceDrop),B(nu(),c.drop),B(vg(),c.drop),B(tu(),function(f,l){c.move(l.event())})])}(a));o.set(d.some(s)),e(r),$w(r,s)}),B(tu(),function(r,i){i.stop(),Td(r,t,n,S0,i.event())}),B(nu(),function(r,i){i.stop(),Uc(r,o.get(),t,n),o.set(d.none())}),B(vg(),function(r){Uc(r,o.get(),t,n),o.set(d.none())})]}function e0(t,n,e,o,r,i){return t.fold(function(){return zr.snap({sensor:Yo(e-20,o-20),range:Bt(r,i),output:Yo(d.some(e),d.some(o)),extra:{td:n}})},function(u){var a=e-20,s=o-20,c=u.element().dom().getBoundingClientRect();return zr.snap({sensor:Yo(a,s),range:Bt(40,40),output:Yo(d.some(e-c.width/2),d.some(o-c.height/2)),extra:{td:n}})})}function o0(t,n,e){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(o,r){var i=r.td;!function(u,a){return u.exists(function(s){return nn(s,a)})}(n.get(),i)&&(n.set(d.some(i)),e(i))},mustSnap:!0}}function r0(t){return gt(_n.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:A([zr.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),Ru.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))}var i0,u0,a0,Hr,Mi,c0=[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}],HD=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],ND={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},PD=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Fi={button:Gu(Yx,function(t,n){return function(e,o){return mw(e,o,[])}(t,n.backstage.shared.providers)}),togglebutton:Gu(Kx,function(t,n){return function(e,o){return gw(e,o,[])}(t,n.backstage.shared.providers)}),menubutton:Gu(qx,function(t,n){return Kl(t,"tox-tbtn",n.backstage,d.none())}),splitbutton:Gu(function(t){return Et("SplitButton",jB,t)},function(t,n){return aB(t,n.backstage.shared)}),grouptoolbarbutton:Gu(function(t){return Et("GroupToolbarButton",WB,t)},function(t,n,e){var o,r=e.ui.registry.getAll().buttons,i=((o={})[ff]=Qe(e)?vr.TopToBottom:vr.BottomToTop,o);switch(vu(e)){case $n.floating:return function(u,a,s,c){var f=a.shared;return Di.sketch({lazySink:f.getSink,fetch:function(){return jo(function(l){l(I(s(u.items),Dc))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:ad(u.icon,u.text,u.tooltip,d.none(),d.none(),f.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:c}}}})}(t,n.backstage,function(u){return Wc(e,{buttons:r,toolbar:u,allowToolbarGroups:!1},n,d.none())},i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}}),styleSelectButton:function(t,n){return function(e,o){var r=O({type:"advanced"},o.styleselect);return Uu(e,o,kw(e,r))}(t,n.backstage)},fontsizeSelectButton:function(t,n){return function(e,o){return Uu(e,o,xw(e))}(t,n.backstage)},fontSelectButton:function(t,n){return function(e,o){return Uu(e,o,yw(e))}(t,n.backstage)},formatButton:function(t,n){return function(e,o){return Uu(e,o,Cw(e))}(t,n.backstage)},alignMenuButton:function(t,n){return function(e,o){return Uu(e,o,vw(e))}(t,n.backstage)}},s0={styleselect:Fi.styleSelectButton,fontsizeselect:Fi.fontsizeSelectButton,fontselect:Fi.fontSelectButton,formatselect:Fi.formatButton,align:Fi.alignMenuButton},Wc=function(t,n,e,o){var r=dD(n),i=I(r,function(u){var a=At(u.items,function(s){return s.trim().length===0?[]:mD(t,n.buttons,s,n.allowToolbarGroups,e,o).toArray()});return{title:d.from(t.translate(u.name)),items:a}});return Ct(i,function(u){return 0<u.items.length})},f0={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},l0={maxHeightFunction:su(),maxWidthFunction:md()},zD={onLtr:function(){return[Ln,kn,Pn,Sn,zn,Cn,ho,Or,Sr,pi,Cr,hi]},onRtl:function(){return[Ln,kn,zn,Cn,Pn,Sn,ho,Or,Cr,hi,Sr,pi]}},LD={onLtr:function(){return[kn,Sn,Cn,Pn,zn,Ln,ho,Or,Sr,pi,Cr,hi]},onRtl:function(){return[kn,Cn,Sn,zn,Pn,Ln,ho,Or,Cr,hi,Sr,pi]}},jD=function(t,n,e,o){function r(){return Zx(t)}function i(){if(c()&&o.backstage.isContextMenuOpen())return!0;var C=function(){var T=m.get().map(function(H){return H.getBoundingClientRect()}).getOrThunk(function(){return t.selection.getRng().getBoundingClientRect()}),D=t.inline?mo().top():ri(z.fromDom(t.getBody())).y();return{y:T.top+D,bottom:T.bottom+D}}(),_=r();return!function(T,D,H,U){return Math.max(T,H)<=Math.min(D,U)}(C.y,C.bottom,_.y(),_.bottom())}function u(){kt.hide(f)}function a(){l.get().each(function(C){var _=f.element();_t(_,"display"),i()?nt(_,"display","none"):Fn.positionWithinBounds(e,C,f,d.some(r()))})}function s(C){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[C],behaviours:A([L.config({mode:"acyclic"}),Z("pop-dialog-wrap-events",[It(function(_){t.shortcuts.add("ctrl+F9","focus statusbar",function(){return L.focusIn(_)})}),fo(function(_){t.shortcuts.remove("ctrl+F9")})])])}}var c=pe().deviceType.isTouch,f=wn(function(C){var _=V([]);return kt.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(T){_.set([]),kt.getContent(T).each(function(D){_t(D.element(),"visibility")}),Ut(T.element(),xd),_t(T.element(),"width")},inlineBehaviours:A([Z("context-toolbar-events",[Kr(As(),function(T,D){kt.getContent(T).each(function(H){}),Ut(T.element(),xd),_t(T.element(),"width")}),B(yd,function(T,D){_t(T.element(),"width");var H=Mn(T.element());kt.setContent(T,D.event().contents()),en(T.element(),xd);var U=Mn(T.element());nt(T.element(),"width",H+"px"),kt.getContent(T).each(function(q){D.event().focus().bind(function(tt){return Ho(tt),Ie(T.element())}).orThunk(function(){return L.focusIn(q),go()})}),Pe.setTimeout(function(){nt(T.element(),"width",U+"px")},0)}),B(pw,function(T,D){kt.getContent(T).each(function(H){_.set(_.get().concat([{bar:H,focus:go()}]))}),j(T,yd,{contents:D.event().forwardContents(),focus:d.none()})}),B(hw,function(T,D){rs(_.get()).each(function(H){_.set(_.get().slice(0,_.get().length-1)),j(T,yd,{contents:Kn(H.bar),focus:H.focus})})})]),L.config({mode:"special",onEscape:function(T){return rs(_.get()).fold(function(){return C.onEscape()},function(D){return ct(T,hw),d.some(!0)})}})]),lazySink:function(){return ot.value(C.sink)}})}({sink:e,onEscape:function(){return t.focus(),d.some(!0)}})),l=V(d.none()),m=V(d.none()),h=V(null),g=Co(function(){return fD(n,function(C){var _=b(C);j(f,pw,{forwardContents:s(_)})})}),b=function(C){var _,T,D=t.ui.registry.getAll().buttons,H=vu(t)===$n.scrolling?$n.scrolling:$n.default,U=g();return C.type==="contexttoolbar"?(_=O(O({},D),U.formNavigators),T=Wc(t,{buttons:_,toolbar:C.items,allowToolbarGroups:!1},o,d.some(["form:"])),Ac({type:H,uid:N("context-toolbar"),initGroups:T,onEscape:d.none,cyclicKeying:!0})):cD(H,C,o.backstage)};t.on("contexttoolbar-show",function(C){var _=g();J(_.lookupTable,C.toolbarKey).each(function(T){S(T,C.target===t?d.none():d.some(C)),kt.getContent(f).each(L.focusIn)})});function p(C,_){var T=C==="node"?o.backstage.shared.anchors.node(_):o.backstage.shared.anchors.cursor();return yt(T,function(D,H){return D==="line"?{bubble:ci(12,0,f0),layouts:{onLtr:function(){return[$s]},onRtl:function(){return[Qs]}},overrides:l0}:{bubble:ci(0,12,f0),layouts:H?LD:zD,overrides:l0}}(C,c()))}function x(){var C=g();sD(C,t).fold(function(){l.set(d.none()),kt.hide(f)},function(_){S(_.toolbarApi,d.some(_.elem.dom()))})}function v(C){w(),h.set(C)}var S=function(C,_){if(w(),!c()||!o.backstage.isContextMenuOpen()){var T=b(C),D=_.map(z.fromDom),H=p(C.position,D);l.set(d.some(H)),m.set(_);var U=f.element();_t(U,"display"),kt.showWithinBounds(f,H,s(T),function(){return d.some(r())}),i()&&nt(U,"display","none")}},w=function(){var C=h.get();C!==null&&(Pe.clearTimeout(C),h.set(null))};t.on("init",function(){t.on(sw,u),t.on("ScrollContent ScrollWindow longpress",a),t.on("click keyup SetContent ObjectResized ResizeEditor",function(C){v(Pe.setEditorTimeout(t,x,0))}),t.on("focusout",function(C){Pe.setEditorTimeout(t,function(){Ie(e.element()).isNone()&&Ie(f.element()).isNone()&&(l.set(d.none()),kt.hide(f))},0)}),t.on("SwitchMode",function(){t.readonly&&(l.set(d.none()),kt.hide(f))}),t.on("NodeChange",function(C){Ie(f.element()).fold(function(){v(Pe.setEditorTimeout(t,x,0))},function(_){})})})},UD=function(t,n,e){function o(p,x){K([n,e],function(v){v.broadcastEvent(p,x)})}function r(p,x){K([n,e],function(v){v.broadcastOn([p],x)})}function i(p){return r(du(),{target:p.target()})}function u(p){return r(du(),{target:z.fromDom(p.target)})}function a(p){p.button===0&&r(Bf(),{target:z.fromDom(p.target)})}function s(p){return o(Vs(),Ob(p))}function c(p){r(mu(),{}),o(Hs(),Ob(p))}function f(){return r(mu(),{})}var l=xe(z.fromDom(F.document),"touchstart",i),m=xe(z.fromDom(F.document),"touchmove",function(p){return o(dC(),p)}),h=xe(z.fromDom(F.document),"touchend",function(p){return o(mC(),p)}),g=xe(z.fromDom(F.document),"mousedown",i),b=xe(z.fromDom(F.document),"mouseup",function(p){p.raw().button===0&&r(Bf(),{target:p.target()})});t.on("PostRender",function(){t.on("click",u),t.on("tap",u),t.on("mouseup",a),t.on("ScrollWindow",s),t.on("ResizeWindow",c),t.on("ResizeEditor",f)}),t.on("remove",function(){t.off("click",u),t.off("tap",u),t.off("mouseup",a),t.off("ScrollWindow",s),t.off("ResizeWindow",c),t.off("ResizeEditor",f),g.unbind(),l.unbind(),m.unbind(),h.unbind(),b.unbind()}),t.on("detach",function(){Ap(n),Ap(e),n.destroy(),e.destroy()})},te=Zk,Nr=$k,WD=y([k("shell",!1),E("makeItem"),k("setupItem",P),si("listBehaviours",[G])]),GD=He({name:"items",overrides:function(){return{behaviours:A([G.config({})])}}}),XD=y([GD]),d0=On({name:y("CustomList")(),configFields:WD(),partFields:XD(),factory:function(t,n,e,o){var r=t.shell?{behaviours:[G.config({})],components:[]}:{behaviours:[],components:n},i=function(u){return t.shell?d.some(u):vt(u,t,"items")};return{uid:t.uid,dom:t.dom,components:r.components,behaviours:Jt(t.listBehaviours,r.behaviours),apis:{setItems:function(u,a){i(u).fold(function(){throw F.console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(s){var c=G.contents(s),f=a.length,l=f-c.length,m=0<l?function(b,p){for(var x=[],v=0;v<b;v++)x.push(p(v));return x}(l,function(){return t.makeItem()}):[],h=c.slice(f);K(h,function(b){return G.remove(s,b)}),K(m,function(b){return G.append(s,b)});var g=G.contents(s);K(g,function(b,p){t.setupItem(u,b,a[p],p)})})}}}},apis:{setItems:function(t,n,e){t.setItems(n,e)}}}),Bd=Rn([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),Dd=function(t,n,e){t.getSystem().isConnected()&&function(o,r,i){var u=r.lazyViewport(o),a=i.isDocked();a&&Aw(o,r,i,u),vD(o,r,u,i).each(function(s){i.setDocked(!a),s.fold(function(){return Dw(o,r)},function(c){return Sd(o,r,c)},function(c){Aw(o,r,i,u,!0),Sd(o,r,c)})})}(t,n,e)},YD=Object.freeze({__proto__:null,refresh:Dd,reset:Mw,isDocked:function(t,n,e){return e.isDocked()}}),qD=Object.freeze({__proto__:null,events:function(t,n){return xt([Kr(As(),function(e,o){t.contextual.each(function(r){Ke(e.element(),r.transitionClass)&&(Ao(e.element(),[r.transitionClass,r.fadeInClass]),(n.isVisible()?r.onShown:r.onHidden)(e)),o.stop()})}),B(Vs(),function(e,o){Dd(e,t,n)}),B(Hs(),function(e,o){Mw(e,t,n)})])}}),KD=[oe("contextual",[Q("fadeInClass"),Q("fadeOutClass"),Q("transitionClass"),xn("lazyContext"),dt("onShow"),dt("onShown"),dt("onHide"),dt("onHidden")]),Ft("lazyViewport",mr),(i0="modes",u0=["top","bottom"],a0=pn,ge(i0,u0,Oo(a0))),dt("onDocked"),dt("onUndocked")],Wn=on({fields:KD,name:"docking",active:qD,apis:YD,state:Object.freeze({__proto__:null,init:function(){var t=V(!1),n=V(!0),e=V(d.none());return ve({isDocked:function(){return t.get()},setDocked:function(o){return t.set(o)},getInitialPosition:function(){return e.get()},setInitialPosition:function(o){return e.set(o)},isVisible:function(){return n.get()},setVisible:function(o){return n.set(o)},readState:function(){return"docked:  "+t.get()+", visible: "+n.get()}})}})}),ro={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},m0="tox-tinymce--toolbar-sticky-on",g0="tox-tinymce--toolbar-sticky-off",JD=Object.freeze({__proto__:null,setup:function(t,n){t.inline||(Qe(t)||t.on("ResizeEditor",function(){n().each(Wn.reset)}),t.on("ResizeWindow ResizeEditor",function(){n().each(function(e){return Cd(e,Qe(t))})}),t.on("SkinLoaded",function(){n().each(function(e){Wn.isDocked(e)?Wn.reset(e):Wn.refresh(e)})}),t.on("FullscreenStateChanged",function(){n().each(Wn.reset)})),t.on("AfterScrollIntoView",function(e){n().each(function(o){Wn.refresh(o);var r=o.element();wh(r)&&function(i,u){var a=Yn(u),s=a.dom().defaultView.innerHeight,c=mo(a),f=z.fromDom(i.elm),l=ri(f),m=Hn(f),h=l.y(),g=h+m,b=dr(u),p=Hn(u),x=b.top(),v=x+p,S=Math.abs(x-c.top())<2,w=Math.abs(v-(c.top()+s))<2;if(S&&h<v)Bg(c.left(),h-p,a);else if(w&&x<g){var C=h-s+m+p;Bg(c.left(),C,a)}}(e,r)})}),t.on("PostRender",function(){Iw(t,!1)})},isDocked:function(t){return t().map(Wn.isDocked).getOr(!1)},getBehaviours:Rw}),$D=P,QD=se,p0=y([]),ZD=Object.freeze({__proto__:null,setup:$D,isDocked:QD,getBehaviours:p0}),Ad=ie({factory:function(t,n){var e={focus:L.focusIn,setMenus:function(o,r){var i=I(r,function(u){var a={type:"menubutton",text:u.text,fetch:function(c){c(u.getItems())}},s=qx(a).mapError(function(c){return ur(c)}).getOrDie();return Kl(s,"tox-mbtn",n.backstage,d.some("menuitem"))});G.set(o,i)}};return{uid:t.uid,dom:t.dom,components:[],behaviours:A([G.config({}),Z("menubar-events",[It(function(o){t.onSetup(o)}),B(cr(),function(o,r){cn(o.element(),".tox-mbtn--active").each(function(i){Fe(r.event().target(),".tox-mbtn").each(function(u){nn(i,u)||o.getSystem().getByDom(i).each(function(a){o.getSystem().getByDom(u).each(function(s){Ce.expand(s),Ce.close(a),Y.focus(s)})})})})}),B(yg(),function(o,r){r.event().prevFocus().bind(function(i){return o.getSystem().getByDom(i).toOption()}).each(function(i){r.event().newFocus().bind(function(u){return o.getSystem().getByDom(u).toOption()}).each(function(u){Ce.isOpen(i)&&(Ce.expand(u),Ce.close(i))})})})]),L.config({mode:"flow",selector:".tox-mbtn",onEscape:function(o){return t.onEscape(o),d.some(!0)}}),Rt.config({})]),apis:e,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[E("dom"),E("uid"),E("onEscape"),E("backstage"),k("onSetup",P)],apis:{focus:function(t,n){t.focus(n)},setMenus:function(t,n,e){t.setMenus(n,e)}}}),h0="container",tA=[Gt("slotBehaviours",[])],nA=function(t,n){function e(l){return Xp(t)}function o(l,m){return function(h,g){return vt(h,t,g).map(function(b){return l(b,g)}).getOr(m)}}function r(l,m){return Kt(l.element(),"aria-hidden")!=="true"}var i,u=o(r,!1),a=o(function(l,m){if(r(l)){var h=l.element();nt(h,"display","none"),lt(h,"aria-hidden","true"),j(l,Ns(),{name:m,visible:!1})}}),s=(i=a,function(l,m){K(m,function(h){return i(l,h)})}),c=o(function(l,m){if(!r(l)){var h=l.element();_t(h,"display"),re(h,"aria-hidden"),j(l,Ns(),{name:m,visible:!0})}}),f={getSlotNames:e,getSlot:function(l,m){return vt(l,t,m)},isShowing:u,hideSlot:a,hideAllSlots:function(l){return s(l,e())},showSlot:c};return{uid:t.uid,dom:t.dom,components:n,behaviours:bf(t.slotBehaviours),apis:f}},eA=Pt({getSlotNames:function(t,n){return t.getSlotNames(n)},getSlot:function(t,n,e){return t.getSlot(n,e)},isShowing:function(t,n,e){return t.isShowing(n,e)},hideSlot:function(t,n,e){return t.hideSlot(n,e)},hideAllSlots:function(t,n){return t.hideAllSlots(n)},showSlot:function(t,n,e){return t.showSlot(n,e)}},function(t){return ca(t)}),io=O(O({},eA),{sketch:function(t){var n,e=(n=[],{slot:function(u,a){return n.push(u),Sf(h0,Vw(u),a)},record:function(){return n}}),o=t(e),r=e.record(),i=I(r,function(u){return sn({name:u,pname:Vw(u)})});return Tf(h0,tA,i,nA,o)}}),oA=W([Tt("icon"),Tt("tooltip"),Ft("onShow",P),Ft("onHide",P),Ft("onSetup",function(){return P})]),Md=N("FixSizeEvent"),Fd=N("AutoSizeEvent"),rA=Nr.optional({factory:Ad,name:"menubar",schema:[E("backstage")]}),iA=Nr.optional({factory:{sketch:function(t){return d0.sketch({uid:t.uid,dom:t.dom,listBehaviours:A([L.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return Ac({type:t.type,uid:N("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],onEscape:function(){return d.none()}})},setupItem:function(n,e,o,r){Le.setGroups(e,o)},shell:!0})}},name:"multiple-toolbar",schema:[E("dom"),E("onEscape")]}),uA=Nr.optional({factory:{sketch:function(t){return function(n){return n.type===$n.sliding?rB:n.type===$n.floating?oB:Ac}(t)({type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),d.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,backstage:t.backstage,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes})}},name:"toolbar",schema:[E("dom"),E("onEscape"),E("getSink")]}),aA=Nr.optional({factory:{sketch:function(t){var n=t.editor,e=t.sticky?Rw:p0;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:A(e(n,t.getSink))}}},name:"header",schema:[E("dom")]}),cA=Nr.optional({name:"socket",schema:[E("dom")]}),sA=Nr.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:A([Rt.config({}),Y.config({}),je.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(n){at.getCurrent(n).each(io.hideAllSlots),ct(n,Fd)},onGrown:function(n){ct(n,Fd)},onStartGrow:function(n){j(n,Md,{width:gn(n.element(),"width").getOr("")})},onStartShrink:function(n){j(n,Md,{width:Mn(n.element())+"px"})}}),G.config({}),at.config({find:function(n){var e=G.contents(n);return zi(e)}})])}],behaviours:A([Nl(0),Z("sidebar-sliding-events",[B(Md,function(n,e){nt(n.element(),"width",e.event().width())}),B(Fd,function(n,e){_t(n.element(),"width")})])])}}},name:"sidebar",schema:[E("dom")]}),fA=Nr.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:A([G.config({})]),components:[]}}},name:"throbber",schema:[E("dom")]}),Dt=On({name:"OuterContainer",factory:function(t,n,e){var o={getSocket:function(r){return te.getPart(r,t,"socket")},setSidebar:function(r,i){te.getPart(r,t,"sidebar").each(function(u){return wD(u,i)})},toggleSidebar:function(r,i){te.getPart(r,t,"sidebar").each(function(u){return function(a,s){at.getCurrent(a).each(function(c){at.getCurrent(c).each(function(f){je.hasGrown(c)?io.isShowing(f,s)?je.shrink(c):(io.hideAllSlots(f),io.showSlot(f,s)):(io.hideAllSlots(f),io.showSlot(f,s),je.grow(c))})})}(u,i)})},whichSidebar:function(r){return te.getPart(r,t,"sidebar").bind(SD).getOrNull()},getHeader:function(r){return te.getPart(r,t,"header")},getToolbar:function(r){return te.getPart(r,t,"toolbar")},setToolbar:function(r,i){te.getPart(r,t,"toolbar").each(function(u){u.getApis().setGroups(u,i)})},setToolbars:function(r,i){te.getPart(r,t,"multiple-toolbar").each(function(u){d0.setItems(u,i)})},refreshToolbar:function(r){te.getPart(r,t,"toolbar").each(function(i){return i.getApis().refresh(i)})},getThrobber:function(r){return te.getPart(r,t,"throbber")},focusToolbar:function(r){te.getPart(r,t,"toolbar").orThunk(function(){return te.getPart(r,t,"multiple-toolbar")}).each(function(i){L.focusIn(i)})},setMenubar:function(r,i){te.getPart(r,t,"menubar").each(function(u){Ad.setMenus(u,i)})},focusMenubar:function(r){te.getPart(r,t,"menubar").each(function(i){Ad.focus(i)})}};return{uid:t.uid,dom:t.dom,components:n,apis:o,behaviours:t.behaviours}},configFields:[E("dom"),E("behaviours")],partFields:[aA,rA,uA,iA,cA,sA,fA],apis:{getSocket:function(t,n){return t.getSocket(n)},setSidebar:function(t,n,e){t.setSidebar(n,e)},toggleSidebar:function(t,n,e){t.toggleSidebar(n,e)},whichSidebar:function(t,n){return t.whichSidebar(n)},getHeader:function(t,n){return t.getHeader(n)},getToolbar:function(t,n){return t.getToolbar(n)},setToolbar:function(t,n,e){var o=I(e,function(r){return Dc(r)});t.setToolbar(n,o)},setToolbars:function(t,n,e){var o=I(e,function(r){return I(r,Dc)});t.setToolbars(n,o)},refreshToolbar:function(t,n){return t.refreshToolbar(n)},getThrobber:function(t,n){return t.getThrobber(n)},setMenubar:function(t,n,e){t.setMenubar(n,e)},focusMenubar:function(t,n){t.focusMenubar(n)},focusToolbar:function(t,n){t.focusToolbar(n)}}}),v0={file:{title:"File",items:"newdocument restoredraft | preview | print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},b0=function(t){function n(){t._skinLoaded=!0,m_(t)}return function(){t.initialized?n():t.on("init",n)}},lA=function(t,n){return function(){return g_(t,{message:n})}},dA=ce(Nw,!1),mA=ce(Nw,!0),Gc=vi.DOM,y0=pe(),gA=y0.os.isiOS()&&y0.os.version.major<=12,pA={render:function(t,n,e,o,r){var i=V(0);dA(t),function(c,f){eh(c,f,OS)}(z.fromDom(r.targetNode),n.mothership),gf(Je(),n.uiMothership),t.on("PostRender",function(){Pw(t,n,e,o),i.set(t.getWin().innerWidth),Dt.setMenubar(n.outerContainer,Hw(t,e)),Dt.setSidebar(n.outerContainer,e.sidebar),function(c){function f(x){var v=c.getDoc().documentElement,S=g.get(),w=b.get();S.left()!==m.innerWidth||S.top()!==m.innerHeight?(g.set(Bt(m.innerWidth,m.innerHeight)),vb(c,x)):w.left()===v.offsetWidth&&w.top()===v.offsetHeight||(b.set(Bt(v.offsetWidth,v.offsetHeight)),vb(c,x))}function l(x){return h_(c,x)}var m=c.getWin(),h=c.getDoc().documentElement,g=V(Bt(m.innerWidth,m.innerHeight)),b=V(Bt(h.offsetWidth,h.offsetHeight));Gc.bind(m,"resize",f),Gc.bind(m,"scroll",l);var p=bl(z.fromDom(c.getBody()),"load",f);c.on("remove",function(){p.unbind(),Gc.unbind(m,"resize",f),Gc.unbind(m,"scroll",l)})}(t)});var u=Dt.getSocket(n.outerContainer).getOrDie("Could not find expected socket element");if(gA===!0){Jr(u.element(),{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var a=function(c,f){var l=null;return{cancel:function(){l!==null&&(F.clearTimeout(l),l=null)},throttle:function(){for(var m=[],h=0;h<arguments.length;h++)m[h]=arguments[h];l===null&&(l=F.setTimeout(function(){c.apply(null,m),l=null},f))}}}(function(){t.fire("ScrollContent")},20);xe(u.element(),"scroll",a.throttle)}Ux(t,n),t.addCommand("ToggleSidebar",function(c,f){Dt.toggleSidebar(n.outerContainer,f),t.fire("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",function(){return Dt.whichSidebar(n.outerContainer)});var s=vu(t);return s!==$n.sliding&&s!==$n.floating||t.on("ResizeWindow ResizeEditor ResizeContent",function(){var c=t.getWin().innerWidth;c!==i.get()&&(Dt.refreshToolbar(n.outerContainer),i.set(c))}),{iframeContainer:u.element().dom(),editorContainer:n.outerContainer.element().dom()}}},Xc=function(t,n,e){var o=n.filter(function(i){return t<i}),r=e.filter(function(i){return i<t});return o.or(r).getOr(t)},Id=function(t){return/^[0-9\.]+(|px)$/i.test(""+t)?d.some(parseInt(""+t,10)):d.none()},Rd=function(t){return co(t)?t+"px":t},hA={render:function(t,n,e,o,r){var i,u=vi.DOM,a=Ja(t),s=$a(t),c=z.fromDom(r.targetNode),f=jf(t).or(zw(t)),l=vu(t),m=l===$n.floating,h=l===$n.sliding||m,g=Qe(t),b=V(Lw(c,g)),p=V(!1);mA(t);function x(C){C===void 0&&(C=!1),h&&Dt.refreshToolbar(n.outerContainer),a||function(_){var T=h?_.fold(function(){return 0},function(q){return 1<q.components().length?Hn(q.components()[1].element()):0}):0,D=be(c),H=g?D.y()-Hn(i.element())+T:D.bottom();Jr(n.outerContainer.element(),{position:"absolute",top:Math.round(H)+"px",left:Math.round(D.x())+"px"});var U=f.getOrThunk(function(){var q=Id(Ee(Je(),"margin-left")).getOr(0);return Mn(Je())-D.x()+q});nt(i.element(),"max-width",U+"px")}(Dt.getToolbar(n.outerContainer)),s&&(C?Wn.reset(i):Wn.refresh(i)),m&&Dt.getToolbar(n.outerContainer).each(function(_){Vc.reposition(_)})}function v(){p.set(!0),nt(n.outerContainer.element(),"display","flex"),u.addClass(t.getBody(),"mce-edit-focus"),_t(n.uiMothership.element(),"display"),x()}function S(){p.set(!1),n.outerContainer&&(nt(n.outerContainer.element(),"display","none"),u.removeClass(t.getBody(),"mce-edit-focus")),nt(n.uiMothership.element(),"display","none")}function w(){if(i)v();else{i=Dt.getHeader(n.outerContainer).getOrDie();var C=function(_){return wv(_).getOr(Je())}(t);gf(C,n.mothership),gf(C,n.uiMothership),Pw(t,n,e,o),Dt.setMenubar(n.outerContainer,Hw(t,e)),v(),t.on("activate",v),t.on("deactivate",S),t.on("SkinLoaded ResizeWindow",function(){p.get()&&x(!0)}),t.on("NodeChange keydown",function(){Pe.requestAnimationFrame(function(){var _=Lw(c,g);p.get()&&_!==b.get()&&(x(!0),b.set(_))})}),t.nodeChanged()}}return t.on("focus",w),t.on("blur hide",S),t.on("init",function(){t.hasFocus()&&w()}),Ux(t,n),{editorContainer:n.outerContainer.element().dom()}}},vA=function(t){Tn.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(i){t.ui.registry.addToggleButton(i.name,{tooltip:i.text,onAction:function(){return t.execCommand(i.cmd)},icon:i.icon,onSetup:Mc(t,i.name)})});var n="alignnone",e="No alignment",o="JustifyNone",r="align-none";t.ui.registry.addButton(n,{tooltip:e,onAction:function(){return t.execCommand(o)},icon:r})},bA=function(t){OD(t),function(n){Tn.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(e){n.ui.registry.addMenuItem(e.name,{text:e.text,icon:e.icon,shortcut:e.shortcut,onAction:function(){return n.execCommand(e.action)}})}),n.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:Od(n,"code")})}(t)},yA=function(t){(function(n){n.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(e){return Pc(e,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(e){return Pc(e,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})})(t),function(n){n.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(e){return Pc(e,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(e){return Pc(e,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})}(t)},xA=function(t){(function(n){n.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return n.execCommand("mceToggleVisualAid")}})})(t),function(n){n.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(e){return function(o,r){o.setActive(r.hasVisual);function i(u){o.setActive(u.hasVisual)}return r.on("VisualAid",i),function(){return r.off("VisualAid",i)}}(e,n)},onAction:function(){n.execCommand("mceToggleVisualAid")}})}(t)},wA=function(t){(function(n){n.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(e){return function(o,r){o.setDisabled(!r.queryCommandState("outdent"));function i(){o.setDisabled(!r.queryCommandState("outdent"))}return r.on("NodeChange",i),function(){return r.off("NodeChange",i)}}(e,n)},onAction:function(){return n.execCommand("outdent")}}),n.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return n.execCommand("indent")}})})(t)},SA=function(t,n){(function(e,o){var r=Ti(0,o,vw(e));e.ui.registry.addNestedMenuItem("align",{text:o.shared.providers.translate("Align"),getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}})})(t,n),function(e,o){var r=Ti(0,o,yw(e));e.ui.registry.addNestedMenuItem("fontformats",{text:o.shared.providers.translate("Fonts"),getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}})}(t,n),function(e,o){var r=O({type:"advanced"},o.styleselect),i=Ti(0,o,kw(e,r));e.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return i.items.validateItems(i.getStyleItems())}})}(t,n),function(e,o){var r=Ti(0,o,Cw(e));e.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}})}(t,n),function(e,o){var r=Ti(0,o,xw(e));e.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}})}(t,n)},CA=function(t,n){vA(t),bA(t),SA(t,n),yA(t),Tu.register(t),xA(t),wA(t)},kA=function(t){return{anchor:"selection",root:z.fromDom(t.selection.getNode())}},OA={onLtr:function(){return[kn,Sn,Cn,Pn,zn,Ln,ho,Or,Sr,pi,Cr,hi]},onRtl:function(){return[kn,Cn,Sn,zn,Pn,Ln,ho,Or,Cr,hi,Sr,pi]}},_A={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},x0=function(t){return t.settings.contextmenu_never_use_native||!1},TA=function(t){return function(n,e,o){var r=n.ui.registry.getAll().contextMenus;return J(n.settings,e).map(Gw).getOrThunk(function(){return Ct(Gw(o),function(i){return qt(r,i)})})}(t,"contextmenu","link linkchecker image imagetools table spellchecker configurepermanentpen")},EA=function(t){return t.getParam("contextmenu")===!1},Vd={type:"separator"},w0=function(t){if(Yt(t))return t;switch(t.type){case"separator":return Vd;case"submenu":return{type:"nestedmenuitem",text:t.text,icon:t.icon,getSubmenuItems:function(){var n=t.getSubmenuItems();return Yt(n)?n:I(n,w0)}};default:return{type:"menuitem",text:t.text,icon:t.icon,onAction:function(n){return function(){return n()}}(t.onAction)}}},Hd=Rn([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),Yc=Hd.offset,Yo=Hd.absolute,Pr=Hd.fixed,BA=function(t,n,e,o,r){var i=n.getSnapPoints(t);return Jw(i,e,o,r).orThunk(function(){return Dn(i,function(u,a){var s=a.sensor(),c=function(f,l,m,h,g,b){var p=Ai(f,g,b),x=Ai(l,g,b),v=Math.abs(p.left()-x.left()),S=Math.abs(p.top()-x.top());return Bt(v,S)}(e,s,a.range().left(),a.range().top(),o,r);return u.deltas.fold(function(){return{deltas:d.some(c),snap:d.some(a)}},function(f){return(c.left()+c.top())/2<=(f.left()+f.top())/2?{deltas:d.some(c),snap:d.some(a)}:u})},{deltas:d.none(),snap:d.none()}).snap.map(function(u){return{output:y(_d(u.output(),e,o,r)),extra:u.extra}})})},DA=function(t,n,e,o,r){var i=n.getSnapPoints(t);return Jw(i,e,o,r)},AA=Object.freeze({__proto__:null,snapTo:function(t,n,e,o){var r=n.getTarget(t.element());if(n.repositionTarget){var i=Yn(t.element()),u=mo(i),a=_w(r),s=function(f,l,m){return{coord:_d(f.output(),f.output(),l,m),extra:f.extra()}}(o,u,a),c=Kw(s.coord,0,a);xs(r,c)}}}),qc="data-initial-z-index",MA=oe("snaps",[E("getSnapPoints"),dt("onSensor"),E("leftAttr"),E("topAttr"),k("lazyViewport",mr),k("mustSnap",!1)]),Nd=[k("useFixed",se),E("blockerClass"),k("getTarget",bt),k("onDrag",P),k("repositionTarget",!0),k("onDrop",P),Ft("getBounds",mr),MA],FA=Object.freeze({__proto__:null,getData:function(t){return d.from(Bt(t.x(),t.y()))},getDelta:function(t,n){return Bt(n.left()-t.left(),n.top()-t.top())}}),IA=jt(Nd,[wt("dragger",{handlers:Ed(t0)})]),S0=Object.freeze({__proto__:null,getData:function(t){var n=t.raw().touches;return n.length===1?function(e){var o=e[0];return d.some(Bt(o.clientX,o.clientY))}(n):d.none()},getDelta:function(t,n){return Bt(n.left()-t.left(),n.top()-t.top())}}),RA=IA,VA=jt(Nd,[wt("dragger",{handlers:Ed(n0)})]),HA=jt(Nd,[wt("dragger",{handlers:Ed(function(t,n,e){return jt(t0(t,n,e),n0(t,n,e))})})]),NA=Object.freeze({__proto__:null,mouse:RA,touch:VA,mouseOrTouch:HA}),PA=Object.freeze({__proto__:null,init:function(){var t=d.none(),n=d.none(),e=y({});return ve({readState:e,reset:function(){t=d.none(),n=d.none()},update:function(o,r){return o.getData(r).bind(function(i){return function(u,a){var s=t.map(function(c){return u.getDelta(c,a)});return t=d.some(a),s}(o,i)})},getStartData:function(){return n},setStartData:function(o){n=d.some(o)}})}}),zr=Yg({branchKey:"mode",branches:NA,name:"dragging",active:{events:function(t,n){return t.dragger.handlers(t,n)}},extra:{snap:ra(["sensor","range","output"],["extra"])},state:PA,apis:AA}),zA=pe(),LA=function(t,n){function e(v){var S=ri(v);return e0(g.getOpt(n),v,S.x(),S.y(),S.width(),S.height())}function o(v){var S=ri(v);return e0(b.getOpt(n),v,S.right(),S.bottom(),S.width(),S.height())}function r(v,S,w,C){var _=w(S);zr.snapTo(v,_),function(T,D,H,U){var q=D.dom().getBoundingClientRect();_t(T.element(),"display");var tt=ia(z.fromDom(t.getBody())).dom().innerHeight,St=H(q),Ot=U(q,tt);(St||Ot)&&nt(T.element(),"display","none")}(v,S,function(T){return T[C]<0},function(T,D){return T[C]>D})}function i(v){return r(p,v,e,"top")}function u(v){return r(x,v,o,"bottom")}var a=V([]),s=V([]),c=V(!1),f=V(d.none()),l=V(d.none()),m=o0(function(){return I(a.get(),function(v){return e(v)})},f,function(v){l.get().each(function(S){t.fire("TableSelectorChange",{start:v,finish:S})})}),h=o0(function(){return I(s.get(),function(v){return o(v)})},l,function(v){f.get().each(function(S){t.fire("TableSelectorChange",{start:S,finish:v})})}),g=r0(m),b=r0(h),p=wn(g.asSpec()),x=wn(b.asSpec());zA.deviceType.isTouch()&&(t.on("TableSelectionChange",function(v){c.get()||(yr(n,p),yr(n,x),c.set(!0)),f.set(d.some(v.start)),l.set(d.some(v.finish)),v.otherCells.each(function(S){a.set(S.upOrLeftCells),s.set(S.downOrRightCells),i(v.start),u(v.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",function(){f.get().each(i),l.get().each(u)}),t.on("TableSelectionClear",function(){c.get()&&(xr(p),xr(x),c.set(!1)),f.set(d.none()),l.set(d.none())}))};(Mi=Hr=Hr||{})[Mi.None=0]="None",Mi[Mi.Both=1]="Both",Mi[Mi.Vertical=2]="Vertical";function jA(t,n,e){var o=z.fromDom(t.getContainer()),r=function(i,u,a,s,c){var f={};return f.height=Xc(s+u.top(),ev(i),ov(i)),a===Hr.Both&&(f.width=Xc(c+u.left(),nv(i),jf(i))),f}(t,n,e,Hn(o),Mn(o));yn(r,function(i,u){return nt(o,u,Rd(i))}),p_(t)}function UA(t){return!!(t.nodeType===1&&(t.nodeName==="BR"||t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark"))}function WA(t,n){var e,o,r;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(o=function(){var i=[];return t.getParam("elementpath",!0,"boolean")&&i.push(ZA(t,{})),an(t.settings.plugins,"wordcount")&&i.push(function(u,a){function s(c,f,l){return G.set(c,[Fo(a.translate(["{0} "+l,f[l]]))])}return _n.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:A([Rt.config({}),G.config({}),M.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Z("wordcount-events",[lo(function(c){var f=M.getValue(c),l=f.mode==="words"?"characters":"words";M.setValue(c,{mode:l,count:f.count}),s(c,f.count,l)}),It(function(c){u.on("wordCountUpdate",function(f){var l=M.getValue(c).mode;M.setValue(c,{mode:l,count:f.wordCount}),s(c,f.wordCount,l)})})])])})}(t,n)),t.getParam("branding",!0,"boolean")&&i.push(function(){var u=ue.translate(["Powered by {0}","Tiny"]);return{dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+u+'">'+u+"</a>"}}}()),0<i.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:i}]:[]}(),r=function(i){var u=!an(i.settings.plugins,"autoresize"),a=i.getParam("resize",u);return a===!1?Hr.None:a==="both"?Hr.Both:Hr.Vertical}(t),r!==Hr.None&&o.push((e=r,{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:n.translate("Resize"),"aria-hidden":"true"},innerHtml:jn("resize-handle",n.icons)},behaviours:A([zr.config({mode:"mouse",repositionTarget:!1,onDrag:function(i,u,a){jA(t,a,e)},blockerClass:"tox-blocker"})])})),o)}}function GA(t){return[Q("type"),function(n){return Xn(n,Os)}("columns"),t]}function Pd(t){return Wt("items","items",Be(),Oo(Ui(function(n){return Et("Checking item of "+t,Gd,n).fold(function(e){return ot.error(ur(e))},function(e){return ot.value(e)})})))}function XA(t){return Yt(t.type)&&Yt(t.name)}function YA(t){var n=function(o){return Ct(Yd(o),XA)}(t),e=At(n,function(o){return function(r){return d.from(oF[r.type])}(o).fold(function(){return[]},function(r){return[Xn(o.name,r)]})});return W(e)}function C0(t){return{internalDialog:Ye(function(n){return Et("dialog",eF,n)}(t)),dataValidator:YA(t),initialData:t.initialData}}function k0(t){var n=[],e={};return yn(t,function(o,r){o.fold(function(){n.push(r)},function(i){e[r]=i})}),0<n.length?ot.error(n):ot.value(e)}function O0(t,n){nt(t,"height",n+"px"),pe().browser.isIE()?_t(t,"flex-basis"):nt(t,"flex-basis",n+"px")}function Kc(t,n,e){xa(t,'[role="dialog"]').each(function(o){cn(o,'[role="tablist"]').each(function(r){e.get().map(function(i){return nt(n,"height","0"),nt(n,"flex-basis","0"),Math.min(i,function(u,a,s){var c,f=Pm(u).dom(),l=xa(u,".tox-dialog-wrap").getOr(u);c=Ee(l,"position")==="fixed"?Math.max(f.clientHeight,F.window.innerHeight):Math.max(f.offsetHeight,f.scrollHeight);var m=Hn(a),h=a.dom().offsetLeft>=s.dom().offsetLeft+Mn(s)?Math.max(Hn(s),m):m,g=parseInt(Ee(u,"margin-top"),10)||0,b=parseInt(Ee(u,"margin-bottom"),10)||0;return c-(Hn(u)+g+b-h)}(o,n,r))}).each(function(i){O0(n,i)})})})}function zd(t){return cn(t,'[role="tabpanel"]')}function qA(t){var n;return{smartTabHeight:(n=V(d.none()),{extraEvents:[It(function(e){var o=e.element();zd(o).each(function(r){nt(r,"visibility","hidden"),e.getSystem().getByDom(r).toOption().each(function(i){var u=function(a){return zi(dm(a,function(s,c){return c<s?-1:s<c?1:0}))}(function(a,s,c){return I(a,function(f,l){G.set(c,a[l].view());var m=s.dom().getBoundingClientRect();return G.set(c,[]),m.height})}(t,r,i));n.set(u)}),Kc(o,r,n),_t(r,"visibility"),function(i,u){zi(i).each(function(a){return Ii.showTab(u,a.value)})}(t,e),Pe.requestAnimationFrame(function(){Kc(o,r,n)})})}),B(Hs(),function(e){var o=e.element();zd(o).each(function(r){Kc(o,r,n)})}),B(Nb,function(e,o){var r=e.element();zd(r).each(function(i){var u=go();nt(i,"visibility","hidden");var a=gn(i,"height").map(function(c){return parseInt(c,10)});_t(i,"height"),_t(i,"flex-basis");var s=i.dom().getBoundingClientRect().height;a.forall(function(c){return c<s})?(n.set(d.from(s)),Kc(r,i,n)):a.each(function(c){O0(i,c)}),_t(i,"visibility"),u.each(Ho)})})],selectFirst:!1}),naiveTabHeight:{extraEvents:[],selectFirst:!0}}}function _0(t,n,e,o){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:O(O({},n.map(function(r){return{id:r}}).getOr({})),o?{"aria-live":"polite"}:{})},components:[],behaviours:A([Nl(0),ke.config({channel:rS,updateState:function(r,i){return d.some({isTabPanel:function(){return i.body.type==="tabpanel"}})},renderComponents:function(r){switch(r.body.type){case"tabpanel":return[function(i,u){function a(h){var g=M.getValue(h),b=k0(g).getOr({}),p=c.get(),x=yt(p,b);c.set(x)}function s(h){var g=c.get();M.setValue(h,g)}var c=V({}),f=V(null),l=I(i.tabs,function(h){return{value:h.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:u.shared.providers.translate(h.title)},view:function(){return[Ci.sketch(function(g){return{dom:{tag:"div",classes:["tox-form"]},components:I(h.items,function(b){return vx(g,b,u)}),formBehaviours:A([L.config({mode:"acyclic",useTabstopAt:Vi(Hu)}),Z("TabView.form.events",[It(s),fo(a)]),Re.config({channels:Xr([{key:nS,value:{onReceive:a}},{key:eS,value:{onReceive:s}}])})])}})]}}}),m=qA(l).smartTabHeight;return Ii.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(h,g,b){var p=M.getValue(g);j(h,Hb,{name:p,oldName:f.get()}),f.set(p)},tabs:l,components:[Ii.parts().tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[tS.parts().tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:A([Rt.config({})])}),Ii.parts().tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:m.selectFirst,tabSectionBehaviours:A([Z("tabpanel",m.extraEvents),L.config({mode:"acyclic"}),at.config({find:function(h){return zi(Ii.getViewItems(h))}}),M.config({store:{mode:"manual",getValue:function(h){return h.getSystem().broadcastOn([nS],{}),c.get()},setValue:function(h,g){c.set(g),h.getSystem().broadcastOn([eS],{})}}})])})}(r.body,e)];default:return[function(i,u){var a=gt(Ci.sketch(function(s){return{dom:{tag:"div",classes:["tox-form"].concat(i.classes)},components:I(i.items,function(c){return vx(s,c,u)})}}));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[a.asSpec()]}],behaviours:A([L.config({mode:"acyclic",useTabstopAt:Vi(Hu)}),PT(a),UT(a,{postprocess:function(s){return k0(s).fold(function(c){return F.console.error(c),{}},function(c){return c})}})])}}(r.body,e)]}},initialData:t})])}}function T0(t,n){return[ds(sr(),XT),t(Au,function(e,o){n.onClose(),o.onClose()}),t(Tr,function(e,o,r,i){o.onCancel(e),ct(i,Au)}),B(wl,function(e,o){return n.onUnblock()}),B(xl,function(e,o){return n.onBlock(o.event())})]}function KA(t,n){function e(r,i){return fn.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+r]},components:I(i,function(u){return u.memento.asSpec()})})}var o=function(r,i){for(var u=[],a=[],s=0,c=r.length;s<c;s++){var f=r[s];(i(f,s)?u:a).push(f)}return{pass:u,fail:a}}(n.map(function(r){return r.footerButtons}).getOr([]),function(r){return r.align==="start"});return[e("start",o.pass),e("end",o.fail)]}function E0(t,n){return{dom:Xo('<div class="tox-dialog__footer"></div>'),components:[],behaviours:A([ke.config({channel:iS,initialData:t,updateState:function(e,o){var r=I(o.buttons,function(i){var u=gt(function(a,s){return _c(a,a.type,s)}(i,n));return{name:i.name,align:i.align,memento:u}});return d.some({lookupByName:function(i,u){return function(a,s,c){return Xt(s,function(f){return f.name===c}).bind(function(f){return f.memento.getOpt(a)})}(i,r,u)},footerButtons:r})},renderComponents:KA})])}}function B0(t,n){return Nt.parts().footer(E0(t,n))}function Ld(t,n){if(t.getRoot().getSystem().isConnected()){var e=at.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Ci.getField(e,n).fold(function(){var o=t.getFooter();return ke.getState(o).get().bind(function(r){return r.lookupByName(e,n)})},function(o){return d.some(o)})}return d.none()}function D0(t,n,e){function o(i){var u=t.getRoot();u.getSystem().isConnected()&&i(u)}var r={getData:function(){var i=t.getRoot(),u=i.getSystem().isConnected()?t.getFormWrapper():i,a=M.getValue(u),s=Pt(e,function(c){return c.get()});return O(O({},a),s)},setData:function(i){o(function(u){var a=r.getData(),s=O(O({},a),i),c=function(l,m){var h=l.getRoot();return ke.getState(h).get().map(function(g){return Ye(Et("data",g.dataValidator,m))}).getOr(m)}(t,s),f=t.getFormWrapper();M.setValue(f,c),yn(e,function(l,m){qt(s,m)&&l.set(s[m])})})},disable:function(i){Ld(t,i).each(X.disable)},enable:function(i){Ld(t,i).each(X.enable)},focus:function(i){Ld(t,i).each(Y.focus)},block:function(i){if(!Yt(i))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");o(function(u){j(u,xl,{message:i})})},unblock:function(){o(function(i){ct(i,wl)})},showTab:function(i){o(function(u){var a=t.getBody();ke.getState(a).get().exists(function(s){return s.isTabPanel()})&&at.getCurrent(a).each(function(s){Ii.showTab(s,i)})})},redial:function(i){o(function(u){var a=n(i);u.getSystem().broadcastOn([qd],a),u.getSystem().broadcastOn([oS],a.internalDialog),u.getSystem().broadcastOn([rS],a.internalDialog),u.getSystem().broadcastOn([iS],a.internalDialog),r.setData(a.initialData)})},close:function(){o(function(i){ct(i,Au)})}};return r}function A0(t,n){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,n]}}function M0(t,n){return Nt.parts().close(_n.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close")}},action:t,buttonBehaviours:A([Rt.config({})])}))}function F0(){return Nt.parts().title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})}function I0(t,n){return Nt.parts().body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Xo("<p>"+n.translate(t)+"</p>")}]}]})}function R0(t){return Nt.parts().footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})}function V0(t,n){return[fn.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),fn.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:n})]}function jd(t){var n,e="tox-dialog",o=e+"-wrap",r=o+"__backdrop",i=e+"__disable-scroll";return Nt.sketch({lazySink:t.lazySink,onEscape:function(u){return t.onEscape(u),d.some(!0)},useTabstopAt:function(u){return!Hu(u)},dom:{tag:"div",classes:[e].concat(t.extraClasses),styles:O({position:"relative"},t.extraStyles)},components:jt([t.header,t.body],t.footer.toArray()),parts:{blocker:{dom:Xo('<div class="'+o+'"></div>'),components:[{dom:{tag:"div",classes:hF?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:o,modalBehaviours:A(jt([Y.config({}),Z("dialog-events",t.dialogEvents.concat([Kr(sr(),function(u,a){L.focusIn(u)})])),Z("scroll-lock",[It(function(){en(Je(),i)}),fo(function(){Ut(Je(),i)})])],t.extraBehaviours)),eventOrder:O((n={},n[Ro()]=["dialog-events"],n[ti()]=["scroll-lock","dialog-events","alloy.base.behaviour"],n[va()]=["alloy.base.behaviour","dialog-events","scroll-lock"],n),t.eventOrder)})}function H0(t){return _n.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M17.953 7.453L13.422 12l4.531 4.547-1.406 1.406L12 13.422l-4.547 4.531-1.406-1.406L10.578 12 6.047 7.453l1.406-1.406L12 10.578l4.547-4.531z" fill-rule="evenodd"></path></svg>'}}],action:function(n){ct(n,Tr)}})}function N0(t,n,e){function o(r){return[Fo(e.translate(r.title))]}return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:O({},n.map(function(r){return{id:r}}).getOr({}))},components:o(t),behaviours:A([ke.config({channel:oS,renderComponents:o})])}}function P0(){return{dom:Xo('<div class="tox-dialog__draghandle"></div>')}}function z0(t,n){return function(e,o){var r=Nt.parts().title(N0(e,d.none(),o)),i=Nt.parts().draghandle(P0()),u=Nt.parts().close(H0(o)),a=[r].concat(e.draggable?[i]:[]).concat([u]);return fn.sketch({dom:Xo('<div class="tox-dialog__header"></div>'),components:a})}({title:n.shared.providers.translate(t),draggable:n.dialog.isDraggableModal()},n.shared.providers)}function L0(t,n){return{onClose:function(){return n.closeWindow()},onBlock:function(e){Nt.setBusy(t(),function(o,r){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":e.message()},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:r,components:[{dom:Xo('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}})},onUnblock:function(){Nt.setIdle(t())}}}function j0(t,n,e,o){var r;return wn(jd(O(O({},t),{lazySink:o.shared.getSink,extraBehaviours:jt([ke.config({channel:qd,updateState:function(i,u){return d.some(u)},initialData:n}),kc({})],t.extraBehaviours),onEscape:function(i){ct(i,Tr)},dialogEvents:e,eventOrder:(r={},r[Zr()]=["reflecting","receiving"],r[ti()]=["scroll-lock","reflecting","messages","dialog-events","alloy.base.behaviour"],r[va()]=["alloy.base.behaviour","dialog-events","messages","reflecting","scroll-lock"],r)})))}function U0(t){return I(t,function(n){return n.type==="menu"?function(e){var o=I(e.items,function(r){var i=V(!1);return O(O({},r),{storage:i})});return O(O({},e),{items:o})}(n):n})}function W0(t){return Dn(t,function(n,e){return e.type!=="menu"?n:Dn(e.items,function(o,r){return o[r.name]=r.storage,o},n)},{})}function JA(t,n,e){var o=z0(t.internalDialog.title,e),r=function(h,g){var b=_0(h,d.none(),g,!1);return Nt.parts().body(b)}({body:t.internalDialog.body},e),i=U0(t.internalDialog.buttons),u=W0(i),a=B0({buttons:i},e),s=aS(function(){return m},L0(function(){return l},n)),c=t.internalDialog.size!=="normal"?t.internalDialog.size==="large"?["tox-dialog--width-lg"]:["tox-dialog--width-md"]:[],f={header:o,body:r,footer:d.some(a),extraClasses:c,extraBehaviours:[],extraStyles:{}},l=j0(f,t,s,e),m=D0({getRoot:function(){return l},getBody:function(){return Nt.getBody(l)},getFooter:function(){return Nt.getFooter(l)},getFormWrapper:function(){var h=Nt.getBody(l);return at.getCurrent(h).getOr(h)}},n.redial,u);return{dialog:l,instanceApi:m}}function $A(t,n,e,o){var r,i,u=N("dialog-label"),a=N("dialog-content"),s=gt(function(p,x,v){return fn.sketch({dom:Xo('<div class="tox-dialog__header"></div>'),components:[N0(p,d.some(x),v),P0(),H0(v)],containerBehaviours:A([zr.config({mode:"mouse",blockerClass:"blocker",getTarget:function(S){return Fe(S,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])})}({title:t.internalDialog.title,draggable:!0},u,e.shared.providers)),c=gt(function(p,x,v,S){return _0(p,d.some(x),v,S)}({body:t.internalDialog.body},a,e,o)),f=U0(t.internalDialog.buttons),l=W0(f),m=gt(function(p,x){return E0(p,x)}({buttons:f},e)),h=aS(function(){return b},{onBlock:function(){},onUnblock:function(){},onClose:function(){return n.closeWindow()}}),g=wn({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(r={role:"dialog"},r["aria-labelledby"]=u,r["aria-describedby"]=""+a,r)},eventOrder:(i={},i[Zr()]=[ke.name(),Re.name()],i[Ro()]=["execute-on-form"],i[ti()]=["reflecting","execute-on-form"],i),behaviours:A([L.config({mode:"cyclic",onEscape:function(p){return ct(p,Au),d.some(!0)},useTabstopAt:function(p){return!Hu(p)&&(qe(p)!=="button"||Kt(p,"disabled")!=="disabled")}}),ke.config({channel:qd,updateState:function(p,x){return d.some(x)},initialData:t}),Y.config({}),Z("execute-on-form",h.concat([Kr(sr(),function(p,x){L.focusIn(p)})])),kc({})]),components:[s.asSpec(),c.asSpec(),m.asSpec()]}),b=D0({getRoot:function(){return g},getFooter:function(){return m.get(g)},getBody:function(){return c.get(g)},getFormWrapper:function(){var p=c.get(g);return at.getCurrent(p).getOr(p)}},n.redial,l);return{dialog:g,instanceApi:b}}function G0(t){return ko(t)&&vF.indexOf(t.mceAction)!==-1}function QA(t,n,e,o){var r,i=z0(t.title,o),u=function(x){var v={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[Vy({dom:{tag:"iframe",attributes:{src:x.url}},behaviours:A([Rt.config({}),Y.config({})])})]}],behaviours:A([L.config({mode:"acyclic",useTabstopAt:Vi(Hu)})])};return Nt.parts().body(v)}(t),a=t.buttons.bind(function(x){return x.length===0?d.none():d.some(B0({buttons:x},o))}),s=pF(function(){return p},L0(function(){return b},n)),c=O(O({},t.height.fold(function(){return{}},function(x){return{height:x+"px","max-height":x+"px"}})),t.width.fold(function(){return{}},function(x){return{width:x+"px","max-width":x+"px"}})),f=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],l=new Kd(t.url,{base_uri:new Kd(F.window.location.href)}),m=l.protocol+"://"+l.host+(l.port?":"+l.port:""),h=V(d.none()),g=[Z("messages",[It(function(){var x=xe(z.fromDom(F.window),"message",function(v){if(l.isSameOrigin(new Kd(v.raw().origin))){var S=v.raw().data;G0(S)?function(w,C,_){switch(_.mceAction){case"insertContent":w.insertContent(_.content);break;case"setContent":w.setContent(_.content);break;case"execCommand":var T=!!Pi(_.ui)&&_.ui;w.execCommand(_.cmd,T,_.value);break;case"close":C.close();break;case"block":C.block(_.message);break;case"unblock":C.unblock()}}(e,p,S):function(w){return!G0(w)&&ko(w)&&qt(w,"mceAction")}(S)&&t.onMessage(p,S)}});h.set(d.some(x))}),fo(function(){h.get().each(function(x){return x.unbind()})})]),Re.config({channels:(r={},r[uS]={onReceive:function(x,v){cn(x.element(),"iframe").each(function(S){S.dom().contentWindow.postMessage(v,m)})}},r)})],b=j0({header:i,body:u,footer:a,extraClasses:f,extraBehaviours:g,extraStyles:c},t,s,o),p=function(x){function v(S){x.getSystem().isConnected()&&S(x)}return{block:function(S){if(!Yt(S))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");v(function(w){j(w,xl,{message:S})})},unblock:function(){v(function(S){ct(S,wl)})},close:function(){v(function(S){ct(S,Au)})},sendMessage:function(S){v(function(w){w.getSystem().broadcastOn([uS],S)})}}}(b);return{dialog:b,instanceApi:p}}var X0,Y0,q0,K0,ZA=function(t,n){return n.delimiter||(n.delimiter="\xBB"),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:A([L.config({mode:"flow",selector:"div[role=button]"}),Rt.config({}),G.config({}),Z("elementPathEvents",[It(function(e,o){t.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return L.focusIn(e)}),t.on("NodeChange",function(r){var i=function(u){for(var a=[],s=u.length;0<s--;){var c=u[s];if(c.nodeType===1&&!UA(c)){var f=t.fire("ResolveName",{name:c.nodeName.toLowerCase(),target:c});if(f.isDefaultPrevented()||a.push({name:f.name,element:c}),f.isPropagationStopped())break}}return a}(r.parents);0<i.length?G.set(e,function(u){var a=I(u||[],function(c,f){return _n.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":f,"tab-index":-1,"aria-level":f+1},innerHtml:c.name},action:function(l){t.focus(),t.selection.select(c.element),t.nodeChanged()}})}),s={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+n.delimiter+" "}};return Dn(a.slice(1),function(c,f){var l=c;return l.push(s),l.push(f),l},[a[0]])}(i)):G.set(e,[])})})])]),components:[]}},tM=function(t){function n(){return s.bind(Dt.getHeader)}function e(){return ot.value(b)}function o(){return s.bind(function(bn){return Dt.getThrobber(bn)}).getOrDie("Could not find throbber element")}var r,i=t.inline,u=i?hA:pA,a=$a(t)?JD:ZD,s=d.none(),c=pe(),f=c.browser.isIE()?["tox-platform-ie"]:[],l=c.deviceType.isTouch()?["tox-platform-touch"]:[],m=Qe(t),h=ue.isRtl()?{attributes:{dir:"rtl"}}:{},g={attributes:(r={},r[ff]=m?vr.TopToBottom:vr.BottomToTop,r)},b=wn({dom:O({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(f).concat(l)},h),behaviours:A([Fn.config({useFixed:function(){return a.isDocked(n)}})])}),p=gt({dom:{tag:"div",classes:["tox-anchorbar"]}}),x=ZE(b,t,function(){return s.bind(function(bn){return p.getOpt(bn)}).getOrDie("Could not find a anchor bar element")}),v=Dt.parts().menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:x,onEscape:function(){t.focus()}}),S=vu(t),w=Dt.parts().toolbar(O({dom:{tag:"div",classes:["tox-toolbar"]},getSink:e,backstage:x,onEscape:function(){t.focus()},type:S,lazyToolbar:function(){return s.bind(function(bn){return Dt.getToolbar(bn)}).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return n().getOrDie("Could not find header element")}},g)),C=Dt.parts()["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},onEscape:function(){},type:S}),_=Dt.parts().socket({dom:{tag:"div",classes:["tox-edit-area"]}}),T=Dt.parts().sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),D=Dt.parts().throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:x}),H=t.getParam("statusbar",!0,"boolean")&&!i?d.some(WA(t,x.shared.providers)):d.none(),U={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[_,T]},q=qa(t),tt=Wf(t),St=Uf(t),Ot=Dt.parts().header({dom:O({tag:"div",classes:["tox-editor-header"]},g),components:Zt([St?[v]:[],q?[C]:tt?[w]:[],Ja(t)?[]:[p.asSpec()]]),sticky:$a(t),editor:t,getSink:e}),Lt=Zt([m?[Ot]:[],i?[]:[U],m?[]:[Ot]]),vn=Zt([[{dom:{tag:"div",classes:["tox-editor-container"]},components:Lt}],i?[]:H.toArray(),[D]]),ne=Sv(t),We=O(O({role:"application"},ue.isRtl()?{dir:"rtl"}:{}),ne?{"aria-hidden":"true"}:{}),En=wn(Dt.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(i?["tox-tinymce-inline"]:[]).concat(m?[]:["tox-tinymce--toolbar-bottom"]).concat(l).concat(f),styles:O({visibility:"hidden"},ne?{opacity:"0",border:"0"}:{}),attributes:We},components:vn,behaviours:A([L.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a"})])}));s=d.some(En),t.shortcuts.add("alt+F9","focus menubar",function(){Dt.focusMenubar(En)}),t.shortcuts.add("alt+F10","focus toolbar",function(){Dt.focusToolbar(En)});var uo=Fb(En),Qt=Fb(b);UD(t,uo,Qt);function Ri(){var bn=Rd(kD(t)),qo=Rd(function(Ko){return zw(Ko).getOr(tv(Ko))}(t));return t.inline||(Ym("div","width",qo)&&nt(En.element(),"width",qo),Ym("div","height",bn)?nt(En.element(),"height",bn):nt(En.element(),"height","200px")),bn}return{mothership:uo,uiMothership:Qt,backstage:x,renderUI:function(){a.setup(t,n),CA(t,x),DD(t,e,x),function(dn){var Jo=dn.ui.registry.getAll().sidebars;K(Ht(Jo),function(Ge){function R(){return d.from(dn.queryCommandValue("ToggleSidebar")).is(Ge)}var $=Jo[Ge];dn.ui.registry.addToggleButton(Ge,{icon:$.icon,tooltip:$.tooltip,onAction:function(st){dn.execCommand("ToggleSidebar",!1,Ge),st.setActive(R())},onSetup:function(st){function ht(){return st.setActive(R())}return dn.on("ToggleSidebar",ht),function(){dn.off("ToggleSidebar",ht)}}})})}(t),function(dn,Jo,Ge){function R(ht){ht!==$.get()&&(CD(Jo(),ht,Ge.providers),$.set(ht))}var $=V(!1),st=V(d.none());dn.on("ProgressState",function(ht){if(st.get().each(Pe.clearTimeout),co(ht.time)){var rn=Pe.setEditorTimeout(dn,function(){return R(ht.state)},ht.time);st.set(d.some(rn))}else R(ht.state),st.set(d.none())})}(t,o,x.shared),Pt(function(dn){return dn.getParam("toolbar_groups",{},"object")}(t),function(dn,Jo){t.ui.registry.addGroupToolbarButton(Jo,dn)});var bn=t.ui.registry.getAll(),qo=bn.buttons,Ko=bn.menuItems,Jc=bn.contextToolbars,$c=bn.sidebars,Qc=rv(t),Jd={menuItems:Ko,menus:t.settings.menu?Pt(t.settings.menu,function(dn){return O(O({},dn),{items:dn.items})}):{},menubar:t.settings.menubar,toolbar:Qc.getOrThunk(function(){return t.getParam("toolbar",!0)}),allowToolbarGroups:S===$n.floating,buttons:qo,sidebar:$c};jD(t,Jc,b,{backstage:x}),LA(t,b);var $d=t.getElement(),Qd=Ri(),Zd={mothership:uo,uiMothership:Qt,outerContainer:En},tm={targetNode:$d,height:Qd};return u.render(t,Zd,Jd,x,tm)},getUi:function(){return{channels:{broadcastAll:Qt.broadcast,broadcastOn:Qt.broadcastOn,register:function(){}}}}}},nM=function(t,n){var e=d.from(Kt(t,"id")).fold(function(){var o=N("dialog-label");return lt(n,"id",o),o},bt);lt(t,"aria-labelledby",e)},eM=y([E("lazySink"),ft("dragBlockClass"),Ft("getBounds",mr),k("useTabstopAt",y(!0)),k("eventOrder",{}),Gt("modalBehaviours",[L]),Nn("onExecute"),qs("onEscape")]),Ud={sketch:bt},oM=y([He({name:"draghandle",overrides:function(t,n){return{behaviours:A([zr.config({mode:"mouse",getTarget:function(e){return xa(e,'[role="dialog"]').getOr(e)},blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(n,null,2)).message),getBounds:t.getDragBounds})])}}}),sn({schema:[E("dom")],name:"title"}),sn({factory:Ud,schema:[E("dom")],name:"close"}),sn({factory:Ud,schema:[E("dom")],name:"body"}),He({factory:Ud,schema:[E("dom")],name:"footer"}),ye({factory:{sketch:function(t,n){return O(O({},t),{dom:n.dom,components:n.components})}},schema:[k("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),k("components",[])],name:"blocker"})]),Nt=On({name:"ModalDialog",configFields:eM(),partFields:oM(),factory:function(t,n,e,o){var r=N("alloy.dialog.busy"),i=N("alloy.dialog.idle"),u=A([L.config({mode:"special",onTab:function(){return d.some(!0)},onShiftTab:function(){return d.some(!0)}}),Y.config({})]),a=N("modal-events"),s=O(O({},t.eventOrder),{"alloy.system.attached":[a].concat(t.eventOrder["alloy.system.attached"]||[])});return{uid:t.uid,dom:t.dom,components:n,apis:{show:function(c){var f=t.lazySink(c).getOrDie(),l=V(d.none()),m=o.blocker(),h=f.getSystem().build(O(O({},m),{components:m.components.concat([Kn(c)]),behaviours:A([Y.config({}),Z("dialog-blocker-events",[Kr(sr(),function(){L.focusIn(c)}),B(i,function(g,b){or(c.element(),"aria-busy")&&(re(c.element(),"aria-busy"),l.get().each(function(p){return G.remove(c,p)}))}),B(r,function(g,b){lt(c.element(),"aria-busy","true");var p=b.event().getBusySpec();l.get().each(function(S){G.remove(c,S)});var x=p(c,u),v=g.getSystem().build(x);l.set(d.some(v)),G.append(c,Kn(v)),v.hasConfigured(L)&&L.focusIn(v)})])])}));yr(f,h),L.focusIn(c)},hide:function(c){Vn(c.element()).each(function(f){c.getSystem().getByDom(f).each(function(l){xr(l)})})},getBody:function(c){return $e(c,t,"body")},getFooter:function(c){return $e(c,t,"footer")},setIdle:function(c){ct(c,i)},setBusy:function(c,f){j(c,r,{getBusySpec:f})}},eventOrder:s,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Jt(t.modalBehaviours,[G.config({}),L.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),Z(a,[It(function(c){nM(c.element(),$e(c,t,"title").element()),function(f,l){var m=d.from(Kt(f,"id")).fold(function(){var h=N("dialog-describe");return lt(l,"id",h),h},bt);lt(f,"aria-describedby",m)}(c.element(),$e(c,t,"body").element())})])])}},apis:{show:function(t,n){t.show(n)},hide:function(t,n){t.hide(n)},getBody:function(t,n){return t.getBody(n)},getFooter:function(t,n){return t.getFooter(n)},setBusy:function(t,n,e){t.setBusy(n,e)},setIdle:function(t,n){t.setIdle(n)}}}),rM=[Q("type"),Q("text"),Wi("level",["info","warn","error","success"]),Q("icon"),k("url","")],iM=W(rM),uM=[Q("type"),Q("text"),tn("disabled",!1),tn("primary",!1),Wt("name","name",$i(function(){return N("button-name")}),pn),Tt("icon"),tn("borderless",!1)],aM=W(uM),cM=[Q("type"),Q("name"),Q("label"),tn("disabled",!1)],sM=W(cM),fM=la,Wd=[Q("type"),Q("name")],Ue=Wd.concat([Tt("label")]),lM=W(Ue),dM=pn,mM=W(Ue),gM=pn,pM=W(Ue),hM=Oo(ng),vM=Ue.concat([tn("sandboxed",!0)]),bM=W(vM),yM=pn,xM=Ue.concat([Tt("inputMode"),Tt("placeholder"),tn("maximized",!1),tn("disabled",!1)]),wM=W(xM),SM=pn,CM=Ue.concat([Tm("items",[Q("text"),Q("value")]),as("size",1),tn("disabled",!1)]),kM=W(CM),OM=pn,_M=Ue.concat([tn("constrain",!0),tn("disabled",!1)]),TM=W(_M),J0=W([Q("width"),Q("height")]),EM=Ue.concat([Tt("placeholder"),tn("maximized",!1),tn("disabled",!1)]),BM=W(EM),DM=pn,AM=Ue.concat([Zo("filetype","file",["image","media","file"]),k("disabled",!1)]),MM=W(AM),FM=W([Q("value"),k("meta",{})]),IM=Wd.concat([cs("tag","textarea"),Q("scriptId"),Q("scriptUrl"),(X0="settings",Y0=void 0,ge(X0,Y0,$S))]),RM=Wd.concat([cs("tag","textarea"),xn("init")]),VM=Ui(function(t){return Et("customeditor.old",An(RM),t).orThunk(function(){return Et("customeditor.new",An(IM),t)})}),HM=pn,NM=[Q("type"),Q("html"),Zo("presets","presentation",["presentation","document"])],PM=W(NM),zM=Ue.concat([Xn("currentState",W([E("blob"),Q("url")]))]),LM=W(zM),jM=Ue.concat([k("columns","auto")]),UM=W(jM),WM=Cm([Q("value"),Q("text"),Q("icon")]),GM=[Q("type"),To("header",pn),To("cells",Oo(pn))],XM=W(GM),Gd=JS(function(){return Om("type",{alertbanner:iM,bar:W(function(t){return[Q("type"),t]}(Pd("bar"))),button:aM,checkbox:sM,colorinput:lM,colorpicker:mM,dropzone:pM,grid:W(GA(Pd("grid"))),iframe:bM,input:wM,selectbox:kM,sizeinput:TM,textarea:BM,urlinput:MM,customeditor:VM,htmlpanel:PM,imagetools:LM,collection:UM,label:W(function(t){return[Q("type"),Q("label"),t]}(Pd("label"))),table:XM,panel:$0})}),YM=[Q("type"),k("classes",[]),To("items",Gd)],$0=W(YM),qM=[Wt("name","name",$i(function(){return N("tab-name")}),pn),Q("title"),To("items",Gd)],KM=[Q("type"),Tm("tabs",qM)],JM=W(KM),$M=W([Q("type"),Q("name")].concat(wu)),QM=la,Q0=[Wt("name","name",$i(function(){return N("button-name")}),pn),Tt("icon"),Zo("align","end",["start","end"]),tn("primary",!1),tn("disabled",!1)],Z0=jt(Q0,[Q("text")]),Xd=jt([Wi("type",["submit","cancel","custom"])],Z0),ZM=jt([Wi("type",["menu"]),Tt("text"),Tt("tooltip"),Tt("icon"),To("items",$M)],Q0),tF=Z0,nF=me("type",{submit:Xd,cancel:Xd,custom:Xd,menu:ZM}),eF=W([Q("title"),Xn("body",Om("type",{panel:$0,tabpanel:JM})),cs("size","normal"),To("buttons",nF),k("initialData",{}),Ft("onAction",P),Ft("onChange",P),Ft("onSubmit",P),Ft("onClose",P),Ft("onCancel",P),k("onTabChange",P)]),Yd=function(t){return ko(t)?[t].concat(At(Ju(t),Yd)):ao(t)?At(t,Yd):[]},oF={checkbox:fM,colorinput:dM,colorpicker:gM,dropzone:hM,input:SM,iframe:yM,sizeinput:J0,selectbox:OM,size:J0,textarea:DM,urlinput:FM,customeditor:HM,collection:WM,togglemenuitem:QM},rF=W(jt([Wi("type",["cancel","custom"])],tF)),iF=W([Q("title"),Q("url"),Em("height"),Em("width"),(q0="buttons",K0=rF,Eo(q0,Oo(K0))),Ft("onAction",P),Ft("onCancel",P),Ft("onClose",P),Ft("onMessage",P)]),Yu={open:function(t,n){var e=C0(n);return t(e.internalDialog,e.initialData,e.dataValidator)},openUrl:function(t,n){return t(Ye(function(e){return Et("dialog",iF,e)}(n)))},redial:function(t){return C0(t)}},uF=ie({name:"TabButton",configFields:[k("uid",void 0),E("value"),Wt("dom","dom",Qm(function(){return{attributes:{role:"tab",id:N("aria"),"aria-selected":"false"}}}),ar()),ft("action"),k("domModification",{}),Gt("tabButtonBehaviours",[Y,L,M]),E("view")],factory:function(t,n){return{uid:t.uid,dom:t.dom,components:t.components,events:Wa(t.action),behaviours:Jt(t.tabButtonBehaviours,[Y.config({}),L.config({mode:"execution",useSpace:!0,useEnter:!0}),M.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),aF=y([E("tabs"),E("dom"),k("clickToDismiss",!1),Gt("tabbarBehaviours",[mt,L]),pr(["tabClass","selectedClass"])]),cF=Ha({factory:uF,name:"tabs",unit:"tab",overrides:function(t){function n(o,r){mt.dehighlight(o,r),j(o,wg(),{tabbar:o,button:r})}function e(o,r){mt.highlight(o,r),j(o,xg(),{tabbar:o,button:r})}return{action:function(o){var r=o.getSystem().getByUid(t.uid).getOrDie(),i=mt.isHighlighted(r,o);(i&&t.clickToDismiss?n:i?P:e)(r,o)},domModification:{classes:[t.markers.tabClass]}}}}),sF=y([cF]),tS=On({name:"Tabbar",configFields:aF(),partFields:sF(),factory:function(t,n,e,o){return{uid:t.uid,dom:t.dom,components:n,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Jt(t.tabbarBehaviours,[mt.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(r,i){lt(i.element(),"aria-selected","true")},onDehighlight:function(r,i){lt(i.element(),"aria-selected","false")}}),L.config({mode:"flow",getInitial:function(r){return mt.getHighlighted(r).map(function(i){return i.element()})},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),fF=ie({name:"Tabview",configFields:[Gt("tabviewBehaviours",[G])],factory:function(t,n){return{uid:t.uid,dom:t.dom,behaviours:Jt(t.tabviewBehaviours,[G.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),lF=y([k("selectFirst",!0),dt("onChangeTab"),dt("onDismissTab"),k("tabs",[]),Gt("tabSectionBehaviours",[])]),dF=sn({factory:tS,schema:[E("dom"),_o("markers",[E("tabClass"),E("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),mF=sn({factory:fF,name:"tabview"}),gF=y([dF,mF]),Ii=On({name:"TabSection",configFields:lF(),partFields:gF(),factory:function(t,n,e,o){function r(u){var a=M.getValue(u);vt(u,t,"tabview").each(function(s){Xt(t.tabs,function(c){return c.value===a}).each(function(c){var f=c.view();(function(l,m){return d.from(Kt(l,m))})(u.element(),"id").each(function(l){lt(s.element(),"aria-labelledby",l)}),G.set(s,f),t.onChangeTab(s,u,f)})})}function i(u,a){vt(u,t,"tabbar").each(function(s){a(s).each(nr)})}return{uid:t.uid,dom:t.dom,components:n,behaviours:bf(t.tabSectionBehaviours),events:xt(Zt([t.selectFirst?[It(function(u,a){i(u,mt.getFirst)})]:[],[B(xg(),function(u,a){var s=a.event().button();r(s)}),B(wg(),function(u,a){var s=a.event().button();t.onDismissTab(u,s)})]])),apis:{getViewItems:function(u){return vt(u,t,"tabview").map(function(a){return G.contents(a)}).getOr([])},showTab:function(u,a){i(u,function(s){var c=mt.getCandidates(s);return Xt(c,function(f){return M.getValue(f)===a}).filter(function(f){return!mt.isHighlighted(s,f)})})}}}},apis:{getViewItems:function(t,n){return t.getViewItems(n)},showTab:function(t,n,e){t.showTab(n,e)}}}),nS="send-data-to-section",eS="send-data-to-view",qd=N("update-dialog"),oS=N("update-title"),rS=N("update-body"),iS=N("update-footer"),uS=N("body-send-message"),pF=function(t,n){function e(r,i){return B(r,function(u,a){o(u,function(s,c){i(t(),s,a.event(),u)})})}var o=function(r,i){ke.getState(r).get().each(function(u){i(u,r)})};return jt(T0(e,n),[e(to,function(r,i,u){i.onAction(r,{name:u.name()})})])},aS=function(t,n){function e(r,i){return B(r,function(u,a){o(u,function(s,c){i(t(),s,a.event(),u)})})}var o=function(r,i){ke.getState(r).get().each(function(u){i(u.internalDialog,r)})};return jt(T0(e,n),[e(Mu,function(r,i){return i.onSubmit(r)}),e(ae,function(r,i,u){i.onChange(r,{name:u.name()})}),e(to,function(r,i,u,a){function s(){return L.focusIn(a)}var c=go();i.onAction(r,{name:u.name(),value:u.value()}),go().fold(function(){s()},function(f){(!ma(a.element(),f)||or(f,"disabled")||ma(f,c.getOrNull())&&or(c.getOrDie(),"disabled"))&&s()})}),e(Hb,function(r,i,u){i.onTabChange(r,{newTabName:u.name(),oldTabName:u.oldName()})}),fo(function(r){var i=t();M.setValue(r,i.getData())})])},hF=il.deviceType.isTouch(),Kd=tinymce.util.Tools.resolve("tinymce.util.URI"),vF=["insertContent","setContent","execCommand","close","block","unblock"],bF=function(t){var n=t.backstage,e=t.editor,o=$a(e),r=Qe(e),i=function(f){var l=f.backstage.shared;return{open:function(m,h){function g(){Nt.hide(v),h()}var b=gt(_c({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:d.none()},"cancel",f.backstage)),p=F0(),x=M0(g,l.providers),v=wn(jd({lazySink:function(){return l.getSink()},header:A0(p,x),body:I0(m,l.providers),footer:d.some(R0(V0([],[b.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[B(Tr,g)],eventOrder:{}}));Nt.show(v);var S=b.get(v);Y.focus(S)}}}(t),u=function(f){var l=f.backstage.shared;return{open:function(m,h){function g(C){Nt.hide(S),h(C)}var b=gt(_c({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:d.none()},"submit",f.backstage)),p=_c({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:d.none()},"cancel",f.backstage),x=F0(),v=M0(function(){return g(!1)},l.providers),S=wn(jd({lazySink:function(){return l.getSink()},header:A0(x,v),body:I0(m,l.providers),footer:d.some(R0(V0([],[p,b.asSpec()]))),onEscape:function(){return g(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[B(Tr,function(){return g(!1)}),B(Mu,function(){return g(!0)})],eventOrder:{}}));Nt.show(S);var w=b.get(S);Y.focus(w)}}}(t),a=function(f,l){return Yu.openUrl(function(m){var h=QA(m,{closeWindow:function(){Nt.hide(h.dialog),l(h.instanceApi)}},e,n);return Nt.show(h.dialog),h.instanceApi},f)},s=function(f,l){return Yu.open(function(m,h,g){var b=h,p=JA({dataValidator:g,initialData:b,internalDialog:m},{redial:Yu.redial,closeWindow:function(){Nt.hide(p.dialog),l(p.instanceApi)}},n);return Nt.show(p.dialog),p.instanceApi.setData(b),p.instanceApi},f)},c=function(f,l,m,h){return Yu.open(function(g,b,p){function x(){return S.on(function(_){kt.reposition(_),Wn.refresh(_)})}var v=function(_,T){return Ye(Et("data",T,_))}(b,p),S=function(){var _=V(d.none());return{clear:function(){_.set(d.none())},set:function(T){_.set(d.some(T))},isSet:function(){return _.get().isSome()},on:function(T){_.get().each(T)}}}(),w=$A({dataValidator:p,initialData:v,internalDialog:g},{redial:Yu.redial,closeWindow:function(){S.on(kt.hide),e.off("ResizeEditor",x),S.clear(),m(w.instanceApi)}},n,h),C=wn(kt.sketch(O(O({lazySink:n.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},r?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:A(jt([Z("window-manager-inline-events",[B(ni(),function(_,T){ct(w.dialog,Tr)})])],function(_,T,D){return T&&D?[]:[Wn.config({contextual:{lazyContext:function(){return d.some(be(z.fromDom(_.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]}(e,o,r)))})));return S.set(C),kt.showWithin(C,l,Kn(w.dialog),d.some(Je())),o&&r||(Wn.refresh(C),e.on("ResizeEditor",x)),w.instanceApi.setData(v),L.focusIn(w.dialog),w.instanceApi},f)};return{open:function(f,l,m){return l!==void 0&&l.inline==="toolbar"?c(f,n.shared.anchors.inlineDialog(),m,l.ariaAttrs):l!==void 0&&l.inline==="cursor"?c(f,n.shared.anchors.cursor(),m,l.ariaAttrs):s(f,m)},openUrl:function(f,l){return a(f,l)},alert:function(f,l){i.open(f,function(){l()})},close:function(f){f.close()},confirm:function(f,l){u.open(f,function(m){l(m)})}}};(function(){sS.add("silver",function(n){var e=tM(n),o=e.uiMothership,r=e.backstage,i=e.renderUI,u=e.getUi;B_(n,r.shared);var a=bF({editor:n,backstage:r});return{renderUI:i,getWindowManagerImpl:y(a),getNotificationManagerImpl:function(){return p1(n,{backstage:r},o)},ui:u()}})})()})(window);
