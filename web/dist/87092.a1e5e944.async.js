(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[87092],{92542:function(ae){ae.exports={authpageBox:"authpageBox___2L4vb",footBox:"footBox___gNAJF",tableBox:"tableBox___26e1Q",authUser:"authUser___3JM3t"}},73289:function(ae){ae.exports={logBox:"logBox___LgXH3",logHeader:"logHeader___kP2cH",headerInfo:"headerInfo___10rgi",headerOperate:"headerOperate___3ZGx8",logList:"logList___lAFiJ",icon:"icon___6tmLW",list:"list___1Ax3z",detail:"detail___38QiG",remove:"remove___2D0Gk",time:"time___142Ke",Emojipopover:"Emojipopover___TCXok",emojiUl:"emojiUl___3dxAQ",emojiLi:"emojiLi___-8Mju",moreThree:"moreThree___YcFPt",threeIcon:"threeIcon___3CM2o",CommentList:"CommentList___ZcNK9"}},5980:function(ae){ae.exports={footerPageBox:"footerPageBox___2heuZ"}},50999:function(ae){ae.exports={logBox:"logBox___1NL-x",logHeader:"logHeader___2XN71",headerInfo:"headerInfo___zRDDJ",headerOperate:"headerOperate___u5zQb",logList:"logList___Qb-3c",icon:"icon___3iSRG",list:"list___3nDA1",detail:"detail___2_6By",remove:"remove___3A9RV",time:"time___2BcI8"}},81717:function(ae){ae.exports={versionBox:"versionBox___3LNEH",versionHeader:"versionHeader___3fUBN",headerInfo:"headerInfo___3Hdxq",headerOperate:"headerOperate___CIucI",versionList:"versionList___28DGa",versionItem:"versionItem___1YKLQ",leftImg:"leftImg___3ra6G",rightInfo:"rightInfo___msqtr",head:"head___2wTtg",headLeft:"headLeft___2AN0i",currentTag:"currentTag___1qCB3",versionTag:"versionTag___1xiSy",versionSize:"versionSize___3s9_i",headRight:"headRight___1Wo3A",editBox:"editBox___2H5P9",operateBox:"operateBox___3kYFt",tag:"tag___IaCRm"}},16548:function(ae){ae.exports={fileEditR:"fileEditR___3vQH-",authUser:"authUser___fOLTk"}},87092:function(ae,Ba,a){"use strict";a.d(Ba,{Z:function(){return Gl}});var mt=a(57663),be=a(71577),ht=a(18106),ka=a(95562),gt=a(94233),Qe=a(51890),ut=a(34792),ds=a(48086),xt=a(48736),Xe=a(27049),ft=a(22385),We=a(45777),pt=a(34669),Ua=a(54458),u=a(11849),Oe=a(2824),jt=a(402),Va=a(97272),za=a(48845),cs=a.n(za),oa=a(4847),le=a(37406),Se=a(69847),wa=a(68628),ra=a(75491),na=a(89317),Ha=a(34654),Ka=a(99165),Ga=a(17490),Ja=a(1977),Ya=a(54549),Qa=a(96486),Xa=a(29119),K=a(67294),Wa=a(51964),Ze=a.n(Wa),k=a(30672),qa=a(27484),_a=a.n(qa),el=a(20640),sl=a.n(el),yt=a(20228),vs=a(11382),It=a(13254),ye=a(14277),Nt=a(87593),da=a(37636),Dt=a(13062),we=a(71230),Mt=a(89032),ge=a(15746),Lt=a(49111),xe=a(19650),al=a(49101),ms=a(8212),ca=a(84391),ll=a(73171),tl=a(33182),il=a(93488),va=a(59879),ol=a(5171),qe=a.n(ol),bt=a(14781),rl=a(23492),nl=a(5980),dl=a.n(nl),e=a(85893),cl=z=>{var t=z.page,n=z.getList,m=t!=null?t:{},M=m.currentPage,O=m.pageSize,f=O===void 0?20:O,C=m.total,S=C===void 0?0:C,b={current:M,pageSize:f,total:S,pageSizeOptions:[20,50,100,200,500,1e3],showSizeChanger:!0,hideOnSinglePage:!0,onChange:(P,L)=>{n&&n(P,L)}};return(0,e.jsx)("div",{className:dl().footerPageBox,children:(0,e.jsx)(rl.Z,(0,u.Z)({size:"small"},b))})},hs=cl,vl=a(50999),X=a.n(vl),Ue="common",ml=z=>{var t=(0,k.YB)(),n=(0,k.I0)(),m=(0,k.v9)(r=>(0,u.Z)((0,u.Z)({},r[Ue]),{},{loading:r.loading.effects["".concat(Ue,"/getpathLog")],loingModal:r.loading.effects["".concat(Ue,"/getpathLogModal")]})),M=m.loading,O=M===void 0?!1:M,f=m.loingModal,C=f===void 0?!1:f,S=m.isUpdatePathLog,b=m.listData,P=m.checkFileParams,L=P===void 0?{}:P,h=b.folderList,R=h===void 0?[]:h,U=b.fileList,N=U===void 0?[]:U,G=z.selectObj,j=G===void 0?{}:G,B=z.isModal,g=j.pathLogPage,V=g===void 0?{}:g,Y=j.pathLogList,y=Y===void 0?[]:Y,ee=V.total,c=ee===void 0?0:ee,T=r=>{switch(r){case"create":case"mkdir":case"mkfile":case"copy":return(0,e.jsx)("div",{className:X().icon,style:{background:"#722ed1"},children:(0,e.jsx)(al.Z,{})});case"rename":case"uploadNew":case"rollBack":return(0,e.jsx)("div",{className:X().icon,style:{background:"#ffce3d"},children:(0,e.jsx)(ms.Z,{})});case"upload":return(0,e.jsx)("div",{className:X().icon,style:{background:"#01bd5f"},children:(0,e.jsx)(ca.Z,{})});case"recycle":case"remove":return(0,e.jsx)("div",{className:X().icon,style:{background:"#f46e65"},children:(0,e.jsx)(ll.Z,{})});case"share":return(0,e.jsx)("div",{className:X().icon,style:{background:"#108ee9"},children:(0,e.jsx)(tl.Z,{style:{paddingRight:2}})});default:return(0,e.jsx)("div",{className:X().icon,style:{background:"#ffce3d"},children:(0,e.jsx)(ms.Z,{})})}},D=r=>{var i=r.isFolder,v=r.type,p=r.sourceID,A=r.name,oe=r.detail,F=oe===void 0?{}:oe,W=F.createType,Ie=F.from,Pe=F.to,re=F.content,fe=F.name,q=i?"folder":"file",pe=[...R,...N],ve=pe.filter(de=>de.sourceID===p)[0],ne=()=>{if(!!ve){var de=document.querySelector('.itemBox[sourceid="'.concat(ve.sourceID,'"]'));de==null||de.scrollIntoView(!1),n({type:"".concat(Ue,"/setState"),payload:{selectIds:ve?[ve.sourceID]:[],selectItems:ve?[ve]:[],checkFileParams:ve||{}}})}};switch(v){case"create":switch(W){case"copy":return p==j.sourceID?t.formatMessage({id:"log-event-create-".concat(q,"-").concat(W),defaultMessage:v}):(0,e.jsxs)(e.Fragment,{children:[t.formatMessage({id:"logs-detail-".concat(q,"-").concat(W),defaultMessage:v})," ",(0,e.jsx)("a",{onClick:ne,children:fe})]});case"uploadNew":return p==j.sourceID?t.formatMessage({id:"log-event-create-".concat(W),defaultMessage:v}):(0,e.jsxs)(e.Fragment,{children:[t.formatMessage({id:"logs-detail-".concat(W),defaultMessage:v})," ",(0,e.jsx)("a",{onClick:ne,children:fe}),t.formatMessage({id:"logs-detail-newVersion"})]});default:return p==j.sourceID?t.formatMessage({id:"log-event-create-".concat(W),defaultMessage:v}):(0,e.jsxs)(e.Fragment,{children:[t.formatMessage({id:"logs-detail-".concat(W),defaultMessage:v})," ",(0,e.jsx)("a",{onClick:ne,children:fe})]})}case"edit":return p==j.sourceID?t.formatMessage({id:"log-event-create-edit",defaultMessage:v}):(0,e.jsxs)(e.Fragment,{children:[t.formatMessage({id:"logs-detail-uploadNew",defaultMessage:v})," ",(0,e.jsx)("a",{onClick:ne,children:A})]});case"rename":return(0,e.jsxs)(e.Fragment,{children:[p==j.sourceID?t.formatMessage({id:"logs-detail-".concat(v,"-").concat(q),defaultMessage:v}):(0,e.jsxs)(e.Fragment,{children:[t.formatMessage({id:"logs-detail-".concat(v),defaultMessage:v})," ",(0,e.jsx)("a",{onClick:ne,children:Pe})]}),(0,e.jsxs)("div",{children:[Ie," ",(0,e.jsx)(il.Z,{})," ",Pe]})]});case"recycle":return p==j.sourceID?t.formatMessage({id:"logs-detail-".concat(q,"-").concat(re),defaultMessage:v}):(0,e.jsxs)(e.Fragment,{children:[t.formatMessage({id:"logs-detail-moveFrom-".concat(re),defaultMessage:v})," ",(0,e.jsx)("a",{onClick:ne,children:A})," ",t.formatMessage({id:"logs-detail-moveTo-".concat(re),defaultMessage:v})]});case"remove":return(0,e.jsxs)(e.Fragment,{children:[t.formatMessage({id:"log-event-remove"})," ",(0,e.jsx)("span",{className:X().remove,children:re})]});case"share":return p==j.sourceID?t.formatMessage({id:"log-event-share-".concat(q,"-").concat(re),defaultMessage:v}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:ne,children:A})," ",t.formatMessage({id:"log-type-share-".concat(re)})]});case"rollBack":return p==j.sourceID?(0,e.jsxs)(e.Fragment,{children:[t.formatMessage({id:"logs-detail-rollBack.to"})," ",re]}):(0,e.jsxs)(e.Fragment,{children:[t.formatMessage({id:"logs-detail-rollBack"})," ",(0,e.jsx)("a",{onClick:ne,children:A})," ",t.formatMessage({id:"logs-detail-to"})," ",re]});default:return v}},o=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=arguments.length>1?arguments[1]:void 0;j.sourceID&&j.sourceID!="newFile"&&n({type:B?"".concat(Ue,"/getpathLogModal"):"".concat(Ue,"/getpathLog"),payload:(0,u.Z)({currentPage:1,sourceID:j.sourceID,selectObj:j},i),callback:v})};return(0,K.useEffect)(()=>{var r;((r=Object.keys(L))!==null&&r!==void 0&&r.length&&!(y!=null&&y.length)||S)&&o({},()=>{n({type:"common/setState",payload:{isUpdatePathLog:!1}})})},[j.sourceID,S]),(0,e.jsxs)("div",{className:X().logBox,children:[(0,e.jsx)("div",{className:X().logHeader,children:(0,e.jsxs)(we.Z,{gutter:[10,10],align:"middle",justify:"space-between",style:{position:"relative"},children:[(0,e.jsx)(ge.Z,{className:X().headerInfo,children:(0,e.jsxs)(xe.Z,{size:5,children:[(0,e.jsx)(na.Z,{style:{color:"#722ed1"}}),t.formatMessage({id:"admin.auth.event"}),(0,e.jsxs)("span",{className:"selfAddonAfter",children:["(",c," ",t.formatMessage({id:"explorer.table.items"}),")"]})]})}),(0,e.jsx)(ge.Z,{className:X().headerOperate,children:(0,e.jsx)(be.Z,{size:"small",style:{color:"#777"},icon:(0,e.jsx)(va.Z,{style:{fontSize:12}}),onClick:()=>o()})})]})}),(0,e.jsx)(Ze(),{style:y!=null&&y.length?{}:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(vs.Z,{spinning:B?C:O,children:y!=null&&y.length?(0,e.jsx)("div",{className:X().logList,children:(0,e.jsx)(da.Z,{children:y==null?void 0:y.map((r,i)=>{var v;return(0,e.jsx)(da.Z.Item,{dot:T(((v=r.detail)===null||v===void 0?void 0:v.createType)||r.type),children:(0,e.jsxs)("div",{className:X().list,children:[(0,e.jsxs)(we.Z,{className:X().user,gutter:[10,10],justify:"space-between",children:[(0,e.jsx)(ge.Z,{flex:"auto",children:(0,e.jsxs)(xe.Z,{align:"start",size:5,children:[(0,e.jsx)(Qe.C,{size:18,src:r.avatar||qe()}),r.nickname]})}),(0,e.jsx)(ge.Z,{className:X().time,children:r.createTime?(0,le.hK)(r.createTime):""})]}),(0,e.jsx)("div",{className:X().detail,children:D(r)})]})},r.id+"xxx"+i)})})}):(0,e.jsx)(ye.Z,{image:ye.Z.PRESENTED_IMAGE_SIMPLE,description:t.formatMessage({id:"explorer.panel.logEmpty"})})})}),(0,e.jsx)(hs,{page:V,getList:(r,i)=>{o({currentPage:r,pageSize:i})}})]})},hl=ml,Ot=a(20136),gl=a(55241),St=a(59250),ma=a(13013),ul=a(91220),Zt=a(71194),xl=a(50146),Ct=a(47673),gs=a(4107),fl=a(57119),us=a(44545),pl=a(73289),ue=a.n(pl),jl=gs.Z.TextArea,Ve="common",yl=xl.Z.confirm,xs=["[\u7231\u4F60]","[\u767D\u773C]","[\u9F3B\u6D95]","[\u95ED\u5634]","[\u5472\u7259]","[\u5927\u7B11]","[\u5F97\u610F]","[\u6076\u5FC3]","[\u53D1\u70E7]","[\u5C34\u5C2C]","[\u9B3C\u8138]","[\u597D\u5403]","[\u778C\u7761]","[\u53E3\u6C34]","[\u53E3\u7F69]","[\u5BBD\u6170]","[\u51B7]","[\u96BE\u8FC7]","[\u4FCF\u76AE]","[\u4EB2\u4EB2]","[\u70ED]","[\u53D7\u4F24]","[\u7761\u7740\u4E86]","[\u8BF4\u8C0E]","[\u601D\u8003]","[\u5410\u4E86]","[\u5410\u820C]","[\u54C7\u585E]","[\u5FAE\u7B11]","[\u559C\u6B22]","[\u7B11\u54ED]","[\u865A\u5F31]","[\u5618]","[\u6655\u7729]","[100\u5206]","[\u7231\u5FC3]","[\u62DC\u6258]","[\u5927\u54ED]","[\u62C5\u5FE7]","[\u9F13\u638C]","[\u54C8\u6B20]","[\u52A0\u6CB9]","[\u60CA\u6050]","[\u60CA\u8BB6]","[\u6CAE\u4E27]","[\u805A\u4F1A]","[\u6073\u6C42]","[\u54ED\u6CE3]","[\u8138\u7EA2]","[\u73AB\u7470]","[\u8FF7\u60D1]","[\u58A8\u955C]","[\u725B\u4ED4]","[\u75B2\u60EB]","[\u5F3A\u58EE]","[\u751F\u6C14]","[\u80DC\u5229]","[\u5C0F\u4E11]","[\u5FC3\u788E]","[\u773C\u955C]","[\u8D5E]","[\u5492\u9A82]","[OK]"],Il=z=>{var t=(0,k.YB)(),n=(0,k.I0)(),m=(0,k.v9)(d=>(0,u.Z)((0,u.Z)({},d[Ve]),{},{loading:d.loading.effects["".concat(Ve,"/getcommentList")],loingModal:d.loading.effects["".concat(Ve,"/getcommentListModal")]})),M=(0,k.tT)("@@initialState"),O=M.initialState,f=M.setInitialState,C=O.currentUser,S=C.user,b=S.userID,P=(0,K.useState)(""),L=(0,Oe.Z)(P,2),h=L[0],R=L[1],U=(0,K.useState)(!1),N=(0,Oe.Z)(U,2),G=N[0],j=N[1],B=(0,K.useRef)(null),g=m.loading,V=g===void 0?!1:g,Y=m.loingModal,y=Y===void 0?!1:Y,ee=m.isUpdateCommet,c=m.listData,T=m.checkFileParams,D=T===void 0?{}:T,o=m.isIframe,r=z.selectObj,i=r===void 0?{}:r,v=z.isModal,p=i.CommetPage,A=p===void 0?{}:p,oe=i.CommetList,F=oe===void 0?[]:oe,W=A.total,Ie=W===void 0?0:W,Pe=d=>{var x="",w=d.split("["),H=w[1].split("]");return H[0]},re=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=arguments.length>1?arguments[1]:void 0;i.sourceID&&i.sourceID!="newFile"&&n({type:v?"".concat(Ve,"/getcommentListModal"):"".concat(Ve,"/getcommentList"),payload:(0,u.Z)({currentPage:1,targetID:i.sourceID,selectObj:i},x),callback:w})},fe=d=>{var x=$(d.target)[0],w=x.nodeName.toLowerCase();if(w=="img"){var H=x.currentSrc;if(!(x.className.indexOf("moreThree")>-1)){var Q=[{src:H,key:"xxx"}];n({type:"common/setState",payload:{PhotoSliderVisible:!0,PhotoSliderIndex:0,PhotoSliderImages:Q}})}}else{var I=$(d.target).find("img");if(I.length){var ce=I[0],ze=ce.currentSrc;if(!(ce.className.indexOf("moreThree")>-1)){var Ke=[{src:ze,key:"xxx"}];n({type:"common/setState",payload:{PhotoSliderVisible:!0,PhotoSliderIndex:0,PhotoSliderImages:Ke}})}}}},q=d=>{var x=d.content||"",w=new RegExp("(\\[).*?(\\])","g");if(x.match(w)){var H=x.match(w),Q=!1;H&&H.length<4&&H.toString().replace(/,/g," ")==x&&(Q=!0);var I=(0,ul.Z)(H),ce;try{var ze=function(){var ps=ce.value,js=xs.findIndex(as=>as==ps);if(js>=0){var ss=Pe(xs[js]),E='<img   class="'.concat(ue().moreThree," ").concat(Q?ue().threeIcon:"",'"  src="').concat("/emoji/"+ss+".png",'"   />');x=x.replace(ps,E)}};for(I.s();!(ce=I.n()).done;)ze()}catch(Ke){I.e(Ke)}finally{I.f()}}return x},pe=d=>{var x=document.createElement("div");return x.innerText?x.innerText=d:x.textContent=d,x.innerHTML},ve=d=>{!h.trim()&&!d||n({type:"".concat(Ve,"/commentsave"),payload:{content:d||h.trim(),targetID:i.sourceID},callback:x=>{x.success&&(R(""),n({type:"common/setState",payload:{isUpdateCommet:!0}}))}})},ne=d=>{yl({icon:(0,e.jsx)(fl.Z,{}),content:t.formatMessage({id:"common.ifDel"}),okText:t.formatMessage({id:"common.oktext"}),cancelText:t.formatMessage({id:"common.cancel"}),onOk(){n({type:"common/commentdel",payload:{commentID:d.commentID},callback:x=>{x.success&&n({type:"common/setState",payload:{isUpdateCommet:!0}})}})},onCancel(){}})};(0,K.useEffect)(()=>{var d;((d=Object.keys(D))!==null&&d!==void 0&&d.length&&!(F!=null&&F.length)||ee)&&re({},()=>{n({type:"common/setState",payload:{isUpdateCommet:!1}})})},[i.sourceID,ee]);var de=(d,x)=>[{key:"1",label:(0,e.jsx)("a",{onClick:()=>{ne(d)},target:"_blank",rel:"noopener noreferrer",style:{textAlign:"center"},children:t.formatMessage({id:"common.delete"})})}];return(0,e.jsxs)("div",{className:ue().logBox,children:[(0,e.jsx)("div",{className:ue().logHeader,children:(0,e.jsxs)(we.Z,{gutter:[10,10],align:"middle",justify:"space-between",style:{position:"relative"},children:[(0,e.jsx)(ge.Z,{className:ue().headerInfo,children:(0,e.jsxs)(xe.Z,{size:5,children:[(0,e.jsx)(ra.Z,{style:{color:"#722ed1"}}),t.formatMessage({id:"explorer.panel.chatName"}),(0,e.jsxs)("span",{className:"selfAddonAfter",children:["(",Ie," ",t.formatMessage({id:"explorer.table.items"}),")"]})]})}),(0,e.jsx)(ge.Z,{className:ue().headerOperate})]})}),(0,e.jsx)(Ze(),{style:F!=null&&F.length?{}:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(vs.Z,{spinning:v?y:V,children:F!=null&&F.length?(0,e.jsx)("div",{className:ue().CommentList,children:F.map((d,x)=>{var w=q(d),H=w.indexOf("threeIcon")>-1;return d.userID!=b?(0,e.jsxs)("div",{className:"receivebox",children:[(0,e.jsx)("div",{className:"coverbox",children:(0,e.jsxs)("div",{title:"",className:"face",children:[" ",(0,e.jsx)("img",{src:d.avatar?""+d.avatar:qe()})]})}),(0,e.jsxs)("div",{className:"receivecontent",children:[(0,e.jsx)("div",{className:"sendName",children:d.nickname||d.name}),(0,e.jsx)("div",{onClick:Q=>{fe(Q)},dangerouslySetInnerHTML:{__html:w.replace(/<script>/gi,pe("<script>"))},className:"receivemsg",style:H?{background:"none"}:{}}),(0,e.jsx)("div",{className:"msgactionbox",children:(0,e.jsx)(ma.Z,{menu:{items:de(d,x)},children:(0,e.jsx)("a",{onClick:Q=>Q.preventDefault(),className:"msgaction",children:(0,e.jsx)(xe.Z,{children:(0,e.jsx)(us.Z,{})})})})}),(0,e.jsx)("div",{style:{clear:"both"}})]}),(0,e.jsx)("div",{style:{width:28}})]},x):(0,e.jsxs)("div",{className:"sendbox",children:[(0,e.jsx)("div",{style:{width:28}}),(0,e.jsxs)("div",{className:"receivecontent",children:[(0,e.jsx)("div",{className:"sendName",children:d.nickname||d.name}),(0,e.jsx)("div",{onClick:Q=>{fe(Q)},dangerouslySetInnerHTML:{__html:w.replace(/<script>/gi,pe("<script>"))},className:"receivemsg",style:H?{background:"none"}:{}}),(0,e.jsx)("div",{className:"msgactionbox",children:(0,e.jsx)(ma.Z,{menu:{items:de(d,x)},children:(0,e.jsx)("a",{onClick:Q=>Q.preventDefault(),className:"msgaction",children:(0,e.jsx)(xe.Z,{children:(0,e.jsx)(us.Z,{})})})})}),(0,e.jsx)("div",{style:{clear:"both"}})]}),(0,e.jsx)("div",{className:"coverbox",children:(0,e.jsxs)("div",{title:"",className:"face",children:[" ",(0,e.jsx)("img",{src:d.avatar?""+d.avatar:qe()})," "]})})]},x)})}):(0,e.jsx)(ye.Z,{image:ye.Z.PRESENTED_IMAGE_SIMPLE,description:t.formatMessage({id:"explorer.panel.chat.empty"})})})}),(0,e.jsx)("div",{className:"action",children:(0,e.jsxs)("div",{className:"sendbox",children:[(0,e.jsx)(jl,{ref:B,onChange:d=>{R(d.target.value)},placeholder:t.formatMessage({id:"common.input"}),value:h}),(0,e.jsxs)("div",{className:"sendbtns",children:[(0,e.jsx)(be.Z,{onClick:()=>{ve()},type:"primary",children:"\u53D1\u9001"}),(0,e.jsx)(gl.Z,{overlayClassName:ue().Emojipopover,placement:"top",trigger:"click",arrow:!1,open:G,onOpenChange:d=>{j(d)},content:(0,e.jsx)("div",{className:ue().emojiUl,children:xs.map((d,x)=>{var w=Pe(d);return(0,e.jsx)("div",{className:ue().emojiLi,onClick:()=>{},children:(0,e.jsx)("img",{onClick:()=>{var H;R(h+d),j(!1),(H=B.current)===null||H===void 0||H.focus()},className:"cover",src:"".concat("/emoji/"+w+".png"),alt:""})})})}),children:(0,e.jsx)("a",{onClick:()=>{j(!G)},className:"emoticon"})}),(0,e.jsx)("a",{onClick:()=>{(o?window.parent:window).fileBoxApi.fileSelect({title:t.formatMessage({id:"explorer.selectFile"}),type:"file",single:!0,allowExt:"jpg,jpeg,png,jpg,gif",callback:function(x){var w=x.data||{},H=w.selectIds.length?w.selectItems||[]:[],Q=H.length?H[0]:{},I='<img src="'.concat(Q.path,'" />');ve(I)}})},className:"imgbtn"})]})]})}),(0,e.jsx)(hs,{page:A,getList:(d,x)=>{re({currentPage:d,pageSize:x})}})]})},Nl=Il,Pt=a(71153),fs=a(60331),Dl=a(64987),Ml=a.n(Dl),Ll=a(81717),J=a.n(Ll),Ce="common",bl=gs.Z.TextArea,Ol=z=>{var t=(0,k.YB)(),n=(0,k.I0)(),m=(0,k.v9)(i=>(0,u.Z)((0,u.Z)({},i[Ce]),{},{loading:i.loading.effects["common/getVersionList"],loingModal:i.loading.effects["".concat(Ce,"/getVersionModalList")]})),M=m.loading,O=M===void 0?!1:M,f=m.loingModal,C=f===void 0?!1:f,S=m.isUpdateVersion,b=m.editVersionKey,P=(0,K.useState)([]),L=(0,Oe.Z)(P,2),h=L[0],R=L[1],U=z.selectObj,N=U===void 0?{}:U,G=z.isModal,j=N.versionPage,B=j===void 0?{}:j,g=N.versionList,V=g===void 0?[]:g,Y=B.currentPage,y=B.pageSize,ee=B.total,c=ee===void 0?0:ee,T=c-1<0?0:c-1,D=["jpg","jpeg","png","bmp","ico","svg"],o=(i,v)=>{var p=i.target.value,A=p==null?void 0:p.trim();A!==v.detail&&(A||n({type:"".concat(Ce,"/setState"),payload:{editVersionKey:0}}),n({type:"".concat(Ce,"/setVersionDetail"),payload:{id:v.id,detail:A},callback:()=>{r()}}))},r=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=arguments.length>1?arguments[1]:void 0;n({type:G?"".concat(Ce,"/getVersionModalList"):"".concat(Ce,"/getVersionList"),payload:(0,u.Z)((0,u.Z)({currentPage:1},v),{},{sourceID:N.sourceID,selectObj:N}),callback:A=>{var oe=[];A==null||A.map(F=>oe[F.fileID]=K.createRef()),R(oe),p&&p()}})};return(0,K.useEffect)(()=>{var i,v;b&&(h==null||(i=h[b])===null||i===void 0||(v=i.current)===null||v===void 0||v.focus())},[b]),(0,K.useEffect)(()=>{!(V!=null&&V.length)&&r()},[N.sourceID]),(0,K.useEffect)(()=>{S&&r({},()=>{n({type:"common/setState",payload:{isUpdateVersion:!1}})})},[S]),(0,e.jsxs)("div",{className:J().versionBox,onMouseDown:()=>{n({type:"common/setState",payload:{openRightMenu:!1}})},children:[(0,e.jsx)("div",{className:J().versionHeader,children:(0,e.jsxs)(we.Z,{gutter:[10,10],align:"middle",justify:"space-between",style:{position:"relative"},children:[(0,e.jsx)(ge.Z,{className:J().headerInfo,children:(0,e.jsxs)(xe.Z,{size:5,children:[(0,e.jsx)("img",{width:14,src:Ml()}),t.formatMessage({id:"explorer.panel.historyName"}),(0,e.jsxs)("span",{className:"selfAddonAfter",children:["(",T," ",t.formatMessage({id:"explorer.table.items"}),")"]})]})}),(0,e.jsx)(ge.Z,{className:J().headerOperate,children:(0,e.jsxs)(xe.Z,{size:5,children:[(0,e.jsx)(be.Z,{size:"small",style:{color:"#777"},icon:(0,e.jsx)(va.Z,{style:{fontSize:12}}),onClick:()=>r()}),N.isDelete?"":(0,e.jsx)(be.Z,{size:"small",style:{color:"#777",fontSize:12},icon:(0,e.jsx)(ca.Z,{style:{fontSize:12}}),onClick:()=>{window.newVersionId=N.sourceID,window.newVersionFileType=N.fileType,n({type:"common/setState",payload:{uploadVisible:!0}}),$(".webuploader-element-invisible").attr("accept","."+N.fileType),$(".webuploader-element-invisible").removeAttr("multiple"),$(".webuploader-element-invisible").removeAttr("webkitdirectory"),$(".webuploader-element-invisible").trigger("click")},children:t.formatMessage({id:"explorer.history.uploadNew"})})]})})]})}),(0,e.jsx)(Ze(),{style:T?{}:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(vs.Z,{spinning:G?C:O,children:T?(0,e.jsx)("ul",{className:"".concat(J().versionList," version_list"),children:V.map((i,v)=>{var p=c-((Y-1)*y+v);return(0,e.jsxs)("li",{className:J().versionItem,children:[D.indexOf(i.fileType)>-1&&(0,e.jsx)("div",{className:J().leftImg,children:(0,e.jsx)("img",{src:i.downloadUrl})}),(0,e.jsxs)("div",{className:J().rightInfo,children:[(0,e.jsx)("div",{className:J().head,children:(0,e.jsxs)(we.Z,{gutter:[10,10],align:"middle",justify:"space-between",style:{position:"relative"},children:[(0,e.jsx)(ge.Z,{className:J().headLeft,children:(0,e.jsxs)(xe.Z,{size:5,children:[p==c?(0,e.jsx)(fs.Z,{className:J().currentTag,children:t.formatMessage({id:"explorer.history.current"})}):(0,e.jsxs)(fs.Z,{className:J().versionTag,children:["V",p]}),(0,e.jsx)("span",{className:"selfAddonAfter",children:i.createTime?(0,le.tK)(i.createTime):"-"}),(0,e.jsx)("span",{className:J().versionSize,children:(0,le.NR)(i.size)})]})}),(0,e.jsx)(ge.Z,{className:J().headRight,children:(0,e.jsxs)(xe.Z,{size:5,align:"center",children:[p!==c&&!i.detail&&i.fileID!==b&&(0,e.jsx)("div",{className:J().editBox,onClick:()=>{n({type:"".concat(Ce,"/setState"),payload:{editVersionKey:i.fileID}})},children:(0,e.jsx)(ms.Z,{style:{fontSize:12,color:"#722ed1"}})}),(0,e.jsx)(We.Z,{title:i.nickname||"",children:(0,e.jsx)(Qe.C,{size:18,src:i.avatar||qe()})}),(0,e.jsx)(oa.Z,{isVersion:!0,isVersionModal:G,versionNum:p!==c?p:0,versionParams:(0,u.Z)((0,u.Z)((0,u.Z)({},N),i),{},{isCurrentVersion:p==c}),children:(0,e.jsx)("div",{className:J().operateBox,children:(0,e.jsx)(us.Z,{style:{fontSize:18,color:"#666"}})})})]})})]})}),p==c?(0,e.jsx)("div",{className:J().tag,children:(0,e.jsx)(fs.Z,{color:"purple",children:t.formatMessage({id:"explorer.history.current"})})}):(i.detail||i.fileID==b)&&(0,e.jsx)("div",{className:J().tag,children:(0,e.jsx)(bl,{allowClear:!0,bordered:!1,id:i.fileID,ref:h==null?void 0:h[i.fileID],placeholder:t.formatMessage({id:"explorer.fileDescAdd"}),defaultValue:i.detail,maxLength:100,autoSize:!0,onBlur:A=>o(A,i)},i.fileID)})]})]},i.fileID)})}):(0,e.jsx)(ye.Z,{image:ye.Z.PRESENTED_IMAGE_SIMPLE,description:t.formatMessage({id:"explorer.history.noHistory"})})})}),(0,e.jsx)(hs,{page:B,getList:(i,v)=>{r({currentPage:i,pageSize:v})}})]})},Sl=Ol,Tt=a(63185),Zl=a(9676),At=a(43358),ha=a(34041),Cl=a(28216),Ft=a(30381),ga=a(89366),ua=a(50206),xa=a(79508),Pl=a(31223),Tl=a(5820),Rt=a(84059),$t=a(10285),Al=a(92542),He=a.n(Al),Fl=a(66227),_e=a.n(Fl),Rl=a(25963),es=a.n(Rl),fa,pa,$l=gs.Z.Search,El=(fa=(0,Cl.$j)(z=>{var t=z.common;return{common:t}}),fa(pa=class extends K.PureComponent{constructor(){super(...arguments);this.formRef=K.createRef(),this.state={modelZindex:100,openOption:!1,selectData:{},dataList:[],dataListId:[],showTime:!1,timeValue:Date.now(),keywords:"",otherroleID:"",childrenData:{},openList:[]},this.getSourceAuth=()=>{var t=this,n=this.props,m=n.dispatch,M=n.common,O=n.select;m({type:"common/getSourceAuth",payload:{sourceID:O.sourceID},callback:f=>{if(f.success){var C=f.data||[],S=C.filter(h=>!h.targetID),b=S.length?S[0]:{},P=C.filter(h=>h.targetID).map(h=>(0,u.Z)((0,u.Z)({},h),{},{roleID:h.authID})),L=P.map(h=>h.groupID||h.userID||h.targetID);t.setState({dataList:P,dataListId:L}),S.length&&t.setState({otherroleID:b.authID,showTime:!0})}}})},this.userShareGroupList=()=>{var t=this,n=this.props.dispatch,m=this.state.keywords;n({type:"common/userShareGroupList",payload:{keyword:m},callback:M=>{M.success&&t.setState({selectData:M.data})}})},this.getChildrenList=(t,n)=>{var m=this,M=this.props.dispatch,O=this.state.childrenData,f=O===void 0?{}:O;M({type:"common/userShareGroupList",payload:{groupID:t.groupID},callback:C=>{if(C.success){var S=C.data||{},b=S.groupList,P=b===void 0?[]:b,L=S.userList,h=L===void 0?[]:L,R=[...P,...h],U=f?(0,u.Z)({},f):{};U[t.groupID]=R,m.setState({childrenData:(0,u.Z)({},U)})}}})}}componentDidMount(){var t,n=this,m=this.props,M=m.dispatch,O=m.common,f=m.select,C=O.authList;n.setState({otherroleID:(t=C.filter(S=>S.auth!="1,2,3,4,5,6,7,8,9,10,11,12,13,14,15")[0])===null||t===void 0?void 0:t.roleID}),n.userShareGroupList(),n.getSourceAuth()}renderHead(){var t=this,n=this.state,m=n.dataList,M=n.openOption,O=n.selectData,f=n.dataListId,C=n.keywords,S=n.otherroleID,b=n.childrenData,P=n.openList,L=P===void 0?[]:P,h=O.groupList,R=h===void 0?[]:h,U=O.userList,N=U===void 0?[]:U,G=(0,k.lw)((0,k.Kd)()),j=[...R,...N],B=c=>{t.setState({openOption:c})},g=c=>{var T=c.groupID||c.userID||c.targetID,D=f.indexOf(T),o=(0,u.Z)((0,u.Z)({},c),{},{roleID:S});D<0?(f.push(T),m.push(o)):(f.splice(D,1),m.splice(D,1)),t.setState({dataList:[...m],dataListId:[...f]})},V=c=>{var T=c.target.value;t.setState({keywords:T||""})},Y=c=>{t.setState({keywords:c||""},()=>{t.userShareGroupList(),t.setState({openList:[]})})},y=c=>{var T=c.userID||c.groupID;return f.indexOf(T)>-1?"liBox on":"liBox"},ee=function c(T,D){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=b[T.groupID]||[];return(0,e.jsx)(e.Fragment,{children:r.map((i,v)=>{var p=i.hasChildren||0,A=L.indexOf(i.groupID)>-1;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{xxkey:(i.groupID||i.userID)+"x"+(i.parentID||"w")+"x"+v+"z"+D,className:y(i),onClick:()=>g(i),style:{paddingLeft:o*15+12},children:[p?(0,e.jsx)("span",{onClick:oe=>{if(oe.preventDefault(),oe.stopPropagation(),A||t.getChildrenList(i,v),A){var F=[...L];F=F.filter(Ie=>Ie!=i.groupID),t.setState({openList:F})}else{var W=[...L];W.push(i.groupID),t.setState({openList:W})}},className:"icondown",children:A?(0,e.jsx)("img",{src:_e()}):(0,e.jsx)("img",{src:es()})}):(0,e.jsx)("span",{className:"icondown",children:A?(0,e.jsx)("img",{style:{visibility:"hidden"},src:_e()}):(0,e.jsx)("img",{style:{visibility:"hidden"},src:es()})}),(0,e.jsx)("span",{className:"iconBox",children:i.userID?(0,e.jsx)(ga.Z,{style:{color:"#9a64ff"}}):(0,e.jsx)(ua.Z,{style:{color:"#ffd256"}})}),(0,e.jsx)("span",{children:i.nickname||i.name}),(0,e.jsx)("span",{className:"right",children:(0,e.jsx)(xa.Z,{})})]},(i.groupID||i.userID)+"x"+(i.parentID||"w")+"x"+v+"z"+D),A?c(i,v,o+1):""]})})})};return(0,e.jsxs)("div",{className:"headBox",children:[G.formatMessage({id:"explorer.share.specifyUserAuth"}),(0,e.jsxs)("div",{className:"rightBox",children:[(0,e.jsxs)(be.Z,{onClick:()=>B(!0),children:[(0,e.jsx)(Pl.Z,{}),G.formatMessage({id:"admin.member.allAdd"})]}),M&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Tl.zd,{opacity:0,style:{zIndex:100},onMaskClick:()=>B(!1)}),(0,e.jsxs)("div",{className:"opationBox",children:[(0,e.jsx)("div",{className:"searchBox",children:(0,e.jsx)($l,{size:"small",placeholder:G.formatMessage({id:"admin.member.searchAllnomh"}),onSearch:Y,onChange:V,style:{width:280}})}),(0,e.jsx)("div",{className:"userList",children:(0,e.jsx)(Ze(),{children:j.map((c,T)=>{var D=c.hasChildren||0,o=L.indexOf(c.groupID)>-1;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{xxkey:(c.groupID||c.userID)+"x"+(c.parentID||"w")+"x"+T,className:y(c),onClick:()=>g(c),children:[D?(0,e.jsx)("span",{onClick:r=>{if(r.preventDefault(),r.stopPropagation(),o||t.getChildrenList(c,T),o){var i=[...L];i=i.filter(p=>p!=c.groupID),t.setState({openList:i})}else{var v=[...L];v.push(c.groupID),t.setState({openList:v})}},className:"icondown",children:o?(0,e.jsx)("img",{src:_e()}):(0,e.jsx)("img",{src:es()})}):(0,e.jsx)("span",{className:"icondown",children:o?(0,e.jsx)("img",{style:{visibility:"hidden"},src:_e()}):(0,e.jsx)("img",{style:{visibility:"hidden"},src:es()})}),(0,e.jsx)("span",{className:"iconBox",children:c.userID?(0,e.jsx)(ga.Z,{style:{color:"#9a64ff"}}):(0,e.jsx)(ua.Z,{style:{color:"#ffd256"}})}),(0,e.jsx)("span",{children:c.nickname||c.name}),(0,e.jsx)("span",{className:"right",children:(0,e.jsx)(xa.Z,{})})]},(c.groupID||c.userID)+"x"+(c.parentID||"w")+"x"+T),o?ee(c,T,1):""]})})})})]})]})]})]})}renderTableList(){var t=this,n=this.props,m=n.dispatch,M=n.common,O=n.select,f=(0,k.lw)((0,k.Kd)()),C=M.copyDataList,S=M.copyDataListId,b=M.authList,P=b===void 0?[]:b,L=this.state,h=L.dataList,R=h===void 0?[]:h,U=L.dataListId,N=()=>{t.setState({dataList:[],dataListId:[]})},G=()=>{m({type:"common/setState",payload:{copyDataList:R,copyDataListId:U}}),ds.ZP.success(f.formatMessage({id:"information-copySuccess"}))},j=()=>{t.state({dataList:C,dataListId:S})},B=R.length<1;return(0,e.jsxs)("div",{className:He().tableBox,children:[(0,e.jsxs)("div",{className:"tableHeader",children:[(0,e.jsxs)("li",{children:[" ",f.formatMessage({id:"explorer.selectObject"})]}),(0,e.jsxs)("li",{children:[" ",f.formatMessage({id:"explorer.parentGroup"})]}),(0,e.jsxs)("li",{children:[" ",f.formatMessage({id:"explorer.actionAuth"})]})]}),(0,e.jsxs)("div",{className:"tableContnet",children:[(0,e.jsxs)(Ze(),{children:[R.map((g,V)=>(0,e.jsxs)("div",{className:"td",children:[(0,e.jsx)("li",{children:g.nickname||g.name}),(0,e.jsx)("li",{children:g.parentName||g.parentGroupName||""}),(0,e.jsx)("li",{children:(0,e.jsx)(ha.Z,{size:"small",style:{width:"100%"},value:g.roleID,onChange:Y=>{var y=[...R];y[V]=(0,u.Z)((0,u.Z)({},y[V]),{},{roleID:Y}),t.setState({dataList:[...y]})},children:P.map((Y,y)=>(0,e.jsxs)(Option,{value:Y.roleID,children:[" ",(0,e.jsxs)("div",{className:He().authUser,children:[(0,e.jsx)("div",{className:"authcolor",style:{background:Y.label}}),(0,e.jsx)("div",{className:"authname",children:Y.roleName})]})," "]},y))})})]},V)),B&&(0,e.jsx)(ye.Z,{style:{marginTop:140},image:ye.Z.PRESENTED_IMAGE_SIMPLE})]}),(0,e.jsxs)("div",{className:"footerBottom",children:[!B&&(0,e.jsxs)("span",{onClick:N,children:[" ",f.formatMessage({id:"common.clear"})]}),!B&&(0,e.jsxs)("span",{onCilck:G,children:[" ",f.formatMessage({id:"explorer.groupAuthCopy"})]}),C.length>1&&(0,e.jsxs)("span",{onClick:j,children:[" ",f.formatMessage({id:"explorer.past"})]})]})]})]})}render(){var t=this,n=(0,k.lw)((0,k.Kd)()),m=t.props,M=m.dispatch,O=m.common,f=m.open,C=m.setOpenModel,S=m.issmall,b=m.select,P=O.showmodalList,L=P===void 0?[]:P,h=O.checkFileParams,R=O.authList,U=R===void 0?[]:R,N=this.state,G=N.modelZindex,j=N.showTime,B=N.dataList,g=N.timeValue,V=N.otherAuth,Y=V===void 0?"":V,y=N.otherroleID,ee=r=>{t.setState({modelZindex:r})},c=r=>{t.setState({showTime:r.target.checked})},T=r=>{t.setState({timeValue:r})},D=r=>{t.setState({timeValue:r})},o=()=>{var r=[];B.map(i=>{r.push({authID:i.roleID,targetID:i.userID||i.groupID||i.targetID,targetType:i.targetType?i.targetType:i.userID?1:2})}),j&&r.push({authID:y,targetID:0,targetType:1}),M({type:"common/setAuth",payload:{sourceAuthList:r,sourceID:b.sourceID},callback:i=>{i.success&&ds.ZP.success(n.formatMessage({id:i.code}))}})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:He().authpageBox,children:[t.renderHead(),t.renderTableList(),(0,e.jsxs)("div",{className:"timeBox",children:[(0,e.jsxs)(Zl.Z,{checked:j,onChange:c,children:[n.formatMessage({id:"explorer.share.othersAuth"}),"\uFF08",n.formatMessage({id:"explorer.share.specifyAuthTips"}),"\uFF09"]}),(0,e.jsx)("span",{className:"desc",style:{marginLeft:5},children:n.formatMessage({id:"explorer.share.authTypeDesc"})})]}),j&&(0,e.jsxs)("div",{className:"authSelectbox",children:[(0,e.jsx)(ha.Z,{style:{width:"100%"},value:y,onChange:r=>{t.setState({otherroleID:r})},children:U.map((r,i)=>(0,e.jsxs)(Option,{value:r.roleID,children:[" ",(0,e.jsxs)("div",{className:He().authUser,children:[(0,e.jsx)("div",{className:"authcolor",style:{background:r.label}}),(0,e.jsx)("div",{className:"authname",children:r.roleName})]})," "]},i))}),(0,e.jsx)("span",{className:"desc",style:{marginLeft:5},children:n.formatMessage({id:"explorer.share.specifyAuthDesc"})})]})]}),(0,e.jsx)("div",{className:He().footBox,children:(0,e.jsx)(be.Z,{type:"primary",style:{marginLeft:5},onClick:o,children:n.formatMessage({id:"common.save"})})})]})}})||pa),Bl=a(49944),kl=a.n(Bl),Ul=a(16548),ja=a.n(Ul),Vl=Va.Z.Paragraph,zl=["fav","recentDoc","shareTo","shareLink","shareToMe","photo","recycle","doc","image","music","movie","zip","other","tag","tool","fileType","position","info","toolbox"],wl=["3gp","flv","mp4","avi","mov","wmv","pmg","rmvb","mpeg","mpg","rm","f4v","mkv","m4v","webm","3g2","asf","m2ts","mts","ogv","vob","mpe"],Hl="jpg,jpeg,png,gif,bmp,ico,svg,webp,tif,tiff,cdr,svgz,xbm,eps,pjepg,heic,raw,ai",Kl=z=>{var t,n,m,M,O,f,C,S,b,P,L,h,R,U,N,G=z.isShare,j=G===void 0?!1:G,B=z.isModal,g=B===void 0?!1:B,V=z.tabPosition,Y=V===void 0?"bottom":V,y=z.rightInfoModalKey,ee=y===void 0?"info":y,c=z.rightInfoModalParams,T=c===void 0?{}:c,D=(0,k.I0)(),o=(0,k.YB)(),r=(0,k.tT)("@@initialState"),i=r.initialState,v=r.setInitialState,p=i.adminauth,A=p===void 0?{}:p,oe=i.currentUser,F=(0,K.useState)(300),W=(0,Oe.Z)(F,2),Ie=W[0],Pe=W[1],re=(0,K.useState)(ee),fe=(0,Oe.Z)(re,2),q=fe[0],pe=fe[1],ve=(0,K.useState)(!1),ne=(0,Oe.Z)(ve,2),de=ne[0],d=ne[1],x=(0,K.useState)(!0),w=(0,Oe.Z)(x,2),H=w[0],Q=w[1],I=(0,k.v9)(l=>l.common),ce=I.openRightInfo,ze=I.sourceID,Ke=ze===void 0?0:ze,ps=I.rootpath,js=I.listData,ss=I.checkFolderParams,E=ss===void 0?{}:ss,as=I.checkFileParams,ls=as===void 0?{}:as,te=I.getParams,Ge=I.selectItems,ya=I.tagList,Et=ya===void 0?[]:ya,me=I.sharePageData,Ia=I.rightInfoModalauth,Jl=Ia===void 0?{}:Ia,ys=I.shareCode,Na=I.roleList,Bt=Na===void 0?[]:Na,Da=I.showmodalList,ts=Da===void 0?[]:Da,Ma=I.addressPath,Ne=Ma===void 0?[]:Ma,La=I.filenewTag,Yl=La===void 0?{}:La,Ql=I.preOpenRightInfo,ba=I.newshowmodalList,kt=ba===void 0?[]:ba,Xl=I.isIframe,Wl=!!((0,Se.jS)("isDestopView")&&(0,Se.jS)("isDestopView")=="1"),ql=l=>{var ie=Xl&&Wl;if(ie){var _;(_=window.parent)===null||_===void 0||_.postMessage({updateState:(0,u.Z)({},l)})}else D({type:"common/setState",payload:(0,u.Z)({},l)})},Te=(0,le.t_)(A,Ge,Ne,oe),_l=Object.keys(ls),s=g?T:_l.length?ls:E,et=()=>{D({type:"common/setState",payload:{openRightInfo:!ce,preOpenRightInfo:!ce}})},Ae=zl.indexOf(((t=s)===null||t===void 0?void 0:t.xxicon)||((n=s)===null||n===void 0?void 0:n.icon)||"")>-1?!0:(((m=s)===null||m===void 0?void 0:m.sourceHash)||"")=="safe",Is=s,Oa=Is.sizeMax,De=Oa===void 0?0:Oa,Sa=Is.sizeUse,je=Sa===void 0?0:Sa,Za=Is.size,Ca=s.oexeContent?JSON.parse(s.oexeContent):{},Pa=s.fileType&&Hl.indexOf(s.fileType)>-1,Ns=s.fileType&&wl.indexOf(s.fileType)>-1,st=s.tagInfo||{};s=(0,u.Z)((0,u.Z)({},s),st);var Me=!!s.labelId,at=!!Ca.labelId,se=Ge.length>1,Ta=l=>{D({payload:(0,u.Z)({},l||te),type:"common/getListPath"})},Aa=Ge.filter(l=>(l==null?void 0:l.isFolder)||(l==null?void 0:l.labelId)).length,lt=Ge.length-Aa,tt=Ge.map(l=>(l==null?void 0:l.size)||0),it=(0,Qa.sum)(tt),is=(M=s)!==null&&M!==void 0&&M.modifyUserJson?JSON.parse((O=s)===null||O===void 0?void 0:O.modifyUserJson):{},os=(f=s)!==null&&f!==void 0&&f.createUserJson?JSON.parse((C=s)===null||C===void 0?void 0:C.createUserJson):{},Fe=(S=s)!==null&&S!==void 0&&S.resolution?(b=s)===null||b===void 0?void 0:b.resolution.split("*"):[],Fa=(P=s)!==null&&P!==void 0&&P.roleList?JSON.parse((L=s)===null||L===void 0?void 0:L.roleList):[],Je=Fa.length?Fa[0]:{},ot=parseInt(Fe.length?Fe[0]:0),rt=parseInt(Fe.length?Fe[1]:0),Ra=Yl[((h=s)===null||h===void 0?void 0:h.sourceID)+""]||((R=s)===null||R===void 0?void 0:R.tagList)||[],$a=((U=s)===null||U===void 0?void 0:U.icon)==="file",nt=Ne[Ne.length-1]||{},dt=(l,ie)=>{var _=Ne.slice(0,ie+1);if((l==null?void 0:l.xxicon)!="toolbox"){D({type:"common/setState",payload:{addressPath:[..._],checkFolderParams:_[_.length-1],checkFileParams:{}}});var he={recentDoc:"userRencent",position:"files",tool:"tools",tag:"fileTag"};te.sourceID=l.sourceID,te.currentPage=1,te.block=(l==null?void 0:l.xxicon)=="position"||(l==null?void 0:l.xxicon)=="tool"||(l==null?void 0:l.xxicon)=="fileType"||(l==null?void 0:l.xxicon)=="tag"||(l==null?void 0:l.xxicon)=="fav"||(l==null?void 0:l.xxicon)=="recycle"||(l==null?void 0:l.xxicon)=="recentDoc"?he[l==null?void 0:l.xxicon]||l.xxicon:void 0,te.fileType=l!=null&&l.ext||(l==null?void 0:l.xxicon)=="photo"?(l==null?void 0:l.ext)||"jpg,jpeg,png,gif,bmp,ico,svg,webp,tif,tiff,cdr,svgz,xbm,eps,pjepg,heic,raw,psd,ai":void 0,te.hashMd5=void 0,te.repeatSourceID=void 0,te.isShare=l.xxicon=="shareLink"||l.icon=="shareLink"?1:void 0,te.isinfo=(l==null?void 0:l.xxicon)=="info"||(l==null?void 0:l.icon)=="info"||l!=null&&l.infoTypeID?1:void 0,te.status=(l==null?void 0:l.xxicon)=="info"||(l==null?void 0:l.icon)=="info"||l!=null&&l.infoTypeID?1:void 0,te.infoTypeID=l!=null&&l.infoTypeID?l==null?void 0:l.infoTypeID:void 0,te.parentLevel=l!=null&&l.infoTypeID&&l!==null&&l!==void 0&&l.parentLevel&&(l==null?void 0:l.parentLevel)||void 0,(l.xxicon=="recentDoc"||l.icon=="recentDoc")&&(te.block="userRencent"),Ta(te)}},Ds=[{key:"info",label:(0,e.jsxs)("div",{children:[!g&&(0,e.jsx)("div",{children:(0,e.jsx)(wa.Z,{})}),(0,e.jsx)("div",{children:o.formatMessage({id:"explorer.panel.info"})})]})},...g&&Te.admin==1&&((N=s)===null||N===void 0?void 0:N.targetType)==2&&window.location.origin.indexOf("demo.filesbox.cn")<0?[{key:"auth",label:(0,e.jsx)("div",{children:(0,e.jsx)("div",{children:o.formatMessage({id:"common.auth"})})})}]:[],...Te.comment==1?[{key:"chat",label:(0,e.jsxs)("div",{children:[!g&&(0,e.jsx)("div",{children:(0,e.jsx)(ra.Z,{})}),(0,e.jsx)("div",{children:o.formatMessage({id:"explorer.panel.chat"})})]})}]:[],...Te.trends==1&&!s.infoTypeID?[{key:"log",label:(0,e.jsxs)("div",{children:[!g&&(0,e.jsx)("div",{children:(0,e.jsx)(na.Z,{})}),(0,e.jsx)("div",{children:o.formatMessage({id:"explorer.panel.log"})})]})}]:[]];$a&&Te.rname==1?Ds.splice(1,0,{key:"version",label:(0,e.jsxs)("div",{children:[!g&&(0,e.jsx)("div",{children:(0,e.jsx)(Ha.Z,{})}),(0,e.jsx)("div",{children:o.formatMessage({id:"explorer.panel.version"})})]})}):q=="version"&&pe("info");var Ea=()=>{var l,ie,_,he,Re,$e,Ee,Be,ke,Ls,bs,Os,Ss,Zs,Cs,Ps,Ts,As,Fs,Rs,$s,Es,Bs,ks,Us,Vs,zs,ws,Hs,Ks,Gs,Js,Ys,Qs,Xs,Ws,qs,_s,ea,sa,aa,la;return(0,e.jsxs)("div",{className:"fileEditRC",children:[q=="info"&&(0,e.jsx)(Ze(),{children:(0,e.jsxs)("div",{style:{width:"100%"},children:[((((l=s)===null||l===void 0?void 0:l.xxicon)||((ie=s)===null||ie===void 0?void 0:ie.icon)||"")=="space"||(((_=s)===null||_===void 0?void 0:_.xxicon)||((he=s)===null||he===void 0?void 0:he.icon)||"")=="box")&&!se?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(We.Z,{title:(je===0||De===0?0:je/(De*1024*1024*1024)*100).toFixed(2)+"%",children:(0,e.jsx)(Ua.Z,{percent:je===0||De===0?0:je/(De*1024*1024*1024)*100,strokeColor:(je===0||De===0?0:je/(De*1024*1024*1024)*100)>90?"#f00":"#722ed1",showInfo:!1,size:"small"})}),(0,e.jsxs)("div",{className:"infoli rl",children:[(0,e.jsxs)("div",{className:"label",children:[" ",(0,le.NR)(je)," /"," ",De===0?"\u4E0D\u9650\u5236":(0,le.NR)(De*1024*1024*1024)]}),(0,e.jsx)("div",{className:"value"})]}),(0,e.jsx)(Xe.Z,{})]}):"",se?"":(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.file.path"}),":"]}),(0,e.jsxs)("div",{className:"value",children:[Ne==null?void 0:Ne.map((Z,Le)=>(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("span",{onClick:()=>dt(Z,Le),className:"linkTag",children:[Z.name," "]}),Le<Ne.length-1&&(0,e.jsx)("span",{className:"arrowBtn",children:"/"})]})),(Re=s)!==null&&Re!==void 0&&Re.sourceID&&nt.sourceID!=(($e=s)===null||$e===void 0?void 0:$e.sourceID)?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:"arrowBtn",children:"/"}),(0,e.jsx)("span",{onClick:()=>{window.openRightFile(s)},className:"linkTag",children:(Ee=s)!==null&&Ee!==void 0&&Ee.sourceHash&&((Be=s)===null||Be===void 0?void 0:Be.sourceHash)=="safe"?o.formatMessage({id:"common.Privatesafe"}):s.favName||s.name})]}):"",(ke=s)!==null&&ke!==void 0&&ke.sourceID&&((Ls=s)===null||Ls===void 0?void 0:Ls.sourceHash)!="safe"?(0,e.jsx)(We.Z,{title:o.formatMessage({id:"explorer.copy",defaultMessage:"\u590D\u5236"})+" URL",children:(0,e.jsx)(Ka.Z,{style:{marginLeft:8,cursor:"pointer"},onClick:()=>{var Z;sl()(location.origin+(window.basePath?"/"+window.basePath.split("/")[0]:"")+"/#/filesBox?sureD="+((Z=s)===null||Z===void 0?void 0:Z.sourceID),{debug:!0,message:o.formatMessage({id:"information-copyManually",defaultMessage:"\u8BF7\u624B\u52A8\u590D\u5236"})}),ds.ZP.success(o.formatMessage({id:"information-copySuccess",defaultMessage:"\u590D\u5236\u6210\u529F"}))}})}):"",(bs=s)!==null&&bs!==void 0&&bs.fileID&&Te.download==1?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(We.Z,{title:o.formatMessage({id:"explorer.embed.title",defaultMessage:"\u5D4C\u5165\u6587\u4EF6"}),children:(0,e.jsx)(Ga.Z,{style:{marginLeft:8,cursor:"pointer"},onClick:()=>{var Z,Le=[...ts];Le.push({visible:!0,sourceID:(Z=s)===null||Z===void 0?void 0:Z.sourceID,type:"Implant",name:o.formatMessage({id:"explorer.embed.title",defaultMessage:"\u5D4C\u5165\u6587\u4EF6"}),videoInfo:s}),ql({showmodalList:[...Le]})}})})}):""]})]})}),Ae||Me||se?(0,e.jsxs)(e.Fragment,{children:[" ",se?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"common.selectNum"}),":"]}),(0,e.jsxs)("div",{className:"value",children:[lt," ",o.formatMessage({id:"common.file"}),"\uFF0C",Aa," ",o.formatMessage({id:"common.folder"})]})]}),(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.file.size"}),":"]}),(0,e.jsx)("div",{className:"value",children:(0,le.NR)(it)})]})]}):(0,e.jsx)(e.Fragment,{children:s.pathDesc?(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"common.desc"}),":"]}),(0,e.jsx)("div",{className:"value",children:(0,k.Kd)()=="en-US"?(((Os=s)===null||Os===void 0?void 0:Os.xxicon)||((Ss=s)===null||Ss===void 0?void 0:Ss.icon)||"")=="recentDoc"?"Recently created/uploaded/modified/opened files":(((Zs=s)===null||Zs===void 0?void 0:Zs.xxicon)||((Cs=s)===null||Cs===void 0?void 0:Cs.icon)||"")=="shareLink"?"View and manage the external link shares":(((Ps=s)===null||Ps===void 0?void 0:Ps.xxicon)||((Ts=s)===null||Ts===void 0?void 0:Ts.icon)||"")=="photo"?"User photo album collection":(((As=s)===null||As===void 0?void 0:As.xxicon)||((Fs=s)===null||Fs===void 0?void 0:Fs.icon)||"")=="recycle"?"Manage your deleted files (folders)":(((Rs=s)===null||Rs===void 0?void 0:Rs.xxicon)||(($s=s)===null||$s===void 0?void 0:$s.icon)||"")=="fileType"?"Classify files by type, only files in personal space":(((Es=s)===null||Es===void 0?void 0:Es.xxicon)||((Bs=s)===null||Bs===void 0?void 0:Bs.icon)||"")=="tag"?"tag":s.pathDesc:s.pathDesc})]}):""})]}):(0,e.jsxs)(e.Fragment,{children:[(ks=s)!==null&&ks!==void 0&&ks.size?(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.file.size"}),":"]}),(0,e.jsx)("div",{className:"value",children:(0,le.NR)((Us=s)===null||Us===void 0?void 0:Us.size)})]}):"",(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"common.createTime"}),":"]}),(0,e.jsxs)("div",{className:"value",children:[" ",(0,le.hK)(s.createTime)]})]}),(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"common.modifyTime"}),":"]}),(0,e.jsx)("div",{className:"value",children:(0,le.hK)(s.modifyTime||s.createTime)})]}),(0,e.jsx)(Xe.Z,{}),(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.file.creator"}),":"]}),(0,e.jsxs)("div",{className:"value",children:[" ",(0,e.jsx)(Qe.C,{size:20,style:{verticalAlign:"text-top"},src:(0,e.jsx)("img",{src:os.avatar?os.avatar:cs(),alt:"avatar"})})," ",(0,e.jsxs)("span",{children:["[",os.nickname||os.name||o.formatMessage({id:"common.system"}),"]"]})]})]}),(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.file.editor"}),":"]}),(0,e.jsxs)("div",{className:"value",children:[(0,e.jsx)(Qe.C,{size:20,style:{verticalAlign:"text-top"},src:(0,e.jsx)("img",{src:is.avatar?is.avatar:cs(),alt:"avatar"})})," ",(0,e.jsxs)("span",{children:["[",is.nickname||is.name||o.formatMessage({id:"common.system"}),"]"]})]})]}),((Vs=s)===null||Vs===void 0?void 0:Vs.targetType)==2&&Je.authID?(0,e.jsxs)("div",{className:"infoli myauth",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.share.myAuth"}),":"]}),(0,e.jsxs)("div",{className:"value",children:[(0,e.jsxs)("div",{onClick:()=>{var Z=[...ts];Z.push({visible:!0,sourceID:s.sourceID,type:"authTable",name:s.favName||s.name,authData:s}),D({type:"common/setState",payload:{showmodalList:[...Z]}})},className:ja().authUser,children:[(0,e.jsx)("div",{className:"authcolor",style:{background:Je.label}}),(0,e.jsx)("div",{className:"authname",children:(Je==null?void 0:Je.authName)||""})]})," "]})]}):"",ys||s.infoTypeID?"":(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.file.detil"}),":"]}),(0,e.jsx)("div",{onClick:Z=>{de||d(!0)},className:"value",children:ys||Jl.open!=1&&g?s.description:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Vl,{editable:{editing:de,onChange:Z=>{if(Z==s.description){d(!1);return}D({type:"common/operation",payload:{desc:Z,sourceID:s.sourceID,operation:"desc"},callback:Le=>{if(Le.success){Ta("");var ta=s.sourceID==E.sourceID,rs=s.sourceID==ls.sourceID;D({type:"common/setState",payload:ta?{checkFolderParams:(0,u.Z)((0,u.Z)({},E),{},{description:Z})}:rs?{checkFileParams:(0,u.Z)((0,u.Z)({},ls),{},{description:Z})}:{}});var Ye=[...ts],ns=Ye.findIndex(vt=>vt.rightInfoModalSourceID==s.sourceID);if(ns!==-1){var ia;Ye[ns]=(0,u.Z)((0,u.Z)({},Ye[ns]),{},{rightInfoModalParams:(0,u.Z)((0,u.Z)({},(ia=Ye[ns])===null||ia===void 0?void 0:ia.rightInfoModalParams),{},{description:Z})}),D({type:"common/setState",payload:{showmodalList:[...Ye]}})}}}}),d(!1)}},onClick:Z=>{Z.preventDefault(),Z.stopPropagation(),de||d(!0)},children:s.description||""}),!de&&!s.description?(0,e.jsxs)("div",{className:"tips",children:[o.formatMessage({id:"explorer.fileDescAdd"}),"..."]}):""]})})]}),(0,e.jsx)(Xe.Z,{}),(zs=s)!==null&&zs!==void 0&&zs.hashMd5?(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsx)("div",{className:"label",children:"MD5:"}),(0,e.jsx)("div",{title:((ws=s)===null||ws===void 0?void 0:ws.hashMd5)||"",className:"value",children:((Hs=s)===null||Hs===void 0?void 0:Hs.hashMd5)||""})]}):"",(Ks=s)!==null&&Ks!==void 0&&Ks.length?(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.fileInfo.playTime"}),":"]}),(0,e.jsx)("div",{className:"value",children:(0,le.ZC)((Gs=s)===null||Gs===void 0?void 0:Gs.length)})]}):"",Fe.length?(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.fileInfo.vedioSize"}),":"]}),(0,e.jsx)("div",{className:"value",children:Fe[0]+" x "+Fe[1]})]}):"",(Js=s)!==null&&Js!==void 0&&Js.codecName?(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.fileInfo.vedioFormat"}),":"]}),(0,e.jsx)("div",{className:"value",children:(Ys=s)===null||Ys===void 0?void 0:Ys.codecName})]}):"",(Qs=s)!==null&&Qs!==void 0&&Qs.avgFrameRate?(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.fileInfo.vedioFrame"}),":"]}),(0,e.jsx)("div",{className:"value",children:(Xs=s)===null||Xs===void 0?void 0:Xs.avgFrameRate})]}):"",(Ws=s)!==null&&Ws!==void 0&&Ws.sampleRate?(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.fileInfo.audioRate"}),":"]}),(0,e.jsx)("div",{className:"value",children:(qs=s)===null||qs===void 0?void 0:qs.sampleRate})]}):"",(_s=s)!==null&&_s!==void 0&&_s.channels?(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.fileInfo.audioChannel"}),":"]}),(0,e.jsx)("div",{className:"value",children:(ea=s)===null||ea===void 0?void 0:ea.channels})]}):"",(sa=s)!==null&&sa!==void 0&&sa.audioCodecName?(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.fileInfo.audioFormat"}),":"]}),(0,e.jsx)("div",{className:"value",children:(aa=s)===null||aa===void 0?void 0:aa.audioCodecName})]}):"",(la=s)!==null&&la!==void 0&&la.sourceID?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"infoli",children:[(0,e.jsx)("div",{style:{},className:"label",children:o.formatMessage({id:"explorer.tag.name"})}),(0,e.jsx)("div",{style:{textAlign:"right"},className:"value"}),(0,e.jsx)("a",{className:"showtagbtn",onClick:()=>{D({type:"common/setState",payload:{tagVisible:!0}})},children:(0,e.jsx)("img",{src:kl()})})]}),(0,e.jsxs)("div",{className:"tagbtnbox",children:[Ra.length?"":(0,e.jsx)("div",{className:"nonetagshow",style:{color:"#ccc"},children:o.formatMessage({id:"explorer.panel.info.tagEmpty"})}),Ra.map((Z,Le)=>{var ta=!1;return(0,e.jsxs)("div",{onClick:rs=>{rs.preventDefault(),rs.stopPropagation()},className:"tagbtnli"+(ta?" coloriactive":""),children:[(0,e.jsx)("div",{style:{width:"14px",height:"14px",background:Z.style,borderRadius:"50%",border:"1px solid #e3e3e3"},className:"colori"}),(0,e.jsx)("div",{children:Z.labelName})]})}),(0,e.jsx)(oa.Z,{isTag:!0,isAttrbuteModal:g,attrbuteParams:s,children:(0,e.jsx)("div",{className:"tagbtnli tagaddBtn",children:(0,e.jsxs)("div",{children:[(0,e.jsx)(Ja.Z,{})," ",o.formatMessage({id:"explorer.tag.addTo"})]})})}),(0,e.jsx)("div",{style:{clear:"both"}})]})]}):""]})]})]})}),q=="auth"&&g&&!Ae&&!Me&&!se&&(0,e.jsxs)(Ze(),{children:[(0,e.jsxs)("div",{style:{width:"100%"},children:[" ",(0,e.jsx)(El,{select:s})," "]})," "]}),q=="version"&&$a&&!Ae&&!Me&&!se&&(0,e.jsx)(Sl,{selectObj:s,isModal:g}),q=="log"&&!Ae&&!Me&&!se&&(0,e.jsx)(hl,{selectObj:s,isModal:g}),q=="chat"&&!Ae&&!Me&&!se&&(0,e.jsx)(Nl,{selectObj:s,isModal:g})]})},Ms=["arw","mrw","erf","raf","cr2","nrw","nef","orf","rw2","pef","srf","dcr","kdc","dng"],ct=()=>{var l,ie,_,he,Re,$e,Ee,Be,ke;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"fileEditRT"+((Pa||(Ns||Ms.indexOf(s.fileType)>-1)&&(l=s)!==null&&l!==void 0&&l.thumb)&&!se?" imagboxrt":""),children:(Pa||(Ns||Ms.indexOf(s.fileType)>-1)&&(ie=s)!==null&&ie!==void 0&&ie.thumb)&&!se?(0,e.jsxs)("div",{className:"imgbox",children:[H&&(0,e.jsx)("img",{className:rt>ot?"imghgreaterthanw":"imgwhreaterthanw",src:(Ns||Ms.indexOf(s.fileType)>-1)&&(_=s)!==null&&_!==void 0&&_.thumb?""+((he=s)===null||he===void 0?void 0:he.thumb)+"&nameSuffix=secondary":(s.fileType=="gif"&&s.downloadUrl?s.downloadUrl+"&nameSuffix=secondary":"")||""+s.path+"&nameSuffix=secondary"}),(0,e.jsxs)("div",{className:"namebox",children:[(0,e.jsx)("div",{className:"name",title:s.favName||s.name,children:(Re=s)!==null&&Re!==void 0&&Re.sourceHash&&(($e=s)===null||$e===void 0?void 0:$e.sourceHash)=="safe"?o.formatMessage({id:"common.Privatesafe"}):s.favName||s.name}),(0,e.jsx)("div",{className:"action"})]})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"cover",children:Me||at?(0,e.jsx)("div",{style:{width:"100%",height:"100%",background:s.style||Ca.style,borderRadius:"50%",border:"1px solid #e3e3e3"}}):(0,e.jsx)("img",{src:(se||s.xxicon||s.icon)&&Se.sh[se?"multi":(((Ee=s)===null||Ee===void 0?void 0:Ee.sourceHash)=="safe"?"safe":"")||s.xxicon||s.icon||"folder"]||(0,Se.pp)(s)})}),(0,e.jsxs)("div",{className:"infocontent",children:[(0,e.jsx)("div",{className:"name",children:se?o.formatMessage({id:"explorer.selectMulti"}):(Be=s)!==null&&Be!==void 0&&Be.sourceHash&&((ke=s)===null||ke===void 0?void 0:ke.sourceHash)=="safe"?o.formatMessage({id:"common.Privatesafe"}):s.favName||s.name}),!Ae&&!Me&&!se&&(0,e.jsxs)("div",{className:"contro",children:[Za||je?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:(0,le.NR)(Za||je)}),","]}):"",(0,e.jsx)("span",{children:(0,le.hK)(s.modifyTime||s.createTime)})]})]})]})}),!g&&Ea(),!Ae&&!Me&&!se&&!ys&&Ds.length>1&&(0,e.jsx)("div",{className:"fileEditRB",children:(0,e.jsx)(ka.Z,{tabPosition:Y,centered:!0,activeKey:q,items:Ds,onChange:pe})}),g&&Ea()]})};return(0,K.useEffect)(()=>{pe(ee)},[ee]),(0,K.useEffect)(()=>{var l=(E==null?void 0:E.xxicon)=="info"||(E==null?void 0:E.icon)=="info"||E!=null&&E.infoTypeID?1:0,ie=(E==null?void 0:E.xxicon)=="toolbox";D({type:"common/setState",payload:{openRightInfo:l||ie?!1:Ql}}),setTimeout(()=>{if(E!=null&&E.isDesktop){(0,Se.g3)(I,D);return}(0,Se.uw)(I,D)},300)},[E==null?void 0:E.id]),(0,K.useEffect)(()=>{(Te.comment!=1||Te.trends!=1)&&q=="chat"&&pe("info"),Q(!1),setTimeout(function(){Q(!0)},30)},[s.sourceID]),(0,e.jsx)("div",{className:"rightInfo",children:(0,e.jsx)(Xa.e,{className:ja().fileEditR,style:{transition:ce?"none":"width 0.3s"},enable:{top:!1,right:!1,bottom:!1,left:!!ce,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},size:{width:g?"100%":ce?Ie:0,height:"100%"},maxWidth:600,minWidth:g?"100%":ce?280:0,onResizeStop:(l,ie,_,he)=>{Pe(Ie+he.width),clearTimeout(window.timeOutIndex),window.timeOutIndex=setTimeout(()=>{D({type:"common/setItemMargin"})},600)},children:j?(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"shareRightInfo",children:[(0,e.jsx)("div",{className:"cover",children:(0,e.jsx)("img",{src:me.avatar||cs()})}),(0,e.jsxs)("div",{className:"shareUserName",children:[(0,e.jsx)("span",{children:me.nickname||""})," ",o.formatMessage({id:"explorer.usersShare"})]}),(0,e.jsx)(Xe.Z,{}),(0,e.jsxs)("div",{className:"shareInfoLI",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"common.title"}),"\uFF1A"]}),(0,e.jsx)("div",{className:"value",children:me.title})]}),(0,e.jsxs)("div",{className:"shareInfoLI",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"common.time"}),"\uFF1A"]}),(0,e.jsx)("div",{className:"value",children:_a()(me.createTime).format("YYYY-MM-DD HH:mm:ss")})]}),me.size?(0,e.jsxs)("div",{className:"shareInfoLI",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"explorer.file.size"}),"\uFF1A"]}),(0,e.jsx)("div",{className:"value",children:(0,le.NR)(me.size)})]}):"",(0,e.jsxs)("div",{className:"shareInfoLI",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"common.scan"}),"\uFF1A"]}),(0,e.jsx)("div",{className:"value",children:me.numView})]}),(0,e.jsxs)("div",{className:"shareInfoLI",children:[(0,e.jsxs)("div",{className:"label",children:[o.formatMessage({id:"common.download"}),"\uFF1A"]}),(0,e.jsx)("div",{className:"value",children:me.numDownload})]}),(0,e.jsx)("div",{className:"report",children:(0,e.jsx)(be.Z,{onClick:()=>{var l=[...ts];l.push({type:"report",visible:!0,sourceID:me.sourceID,name:me.title,shareData:me}),D({type:"common/setState",payload:{showmodalList:[...l]}})},children:o.formatMessage({id:"common.report"})})})]})}):(0,e.jsxs)(e.Fragment,{children:[ce&&!g&&(0,e.jsx)("div",{onClick:et,className:"close",children:(0,e.jsx)(Ya.Z,{})}),ct()]})})})},Gl=Kl},25963:function(ae){ae.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAlUlEQVQ4T6XT0Q2DMAwE0LsNugl0gzqDJ4xAN2EDIyM+UHASI/j3kznniJcf6/mc80pSAYiIbCO/BUwA1ghyA0opH1VdSIaQG2ArP0Fc4AnSBKJIF/AQEfleLxMCLBYAs6r+U0pzGLAwr8Mkf/Xb6IY4GrZNmmeMDLtAZO1uBmcXJgvM++e6G24XjtWcwLxiDc84auMOT3tyEY857pcAAAAASUVORK5CYII="}}]);
