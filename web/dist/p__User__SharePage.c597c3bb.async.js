(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8823,50599],{25819:function(h){h.exports={fileEditbox:"fileEditbox___25k1d",CenterListBox:"CenterListBox___3xuZN",sharePageHeader:"sharePageHeader___1ugdK",menu:"menu___1OeEK",qrcodeModal:"qrcodeModal___kEIH7",sharepageBody:"sharepageBody___1O3eh"}},34711:function(h){h.exports={qrcodemodalbox:"qrcodemodalbox___hLP61"}},96825:function(h,M,e){"use strict";e.r(M);var re=e(84305),Z=e(39559),oe=e(57106),y=e(99683),le=e(47673),S=e(4107),pe=e(57663),i=e(71577),N=e(30887),g=e(28682),ie=e(34792),D=e(48086),m=e(11849),o=e(39428),F=e(3182),v=e(2824),c=e(67294),H=e(55035),de=e(23538),U=e(42762),b=e(19630),n=e(30672),j=e(85304),_e=e(67277),me=e(35843),u=e(80753),w=e(59055),L=e(87092),z=e(25819),d=e.n(z),ce=e(82925),Ee=e(22887),G=e(18253),he=e(66895),O=e(32444),J=e(28595),V=e(81612),Y=e(29168),Ie=e(68826),Be=e.n(Ie),Ue=e(50599),Q=e(80129),ze=e.n(Q),s=e(85893),je=Le=>{var X,k,C=Le.match,Te=(0,c.useState)({}),ve=(0,v.Z)(Te,2),q=ve[0],Ke=ve[1],Re=(0,c.useState)(""),ue=(0,v.Z)(Re,2),Pe=ue[0],We=ue[1],Ae=(0,c.useState)(!1),Me=(0,v.Z)(Ae,2),ge=Me[0],ee=Me[1],Ze=(0,c.useState)(!1),De=(0,v.Z)(Ze,2),ye=De[0],se=De[1],Se=(0,b.TH)(),E=(0,n.YB)(),x=(0,n.v9)(a=>a.common),ae=x.isMobile,Ge=x.itemMargin,t=x.sharePageData,p=x.sharepageInit,$e=x.shareCode,Je=x.showmodalList,Oe=(0,n.tT)("@@initialState"),Ce=Oe.initialState,T=Ce===void 0?{}:Ce,xe=Oe.setInitialState,K=T.currentUser,I=a=>E.formatMessage({id:a}),te=(0,n.I0)(),R=a=>{var r=$(a.target).parents(".menuClick").hasClass("menuClick")||$(a.target).hasClass("menuClick"),l=$(a.target).parents(".menuClick").hasClass("hasChild")||$(a.target).hasClass("hasChild"),P=$(a.target).parents(".mobileMoreBtn").hasClass("mobileMoreBtn")||$(a.target).hasClass("mobileMoreBtn"),B=$(a.target).parents(".floatBtnx").hasClass("floatBtnx")||$(a.target).hasClass("floatBtnx"),_=$(a.target).parents(".menuBoxBtn").hasClass("menuBoxBtn")||$(a.target).hasClass("menuBoxBtn"),A=$(a.target).parents(".ant-dropdown-menu-item-disabled").length||$(a.target).parents(".ant-dropdown-menu-submenu-disabled").length,fe=$(a.target).parents(".ant-dropdown").length,f=$(a.target).parents(".menuIcon").hasClass("menuIcon")||$(a.target).hasClass("menuIcon"),we=$(a.target).parents(".ripple-item").hasClass("ripple-item")||$(a.target).hasClass("ripple-item");(!fe||r&&!l&&!A)&&!f&&!we&&!P&&!B&&!_&&te({type:"common/setState",payload:{openRightMenu:!1}})};(0,c.useEffect)(()=>{C.params.id&&te({type:"common/openSharePage",payload:{shareCode:decodeURIComponent(C.params.id),password:localStorage.getItem("sharePassword")||void 0}})},[]);var Ne=function(){var a=(0,F.Z)((0,o.Z)().mark(function r(){var l,P,B,_,A;return(0,o.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,j.rB)();case 2:l=window.location,P=l.search,B=l.pathname,_=new URL(window.location.href).searchParams,A=_.get("redirect"),window.location.pathname!=="/login"&&!A&&n.m8.replace({pathname:"/login",search:(0,Q.stringify)({redirect:B+P})});case 6:case"end":return f.stop()}},r)}));return function(){return a.apply(this,arguments)}}(),ne=(0,c.useCallback)(a=>{var r=a.key;if(ee(!1),r==="logout"){xe(l=>(0,m.Z)((0,m.Z)({},l),{},{currentUser:void 0})),Ne();return}n.m8.push("/".concat(r))},[xe]),Fe=a=>{if(!a){D.ZP.error(E.formatMessage({id:"user.inputPwd"}));return}te({type:"common/openSharePage",payload:{shareCode:decodeURIComponent(C.params.id),password:a},callback:r=>{if(r.success){var l=r.data||{};if(l.message){D.ZP.error(l.message);return}localStorage.setItem("sharePassword",a)}else D.ZP.error(r.message)}})},He=(0,s.jsx)(g.Z,{className:d().menu,selectedKeys:[],onClick:ne,children:!K||!(K!=null&&(X=K.user)!==null&&X!==void 0&&X.name)?(0,s.jsx)(g.Z.Item,{onClick:()=>{ne({key:"/login"})},children:E.formatMessage({id:"menu.login"})},"logout"):(0,s.jsxs)(g.Z.Item,{onClick:()=>{ne({key:"logout"})},children:[(0,s.jsx)(H.Z,{}),E.formatMessage({id:"menu.account.logout"})]},"logout")}),be=function(){var a=(0,F.Z)((0,o.Z)().mark(function r(){var l,P;return(0,o.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,j.So)({});case 2:l=_.sent,P=l.data,Ke(P);case 5:case"end":return _.stop()}},r)}));return function(){return a.apply(this,arguments)}}();(0,c.useEffect)(()=>{be()},[]);var W=()=>(0,s.jsxs)("div",{className:d().sharePageHeader,children:[(0,s.jsx)("div",{className:"cover",children:(0,s.jsx)("img",{src:(q==null?void 0:q.systemLogo)||Be()})}),(0,s.jsx)("div",{className:"shareName",style:ae?{fontSize:14}:{},children:t.title||""}),(0,s.jsxs)("div",{className:"action",children:[(0,s.jsx)(i.Z,{onClick:()=>{se(!0)},icon:(0,s.jsx)(de.Z,{})}),(0,s.jsx)(_e.Z,{open:ge,onOpenChange:a=>{ee(a)},overlay:He,children:(0,s.jsx)(i.Z,{onClick:()=>{ee(!ge)},icon:(0,s.jsx)(U.Z,{})})})]}),(0,s.jsx)(Ue.default,{open:ye,showIndex:444444,type:"qrcode",qrcodeUrl:location.href,name:t.title||"\u5206\u4EAB\u6807\u9898",setOpenModel:(a,r)=>{r=="visible",se(a)}})]});return(0,s.jsx)(Z.ZP,{locale:(0,n.Kd)()=="en-US"?G.Z:(0,n.Kd)()=="zh-TW"?Ee.Z:(0,n.Kd)()=="ja-JP"?he.Z:(0,n.Kd)()=="fr-FR"?O.Z:(0,n.Kd)()=="es-ES"?J.Z:(0,n.Kd)()=="ru-RU"?V.Z:(0,n.Kd)()=="it-IT"?Y.Z:ce.Z,children:p&&t.login&&t.message?(0,s.jsxs)("div",{className:d().sharepageBody,children:[W(),(0,s.jsx)("div",{className:d().fileEditbox,onClick:a=>R(a),children:(0,s.jsxs)("div",{className:"ExtractPasswordBox",children:[(0,s.jsx)("div",{className:"epbheder",children:E.formatMessage({id:"common.tips"})}),(0,s.jsxs)("div",{className:"epbContent",children:[(0,s.jsx)("div",{children:t.message}),(0,s.jsxs)(i.Z,{onClick:()=>{n.m8.replace({pathname:"/login",search:(0,Q.stringify)({redirect:Se.pathname})})},type:"primary",children:[" ",E.formatMessage({id:"menu.login"})]})]})]})})]}):t.shareID&&t.needPwd&&p?(0,s.jsxs)("div",{className:d().sharepageBody,children:[W(),(0,s.jsx)("div",{className:d().fileEditbox,onClick:a=>R(a),children:(0,s.jsxs)("div",{className:"ExtractPasswordBox",children:[(0,s.jsx)("div",{className:"epbheder",children:I("explorer.share.pwd")}),(0,s.jsxs)("div",{className:"epbContent",children:[(0,s.jsx)(S.Z.Password,{placeholder:"",value:Pe,onChange:a=>{We(a.target.value)}}),(0,s.jsx)(i.Z,{onClick:()=>{Fe(Pe)},type:"primary",children:I("common.ok")})]})]})})]}):p&&!t.success&&t.message&&!t.needPwd&&!t.shareFile?(0,s.jsxs)("div",{className:d().sharepageBody,children:[W(),(0,s.jsx)("div",{className:d().fileEditbox,onClick:a=>R(a),children:(0,s.jsxs)("div",{className:"ExtractPasswordBox",children:[(0,s.jsx)("div",{className:"epbheder",children:E.formatMessage({id:"common.tips"})}),(0,s.jsxs)("div",{className:"epbContent",children:[(0,s.jsx)("div",{children:t.message}),(0,s.jsxs)(i.Z,{onClick:()=>{window.location.href=window.location.origin+"".concat("/","#/")},type:"primary",children:[" ",E.formatMessage({id:"user.backHome"})]})]})]})})]}):t.shareID&&!t.needPwd&&p?(0,s.jsxs)("div",{className:d().sharepageBody,children:[W(),(0,s.jsxs)("div",{className:d().fileEditbox,onClick:a=>R(a),children:[t.shareFile&&t.shareFile.isFolder?(0,s.jsx)(me.Z,{initialState:T,shareCode:C.params.id,isShare:!0}):"",(0,s.jsx)("div",{className:"fileEditC",children:(0,s.jsxs)("div",{style:{height:"100%"},children:[(0,s.jsx)(w.Z,{shareCode:C.params.id,initialState:T,isShare:!0}),(0,s.jsxs)("div",{className:d().CenterListBox,style:{height:$e&&!((k=t.shareFile)!==null&&k!==void 0&&k.isFolder)&&ae?"calc(100vh - 100px)":ae?"calc(100vh - 134px)":"calc(100vh - 100px)"},children:[(0,s.jsx)(u.Z,{shareCode:C.params.id,initialState:T,isShare:!0}),(0,s.jsx)(L.Z,{isShare:!0})]})]})})]})]}):p?(0,s.jsx)("div",{children:(0,s.jsx)(y.ZP,{status:"error",title:I("explorer.share.notExist"),subTitle:I("explorer.share.errorPathTips"),extra:[(0,s.jsx)(i.Z,{onClick:()=>{window.location.href=window.location.origin+"".concat("/","#/")},children:I("user.backHome")})]})}):""})};M.default=je},50599:function(h,M,e){"use strict";e.r(M),e.d(M,{default:function(){return ie}});var re=e(34895),Z=e(28216),oe=e(67294),y=e(84059),le=e(34711),S=e.n(le),pe=e(37406),i=e(85893),N,g,ie=(N=(0,Z.$j)(D=>{var m=D.common;return{common:m}}),N(g=class extends oe.PureComponent{constructor(){super(...arguments);this.state={modelZindex:100,fullScreen:!1,current:1,total:0,target:{},getInfoLoading:!0,viewUrl:""}}componentDidMount(){var m=this}render(){var m=this,o=m.props,F=o.dispatch,v=o.common,c=o.open,H=o.setOpenModel,de=o.videoOption,U=o.qrcodeUrl,b=U===void 0?"":U,n=o.issmall,j=o.showIndex,_e=v.sourceID,me=v.shareCode,u=this.state,w=u.modelZindex,L=u.fileInfo,z=L===void 0?{}:L,d=u.fullScreen,ce=u.getInfoLoading,Ee=u.viewUrl,G=O=>{m.setState({modelZindex:O})},he=(O,J)=>{var V=O.current,Y=O.total;m.setState({current:V,total:Y,target:J})};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(re.Z,{open:c,issmall:n,showIndex:j,modelZindex:w,setOpenModel:H,setModelZindex:G,type:"qrcode",isFull:!1,title:z.name,children:(0,i.jsx)("div",{className:S().qrcodemodalbox,children:(0,i.jsx)(y.ZP,{size:200,value:b})})})})}})||g)},68826:function(h,M,e){h.exports=e.p+"static/logo.548e1ea0.png"}}]);
