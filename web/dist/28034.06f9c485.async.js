(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[28034],{29654:function(Q){Q.exports={userAvatar:"userAvatar___1BBkO",accountBox:"accountBox___c_PWM",active:"active___9TeKV",userOperate:"userOperate___2kfoF",thirdLogin:"thirdLogin___1IgAt",scanModal:"scanModal___Bzou3",dingChangePwd:"dingChangePwd___38J_e",wwChangePwd:"wwChangePwd___281fR",wechatChangePwd:"wechatChangePwd___1YZir",wwBind:"wwBind___1XJtA"}},43327:function(Q){Q.exports={err:"err___3m0R2",authmodalboxs:"authmodalboxs___1EHcK"}},15792:function(Q){Q.exports={err:"err___sqMYG"}},30879:function(Q){Q.exports={personal:"personal___Bccqp",selfInfo:"selfInfo___1v_MT",info:"info___23Vph",detail:"detail___3tA-Y"}},42139:function(Q,ue,t){"use strict";var z=t(11849),J=t(39428),Se=t(3182),ie=t(57663),x=t(71577),Ee=t(67294),ne=t(30672),f=t(85473),h=t(16894),q=t(37476),F=t(71975),ve=t(1977),P=t(85893),he=l=>{var Y=(0,ne.YB)(),e=(0,ne.v9)(ye=>ye.common),ge=e.isMobile,oe=l.rowKey,le=oe===void 0?"":oe,N=l.dragSortKey,ee=l.isLoading,k=ee===void 0?!1:ee,ae=l.columns,fe=ae===void 0?[]:ae,Pe=l.data,O=Pe===void 0?[]:Pe,Ze=l.scroll,c=Ze===void 0?{x:768}:Ze,S=l.toolbar,I=l.toolbarTitle,de=l.toolbarAuth,Le=l.toolBarRender,pe=l.pagination,Je=l.pageChange,He=l.rowClassName,Xe=l.rowSelection,$e=l.canDragSort,R=$e===void 0?!1:$e,G=l.handleDragSortEnd,_e=l.triggerClick,Oe=l.modalType,Ie=l.modalWidth,Qe=Ie===void 0?550:Ie,qe=l.title,ea=l.visible,ha=l.setVisible,V=l.modalChildren,we=l.afterClose,Te=l.finish,xe=l.isSubmitLoading,Ue=xe===void 0?!1:xe,We={title:qe,width:ge&&Oe!="modal"?"100%":Qe,scrollToFirstError:!0,visible:ea,onVisibleChange:ha,children:V,trigger:(0,P.jsx)(x.Z,{type:"primary",icon:(0,P.jsx)(ve.Z,{}),disabled:de!==void 0?!de:!1,onClick:_e,children:I||Y.formatMessage({id:"common.add"})}),submitter:{submitButtonProps:{loading:Ue}},modalProps:{destroyOnClose:!0,maskClosable:!1,afterClose:we},drawerProps:{destroyOnClose:!0,maskClosable:!1,onClose:we,className:"selfDrawer",push:{distance:0}},onFinish:function(){var ye=(0,Se.Z)((0,J.Z)().mark(function Re(Ke){return(0,J.Z)().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.abrupt("return",Te(Ke));case 1:case"end":return be.stop()}},Re)}));function aa(Re){return ye.apply(this,arguments)}return aa}()},Ne={className:"selfTable",loading:k,rowKey:le,columns:fe,dataSource:O,scroll:c,rowClassName:He,rowSelection:Xe,pagination:pe?(0,z.Z)((0,z.Z)({},pe),{},{current:pe==null?void 0:pe.currentPage,showSizeChanger:!0}):!1,onChange:Je,headerTitle:S?Oe==="modal"?(0,P.jsx)(q.Y,(0,z.Z)({},We)):(0,P.jsx)(F.a,(0,z.Z)({},We)):!1,toolBarRender:Le};return R&&!ge?(0,P.jsx)(f.Z,(0,z.Z)((0,z.Z)({},Ne),{},{size:"small",search:!1,options:!1,tableAlertRender:!1,dragSortKey:N,onDragSortEnd:G})):(0,P.jsx)(h.ZP,(0,z.Z)((0,z.Z)({},Ne),{},{size:"small",search:!1,options:!1,tableAlertRender:!1}))};ue.Z=he},77796:function(Q,ue,t){"use strict";var z=t(13062),J=t(71230),Se=t(89032),ie=t(15746),x=t(90387),Ee=t(89991),ne=t(2824),f=t(67294),h=t(30672),q=t(30381),F=t.n(q),ve=t(34540),P=t(85893),he=l=>{var Y=(0,h.YB)(),e=l.marginBtm10,ge=l.defaultVal,oe=l.timeChange,le=l.isTimeStamp,N=(0,f.useState)(ge||"nearlySevenDays"),ee=(0,ne.Z)(N,2),k=ee[0],ae=ee[1],fe=[{label:Y.formatMessage({id:"admin.today"}),value:"today"},{label:Y.formatMessage({id:"admin.yesterday"}),value:"yesterday"},{label:Y.formatMessage({id:"admin.weekDay"}),value:"nearlySevenDays"},{label:Y.formatMessage({id:"admin.monthDay"}),value:"theLastThirtyDays"},{label:Y.formatMessage({id:"common.all"}),value:"all"},{label:Y.formatMessage({id:"common.diy"}),value:"userDefined"}],Pe=c=>{var S=c.getFullYear(),I=c.getMonth()+1>9?c.getMonth()+1:"0"+(c.getMonth()+1),de=c.getDate()>9?c.getDate():"0"+c.getDate();return"".concat(S,"-").concat(I,"-").concat(de)},O=c=>{var S=new Date,I=new Date;return c===1?(S.setTime(S.getTime()-24*60*60*1e3),I.setTime(I.getTime()-24*60*60*1e3)):c>=0&&(S.setTime(S.getTime()-24*60*60*1e3*c),I.setTime(I.getTime())),{timeFrom:c==="all"?void 0:le?parseInt(F()(S).startOf("day").format("X")):Pe(S),timeTo:c==="all"?void 0:le?parseInt(F()(I).endOf("day").format("X")):Pe(I)}},Ze=c=>{var S={};switch(c){case"today":S=O(0);break;case"yesterday":S=O(1);break;case"nearlySevenDays":S=O(7);break;case"theLastThirtyDays":S=O(30);break;case"all":S=O("all");default:break}ae(c),Object.keys(S).length&&oe(S)};return(0,f.useEffect)(()=>{Ze(k)},[]),(0,P.jsxs)(J.Z,{gutter:[10,10],style:{marginBottom:e?10:0},children:[(0,P.jsx)(ie.Z,{children:(0,P.jsx)(Ee.Z,{options:fe,value:k,onChange:Ze})}),k==="userDefined"?(0,P.jsx)(ie.Z,{children:(0,P.jsx)(ve.Z,{fieldProps:{onChange:(c,S)=>{var I=c?c[0]._d:"",de=c?c[1]._d:"";oe({timeFrom:le?I?parseInt(F()(I).startOf("day").format("X")):void 0:S[0],timeTo:le?de?parseInt(F()(de).endOf("day").format("X")):void 0:S[1]})}}})}):(0,P.jsx)(P.Fragment,{})]})};ue.Z=he},28034:function(Q,ue,t){"use strict";t.r(ue),t.d(ue,{default:function(){return et}});var z=t(18106),J=t(95562),Se=t(13254),ie=t(14277),x=t(11849),Ee=t(94233),ne=t(51890),f=t(67294),h=t(30672),q=t(82242),F=t(5171),ve=t.n(F),P=t(37406),he=t(79992),l=t(2824),Y=t(64183),e=t(85893),ge=()=>{var v=(0,h.v9)(y=>y.personal),g=v.loginDeviceStat,Z=(0,f.useState)([]),w=(0,l.Z)(Z,2),T=w[0],B=w[1],E={0:"PC",1:"APP",2:"H5"};(0,f.useEffect)(()=>{if(g.length){var y=new Date,M=y.setDate(y.getDate()-1),b=new Array(30).fill(0).map((n,o)=>new Date(M-o*(24*60*60*1e3)).toLocaleDateString().replaceAll("/","-")).reverse(),L=[],$=g[0],_=g[1],i=g[2],a=[$,i,_];a==null||a.map((n,o)=>{n==null||n.map((W,H)=>{var re={date:b[H],value:W,category:E[o]};L=[...L,re]})}),B(L)}},[JSON.stringify(g)]);var U={height:370,data:T,smooth:!0,xField:"date",yField:"value",seriesField:"category",color:["#89ca8d","#6ba9f7","#bd8dff"],legend:{position:"bottom"},yAxis:{grid:{line:{style:{stroke:"#f0efef",lineDash:[4,5]}}}}};return(0,e.jsx)(Y.Z,(0,x.Z)({},U))},oe=ge,le=t(62350),N=t(24565),ee=t(43185),k=t(11324),ae=t(39428),fe=t(3182),Pe=t(57663),O=t(71577),Ze=t(34792),c=t(48086),S=t(952),I=t(5966),de=t(86615),Le=t(37476),pe=t(38819),Je=t(84391),He=t(43439),Xe=t(85304),$e=t(29654),R=t.n($e),G="personal",_e="",Oe=(0,h.Kd)()=="en-US"?"en":"zh",Ie=(0,h.Kd)()=="en-US"?"en":"cn",Qe=()=>{var v,g,Z,w,T,B,E,U,y,M,b,L,$,_,i,a=(0,h.YB)(),n=(0,f.useRef)(),o=(0,h.I0)(),W=(0,h.tT)("@@initialState"),H=W.initialState,re=H.currentUser,s=re===void 0?{}:re,Me=H.systemInfo,A=Me===void 0?{}:Me,me=W.setInitialState,De=W.refresh,Ce=(0,h.v9)(r=>(0,x.Z)({},r[G])),Ve=s.config,na=Ve===void 0?{}:Ve,Ma=na.passwordState,ja=Ma===void 0?"1":Ma,Pa=Ce.scanCodeVisible,oa=Pa===void 0?!1:Pa,Za=Ce.scanCodeAsscess,la=Za===void 0?!1:Za,wa=Ce.sig,at=Ce.openIdType,tt=(0,f.useState)(""),ba=(0,l.Z)(tt,2),Be=ba[0],Ye=ba[1],st=(0,f.useState)([]),Da=(0,l.Z)(st,2),K=Da[0],rt=Da[1],it=(0,f.useState)(""),Ca=(0,l.Z)(it,2),Ge=Ca[0],Sa=Ca[1],nt=(0,f.useState)(!1),Ea=(0,l.Z)(nt,2),da=Ea[0],ot=Ea[1],lt=(0,f.useState)(!1),La=(0,l.Z)(lt,2),ca=La[0],dt=La[1],ct={showUploadList:!1,accept:".jpeg,.jpg,.png",beforeUpload:r=>{var m=r.type==="image/jpeg"||r.type==="image/jpg"||r.type==="image/png",d=r.size/1024/1024<1;return m||c.ZP.error("".concat(a.formatMessage({id:"admin.setting.onlyUpload"}),"JPG/PNG")),d||c.ZP.error("".concat(a.formatMessage({id:"admin.setting.noMore"}),"1MB")),m&&d}},ut=r=>{Sa(r)},vt=[{key:"nickname",title:a.formatMessage({id:"common.nickName"}),label:s==null||(v=s.user)===null||v===void 0?void 0:v.nickname,operate:(0,e.jsx)(I.Z,{width:240,name:"nickname",initialValue:s==null||(g=s.user)===null||g===void 0?void 0:g.nickname,fieldProps:{showCount:!0,maxLength:30}})},{key:"sex",title:a.formatMessage({id:"common.sex"}),label:s!=null&&(Z=s.user)!==null&&Z!==void 0&&Z.sex?a.formatMessage({id:"common.male"}):a.formatMessage({id:"common.female"}),operate:(0,e.jsx)(de.Z.Group,{name:"sex",initialValue:s==null||(w=s.user)===null||w===void 0?void 0:w.sex,options:[{label:a.formatMessage({id:"common.female"}),value:0},{label:a.formatMessage({id:"common.male"}),value:1}]})},{key:"email",title:a.formatMessage({id:"app.settings.basic.email"}),label:s==null||(T=s.user)===null||T===void 0?void 0:T.email,operate:(0,e.jsx)(I.Z,{width:240,name:"email",initialValue:s==null||(B=s.user)===null||B===void 0?void 0:B.email})},{key:"phone",title:a.formatMessage({id:"common.phone"}),label:s==null||(E=s.user)===null||E===void 0?void 0:E.phone,operate:(0,e.jsx)(I.Z,{width:240,name:"phone",initialValue:s==null||(U=s.user)===null||U===void 0?void 0:U.phone})},{key:"password",title:a.formatMessage({id:"common.password"}),label:(0,e.jsx)("span",{style:{color:"#aaa",cursor:"pointer"},children:a.formatMessage({id:"user.clickEditPwd"})}),operate:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("input",{type:"password",style:{opacity:0,position:"absolute",width:0,height:0}}),(0,e.jsx)(I.Z.Password,{width:240,name:"password",placeholder:a.formatMessage({id:"admin.setting.pwdOld"}),fieldProps:{maxLength:30},disabled:la,addonAfter:la?(0,e.jsx)(pe.Z,{style:{color:"#52c41a",fontSize:16}}):K!=null&&K.length&&((s==null||(y=s.user)===null||y===void 0?void 0:y.dingOpenId)=="1"||(s==null||(M=s.user)===null||M===void 0?void 0:M.enWechatOpenId)=="1"||(s==null||(b=s.user)===null||b===void 0?void 0:b.wechatOpenId)=="1")?(0,e.jsx)(Le.Y,{width:400,title:a.formatMessage({id:"personal-scanCode"}),visible:oa,onVisibleChange:r=>o({type:"".concat(G,"/update"),payload:{scanCodeVisible:r}}),submitter:!1,trigger:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(O.Z,{type:"link",size:"small",children:a.formatMessage({id:"personal-toVerify"})}),ja=="1"?"":(0,e.jsxs)("span",{children:["\uFF08",a.formatMessage({id:"personal-noneedPassword"})," \uFF09"]})]}),modalProps:{wrapClassName:R().scanModal,maskClosable:!1,bodyStyle:{paddingTop:0,textAlign:"center"}},children:(0,e.jsxs)(J.Z,{onChange:ut,children:[K!=null&&K.find(r=>r.key=="dingding")&&(s==null||(L=s.user)===null||L===void 0?void 0:L.dingOpenId)=="1"?(0,e.jsxs)(J.Z.TabPane,{tab:a.formatMessage({id:"app.settings.notification.dingding"}),children:[(0,e.jsx)("div",{id:"dingChangePwd",className:R().dingChangePwd}),a.formatMessage({id:"personal-dingConfirm"})]},"dingding"):(0,e.jsx)(e.Fragment,{}),K!=null&&K.find(r=>r.key=="enWechat")&&(s==null||($=s.user)===null||$===void 0?void 0:$.enWechatOpenId)=="1"?(0,e.jsx)(J.Z.TabPane,{tab:a.formatMessage({id:"app.settings.notification.wechat"}),children:(0,e.jsx)("div",{id:"wwChangePwd",className:R().wwChangePwd})},"enWechat"):(0,e.jsx)(e.Fragment,{}),K!=null&&K.find(r=>r.key=="wechat")&&(s==null||(_=s.user)===null||_===void 0?void 0:_.wechatOpenId)=="1"?(0,e.jsx)(J.Z.TabPane,{tab:a.formatMessage({id:"common.wechat"}),children:(0,e.jsx)("div",{id:"wechatChangePwd",className:R().wechatChangePwd})},"wechat"):(0,e.jsx)(e.Fragment,{})]})}):(0,e.jsx)(O.Z,{type:"link",size:"small",onClick:()=>c.ZP.info(a.formatMessage({id:"personal-contactAdmin"})),children:a.formatMessage({id:"personal-toVerify"})})}),(0,e.jsx)(I.Z.Password,{width:240,name:"newPassword",placeholder:a.formatMessage({id:"user.inputNewPwd"}),fieldProps:{maxLength:30}}),(0,e.jsx)(I.Z.Password,{width:240,name:"newPasswordConfirm",placeholder:a.formatMessage({id:"user.inputPwdAgain"}),fieldProps:{maxLength:30}})]})}],gt=function(){var r=(0,fe.Z)((0,ae.Z)().mark(function m(){return(0,ae.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,Xe.rB)({});case 2:h.m8.push("/login");case 3:case"end":return u.stop()}},m)}));return function(){return r.apply(this,arguments)}}(),mt=function(){var r=(0,fe.Z)((0,ae.Z)().mark(function m(d,u){var j,D,C,X,ce,te,ua,va,Ia,ga,Ta,Ua,je;return(0,ae.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(C=u=="sex"?d[u]:u=="password"?(j=d.newPassword)===null||j===void 0?void 0:j.trim():(D=d[u])===null||D===void 0?void 0:D.trim(),!(u=="nickname"&&!C)){p.next=3;break}return p.abrupt("return",c.ZP.warning(a.formatMessage({id:"user.inputNickName"})));case 3:if(u!="email"){p.next=9;break}if(C){p.next=6;break}return p.abrupt("return",c.ZP.warning(a.formatMessage({id:"user.inputEmail"})));case 6:if(X=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,X.test(C)){p.next=9;break}return p.abrupt("return",c.ZP.warning(a.formatMessage({id:"user.invalidemail"})));case 9:if(u!="phone"){p.next=15;break}if(C){p.next=12;break}return p.abrupt("return",c.ZP.warning(a.formatMessage({id:"user.inputPhone"})));case 12:if(ce=/^1(3|4|5|6|7|8|9)\d{9}$/,ce.test(C)){p.next=15;break}return p.abrupt("return",c.ZP.warning(a.formatMessage({id:"user.invalidephone"})));case 15:if(u!="password"){p.next=39;break}if(va=A==null?void 0:A.passwordRule,Ia=(te=d.password)===null||te===void 0?void 0:te.trim(),ga=(ua=d.newPasswordConfirm)===null||ua===void 0?void 0:ua.trim(),!(!la&&!Ia&&ja=="1")){p.next=21;break}return p.abrupt("return",c.ZP.warning(a.formatMessage({id:"user.inputOldPwd"})));case 21:if(C){p.next=23;break}return p.abrupt("return",c.ZP.warning(a.formatMessage({id:"user.inputNewPwd"})));case 23:if(ga){p.next=25;break}return p.abrupt("return",c.ZP.warning(a.formatMessage({id:"user.inputPwdAgain"})));case 25:if(C===ga){p.next=27;break}return p.abrupt("return",c.ZP.warning(a.formatMessage({id:"user.rootPwdEqual"})));case 27:if(!(C.length<6)){p.next=29;break}return p.abrupt("return",c.ZP.warning(a.formatMessage({id:"admin.setting.passwordRuleNoneWarring"})));case 29:if(va!="strong"){p.next=35;break}if(Ta=/^(?=.*[a-z])(?=.*\d)[^]{6,30}$/,Ta.test(C)){p.next=33;break}return p.abrupt("return",c.ZP.warning(a.formatMessage({id:"admin.setting.passwordRuleStrongDesc"})));case 33:p.next=39;break;case 35:if(va!="strongMore"){p.next=39;break}if(Ua=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{6,30}$/,Ua.test(C)){p.next=39;break}return p.abrupt("return",c.ZP.warning(a.formatMessage({id:"admin.setting.passwordRuleStrongMoreDesc"})));case 39:je={key:u,value:C},u=="password"&&(wa?je=(0,x.Z)((0,x.Z)({},je),{},{openIdType:at,sig:wa,value:(0,P.HI)(C)}):je=(0,x.Z)((0,x.Z)({},je),{},{password:(0,P.HI)(d.password),value:(0,P.HI)(C)})),console.log("-----finish",je),o({type:"".concat(G,"/setUserInfo"),payload:je,callback:()=>{var ma;Ye(""),n==null||(ma=n.current)===null||ma===void 0||ma.resetFields(),u=="password"?(c.ZP.success(a.formatMessage({id:"admin.password.toLogin"})),setTimeout(()=>{me(ht=>(0,x.Z)((0,x.Z)({},ht),{},{currentUser:void 0})),gt()},3e3)):(c.ZP.success(a.formatMessage({id:"explorer.success"})),De())}});case 43:case"end":return p.stop()}},m)}));return function(d,u){return r.apply(this,arguments)}}(),Oa=(r,m)=>{o({type:"".concat(G,"/update"),payload:{scanCodeVisible:!1,scanCodeAsscess:!0,openIdType:r,sig:m}}),c.ZP.success(a.formatMessage({id:"personal-verifySuccess"}))};return(0,f.useEffect)(()=>{var r,m,d,u,j=A==null||(r=A.thirdLoginConfig)===null||r===void 0||(m=r.filter(D=>D.thirdName!=="qq"&&D.thirdName!=="cube"))===null||m===void 0?void 0:m.map(D=>{var C,X,ce;return{key:D.thirdName,title:D.thirdName=="qq"?"QQ":a.formatMessage({id:D.thirdName=="dingding"?"app.settings.notification.dingding":D.thirdName=="wechat"?"common.wechat":D.thirdName=="enWechat"?"app.settings.notification.wechat":"explorer.noData"}),isBind:D.thirdName=="dingding"?(s==null||(C=s.user)===null||C===void 0?void 0:C.dingOpenId)=="1":D.thirdName=="enWechat"?(s==null||(X=s.user)===null||X===void 0?void 0:X.enWechatOpenId)=="1":D.thirdName=="wechat"?(s==null||(ce=s.user)===null||ce===void 0?void 0:ce.wechatOpenId)=="1":void 0}});rt(j),Sa(j!=null&&j.find(D=>D.key=="dingding")&&(s==null||(d=s.user)===null||d===void 0?void 0:d.dingOpenId)=="1"?"dingding":j!=null&&j.find(D=>D.key=="enWechat")&&(s==null||(u=s.user)===null||u===void 0?void 0:u.enWechatOpenId)=="1"?"enWechat":"wechat")},[A==null?void 0:A.thirdLoginConfig]),(0,f.useEffect)(()=>{if(oa)if(Ge=="dingding"){var r="".concat(location.origin,"/api/ding/login/callback");window.DTFrameLogin({id:"dingChangePwd",width:280,height:280},{redirect_uri:encodeURIComponent(r),client_id:A.dingClientId,scope:"openid",response_type:"code",state:"changePwd",prompt:"consent"},function(){var m=(0,fe.Z)((0,ae.Z)().mark(function d(u){var j,D,C,X;return(0,ae.Z)().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(j=u.authCode,!(j===_e||localStorage.getItem("dingAccess")=="0")){te.next=3;break}return te.abrupt("return");case 3:return _e=j,te.next=6,(0,h.WY)("/api/ding/login/callback",{method:"GET",params:{authCode:j,state:"changePwd"}});case 6:D=te.sent,C=D.data,X=C===void 0?{}:C,X.sig&&Oa(8,X.sig);case 9:case"end":return te.stop()}},d)}));return function(d){return m.apply(this,arguments)}}(),m=>{c.ZP.error(m)})}else Ge=="enWechat"?o({type:"".concat(G,"/getWechatData"),payload:{type:"7"},callback:m=>{var d=m.sig,u=m.agentId,j="".concat(location.origin,"/enwechat_login.html?type=changePwd&sig=").concat(d);new window.WwLogin({id:"wwChangePwd",login_type:"CorpApp",appid:"ww2d1e9bafb529c21f",agentid:u,self_redirect:!0,redirect_uri:encodeURIComponent(j),state:"changePwd",lang:Oe})}}):Ge=="wechat"&&o({type:"".concat(G,"/getWechatData"),payload:{type:"2"},callback:m=>{var d=m.appId,u=m.sig,j="https://dev.filesbox.cn/wechat_login.html?type=changePwd&cdnPath=".concat(window.location.origin,"&sig=").concat(u);new WxLogin({id:"wechatChangePwd",appid:d,scope:"snsapi_login,snsapi_userinfo",self_redirect:!0,redirect_uri:encodeURIComponent(j),state:"changePwd",lang:Ie})}})},[Ge,oa]),(0,f.useEffect)(()=>{var r=m=>{if(m.data&&typeof m.data=="string"){var d=JSON.parse(m.data),u=d.openIdType_sig,j=u===void 0?"":u,D=d.reload,C=D===void 0?!1:D;if(C&&window.location.reload(),j){var X=j.slice(0,1),ce=j.slice(2);Oa(parseInt(X),ce)}}};return window.addEventListener("message",r),()=>{window.removeEventListener("message",r)}},[]),(0,f.useEffect)(()=>()=>{o({type:"".concat(G,"/clear")})},[]),(0,f.useEffect)(()=>{ca&&o({type:"".concat(G,"/getWechatData"),payload:{type:"7"},callback:r=>{var m=r.sig,d=r.agentId,u="".concat(location.origin,"/enwechat_bind.html?token=").concat((0,P.ej)("token"),"&sig=").concat(m);new window.WwLogin({id:"wwBind",login_type:"CorpApp",appid:"ww2d1e9bafb529c21f",agentid:d,self_redirect:!0,redirect_uri:encodeURIComponent(u),state:"STATE",lang:Oe})}})},[ca]),(0,f.useEffect)(()=>{da&&o({type:"".concat(G,"/getWechatData"),payload:{type:"2"},callback:r=>{var m=r.appId,d=r.sig,u="https://dev.filesbox.cn/wechat_bind.html?token=".concat((0,P.ej)("token"),"&cdnPath=").concat(window.location.origin,"&sig=").concat(d);new WxLogin({id:"wechatBind",appid:m,scope:"snsapi_login,snsapi_userinfo",self_redirect:!0,redirect_uri:encodeURIComponent(u),state:"xxxx",lang:Ie})}})},[da]),(0,e.jsxs)("div",{className:R().accountBox,children:[(0,e.jsxs)(k.Z,(0,x.Z)((0,x.Z)({},ct),{},{customRequest:r=>{var m=new FormData;m.append("file",r.file),m.append("busType","image"),o({type:"setting/upload",payload:m,callback:d=>{var u=d.data.path;o({type:"".concat(G,"/setUserInfo"),payload:{key:"avatar",value:u},callback:()=>{c.ZP.success(a.formatMessage({id:"explorer.success"})),De()}})}})},children:[(0,e.jsx)(ne.C,{className:R().userAvatar,size:80,src:(s==null||(i=s.user)===null||i===void 0?void 0:i.avatar)||ve()}),(0,e.jsx)(O.Z,{size:"small",icon:(0,e.jsx)(Je.Z,{}),children:a.formatMessage({id:"app.settings.basic.change-avatar"})})]})),(0,e.jsx)("ul",{children:vt.map((r,m)=>(0,e.jsxs)("li",{onClick:()=>{Ye(r.key)},className:r.key==Be?R().active:"",children:[(0,e.jsx)("div",{children:r.title}),(0,e.jsxs)("div",{className:R().userOperate,style:{display:r.key!==Be?"flex":"none"},children:[(0,e.jsx)("div",{children:r==null?void 0:r.label}),(0,e.jsx)("div",{children:(0,e.jsx)(O.Z,{type:"link",size:"small",children:a.formatMessage({id:"common.edit"})})})]}),(0,e.jsxs)("div",{className:R().userOperate,style:{display:r.key==Be?"flex":"none"},children:[(0,e.jsx)("div",{children:(0,e.jsx)(S.ZP,{formRef:n,children:r.operate,onFinish:d=>mt(d,r.key),submitter:{render:d=>[(0,e.jsx)(O.Z,{type:"primary",onClick:()=>{var u,j;return(u=d.form)===null||u===void 0||(j=u.submit)===null||j===void 0?void 0:j.call(u)},children:a.formatMessage({id:"common.ok"})}),(0,e.jsx)(O.Z,{onClick:u=>{Ye(""),u.stopPropagation()},children:a.formatMessage({id:"common.cancel"})})]}})}),(0,e.jsx)("div",{children:(0,e.jsx)(He.Z,{style:{fontSize:20},onClick:d=>{Ye(""),d.stopPropagation()}})})]})]},m))}),K!=null&&K.length?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h4",{className:"selfTitle borderBtm",children:a.formatMessage({id:"admin.setting.thirdLogin"})}),(0,e.jsx)("ul",{className:R().thirdLogin,children:K.map((r,m)=>(0,e.jsxs)("li",{className:r.key==Be?R().active:"",children:[(0,e.jsx)("div",{children:r.title}),(0,e.jsxs)("div",{className:R().userOperate,style:{display:r.key!==Be?"flex":"none"},children:[r.key!=="dingding"?(0,e.jsx)("div",{children:r.isBind?(0,e.jsx)(N.Z,{title:a.formatMessage({id:"user.ifUnbind"}),onCancel:d=>d==null?void 0:d.stopPropagation(),onConfirm:d=>{d==null||d.stopPropagation(),(r.key=="wechat"||r.key=="enWechat")&&o({type:"".concat(G,"/wechatUnbind"),payload:{type:r.key=="wechat"?"2":"7"},callback:()=>{c.ZP.success(a.formatMessage({id:"explorer.success"})),De()}})},children:(0,e.jsx)(O.Z,{type:"link",size:"small",onClick:d=>d.stopPropagation(),children:a.formatMessage({id:"admin.log.delBind"})})},"unbind"):r.key=="wechat"?(0,e.jsx)(Le.Y,{width:340,submitter:!1,visible:da,onVisibleChange:ot,trigger:(0,e.jsx)(O.Z,{type:"link",size:"small",children:a.formatMessage({id:"user.clickBind"})}),children:(0,e.jsx)("div",{id:"wechatBind",className:R().wechatBind})}):r.key=="enWechat"?(0,e.jsx)(Le.Y,{width:360,submitter:!1,visible:ca,onVisibleChange:dt,trigger:(0,e.jsx)(O.Z,{type:"link",size:"small",children:a.formatMessage({id:"user.clickBind"})}),children:(0,e.jsx)("div",{id:"wwBind",className:R().wwBind})}):(0,e.jsx)(O.Z,{type:"link",size:"small",children:a.formatMessage({id:"user.clickBind"})})}):(0,e.jsx)("div",{}),(0,e.jsx)("div",{children:(0,e.jsx)("span",{style:r.isBind?{}:{color:"#aaa"},children:a.formatMessage({id:r.isBind?"user.binded":"user.unbound"})})})]})]},m))})]}):(0,e.jsx)(e.Fragment,{})]})},qe=Qe,ea=t(97959),ha=t(49111),V=t(19650),we=t(42139),Te=t(77796),xe=t(27931),Ue="personal",We=()=>{var v=(0,h.YB)(),g=(0,h.I0)(),Z=(0,h.v9)(i=>(0,x.Z)((0,x.Z)({},i[Ue]),{},{loading:i.loading.effects["".concat(Ue,"/getPersonalLog")]})),w=Z.loading,T=w===void 0?!1:w,B=Z.page,E=Z.logList,U=(0,f.useState)({}),y=(0,l.Z)(U,2),M=y[0],b=y[1],L=[{title:v.formatMessage({id:"common.time"}),dataIndex:"createTime",width:"25%",render:(i,a)=>a.createTime?(0,P.tK)(a.createTime):"-"},{title:v.formatMessage({id:"common.system"}),dataIndex:"osName",width:"25%",render:(i,a)=>(0,e.jsxs)(V.Z,{children:[a.osName&&(0,xe.Vv)(a.osName),a.osName]})},{title:v.formatMessage({id:"explorer.toolbar.client"}),dataIndex:"browser",width:"25%",render:(i,a)=>(0,e.jsxs)(V.Z,{children:[a.browser&&(0,xe.ml)(a.browser),a.browser]})},{title:"IP ".concat(v.formatMessage({id:"common.address"})),dataIndex:"country",width:"25%",render:(i,a)=>"".concat(i," ").concat(a.network)}],$=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};g({type:"".concat(Ue,"/getPersonalLog"),payload:(0,x.Z)((0,x.Z)({currentPage:1,logType:"user.index.loginSubmit"},M),a)})},_=i=>{var a=i.current,n=i.pageSize;$({currentPage:a,pageSize:n})};return(0,f.useEffect)(()=>{var i;((i=Object.keys(M))===null||i===void 0?void 0:i.length)&&$()},[JSON.stringify(M)]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Te.Z,{defaultVal:"nearlySevenDays",marginBtm10:!0,timeChange:i=>b(i)}),(0,e.jsx)(we.Z,{rowKey:"id",isLoading:T,columns:L,data:E,scroll:null,pagination:B,pageChange:_,search:!1,toolbar:!1})]})},Ne=We,ye="personal",aa=()=>{var v=(0,h.YB)(),g=(0,h.I0)(),Z=(0,h.v9)(i=>(0,x.Z)((0,x.Z)({},i[ye]),{},{loading:i.loading.effects["".concat(ye,"/getPersonalLog")]})),w=Z.loading,T=w===void 0?!1:w,B=Z.devicePage,E=Z.deviceList,U=(0,f.useState)({}),y=(0,l.Z)(U,2),M=y[0],b=y[1],L=[{title:v.formatMessage({id:"common.name"}),dataIndex:"browser",width:"25%",render:(i,a)=>(0,e.jsxs)(V.Z,{children:[a.browser&&(0,xe.ml)(a.browser),a.browser]})},{title:v.formatMessage({id:"common.type"}),dataIndex:"osName",width:"25%",render:(i,a)=>(0,e.jsxs)(V.Z,{children:[a.osName&&(0,xe.Vv)(a.osName),a.osName]})},{title:v.formatMessage({id:"admin.index.lastLogin"}),dataIndex:"createTime",width:"25%",render:(i,a)=>a.createTime?(0,P.tK)(a.createTime):"-"},{title:"IP ".concat(v.formatMessage({id:"common.address"})),dataIndex:"country",width:"25%",render:(i,a)=>"".concat(i," ").concat(a.network)}],$=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};g({type:"".concat(ye,"/getPersonalLog"),payload:(0,x.Z)((0,x.Z)({type:"device",currentPage:1,logType:"user.index.loginSubmit"},M),a)})},_=i=>{var a=i.current,n=i.pageSize;$({currentPage:a,pageSize:n})};return(0,f.useEffect)(()=>{var i;((i=Object.keys(M))===null||i===void 0?void 0:i.length)&&$()},[JSON.stringify(M)]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Te.Z,{defaultVal:"nearlySevenDays",marginBtm10:!0,timeChange:i=>b(i)}),(0,e.jsx)(we.Z,{rowKey:"id",isLoading:T,columns:L,data:E,scroll:null,pagination:B,pageChange:_,search:!1,toolbar:!1})]})},Re=aa,Ke=t(19273),fa=t(15792),be=t.n(fa),Ae="personal",Aa=v=>{(0,Ke.Z)(v);var g=(0,h.YB)(),Z=(0,h.I0)(),w=(0,h.v9)(a=>(0,x.Z)((0,x.Z)({},a[Ae]),{},{loading:a.loading.effects["".concat(Ae,"/getUserLog")]})),T=w.loading,B=T===void 0?!1:T,E=w.userLogPage,U=w.userLogList,y=(0,f.useState)({}),M=(0,l.Z)(y,2),b=M[0],L=M[1],$=[{title:g.formatMessage({id:"common.time"}),dataIndex:"createTime",width:"25%",render:(a,n)=>n.createTime?(0,P.tK)(n.createTime):"-"},{title:g.formatMessage({id:"common.position"}),dataIndex:"createTime",width:"25%",render:(a,n)=>{var o;return(o=n.logDescVo)===null||o===void 0?void 0:o.pathDisplay}},{title:g.formatMessage({id:"common.status"}),dataIndex:"createTime",width:"25%",render:(a,n)=>{var o,W,H,re,s,Me=n.type=="file.upload"?g.formatMessage({id:"common.upload"}):g.formatMessage({id:"common.download"}),A=((o=n.logDescVo)===null||o===void 0?void 0:o.status)==2?g.formatMessage({id:"common.fail"}):g.formatMessage({id:"common.success"});return(0,e.jsxs)("span",{className:((W=n.logDescVo)===null||W===void 0?void 0:W.status)==2?be().err:"",children:[Me,A,((H=n.logDescVo)===null||H===void 0?void 0:H.status)==2&&(re=n.logDescVo)!==null&&re!==void 0&&re.remark?"\uFF1A".concat((s=n.logDescVo)===null||s===void 0?void 0:s.remark):""]})}},{title:g.formatMessage({id:"common.file"}),dataIndex:"createTime",width:"25%",render:(a,n)=>{var o;return(o=n.logDescVo)===null||o===void 0?void 0:o.pathName}}],_=()=>{Z({type:"".concat(Ae,"/getUserLog"),payload:(0,x.Z)({logType:"file.upload,explorer.index.zipDownload,explorer.index.fileOut,explorer.index.fileDownload"},b)})},i=a=>{var n=a.current,o=a.pageSize;Z({type:"".concat(Ae,"/update"),payload:{userLogPage:(0,x.Z)((0,x.Z)({},E),{},{currentPage:n,pageSize:o})}}),_()};return(0,f.useEffect)(()=>{var a;(a=Object.keys(b))!==null&&a!==void 0&&a.length&&(Z({type:"".concat(Ae,"/update"),payload:{userLogPage:(0,x.Z)((0,x.Z)({},E),{},{currentPage:1})}}),_())},[JSON.stringify(b)]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Te.Z,{defaultVal:"nearlySevenDays",marginBtm10:!0,timeChange:a=>L(a)}),(0,e.jsx)(we.Z,{rowKey:"id",isLoading:B,columns:$,data:U,scroll:null,pagination:E,pageChange:i,search:!1,toolbar:!1})]})},Ba=Aa,ft=t(66456),$a=t(5322),se=t(79508),_a=t(51964),Wa=t.n(_a),Na=t(43327),Ra=t.n(Na),ta="personal",Ka=v=>{(0,Ke.Z)(v);var g=(0,h.YB)(),Z=(0,h.I0)(),w=(0,h.v9)(i=>(0,x.Z)((0,x.Z)({},i[ta]),{},{loading:i.loading.effects["".concat(ta,"/getAuthList")]})),T=w.loading,B=T===void 0?!1:T,E=w.authList,U=E===void 0?[]:E,y=(0,f.useState)({}),M=(0,l.Z)(y,2),b=M[0],L=M[1],$=[{title:g.formatMessage({id:"admin.menu.auth"}),dataIndex:"a",className:"tablecolums",key:"a",render:(i,a)=>{var n=a.auth||"",o=n.split(",");return(0,e.jsxs)("div",{className:"authUser",children:[(0,e.jsx)("div",{className:"authcolor",style:{background:a.label}}),(0,e.jsx)("div",{className:"authname",children:a.roleName})]})}},{title:g.formatMessage({id:"admin.auth.show"}),dataIndex:"b",key:"b",render:(i,a)=>{var n=a.auth||"",o=n.split(",");return(0,e.jsx)("div",{children:o.indexOf("1")>-1&&(0,e.jsx)(se.Z,{style:{color:"#722ed1"}})})}},{title:g.formatMessage({id:"admin.auth.view"}),dataIndex:"c",key:"c",render:(i,a)=>{var n=a.auth||"",o=n.split(",");return(0,e.jsx)("div",{children:o.indexOf("3")>-1&&(0,e.jsx)(se.Z,{style:{color:"#722ed1"}})})}},{title:g.formatMessage({id:"admin.auth.download"}),dataIndex:"d",key:"d",render:(i,a)=>{var n=a.auth||"",o=n.split(",");return(0,e.jsx)("div",{children:o.indexOf("4")>-1&&(0,e.jsx)(se.Z,{style:{color:"#722ed1"}})})}},{title:g.formatMessage({id:"common.upload"}),dataIndex:"e",key:"e",render:(i,a)=>{var n=a.auth||"",o=n.split(",");return(0,e.jsx)("div",{children:o.indexOf("5")>-1&&(0,e.jsx)(se.Z,{style:{color:"#722ed1"}})})}},{title:g.formatMessage({id:"admin.auth.edit"}),dataIndex:"f",key:"f",render:(i,a)=>{var n=a.auth||"",o=n.split(",");return(0,e.jsx)("div",{children:o.indexOf("8")>-1&&(0,e.jsx)(se.Z,{style:{color:"#722ed1"}})})}},{title:g.formatMessage({id:"common.delete"}),dataIndex:"g",key:"g",render:(i,a)=>{var n=a.auth||"",o=n.split(",");return(0,e.jsx)("div",{children:o.indexOf("10")>-1&&(0,e.jsx)(se.Z,{style:{color:"#722ed1"}})})}},{title:g.formatMessage({id:"common.share"}),dataIndex:"h",key:"h",render:(i,a)=>{var n=a.auth||"",o=n.split(",");return(0,e.jsx)("div",{children:o.indexOf("11")>-1&&(0,e.jsx)(se.Z,{style:{color:"#722ed1"}})})}},{title:g.formatMessage({id:"admin.auth.comment"}),dataIndex:"i",key:"i",render:(i,a)=>{var n=a.auth||"",o=n.split(",");return(0,e.jsx)("div",{children:o.indexOf("12")>-1&&(0,e.jsx)(se.Z,{style:{color:"#722ed1"}})})}},{title:g.formatMessage({id:"explorer.panel.logName"}),dataIndex:"j",key:"j",render:(i,a)=>{var n=a.auth||"",o=n.split(",");return(0,e.jsx)("div",{children:o.indexOf("13")>-1&&(0,e.jsx)(se.Z,{style:{color:"#722ed1"}})})}},{title:g.formatMessage({id:"admin.auth.root"}),dataIndex:"k",key:"k",render:(i,a)=>{var n=a.auth||"",o=n.split(",");return(0,e.jsx)("div",{children:o.indexOf("14")>-1&&(0,e.jsx)(se.Z,{style:{color:"#722ed1"}})})}}],_=()=>{Z({type:"".concat(ta,"/getAuthList"),payload:{}})};return(0,f.useEffect)(()=>{_()},[]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:Ra().authmodalboxs,children:(0,e.jsxs)(Wa(),{children:[(0,e.jsx)($a.Z,{bordered:!0,columns:$,size:"small",pagination:!1,dataSource:U}),(0,e.jsx)("div",{style:{margin:"8px 12px",color:"#999"},children:g.formatMessage({id:"explorer.authNote"})})]})})})},Fa=Ka,pt=t(48736),ka=t(27049),xt=t(17462),sa=t(76772),yt=t(9715),ra=t(55843),Mt=t(22385),pa=t(45777),jt=t(47673),Fe=t(4107),xa=t(99165),za=t(93834),Va=t(50031),Ya=t(68231),ia=t(86504),Ga=t(20640),Ja=t.n(Ga),ya="personal",Ha=()=>{var v=(0,h.YB)(),g=(0,f.useRef)(null),Z=(0,f.useRef)(null),w=(0,h.I0)(),T=(0,h.v9)(y=>y[ya]),B="".concat(window.location.origin,"/webdav/private"),E="".concat(window.location.origin,"/webdav/favor"),U=(y,M)=>{var b;!y||(M==null||(b=M.current)===null||b===void 0||b.select(),Ja()(y,{debug:!0,message:v.formatMessage({id:"information-copyManually",defaultMessage:"\u8BF7\u624B\u52A8\u590D\u5236"})}),c.ZP.success(v.formatMessage({id:"information-copySuccess",defaultMessage:"\u590D\u5236\u6210\u529F"})))};return(0,f.useEffect)(()=>{},[]),(0,e.jsxs)("div",{children:[(0,e.jsxs)(ra.Z,{labelCol:{sm:10,md:9,lg:8,xl:6,xxl:5},labelWrap:!0,children:[(0,e.jsx)(ra.Z.Item,{label:"webdav ".concat(v.formatMessage({id:"common.address"}),"(").concat(v.formatMessage({id:"explorer.toolbar.myDocument"}),")"),children:(0,e.jsxs)(Fe.Z.Group,{compact:!0,children:[(0,e.jsx)(Fe.Z,{ref:g,value:B,style:{width:"calc(100% - 50px)"}}),(0,e.jsx)(pa.Z,{title:v.formatMessage({id:"explorer.copy"}),children:(0,e.jsx)(O.Z,{icon:(0,e.jsx)(xa.Z,{}),onClick:()=>U(B,g)})})]})}),(0,e.jsx)(ra.Z.Item,{label:v.formatMessage({id:"explorer.toolbar.fav"}),children:(0,e.jsxs)(Fe.Z.Group,{compact:!0,children:[(0,e.jsx)(Fe.Z,{ref:Z,value:E,style:{width:"calc(100% - 50px)"}}),(0,e.jsx)(pa.Z,{title:v.formatMessage({id:"explorer.copy"}),children:(0,e.jsx)(O.Z,{icon:(0,e.jsx)(xa.Z,{}),onClick:()=>U(E,Z)})})]})})]}),(0,e.jsx)("h4",{className:"selfTitle borderBtm",children:v.formatMessage({id:"webdav.help.title"})}),(0,e.jsx)(sa.Z,{message:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(V.Z,{direction:"vertical",style:{width:"100%"},children:[(0,e.jsxs)(V.Z,{align:"start",children:[(0,e.jsx)(za.Z,{className:"fontSize13"}),(0,e.jsx)("strong",{children:"Window:"}),v.formatMessage({id:"webdav.help.windows"})]}),(0,e.jsx)(sa.Z,{message:(0,e.jsxs)(e.Fragment,{children:[v.formatMessage({id:"webdav.help.windowsTips"})," ",(0,e.jsx)(O.Z,{size:"small",onClick:()=>{w({type:"".concat(ya,"/windowsCmdFile"),callback:y=>{var M=new Blob([y]),b=URL.createObjectURL(M),L=document.createElement("a");L.download="webdav.cmd",L.href=b,L.click(),URL.revokeObjectURL(b),L=null}})},children:v.formatMessage({id:"common.download"})})]}),className:"firstDown"}),(0,e.jsxs)(V.Z,{align:"start",children:[(0,e.jsx)(Va.Z,{style:{fontSize:15}}),(0,e.jsx)("strong",{children:"Mac:"})," ",v.formatMessage({id:"webdav.help.mac"})]}),(0,e.jsxs)(V.Z,{align:"start",children:[(0,e.jsx)(Ya.Z,{style:{fontSize:14}}),(0,e.jsxs)("strong",{children:[v.formatMessage({id:"webdav.help.others"}),":"]})," ",v.formatMessage({id:"webdav.help.othersdesc"})]})]})}),type:"success",className:"useIntro"}),(0,e.jsx)("h4",{className:"selfTitle borderBtm",children:v.formatMessage({id:"common.tipsDesc"})}),(0,e.jsx)(sa.Z,{message:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(V.Z,{direction:"vertical",children:[(0,e.jsxs)(V.Z,{align:"start",children:[(0,e.jsx)(ia.Z,{}),v.formatMessage({id:"webdav.meta.desc"})]}),(0,e.jsx)(ka.Z,{style:{margin:0}}),(0,e.jsxs)(V.Z,{align:"start",children:[(0,e.jsx)(ia.Z,{}),(0,e.jsxs)("strong",{children:[v.formatMessage({id:"webdav.tips.upload"}),":"]})," ",v.formatMessage({id:"webdav.tips.uploadUser"})]}),(0,e.jsxs)(V.Z,{align:"start",children:[(0,e.jsx)(ia.Z,{}),(0,e.jsxs)("strong",{children:[v.formatMessage({id:"webdav.tips.auth"}),":"]})," ",v.formatMessage({id:"webdav.tips.authdesc"})]})]})}),className:"promptNote"})]})},Xa=Ha,Qa=t(30879),ke=t.n(Qa),ze="personal",qa=v=>{var g,Z,w,T,B,E,U,y,M,b,L,$,_,i,a,n,o=v.activeKey,W=(0,h.YB)(),H=(0,h.I0)(),re=(0,h.tT)("@@initialState"),s=re.initialState,Me=(0,h.v9)(na=>na[ze]),A=Me.userProportion,me=Me.loginDeviceStat,De=(s==null||(g=s.currentUser)===null||g===void 0||(Z=g.user)===null||Z===void 0?void 0:Z.sizeUse)/((s==null||(w=s.currentUser)===null||w===void 0||(T=w.user)===null||T===void 0?void 0:T.sizeMax)*1024*1024*1024||Infinity),Ce=[{key:"account",label:W.formatMessage({id:"user.account"}),children:(0,e.jsx)(qe,{})},{key:"wallpaper",label:W.formatMessage({id:"admin.setting.wallpaper",defaultMessage:"\u58C1\u7EB8"}),children:(0,e.jsx)(ea.Z,{})},{key:"log",label:W.formatMessage({id:"common.log"}),children:(0,e.jsx)(Ne,{})},{key:"device",label:W.formatMessage({id:"common.device"}),children:(0,e.jsx)(Re,{})},{key:"fileLog",label:W.formatMessage({id:"common.file"}),children:(0,e.jsx)(Ba,{})},{key:"authLog",label:W.formatMessage({id:"common.auth"}),children:(0,e.jsx)(Fa,{})},{key:"webdav",label:"WebDav",children:(0,e.jsx)(Xa,{})}],Ve={height:30,percent:De,barWidthRatio:.8,color:De>.9?["#f00","#f2f2f2"]:["#722ed1","#f2f2f2"],progressStyle:{radius:6}};return(0,f.useEffect)(()=>(H({type:"".concat(ze,"/getUserProportion")}),H({type:"".concat(ze,"/getLoginDeviceStat")}),()=>{H({type:"".concat(ze,"/clear")})}),[]),(0,e.jsxs)("div",{className:ke().personal,children:[(0,e.jsx)("div",{className:ke().selfInfo,children:(0,e.jsxs)("div",{className:ke().info,children:[(0,e.jsx)(ne.C,{size:90,src:(s==null||(B=s.currentUser)===null||B===void 0||(E=B.user)===null||E===void 0?void 0:E.avatar)||ve()}),(0,e.jsx)("h2",{children:s==null||(U=s.currentUser)===null||U===void 0||(y=U.user)===null||y===void 0?void 0:y.name}),(0,e.jsx)("h5",{children:s==null||(M=s.currentUser)===null||M===void 0||(b=M.user)===null||b===void 0?void 0:b.nickname}),(0,e.jsx)(q.Z,(0,x.Z)({},Ve)),(0,e.jsxs)("h6",{children:[W.formatMessage({id:"common.use"})," ",(0,P.NR)(s==null||(L=s.currentUser)===null||L===void 0||($=L.user)===null||$===void 0?void 0:$.sizeUse),"/",s!=null&&(_=s.currentUser)!==null&&_!==void 0&&(i=_.user)!==null&&i!==void 0&&i.sizeMax?"".concat(s==null||(a=s.currentUser)===null||a===void 0||(n=a.user)===null||n===void 0?void 0:n.sizeMax,"GB"):W.formatMessage({id:"admin.member.spaceTipsFull"})]}),A!=null&&A.length?(0,e.jsx)("div",{style:{marginTop:30},children:(0,e.jsx)(he.Z,{height:230,radius:1,fontSize:12,labelType:"outer",data:A})}):null,me!=null&&me.length?(0,e.jsx)("div",{style:{marginTop:30},children:(0,e.jsx)(oe,{})}):null,!(A!=null&&A.length)&&!(me!=null&&me.length)?(0,e.jsx)(ie.Z,{image:ie.Z.PRESENTED_IMAGE_SIMPLE}):null]})}),(0,e.jsx)(J.Z,{size:"large",className:ke().detail,defaultActiveKey:o||"account",items:Ce})]})},et=qa},79992:function(Q,ue,t){"use strict";var z=t(11849),J=t(67294),Se=t(30672),ie=t(96486),x=t.n(ie),Ee=t(20497),ne=t(63430),f=t(85893),h=q=>{var F=(0,Se.YB)(),ve=q.height,P=q.radius,he=q.fontSize,l=q.labelType,Y=q.data,e=Ee.G2.getEngine("canvas"),ge={1:F.formatMessage({id:"explorer.type.doc",defaultMessage:"\u6587\u6863"}),2:F.formatMessage({id:"explorer.type.image",defaultMessage:"\u56FE\u7247"}),3:F.formatMessage({id:"explorer.type.music",defaultMessage:"\u97F3\u4E50"}),4:F.formatMessage({id:"explorer.type.movie",defaultMessage:"\u89C6\u9891"}),5:F.formatMessage({id:"explorer.type.zip",defaultMessage:"\u538B\u7F29\u5305"}),6:F.formatMessage({id:"explorer.type.others",defaultMessage:"\u5176\u4ED6"})},oe={appendPadding:10,height:ve,angleField:"count",colorField:"name",color:["#7485e4","#6ba9f8","#ba89ff","#87c98a","#fea076","#ffc471"],radius:P,innerRadius:.5,legend:l=="spider"?!1:{layout:"horizontal",position:"bottom",itemSpacing:0,flipPage:!1},label:{visible:!0,type:l,labelHeight:l=="spider"?60:20,formatter:l=="spider"?(N,ee)=>{var k=new e.Group({});return k.addShape({type:"circle",attrs:{x:6,y:0,width:40,height:50,r:5,fill:ee.color}}),k.addShape({type:"text",attrs:{x:16,y:8,text:"".concat(N.name),fill:ee.color}}),k.addShape({type:"text",attrs:{x:0,y:25,text:"".concat(N.count,"\u4E2A ").concat((N.percent*100).toFixed(1),"%"),fill:"rgba(0, 0, 0, 0.65)",fontWeight:600}}),k}:N=>"".concat(N.name,": ").concat((N.percent*100).toFixed(1),"%"),style:{fontSize:he}},state:{active:{animate:{duration:100,easing:"easeLinear"},style:{lineWidth:1,stroke:"#722ed1"}}},pieStyle:{lineWidth:0},statistic:{title:!1,content:{content:""}},interactions:[{type:"element-selected"},{type:"element-active"}]},le=(0,J.useMemo)(()=>{var N=(0,ie.sortBy)(Y,["type"]),ee=N==null?void 0:N.map(k=>(0,z.Z)((0,z.Z)({},k),{},{name:ge[k.type]}));return(0,f.jsx)(ne.Z,(0,z.Z)({data:ee},oe))},[JSON.stringify(Y)]);return le};ue.Z=h}}]);
