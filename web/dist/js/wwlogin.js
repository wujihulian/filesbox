(function(u,r){typeof exports=="object"&&typeof module!="undefined"?module.exports=r():typeof define=="function"&&define.amd?define(r):(u=u||self).WwLogin=r()})(this,function(){"use strict";function u(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function r(o,i){for(var a=0;a<i.length;a++){var e=i[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}var l={sso:"/wwopen/sso/qrConnect",tww:"/login/wwLogin/sso/qrConnect",native:"/native/sso/qrConnect"};return function(){function o(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};u(this,o),n.version="1.2.4",this.options=n,this.url=this.getUrl(n),this.init(this.url)}var i,a,e;return i=o,(a=[{key:"init",value:function(n){this.options.is_mobile?window.location=n:this.createFrame(n)}},{key:"getUrl",value:function(n){var t=["login_type=jssdk"];for(var s in n)n[s]&&s!=="id"&&t.push("".concat(s,"=").concat(n[s]));n.business_type=n.business_type||"sso";var c=l[n.business_type];if(!c)throw new Error("Argument business_type not match. Current version is ".concat("1.2.4","."));return"".concat("https://open.work.weixin.qq.com").concat(c,"?").concat(t.join("&"))}},{key:"createFrame",value:function(n){var t=document.createElement("iframe"),s=document.getElementById(this.options.id);t.src=n,t.frameBorder="0",t.allowTransparency="true",t.scrolling="no",t.width="300px",t.height="400px",s.innerHTML="",s.appendChild(t),t.onload=function(){t.contentWindow.postMessage&&window.addEventListener&&(window.addEventListener("message",function(c){var d=c.data;typeof d=="string"&&/^http/.test(d)&&d&&/work.weixin.qq.com$/.test(c.origin)&&/https?:\/\//.test(c.data)&&(window.location.href=d)}),t.contentWindow.postMessage("ask_usePostMessage","*"))}}}])&&r(i.prototype,a),e&&r(i,e),o}()});
