(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[44214],{53099:function(f){f.exports={dcmmodalbox:"dcmmodalbox___1uqCb"}},61593:function(f,E,s){"use strict";s.r(E),s.d(E,{default:function(){return N}});var P=s(11849),W=s(34895),C=s(28216),x=s(67294),H=s(73935),R=s(68628),r=s(86618),J=s.n(r),g=s(40352),Q=s.n(g),n=s(75720),X=s.n(n),U=s(50840),w=s.n(U),h=s(82424),Y=s.n(h),p=s(34705),q=s.n(p),A=s(53099),T=s.n(A),j=s(37406),a=s(85893),u,M;n.external.cornerstone=r,n.external.cornerstoneMath=g,h.external.dicomParser=p,h.external.cornerstone=r,n.external.Hammer=w();var ee="https://rawgit.com/cornerstonejs/cornerstoneWebImageLoader/master/examples/Renal_Cell_Carcinoma.jpg",B={width:"100%",height:"100%",position:"relative",color:"white"},K={bottom:"5px",left:"5px",position:"absolute",color:"white"},S={bottom:"5px",right:"5px",position:"absolute",color:"white"};class $ extends x.Component{constructor(e){super(e);this.state={stack:e.stack,viewport:r.getDefaultViewport(null,void 0),imageId:e.stack.imageIds[e.stack.currentImageIdIndex||0],currentImageIdIndex:e.stack.currentImageIdIndex||0,infoList:[],infoListvisible:!1},this.onImageRendered=this.onImageRendered.bind(this),this.onNewImage=this.onNewImage.bind(this),this.onWindowResize=this.onWindowResize.bind(this),window.onWindowResizex=this.onWindowResize}render(){var e=this.state,t=e.currentImageIdIndex,i=e.infoList,d=i===void 0?[]:i;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"viewportElement",style:B,ref:o=>{this.element=o},children:[(0,a.jsx)("canvas",{className:"cornerstone-canvas"}),(0,a.jsxs)("div",{style:K,children:["Zoom: ",parseInt(this.state.viewport.scale*100)+"%"]}),(0,a.jsxs)("div",{style:S,children:["WW/WC: ",this.state.viewport.voi.windowWidth," / ",this.state.viewport.voi.windowCenter]}),this.state.infoListvisible&&(0,a.jsx)("div",{className:"infoListbox",children:d.map((o,l)=>(0,a.jsxs)("div",{className:"infoli",children:[(0,a.jsxs)("div",{className:"left",children:[o.name,"\uFF1A"]}),(0,a.jsx)("div",{className:"right",children:o.text})]},l))})]}),(0,a.jsx)("div",{onClick:o=>{o.preventDefault(),o.stopPropagation(),this.setState({infoListvisible:!this.state.infoListvisible})},className:this.state.infoListvisible?"infolistbtn infolistbtnactive":"infolistbtn",children:(0,a.jsx)(R.Z,{})})]})}onWindowResize(){!this.element||r.resize(this.element)}onImageRendered(){var e=r.getViewport(this.element);this.setState({viewport:e})}onNewImage(){var e=r.getEnabledElement(this.element);this.setState({imageId:e.image.imageId})}dumpDataSet(e){for(var t=["\u60A3\u8005\u59D3\u540D","\u60A3\u8005\u7F16\u53F7","\u60A3\u8005\u51FA\u751F\u65E5\u671F","\u60A3\u8005\u6027\u522B","\u60A3\u8005\u5E74\u9F84","\u60A3\u8005\u8EAB\u9AD8","\u60A3\u8005\u4F53\u91CD","\u5185\u5BB9\u65E5\u671F","\u5185\u5BB9\u65F6\u95F4"],i=["x00100010","x00100020","x00100030","x00100040","x00101010","x00101020","x00101030","x00080023","x00080033"],d=[],o=0;o<i.length;o++){var l=i[o],_=e.elements[l],v="";if(_!==void 0){var c=e.string(l);c!==void 0&&(v=c)}d.push({name:t[o],text:v})}this.setState({infoList:d})}componentDidMount(){var e=this.element;r.enable(e),r.loadAndCacheImage(this.state.imageId).then(t=>{r.displayImage(e,t),this.dumpDataSet(t.data);var i=this.props.stack;n.addStackStateManager(e,["stack"]),n.addToolState(e,"stack",i),n.mouseInput.enable(e),n.mouseWheelInput.enable(e),n.wwwc.activate(e,1),n.pan.activate(e,2),n.zoom.activate(e,4),n.zoomWheel.activate(e),n.touchInput.enable(e),n.panTouchDrag.activate(e),n.zoomTouchPinch.activate(e),e.addEventListener("cornerstoneimagerendered",this.onImageRendered),e.addEventListener("cornerstonenewimage",this.onNewImage),window.addEventListener("resize",this.onWindowResize)})}componentWillUnmount(){var e=this.element;e.removeEventListener("cornerstoneimagerendered",this.onImageRendered),e.removeEventListener("cornerstonenewimage",this.onNewImage),window.removeEventListener("resize",this.onWindowResize),r.disable(e)}componentDidUpdate(e,t){var i=n.getToolState(this.element,"stack");if(!!i){var d=i.data[0];d.currentImageIdIndex=this.state.stack.currentImageIdIndex,d.imageIds=this.state.stack.imageIds,n.addToolState(this.element,"stack",d)}}}var N=(u=(0,C.$j)(I=>{var e=I.common;return{common:e}}),u(M=class extends x.PureComponent{constructor(){super(...arguments);this.state={modelZindex:100,fullScreen:!1,current:1,total:0,target:{},getInfoLoading:!1,viewUrl:"",taskId:(0,j.fW)(),psddom:"",stack:{}}}componentDidMount(){var e=this,t=e.props,i=t.dcmList,d=i===void 0?[]:i,o=t.dcmActive,l=o===void 0?0:o,_=d.map(c=>"wadouri: "+location.origin+c.downloadUrl),v={imageIds:_,currentImageIdIndex:l};e.setState({stack:v,getInfoLoading:!0})}componentWillUnmount(){var e=this}render(){var e=this,t=e.props,i=t.dispatch,d=t.common,o=t.open,l=t.setOpenModel,_=t.videoOption,v=t.iframeUrl,c=t.iframeName,te=c===void 0?"":c,b=t.issmall,se=t.path,z=t.name,ne=t.fileType,ae=t.isZipModal,Z=t.showIndex,D=t.dcmList,oe=D===void 0?[]:D,L=t.dcmActive,ie=L===void 0?0:L,de=d.sourceID,re=d.shareCode,m=this.state,y=m.modelZindex,O=m.fileInfo,le=O===void 0?{}:O,me=m.fullScreen,k=m.getInfoLoading,ce=m.viewUrl,ve=m.taskId,_e=m.psddom,F=m.stack,V=G=>{e.setState({modelZindex:G})};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(W.Z,{open:o,issmall:b,modelZindex:y,setOpenModel:l,setModelZindex:V,type:"dcm",showIndex:Z,isFull:!!v,title:z,children:(0,a.jsx)("div",{className:T().dcmmodalbox,children:k&&(0,a.jsx)($,{stack:(0,P.Z)({},F)})})})})}})||M)},23848:function(){}}]);
