(function(l,g){var h=navigator.userAgent;if(!i||o)return!1;var f=l("html"),n=f.width()/10,a=parseFloat(f.css("fontSize")),r=n/a,e=n*r;t(),l(document).ready(function(){t(),setTimeout(function(){t()},300)});function t(){if(e==1)return!1;f.css("fontSize",n+"px"),l("meta[name=viewport]").attr("content","initial-scale="+r+", maximum-scale="+r+", minimum-scale="+r+", user-scalable=no")}function i(){return/(Android).*/i.test(h)}function o(){return/MiuiBrowser/ig.test(h)}})(jQuery,window),function(l,g){var h={init:function(){var f=this;f.getValue("token")&&(f.setCookie("token",f.getValue("token")),f.setCookie("openid",f.getValue("openid"))),g.location.href.indexOf("/mp/index.shtml")>-1||g.location.href.indexOf("/pages/routine/")>-1?(f.miniprogram=!0,localStorage.miniprogram=!0):(f.miniprogram=!1,localStorage.miniprogram=!1)},getValue:function(f){var n=n||window.location.href,a=n.split("?");if(a.length==1)return null;if(a.length==2){for(var o=a[1].split("&"),s={},r=0;r<o.length;r++){var e=o[r].split("=");s[e[0]]=e[1]}return s[f]?s[f]:!1}if(a.length==3){for(var o=a[1].split("&"),t=!1,s={},r=0,i=o.length;r<i;r++){var e=o[r].split("=");s[e[0]]=e[1],r+1==i&&e[0]==f&&(t=!0)}return s[f]?t?s[f]+"?"+a[2]:s[f]:!1}for(var o=a[1].split("&"),s={},r=0;r<o.length;r++){var e=o[r].split("=");s[e[0]]=e[1]}return s[f]?s[f]:!1},setCookie:function(f,n){var a=f+"="+n+";path=/";document.cookie=a}};h.init(),window.tokenjs=h}(jQuery,window),document.write('<script type="text/javascript" charset="utf-8" src="/design/designstatic/home/js/ase.min.js"></script>'),document.write('<link rel="stylesheet" href="/design/designstatic/common/css/userMobile.css">'),document.write('<link rel="stylesheet" href="/design/designstatic/home/iconfont/iconfont.css">'),document.write('<script type="text/javascript" charset="utf-8" src="//res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>'),document.write('<link rel="stylesheet" href="/design/designstatic/design/css/select2.min.css">'),document.write('<script type="text/javascript" charset="utf-8" src="/js/ddlogin.js"></script>'),document.write('<script type="text/javascript" charset="utf-8" src="/js/wwlogin.js"></script>'),document.write('<script type="text/javascript" charset="utf-8" src="/js/wxlogin.js"></script>'),document.write('<script type="text/javascript" charset="utf-8" src="/design/designstatic/home/waphome/js/layerMobile/layer.js"></script>'),document.write('<script type="text/javascript" charset="utf-8" src="/design/designstatic/common/js/jquery.qrcode.min.js"></script>');var scriptUrl="/design/designstatic/common/js/userMobile.js";loadScriptmin(scriptUrl,function(){var l=window.user,g=window.tokenjs,h=window.player,f={init:function(){if(g.getValue("errorCode")){var a=parseInt(g.getValue("errorCode")),r="";switch(a){case 602:r="\u975E\u7F51\u6821\u7528\u6237\u7981\u6B62\u767B\u5F55";break;case 606:r="\u5F53\u524D\u8D26\u53F7\u4E0D\u5B58\u5728";break;case 509:r="\u5DF2\u5F00\u542F\u8BBE\u5907\u9650\u5236\uFF0C\u60A8\u53EA\u80FD\u5728\u56FA\u5B9A\u8BBE\u5907\u4E0A\u8FDB\u884C\u767B\u5F55";break;case 601:r="\u5DF2\u7ED1\u5B9A\u5176\u4ED6\u8D26\u53F7";break;case 602:r="\u7528\u6237\u8D26\u53F7\u88AB\u9501\u5B9A";break;case 606:r="\u7528\u6237\u8D26\u53F7\u88AB\u5220\u9664";break;case 707:r="\u60A8\u5DF2\u88AB\u7981\u6B62\u767B\u5F55";break}r&&(layer?layer.open({content:r,skin:"msg",time:2}):alert(r)),window.history.replaceState(null,null,"/")}var e=this;e.getLoginUser(),setTimeout(function(){e.handleBtn()},0),g.getValue("redirectUrl")&&!getCookie("token")&&l.loginLayer(function(o){o.success&&(window.location.href=g.getValue("redirectUrl"))}),g.getValue("redirect")&&!getCookie("token")&&l.loginLayer(function(o){o.success&&(window.location.href=g.getValue("redirect")+"?cwid="+g.getValue("cwid")+"&courseId="+g.getValue("courseId"))});var t=localStorage.getItem("queryusernameloginShow");if(t&&Date.parse(new Date)-JSON.parse(unescape(t)).time<1e4){var i=JSON.parse(unescape(t));i.data=="1"?l.loginLayer():i.data=="2"&&l.getPasswordLayer(),localStorage.removeItem("queryusernameloginShow")}e.bindGoBuyCar()},getLoginUser:function(a){var r=this;getCookie("token")?l.isLogin(function(e){e.success?(r.loginUserData=e.data,r.login(e.data,e.timeStamp),a&&!l.loginAfterJump&&(e.data.userTypeExact=="STUDENT",window.location.href=window.basePath?"/"+window.basePath+"#/":"/#/")):r.carryStorageLogin()}):r.carryStorageLogin()},carryStorageLogin:function(){var a=this;if(localStorage.isSaveAPWordKey&&window.decrypt){var r=decrypt(localStorage.isSaveAPWordKey),e=JSON.parse(r),t=e.a,i=e.b,o=+e.t;Date.now()-o<3600*1e3*24*10&&l.login(t,i,function(s){if(s.success)a.getLoginUser(!0);else{var v=s.message;switch(parseInt(s.code)){case 200:v="\u5BC6\u7801\u6216\u8D26\u53F7\u4E0D\u6B63\u786E\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165";break;case 400:v="\u8BE5\u7F51\u6821\u9700\u8981\u4F7F\u7528\u9501\u5C4F\u6D4F\u89C8\u5668\u767B\u5F55";break;case 403:v="\u8D26\u53F7\u7C7B\u578B\u4E0D\u6B63\u786E";break;case 503:v="\u5DF2\u88AB\u9650\u5236\u767B\u5F55";break;case 707:v="\u60A8\u5DF2\u88AB\u7981\u6B62\u767B\u5F55";break}if(s.success){var p=s.data;if(p){var c=p.errCode;c=="4012"?v="\u8D85\u8FC7\u9650\u5236\u6B21\u6570"+p.limitCount+"\u6B21\uFF0C\u8BF7"+p.denyTime/60+"\u5206\u949F\u540E\u91CD\u8BD5":v="\u5BC6\u7801\u6216\u8D26\u53F7\u4E0D\u6B63\u786E\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165"}else v="\u5BC6\u7801\u6216\u8D26\u53F7\u4E0D\u6B63\u786E\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165"}window.layer?layer.msg(v,{icon:1}):alert(v)}})}},login:function(a,r){for(var e=this,t=$(".module[data-type=registerLogin]"),i=(a==null?void 0:a.user)||{},o=0,s=t.length;o<s;o++){var v=t.eq(o),p='<a href="'+(window.basePath?"/"+window.basePath+"#/":"/#/")+'" style="margin-right: 5px;overflow: hidden;text-overflow:ellipsis;white-space: nowrap;max-width: 50%;text-align: right;">'+escape(i.nickname||i.name||"")+'</a> | <span style="margin-left: 5px;white-space: nowrap;" class="quitBtn">\u9000\u51FA</span>';v.find(".box").html(p)}$(".quitBtn").on("click",function(){window.player.mobileVideoShow(!1),l.loginout(function(c){c.success&&window.location.reload()})})},handleBtn:function(){for(var a=this,r=$("[data-handle=login]"),e=0,t=r.length;e<t;e++){var i=r.eq(e);a.bindLoginBtnEvent(i)}for(var o=$("[data-type=registerLogin] .loginEvent"),e=0,t=o.length;e<t;e++){var i=o.eq(e);a.bindLoginBtnEvent(i)}for(var s=$("[data-handle=register]"),e=0,t=s.length;e<t;e++){var i=s.eq(e);a.bindRegisterEvent(i)}for(var v=$("[data-type=registerLogin] .registerEvent"),e=0,t=v.length;e<t;e++){var i=v.eq(e);a.bindRegisterEvent(i)}for(var p=$("[data-handle=registerSchool]"),e=0,t=p.length;e<t;e++){var i=p.eq(e);a.bindRegisterSchoolEvent(i)}for(var c=$("[data-handle=QQlogin]"),e=0,t=c.length;e<t;e++){var i=c.eq(e);a.bindQQloginEvent(i)}for(var b=$(".module[data-handle=wechatLogin]"),e=0,t=b.length;e<t;e++){var i=b.eq(e);a.bindWechatLoginEvent(i)}for(var u=$(".module[data-handle=enwechatLogin]"),e=0,t=u.length;e<t;e++){var i=u.eq(e);a.bindenWechatLoginEvent(i)}for(var d=$(".module[data-handle=dingdingLogin]"),e=0,t=d.length;e<t;e++){var i=d.eq(e);a.binddingdingLoginEvent(i)}for(var m=$(".module[data-handle=appLogin]"),e=0,t=m.length;e<t;e++){var i=m.eq(e);a.bindappLoginEvent(i)}for(var w=$(".module[data-handle=dialogBtn]"),e=0,t=w.length;e<t;e++){var i=w.eq(e);a.binddialogEvent(i)}for(var y=$("[data-handle=weiboLogin]"),e=0,t=y.length;e<t;e++){var i=y.eq(e);a.bindWeiboLoginEvent(i)}for(var k=$("[data-handle=alipayLogin]"),e=0,t=k.length;e<t;e++){var i=k.eq(e);a.bindAlipayLoginEvent(i)}for(var N=$("[data-handle=getPasswod]"),e=0,t=N.length;e<t;e++){var i=N.eq(e);a.bindGetPasswodEvent(i)}for(var S=$("[data-handle=getUsername]"),e=0,t=S.length;e<t;e++){var i=S.eq(e),I=S.eq(e).attr("data-designId");a.bindGetUsernameEvent(i,I)}for(var T=$(".module[data-handle=exchangeCoupon]"),e=0,t=T.length;e<t;e++){var i=T.eq(e);a.bindGetExchangecouponEvent(i)}for(var L=$(".module[data-handle=goBack]"),e=0,t=L.length;e<t;e++){var i=L.eq(e);a.bindGoBack(i)}for(var P=$(".module[data-handle=QRcodeEvent]"),e=0,t=P.length;e<t;e++){var i=P.eq(e);a.BindQRcode(i)}for(var j=$(".module[data-handle=collectionCoupon]"),e=0,t=j.length;e<t;e++){var i=j.eq(e);a.BindCollectionCoupon(i)}a.addHrefClick()},addHrefClick:function(){$("a").click(function(){var a=$(this),r=a.attr("href")||"",e=a.parents(".module");r.length>0&&e.length>0&&designUploadPoint(e)})},bindLoginBtnEvent:function(a){var r=a.parents(".module[data-type=registerLogin]").attr("data-login");r&&(r=JSON.parse(r));var e=this;a.on("click",function(){designUploadPoint($(this)),window.player.mobileVideoShow(!1),window.location=location.origin+(window.basePath?"/"+window.basePath+"#/":"/#/")+"login"})},bindRegisterEvent:function(a){var r=this;a.on("click",function(){designUploadPoint($(this)),window.player.mobileVideoShow(!1),l.registerLayer(function(e){e.success&&r.getLoginUser(!0)})})},bindRegisterSchoolEvent:function(a){var r=this;a.on("click",function(){designUploadPoint($(this)),window.player.mobileVideoShow(!1),l.registerSchoolLayer()})},bindQQloginEvent:function(a){var r=this;a.on("click",function(){designUploadPoint($(this)),l.loginQQ()})},bindWechatLoginEvent:function(a){var r=this;a.on("click",function(e){designUploadPoint($(this)),l.qrcodeloginWeChat()})},bindenWechatLoginEvent:function(a){var r=this;a.on("click",function(e){designUploadPoint($(this)),l.qrcodeloginenWeChat()})},binddingdingLoginEvent:function(a){var r=this;a.on("click",function(e){designUploadPoint($(this)),l.qrcodelogindingding()})},bindappLoginEvent:function(a){var r=this;a.on("click",function(e){designUploadPoint($(this)),l.qrcodeloginapp()})},binddialogEvent:function(a){var r=this;a.on("click",function(e){designUploadPoint($(this));var t=a.attr("data-href")?JSON.parse(a.attr("data-href")):{};l.dialogBtnx(t)})},bindWeiboLoginEvent:function(a){var r=this;a.on("click",function(){designUploadPoint($(this)),l.loginWeiBo()})},bindAlipayLoginEvent:function(a){var r=this;a.on("click",function(){designUploadPoint($(this)),l.loginAlipay()})},bindGetPasswodEvent:function(a){var r=this;a.on("click",function(){designUploadPoint($(this)),window.player.mobileVideoShow(!1),l.getPasswordLayer()})},bindGetUsernameEvent:function(a,r){var e=this;a.on("click",function(){designUploadPoint($(this)),l.getUsernameLayer(r)})},bindGetExchangecouponEvent:function(a){var r=this;a.on("click",function(){designUploadPoint($(this)),l.isLogin(function(e){e.success?l.getExchangecoupon():l.loginLayer()})})},bindGoBack:function(a){a.on("click",function(){designUploadPoint($(this)),window.history.go(-1)})},BindQRcode:function(a){a.on("click",function(){designUploadPoint($(this)),l.getQRcodeLayer()})},BindCollectionCoupon:function(a){var r=this;a.on("click",function(e){designUploadPoint($(this)),window.user.useInfo?r.carryCouponEvent(a):l.loginLayer(function(){})})},carryCouponEvent:function(a,r){var e=this,t=JSON.parse(a.attr("data-href")),i=t.data.couponKeys.join(","),o=void 0;if(window.decrypt&&localStorage.encryptId){var s=window.decrypt(localStorage.encryptId).split(",");r?s.length>0&&(o=s[0]):s.length>1&&(o=s[1])}l.getDressUpCouponShareList({couponIds:i,shareId:o},function(v){v.success&&l.getCouponLayer(v.data,{couponIds:i,shareId:o})})},bindGoBuyCar:function(){var a=this;$("[data-event=goBuyCar]").on("click",function(){var r=$(this).parent().attr("data-href");a.loginUserData?a.goBuyCarEvent(r):l.loginLayer(function(e){e.success&&a.goBuyCarEvent(r)})})},goBuyCarEvent:function(a){var r=this,e=isJSON(a)?JSON.parse(a):!1;if(!e)return!1;var t=e.data,i="",o=[""],s=r.getValue("diliater")||"";window.base64&&(i=r.getValue("shareId")?base64.decode(r.getValue("shareId")):""),window.decrypt&&(o=decrypt(s).split(","));var v=[{goodsId:t.vipId,price:t.price,goodsUrl:location.origin+"/pages/memberDetail.html?vipId="+t.vipId,goodsType:"7",goodsName:t.vipName,cover:t.cover,introduce:t.remark,endTime:t.deadline}];$.ajax({type:"POST",headers:{token:getCookie("token")},url:"/api/order/shoppingCart",contentType:"application/json",dataType:"json",data:JSON.stringify({goodsList:v,clientType:r.getclueChannel(),shareUserId:i||(o.length>1?o[1]:""),pvid:sessionStorage.pvid,uvcid:localStorage.uvcid}),async:!0,success:function(p){p.success&&(location.href="/pay/#/shopping")}})},getclueChannel:function(){var a=this,r=navigator.userAgent.toLowerCase(),e;if(window.__wxjs_environment==="miniprogram")e=4;else if(r.match(/MicroMessenger/i)=="micromessenger"){var t={win:!1,mac:!1},i=navigator.platform;t.win=i.indexOf("Win")==0,t.mac=i.indexOf("Mac")==0,t.win||t.mac?e=9:e=1}else localStorage.appAdapt===!0||localStorage.appAdapt==="true"?e=a.getValue("channel")||5:a.getValue("channel")?e=a.getValue("channel"):/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)?e=2:e=3;return e}};if(window.mainHome=f,window.secondShareHtml)var n=setInterval(function(){window.secondShareHtmlSuccess&&(clearInterval(n),f.init())},20);else f.init()});function escape(l){var g=document.createElement("div"),h=document.createTextNode(l);return g.appendChild(h),g.innerHTML}function loadScriptmin(l,g,h){var f=this,n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){(n.readyState=="loaded"||n.readyState=="complete")&&(n.onreadystatechange=null,g.bind(f)(h))}:n.onload=function(){g.bind(f)(h)},n.src=l,document.body.appendChild(n)}function unit(l){return l/37.5+"rem"}(function(l,g){var h={init:function(){var n=this;l(document).ready(function(){setTimeout(function(){n.fixed()},100)}),n.serach(),n.course(),n.courseWare(),n.information(),n.getAjaxRoomInfo(),n.canousel(),n.footerNav(),n.setAnimation(),n.headerNav(),n.aHrefClick()},fixed:function(){for(var n=this,a=l(".module[data-fixed]"),r=0,e=a.length;r<e;r++){var t=a.eq(r),i=parseInt(t.css("left")),o=t.parent().width(),s=i-o/2;t.attr("data-fixed")=="fixedTop"?t.css({position:"fixed",top:unit(t.attr("data-fixedvalue")),left:"50%",marginLeft:unit(s),zIndex:999}):t.attr("data-fixed")=="fixedBottom"&&t.css({position:"fixed",top:"auto",bottom:unit(t.attr("data-fixedvalue")),left:"50%",marginLeft:unit(s),zIndex:999})}},serach:function(){var n=this;if(n.$search=l(".module[data-type=search]"),n.$search.length<1)return!1;var a="/pages/wap/elective.html";n.miniprogram&&(a="/pages/routine/elective.html");for(var r=0,e=n.$search.length;r<e;r++){var t=n.$search.eq(r);(function(i){var o=i.find(".searchBtn"),s=i.find("input");o.on("click",function(){s.val()?g.location.href=a+"?keyword="+s.val():g.location.href=a})})(t)}},course:function(){var n=this;n.$course=l(".module[data-type=course]");for(var a=0,r=n.$course.length;a<r;a++){var e=n.$course.eq(a);n.getAjaxCourse(e)}},getAjaxCourse:function(n){var a=this,r=n.attr("data-course");if(!r)return!1;var e=JSON.parse(r);e.item=n,l.ajax({type:"get",url:"/api/course/getDressCourseInfoByIds?projectid=12",data:{courseIds:e.courseIds?e.courseIds.join(","):e.courseIds,mainClassify:e.classify[0],childClassify:e.classify[1],beginNum:e.startNum,endNum:e.endNum},contentType:"application/json;charset=utf-8",dataType:"json",success:function(t){t.success&&a.renderCourse(e,t.data)},error:function(t){console.log("\u63A5\u53E3\u8BF7\u6C42\u5931\u8D25")}})},renderCourse:function(n,a){var r="",e,t=this,i=parseInt(n.sNum||0)==1,o=parseInt(n.sTeacher||0)==1,s="/pages/wap";switch(t.miniprogram&&(s="/pages/routine"),n.styleType){case"wzlb":r='<ul class="wzlb">',e=function(u){var d="";return parseInt(u.courseType)==2||parseInt(u.courseType)==4?d=s+"/bundle.html?cid="+u.courseId:d=s+"/info.html?cid="+u.courseId,'<li><a href="'+d+'"><span class="title">'+u.courseName+'</span><span class="teacher">'+u.mainTeacher+"</span></a></li>"};break;case"xtwlb":r='<ul class="xtwlb">',e=function(u){var d="";return parseInt(u.courseType)==2||parseInt(u.courseType)==4?d=s+"/bundle.html?cid="+u.courseId:d=s+"/info.html?cid="+u.courseId,'<li><a href="'+d+'"><img src="'+(window.cdnPath||"")+u.cover+'"/><span class="title">'+u.courseName+"</span>"+(o?'<span class="teacher">'+u.mainTeacher+"</span>":"")+(i?'<span class="curren">'+u.popularityCount+"</span>":"")+"</a></li>"};break;case"twlb":r='<ul class="twlb">',e=function(u){var d="";return parseInt(u.courseType)==2||parseInt(u.courseType)==4?d=s+"/bundle.html?cid="+u.courseId:d=s+"/info.html?cid="+u.courseId,'<li><a href="'+d+'"><img src="'+(window.cdnPath||"")+u.cover+'"/><span class="rser"><span class="title">'+u.courseName+'</span><span class="introduce" >'+u.introduce+"</span>"+(o?'<span class="teacher">'+u.mainTeacher+"</span>":"")+(i?'<span class="curren">'+u.popularityCount+"</span>":"")+"</span></a></li>"};break;case"ttlb":var v="";parseInt(a[0].courseType)==2||parseInt(a[0].courseType)==4?v=s+"/bundle.html?cid="+a[0].courseId:v=s+"/info.html?cid="+a[0].courseId,r='<ul class="ttlb">',r+='<li class="one"><a href="'+v+'"><img src="'+(window.cdnPath||"")+a[0].cover+'"/><span class="rser"><span class="title">'+a[0].courseName+'</span><span class="teacher">'+a[0].mainTeacher+'</span><span class="introduce" style="display:block;">'+a[0].introduce+"</span></span></a></li>",e=function(u){var d="";return parseInt(u.courseType)==2||parseInt(u.courseType)==4?d=s+"/bundle.html?cid="+u.courseId:d=s+"/info.html?cid="+u.courseId,'<li><a href="'+d+'"><span class="title">'+u.courseName+'</span><span class="teacher">'+u.mainTeacher+"</span></a></li>"};break;case"btrqlb":r='<ul class="btrqlb">',e=function(u){var d="";return parseInt(u.courseType)==2||parseInt(u.courseType)==4?d=s+"/bundle.html?cid="+u.courseId:d=s+"/info.html?cid="+u.courseId,'<li><a href="'+d+'"><span class="title">'+u.courseName+'</span><span class="introduce">'+u.introduce+"</span>"+(o?'<span class="teacher">'+u.mainTeacher+"</span>":"")+(i?'<span class="curren">'+u.popularityCount+"</span>":"")+"</a></li>"};break}for(var p=0,c=a.length;p<c;p++)if(!(n.styleType=="ttlb"&&p==0)){var b=a[p];r+=e(b)}r+="</ul>",n.item.html(r)},courseWare:function(){var n=this;n.$courseware=l(".module[data-type=courseware]");for(var a=0,r=n.$courseware.length;a<r;a++){var e=n.$courseware.eq(a);n.getAjaxCourseware(e)}},getAjaxCourseware:function(n){var a=this,r=n.attr("data-courseware");if(!r)return!1;var e=JSON.parse(r);e.item=n,l.ajax({type:"get",url:"/api/course/getCourseWareInfoByIds?projectid=12",data:{courseWareIds:e.courseWareIds?e.courseWareIds.join(","):e.courseWareIds,beginNum:e.startNum,endNum:e.endNum,isIndex:1},contentType:"application/json",dataType:"json",success:function(t){t.success&&a.renderCourseware(e,t.data)},error:function(t){console.log("\u63A5\u53E3\u8BF7\u6C42\u5931\u8D25")}})},isLiveUrl:function(n){var a=n.courseWareType+"",r=n.courseWareId,e=n.courseId,t=n.price,i="",o=!1;switch(a){case"1":o=!0;break;case"2":o=!0;break;case"3":o=!0;break;case"4":o=!0;break;case"5":o=!0;break;default:o=!1}return i=t?"/pages/wap/ware.html?cid="+e+"&rid="+r:"/pages/wap/info.html?cid="+e,i},renderCourseware:function(n,a){var r=this,e="",t=parseInt(n.sNum||0)==1,i=parseInt(n.sTeacher||0)==1,o;switch(n.styleType){case"wzlb":e='<ul class="wzlb">',o=function(c){return'<li><a href="'+r.isLiveUrl(c)+'"><span class="title">'+c.courseWareName+'</span><span class="teacher">'+c.realName+"</span></a></li>"};break;case"xtwlb":e='<ul class="xtwlb">',o=function(c){return'<li><a href="'+r.isLiveUrl(c)+'"><img src="'+(window.cdnPath||"")+c.cover+'"/><span class="title">'+c.courseWareName+"</span>"+(i?'<span class="teacher">'+c.realName+"</span>":"")+(t?'<span class="curren">'+c.popularityCount+"</span>":"")+"</a></li>"};break;case"twlb":e='<ul class="twlb">',o=function(c){return'<li><a href="'+r.isLiveUrl(c)+'"><img src="'+(window.cdnPath||"")+c.cover+'"/><span class="rser"><span class="title">'+c.courseWareName+'</span><span class="introduce">'+c.introduce+"</span>"+(i?'<span class="teacher">'+c.realName+"</span>":"")+(t?'<span class="curren">'+c.popularityCount+"</span>":"")+"</span></a></li>"};break;case"ttlb":e='<ul class="ttlb">',e+='<li class="one"><a href="'+r.isLiveUrl(a[0])+'"><img src="'+(window.cdnPath||"")+a[0].cover+'"/><span class="rser"><span class="title">'+a[0].courseWareName+'</span><span class="teacher">'+a[0].realName+'</span><span class="introduce" style="display:block;">'+a[0].introduce+"</span></span></a></li>",o=function(c){return'<li><a href="'+r.isLiveUrl(c)+'"><span class="title">'+c.courseWareName+'</span><span class="teacher">'+c.realName+"</span></a></li>"};break;case"btrqlb":e='<ul class="btrqlb">',o=function(c){return'<li><a href="'+r.isLiveUrl(c)+'"><span class="title">'+c.courseWareName+'</span><span class="introduce">'+c.introduce+"</span>"+(i?'<span class="teacher">'+c.realName+"</span>":"")+(t?'<span class="curren">'+c.popularityCount+"</span>":"")+"</a></li>"};break;default:}for(var s=0,v=a.length;s<v;s++)if(!(n.styleType=="ttlb"&&s==0)){var p=a[s];e+=o(p)}e+="</ul>",n.item.html(e)},information:function(n){var a=this;a.$article=l(".module[data-type=article]");for(var r=0,e=a.$article.length;r<e;r++){var t=a.$article.eq(r);a.getAjaxArticle(t)}},getAjaxArticle:function(n){var a=this,r=n.attr("data-article");if(!r)return!1;var e=JSON.parse(r);e.item=n,l.ajax({type:"get",url:"/api/disk/firstHomepageDetail?projectid=12",data:{InfoTypeId:e.classify[e.classify.length-1],beginNum:e.startNum,endNum:e.endNum,isAll:e.isAll,sNum:e.sNum,sTeacher:e.sTeacher},contentType:"application/json",dataType:"json",success:function(t){t.success&&a.renderArticle(e,t.data)},error:function(t){console.log("\u63A5\u53E3\u8BF7\u6C42\u5931\u8D25")}})},getTimeString:function(n){if(new Date(parseInt(n))=="Invalid Date"&&new Date(parseInt(n)*1e3)=="Invalid Date")return"--";var a=new Date(parseInt(n)),r=a.getFullYear(),e=a.getMonth()+1,t=a.getDate();return r+"-"+e+"-"+t},renderArticle:function(n,a){var r=this,e="",t,i=function(d){return r.miniprogram?"/pages/routine/information.html?aid="+d:(location.port=="81","/pubinfo/"+d+".shtml")},o=parseInt(n.sNum||0)==1,s=parseInt(n.sTeacher||0)==1,v=function(d){for(var m="",w=0,y=d.length;w<y;w++){var k=d[w]||d[0];m+='<img src="'+((window.cdnPath||"")+k.sourcePath)+'"/>'}return m};switch(n.styleType){case"wzlb":e='<ul class="wzlb">',t=function(d){return'<li><a href="'+i(d.infoID)+'"><span class="title">'+d.title+'</span><span class="teacher">'+r.getTimeString(d.gmtCreate)+"</span></a></li>"};break;case"xtwlb":e='<ul class="xtwlb">',t=function(d){return'<li><a href="'+i(d.infoID)+'"><img src="'+(window.cdnPath||"")+d.computerSinglePicPath+'"/><span class="title">'+d.title+"</span>"+(s?'<span class="teacher">'+r.getTimeString(d.gmtCreate)+"</span>":"")+(o?'<span class="curren">'+d.viewCount+"</span>":"")+"</a></li>"};break;case"twlb":e='<ul class="twlb">',t=function(d){return'<li><a href="'+i(d.infoID)+'"><img src="'+(window.cdnPath||"")+d.computerSinglePicPath+'"/><span class="rser"><span class="title">'+d.title+'</span><span class="introduce">'+d.introduce+"</span>"+(s?'<span class="teacher">'+r.getTimeString(d.gmtCreate)+"</span>":"")+(o?'<span class="curren">'+d.viewCount+"</span>":"")+"</span></a></li>"};break;case"ttlb":e='<ul class="ttlb">',t=function(d,m){return'<li class="one"><a href="'+i(d.infoID)+'"><span class="title">'+d.title+'</span><span class="introduce">'+v(u.computerPicPath)+"</span>"+(s?'<span class="teacher">'+r.getTimeString(d.gmtCreate)+"</span>":"")+(o?'<span class="curren">'+d.viewCount+"</span>":"")+"</a></li>"};break;case"btrqlb":e='<ul class="btrqlb">',t=function(d){return'<li><a href="'+i(d.infoID)+'"><span class="title">'+d.title+'</span><span class="introduce">'+d.introduce+"</span>"+(s?'<span class="teacher">'+r.getTimeString(d.gmtCreate)+"</span>":"")+(o?'<span class="curren">'+d.viewCount+"</span>":"")+"</a></li>"};break;default:}for(var p=document.createElement("div"),c=0,b=a.length;c<b;c++){var u=a[c];u.computerPicPath=u.computerPicPath?JSON.parse(u.computerPicPath):"/design/designstatic/common/image/information/defult.jpg",u.computerSinglePicPath=u.computerPicPath?u.computerPicPath[0].sourcePath:"/design/designstatic/common/image/information/defult.jpg",p.innerHTML=u.detail,u.detail=p.innerText,e+=t(u,c)}e+="</ul>",n.item.html(e)},getAjaxRoomInfo:function(){var n=this;l.ajax({type:"get",url:"/api/disk/home?projectid=12",dataType:"json",success:function(a){a.success&&(window.roominfo=a.data,n.roominfo=a.data,n.Render(a.data))}})},Render:function(n){var a=this;a.summary(n.introduction),a.QRcode(n.wechatQRCode),a.logo(n.logo),a.documentTitle(n)},summary:function(n){var a=this;if(a.$introduce=l(".module[data-type=introduce]"),a.$introduce.length<1)return!1;for(var r=0,e=a.$introduce.length;r<e;r++){var t=a.$introduce.eq(r);t.find(".box").html(n)}},QRcode:function(n){var a=this;if(a.$qrcode=l(".module[data-type=qrcode]"),a.$qrcode.length<1)return!1;for(var r=0,e=a.$qrcode.length;r<e;r++){var t=a.$qrcode.eq(r);t.find("img").attr("src",n)}},logo:function(n){var a=this;if(a.$logo=l(".module[data-type=logo]"),a.$logo.length<1)return!1;for(var r=0,e=a.$logo.length;r<e;r++){var t=a.$logo.eq(r);t.find("img").attr("src",n)}},documentTitle:function(n){var a=this,r=l("title");if(!r)return!1;var e;window.location.pathname.indexOf("/pages/getcoupons.html")<0&&(n.subhead?window.location.pathname=="/"?e=n.schoolName+"-"+n.subhead:e=r.text():e=n.schoolName),r.html(e),a.title=e},canousel:function(){var n=this;n.$carousel=l(".module[data-type=carousel]");for(var a=0,r=n.$carousel.length;a<r;a++){var e=n.$carousel.eq(a);n.renderCanousel(e)}},renderCanousel:function(n){var a=this,r=n[0],e=n.attr("data-mid");n.html('<div class="img_ul"></div><div class="barbox"></div>');var t=n.find(".img_ul"),i=n.attr("data-canousel");if(!i)return!1;var o=l.parseJSON(i),s=o.list,v=n.find(".barbox");o.nav&&a.renderCanouselBarbox(v,s);var p=s.length,c=parseFloat(n[0].style.width)||10,b=o.playTime*1e3,u=o.changeTime,d=o.adapt,m=0,v=n.find(".barbox"),w="";if(p==1){var y=s[0];w+='<div class="img_li" style="width: '+c+'rem;height:100%;left: 0rem;"><a '+(y.href?'href="'+y.href+'"':"")+'><div class="'+d+'" style="background-image: url('+y.path+');width:100%;height:100%;"></div></a></div>',v.hide()}else if(p==2)for(var k=0;k<4;k++){var y=s[k%2];k==3?w+='<div class="img_li" style="width: '+c+"rem;height:100%;left:"+-c+'rem;"><a '+(y.href?'href="'+y.href+'"':"")+'><div class="'+d+'" style="background-image: url('+y.path+');width:100%;height:100%;"></div></a></div>':w+='<div class="img_li" style="width: '+c+"rem;height:100%;left:"+c*k+'rem;"><a '+(y.href?'href="'+y.href+'"':"")+'><div class="'+d+'" style="background-image: url('+y.path+');width:100%;height:100%;"></div></a></div>'}else for(var k=0;k<p;k++){var y=s[k];k==p-1?w+='<div class="img_li" style="width: '+c+"rem;height:100%;left:"+-c+'rem;"><a '+(y.href?'href="'+y.href+'"':"")+'><div class="'+d+'" style="background-image: url('+y.path+');width:100%;height:100%;"></div></a></div>':w+='<div class="img_li" style="width: '+c+"rem;height:100%;left:"+c*k+'rem;"><a '+(y.href?'href="'+y.href+'"':"")+'><div class="'+d+'" style="background-image: url('+y.path+');width:100%;height:100%;"></div></a></div>'}t.html(w);var N=n.find(".img_li"),S=N.length,I=v.find("li");I.eq(m).addClass("on"),o.nav&&a.animatesCanoousel(v,m);function T(){o.nav&&a.animatesCanoousel(v,m%p),clearTimeout(a["carInter"+e]),a["carInter"+e]=setTimeout(function(){m++,t.css({transform:"translateX("+-m*c+"rem)","-webkit-transform":"translateX("+-m*c+"rem)","transition-duration":u+"s","-webkit-transition-duration":u+"s"}),I.removeClass("on"),p==2?I.eq(m%2).addClass("on"):I.eq(m%S).addClass("on"),L(m+1),T()},b)}function L(C){var q=C%S;N.eq(q).css("left",C*c+"rem")}var P=parseFloat(l("html").css("fontSize"));if(p>=2){T();var j=0,x=0;r.addEventListener("touchstart",function(C){var q=C.targetTouches[0];j=q.pageX,clearInterval(a["carInter"+e])}),r.addEventListener("touchmove",function(C){var q=C.targetTouches[0];x=(q.pageX-j)/P,t.css({transform:"translateX("+(x-m*c)+"rem)","-webkit-transform":"translateX("+(x-m*c)+"rem)","transition-duration":"0s","-webkit-transition-duration":"0s"}),x>.5&&C.preventDefault()}),r.addEventListener("touchend",function(C){clearTimeout(a["carTimeout"+e]),x*x>9&&(x<-.5?(m++,L(m+1)):x>.5&&(m--,L(m-1))),t.css({transform:"translateX("+-m*c+"rem)","-webkit-transform":"translateX("+-m*c+"rem)","transition-duration":u/2+"s","-webkit-transition-duration":u/2+"s"}),I.removeClass("on"),p==2?I.eq(m%2).addClass("on"):I.eq(m%S).addClass("on"),a["carTimeout"+e]=setTimeout(function(){T()},u*1e3/2)})}},renderCanouselBarbox:function(n,a){for(var r=this,e="",t=0,i=a.length;t<i;t++)e+='<span class="li"></span>';n.html(e)},animatesCanoousel:function(n,a){var r=n.find(".li");n.find(".on").removeClass("on"),r.eq(a).addClass("on")},footerNav:function(){var n=this;n.$footerNav=l(".module[data-type=footerNav]");for(var a=0,r=n.$footerNav.length;a<r;a++){var e=n.$footerNav.eq(a);n.renderFooterNav(e)}},isOnHref:function(n){var a=!1;return n&&(g.location.href==g.location.origin+n||g.location.pathname==n&&g.location.href.indexOf("mainClassify")<0||g.location.href.indexOf(n)>-1&&n.indexOf("mainClassify")>-1||n=="/comment/#"&&g.location.href.indexOf("/comment/#")>-1)&&(a=!0),a},renderFooterNav:function(n){var a=this,r=n.find("li"),e=n.attr("data-footernav");e&&(e=JSON.parse(e)),r.removeClass("on");for(var t=0,i=r.length;t<i;t++){var o=r.eq(t);o.find("span").removeAttr("style");var s=o.find("a"),v=s.attr("href");a.isOnHref(v)&&(o.addClass("on"),e&&e.color&&o.find("span").css("color",e.color))}},setAnimation:function(){var n=this;n.animArr=[];for(var a=l(".module"),r=0,e=a.length;r<e;r++){var t=a.eq(r),i=t.css("animationName");i!="none"&&(t.css("animationIterationCount")!="infinite"&&(t.attr("data-kui-anim",i),t.css("animationName","")),n.animArr.push(t))}},aHrefClick:function(){for(var n=l("a[href]"),a=[],r=0,e=n.length;r<e;r++){var t=n.eq(r);(t.attr("href").indexOf("/aroom/#")>-1||t.attr("href").indexOf("/myroom/#")>-1&&t.attr("href").indexOf("/nolimit")<0||t.attr("href").indexOf("/pay/#")>-1)&&(t.attr("clickUrl",t.attr("href")),t.removeAttr("href"))}l("a[clickUrl]").on("click",function(i){var o=window.user,s=l(this).attr("clickUrl"),v=function(c){c=="STUDENT"?s.indexOf("/pay/#")>-1?window.location.href=s.indexOf("/pay/#/")>-1?s:window.basePath?"/"+window.basePath+"#/":"/#/":window.location.href=s.indexOf("/myroom/#/")>-1?s:window.basePath?"/"+window.basePath+"#/":"/#/":window.location.href=s.indexOf("/aroom/#/")>-1?s:window.basePath?"/"+window.basePath+"#/":"/#/"},p=function(){window.player.mobileVideoShow(!1),o.loginLayer(function(c){c.success&&o.isLogin(function(b){b.success&&v(b.data.userTypeExact)})})};getCookie("token")||getCookie("stoken")?o.isLogin(function(c){c.success?v(c.data.userTypeExact):p()}):p()})},headerNav:function(){for(var n=this,a=l(".module[data-type=headerNav]"),r=0,e=a.length;r<e;r++)n.renderHeaderNav(a.eq(r))},renderHeaderNav:function(n){var a=this;if(!n.attr("data-headernav"))return!1;for(var r=JSON.parse(n.attr("data-headernav")),e="drawer-"+n.attr("data-mid"),t='<div id="'+e+'" class="drawer drawer-'+r.openStyle+'"><style>#'+e+" .drawer-content *{color:"+r.textColor+";}#"+e+" .drawer-content a{color:"+r.textColor+";}#"+e+" .drawer-content {background-color:"+r.moduleColor+";}#"+e+" .drawer-title, #"+e+" li{ height: "+unit(r.linesHeight)+";line-height: "+unit(r.linesHeight)+';}</style><div class="drawer-mask"></div><div class="drawer-content" ><div class="drawer-title"><img src="" /><span>'+a.title+'</span></div><ul class="drawer-menu"><div class="menuheight">',i=0,o=r.list.length;i<o;i++){var s=r.list[i];s.href.url&&s.href.url.indexOf("handle-")>-1?t+='<a data-handle="'+s.href.url.split("handle-")[1]+'"><li>'+(s.before?'<img src="'+s.before+'"/>':"")+"<span>"+s.name+"</span></li></a>":t+='<a href="'+s.href.url+'"><li>'+(s.before?'<img src="'+s.before+'"/>':"")+"<span>"+s.name+"</span></li></a>"}t+="</div></ul></div></div>",l("body").append(t);var v=l("#"+e),p=v.find(".drawer-menu"),c=p.find(".menuheight").height()-p.height(),b=!1,u,d,m;v.on("touchstart",function(w){d=w.originalEvent.targetTouches[0].pageY,c>0&&(u=setInterval(function(){b=!1,d<m?p.scrollTop()==0&&(b=!0):p.scrollTop()>=c&&(b=!0)},20))}),v.on("touchend",function(w){clearInterval(u)}),v.on("touchmove",function(w){c<0?w.preventDefault():b?(m=w.originalEvent.targetTouches[0].pageY,w.preventDefault()):(m=w.originalEvent.targetTouches[0].pageY,window.event.returnValue=!0)}),v.on("click",".drawer-mask",function(w){v.removeClass("drawer-open"),window.player&&window.player.mobileVideoShow(!0)}),v.on("click","a[data-handle]",function(w){v.removeClass("drawer-open")}),n.on("click",function(w){v.addClass("drawer-open"),v.find(".drawer-title span").text(a.title),a.roominfo&&v.find(".drawer-title img").attr("src",(window.cdnPath||"")+a.roominfo.logo),window.player&&window.player.mobileVideoShow(!1)})}};if(window.secondShareHtml)var f=setInterval(function(){window.secondShareHtmlSuccess&&(clearInterval(f),h.init())},20);else h.init();g.getWapRoom=h})(jQuery,window),document.write('<script type="text/javascript" charset="utf-8" src="/design/designstatic/home/js/scrollanim.min.js"></script>'),!window.getPage&&!window.secondShareHtml&&document.write('<script type="text/javascript" charset="utf-8" src="/design/designstatic/home/waphome/js/setPage.js"></script>'),function(l,g){if(g.player)return!1;g.player={init:function(){var h=this;h.getVideoDatas()},getVideoDatas:function(){var h=this;h.playElement=l(".module[data-type=player]"),h.playerdatas=[];for(var f=0,n=h.playElement.length;f<n;f++){var a=h.playElement.eq(f),r=l.parseJSON(a.attr("data-player"));h.getCreateVideoConfig(a,r)}},getCreateVideoConfig:function(h,f){var n=this,n=this,a="player"+h.attr("data-mid");h.find(".box").attr("id",a);var r=parseInt(h.css("width")),e=parseInt(h.css("height"));n.playParams={playerId:a,playMenus:f.list,designId:f.designId,autoPlay:f.play,playIndex:0,width:r,height:e},n.getVedioUrl(),h.find("li").on("click",function(){n.playParams.playIndex=l(this).index(),n.getVedioUrl()})},getVedioUrl:function(){var h=this,f=h.playParams,n=f.playIndex,a=f.playMenus[n].videoid,r=f.playMenus[n].sourceId;l.ajax({type:"get",url:"/api/course/getCourseWareInfoByIds?projectid=12",data:{courseWareIds:a,isIndex:1},contentType:"application/json",dataType:"json",success:function(e){e.success&&h.carryVideo(f,e.data[0],r)}})},carryVideo:function(h,f,n){var a=this,r="";if(h.designId)r="/api/common/mu/getDesignFreeM3u8.m3u8?courseWareId="+f.courseWareId+"&designId="+h.designId+(n?"&sourceId="+n:"");else if(r=f.videoM3u8FileAddress,!r)return layer?layer.open({content:"\u5F53\u524D\u89C6\u9891\u4E0D\u5B58\u5728\u5931\u8D25",skin:"msg",time:2}):setTimeout(function(){layer.open({content:"\u5F53\u524D\u89C6\u9891\u4E0D\u5B58\u5728\u5931\u8D25",skin:"msg",time:2})},100),!1;var e='<video id="moduleVideoID" style="display:block;" controls="controls" poster="'+f.cover+'" width="'+h.width+'" height="'+h.height+'" x5-playsinline="" playsinline="true" webkit-playsinline="true" tabindex="-1" autoplay="true" oncontextmenu="return false"  src="'+r+'"></video>',t=l("#"+h.playerId);t.html(e);var i=t.find("video").eq(0),o=!1;t.on("click",function(){var s=i[0].paused,v=i[0].ended;o&&!v&&!s?(i.css({display:"none"}),i[0].pause()):(i.css({display:"block"}),i[0].play()),o=!0})},mobileVideoShow:function(h){for(var f=l(document).find("video"),n=0,a=f.length;n<a;n++){var r=f.eq(n);h?r[0].prePause&&(r[0].play(),r.css({display:"block"}),r[0].prePause=!1):(r[0].pause(),r[0].prePause=!0,r.css({display:"none"}))}}},g.player.init()}(jQuery,window);function getCookie(l){for(var g=document.cookie,h=g.split("; "),f=0;f<h.length;f++){var n=h[f].split("=");if(n[0]==l)return n[1]}return""}function designUploadPoint(l,g){try{var h=l.data("mid")||"",f=l.data("type")||"",n=l.text()||"",a=l.data("handle")||"",r=l.find("a"),e=r.attr("href")||"",t=window.location.hostname,i=window.location.pathname,o={id:h,type:f,text:n,handle:a,pageTo:e,hostname:t}}catch(s){console.log("designUploadPoint:",s)}}
