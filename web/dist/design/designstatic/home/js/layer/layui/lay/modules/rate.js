layui.define("jquery",function(g){"use strict";var l=layui.jquery,u={config:{},index:layui.rate?layui.rate.index+1e4:0,set:function(a){var e=this;return e.config=l.extend({},e.config,a),e},on:function(a,e){return layui.onevent.call(this,d,a,e)}},x=function(){var a=this,e=a.config;return{setvalue:function(i){a.setvalue.call(a,i)},config:e}},d="rate",C="layui-rate",v="layui-icon-rate",c="layui-icon-rate-solid",y="layui-icon-rate-half",m="layui-icon-rate-solid layui-icon-rate-half",T="layui-icon-rate-solid layui-icon-rate",p="layui-icon-rate layui-icon-rate-half",o=function(a){var e=this;e.index=++u.index,e.config=l.extend({},e.config,u.config,a),e.render()};o.prototype.config={length:5,text:!1,readonly:!1,half:!1,value:0,theme:""},o.prototype.render=function(){var a=this,e=a.config,i=e.theme?'style="color: '+e.theme+';"':"";e.elem=l(e.elem),parseInt(e.value)!==e.value&&(e.half||(e.value=Math.ceil(e.value)-e.value<.5?Math.ceil(e.value):Math.floor(e.value)));for(var t='<ul class="layui-rate" '+(e.readonly?"readonly":"")+">",s=1;s<=e.length;s++){var f='<li class="layui-inline"><i class="layui-icon '+(s>Math.floor(e.value)?v:c)+'" '+i+"></i></li>";e.half&&parseInt(e.value)!==e.value&&s==Math.ceil(e.value)?t=t+'<li><i class="layui-icon layui-icon-rate-half" '+i+"></i></li>":t+=f}t+="</ul>"+(e.text?'<span class="layui-inline">'+e.value+"\u661F":"")+"</span>";var n=e.elem,r=n.next("."+C);r[0]&&r.remove(),a.elemTemp=l(t),e.span=a.elemTemp.next("span"),e.setText&&e.setText(e.value),n.html(a.elemTemp),n.addClass("layui-inline"),e.readonly||a.action()},o.prototype.setvalue=function(a){var e=this,i=e.config;i.value=a,e.render()},o.prototype.action=function(){var a=this,e=a.config,i=a.elemTemp,t=i.find("i").width();i.children("li").each(function(s){var f=s+1,n=l(this);n.on("click",function(r){if(e.value=f,e.half){var h=r.pageX-l(this).offset().left;h<=t/2&&(e.value=e.value-.5)}e.text&&i.next("span").text(e.value+"\u661F"),e.choose&&e.choose(e.value),e.setText&&e.setText(e.value)}),n.on("mousemove",function(r){if(i.find("i").each(function(){l(this).addClass(v).removeClass(m)}),i.find("i:lt("+f+")").each(function(){l(this).addClass(c).removeClass(p)}),e.half){var h=r.pageX-l(this).offset().left;h<=t/2&&n.children("i").addClass(y).removeClass(c)}}),n.on("mouseleave",function(){i.find("i").each(function(){l(this).addClass(v).removeClass(m)}),i.find("i:lt("+Math.floor(e.value)+")").each(function(){l(this).addClass(c).removeClass(p)}),e.half&&parseInt(e.value)!==e.value&&i.children("li:eq("+Math.floor(e.value)+")").children("i").addClass(y).removeClass(T)})})},o.prototype.events=function(){var a=this;a.config},u.render=function(a){var e=new o(a);return x.call(e)},g(d,u)});
