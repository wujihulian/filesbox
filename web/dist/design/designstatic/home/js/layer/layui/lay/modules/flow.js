layui.define("jquery",function(z){"use strict";var i=layui.$,w=function(o){},T='<i class="layui-anim layui-anim-rotate layui-anim-loop layui-icon ">&#xe63e;</i>';w.prototype.load=function(o){var f,c,u,n,d=this,g=0;o=o||{};var y=i(o.elem);if(y[0]){var p=i(o.scrollElem||document),h=o.mb||50,l=!("isAuto"in o)||o.isAuto,E=o.end||"\u6CA1\u6709\u66F4\u591A\u4E86",r=o.scrollElem&&o.scrollElem!==document,m="<cite>\u52A0\u8F7D\u66F4\u591A</cite>",t=i('<div class="layui-flow-more"><a href="javascript:;">'+m+"</a></div>");y.find(".layui-flow-more")[0]||y.append(t);var a=function(s,v){s=i(s),t.before(s),v=v==0||null,v?t.html(E):t.find("a").html(m),c=v,f=null,u&&u()},e=function(){f=!0,t.find("a").html(T),typeof o.done=="function"&&o.done(++g,a)};if(e(),t.find("a").on("click",function(){i(this),c||f||e()}),o.isLazyimg)var u=d.lazyimg({elem:o.elem+" img",scrollElem:o.scrollElem});return l&&p.on("scroll",function(){var s=i(this),v=s.scrollTop();n&&clearTimeout(n),c||(n=setTimeout(function(){var q=r?s.height():i(window).height(),A=r?s.prop("scrollHeight"):document.documentElement.scrollHeight;A-v-q<=h&&(f||e())},100))}),d}},w.prototype.lazyimg=function(o){var f,c=this,u=0;o=o||{};var n=i(o.scrollElem||document),d=o.elem||"img",g=o.scrollElem&&o.scrollElem!==document,y=function(l,E){var r=n.scrollTop(),m=r+E,t=g?function(){return l.offset().top-n.offset().top+r}():l.offset().top;if(t>=r&&t<=m&&!l.attr("src")){var a=l.attr("lay-src");layui.img(a,function(){var e=c.lazyimg.elem.eq(u);l.attr("src",a).removeAttr("lay-src"),e[0]&&p(e),u++})}},p=function(l,E){var r=g?(E||n).height():i(window).height(),m=n.scrollTop(),t=m+r;if(c.lazyimg.elem=i(d),l)y(l,r);else for(var a=0;a<c.lazyimg.elem.length;a++){var e=c.lazyimg.elem.eq(a),b=g?function(){return e.offset().top-n.offset().top+m}():e.offset().top;if(y(e,r),u=a,b>t)break}};if(p(),!f){var h;n.on("scroll",function(){var l=i(this);h&&clearTimeout(h),h=setTimeout(function(){p(null,l)},50)}),f=!0}return p},z("flow",new w)});
