layui.define("layer",function(Y){"use strict";var n=layui.$,K=layui.layer,ee=layui.hint(),P=layui.device(),z="form",A=".layui-form",C="layui-this",S="layui-hide",H="layui-disabled",M=function(){this.config={verify:{required:[/[\S]+/,"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A"],phone:[/^1\d{10}$/,"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7"],email:[/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,"\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E"],url:[/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/,"\u94FE\u63A5\u683C\u5F0F\u4E0D\u6B63\u786E"],number:function(c){if(!c||isNaN(c))return"\u53EA\u80FD\u586B\u5199\u6570\u5B57"},date:[/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/,"\u65E5\u671F\u683C\u5F0F\u4E0D\u6B63\u786E"],identity:[/(^\d{15}$)|(^\d{17}(x|X|\d)$)/,"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u8EAB\u4EFD\u8BC1\u53F7"]}}};M.prototype.set=function(c){var m=this;return n.extend(!0,m.config,c),m},M.prototype.verify=function(c){var m=this;return n.extend(!0,m.config.verify,c),m},M.prototype.on=function(c,m){return layui.onevent.call(this,z,c,m)},M.prototype.val=function(c,m){var L=n(A+'[lay-filter="'+c+'"]');L.each(function(I,N){var d=n(this);layui.each(m,function(g,f){var x,a=d.find('[name="'+g+'"]');a[0]&&(x=a[0].type,x==="checkbox"?a[0].checked=f:x==="radio"?a.each(function(){this.value===f&&(this.checked=!0)}):a.val(f))})}),O.render(null,c)},M.prototype.render=function(c,m){var L=this,I=n(A+function(){return m?'[lay-filter="'+m+'"]':""}()),N={select:function(){var d,g="\u8BF7\u9009\u62E9",f="layui-form-select",x="layui-select-title",a="layui-select-none",e="",o=I.find("select"),t=function(r,h){n(r.target).parent().hasClass(x)&&!h||(n("."+f).removeClass(f+"ed "+f+"up"),d&&e&&d.val(e)),d=null},v=function(r,h,k){var b,y=n(this),q=r.find("."+x),u=q.find("input"),s=r.find("dl"),$=s.children("dd"),G=this.selectedIndex;if(!h){var X=function(){var i=r.offset().top+r.outerHeight()+5-U.scrollTop(),l=s.outerHeight();G=y[0].selectedIndex,r.addClass(f+"ed"),$.removeClass(S),b=null,$.eq(G).addClass(C).siblings().removeClass(C),i+l>U.height()&&i>=l&&r.addClass(f+"up"),T()},B=function(i){r.removeClass(f+"ed "+f+"up"),u.blur(),b=null,i||E(u.val(),function(l){l&&(e=s.find("."+C).html(),u&&u.val(e))})},T=function(){var i=s.children("dd."+C);if(i[0]){var l=i.position().top,p=s.height(),w=i.height();l>p&&s.scrollTop(l+s.scrollTop()-p+w-5),l<0&&s.scrollTop(l+s.scrollTop()-5)}};q.on("click",function(i){r.hasClass(f+"ed")?B():(t(i,!0),X()),s.find("."+a).remove()}),q.find(".layui-edge").on("click",function(){u.focus()}),u.on("keyup",function(i){var l=i.keyCode;l===9&&X()}).on("keydown",function(i){var l=i.keyCode;l===9&&B();var p=function(w,Z){var _,F;i.preventDefault();var D=function(){var V=s.children("dd."+C);if(s.children("dd."+S)[0]&&w==="next"){var J=s.children("dd:not(."+S+",."+H+")"),W=J.eq(0).index();if(W>=0&&W<V.index()&&!J.hasClass(C))return J.eq(0).prev()[0]?J.eq(0).prev():s.children(":last")}return Z&&Z[0]?Z:b&&b[0]?b:V}();return F=D[w](),_=D[w]("dd:not(."+S+")"),F[0]?(b=D[w](),_[0]&&!_.hasClass(H)||!b[0]?(_.addClass(C).siblings().removeClass(C),void T()):p(w,b)):b=null};l===38&&p("prev"),l===40&&p("next"),l===13&&(i.preventDefault(),s.children("dd."+C).trigger("click"))});var E=function(i,l,p){var w=0;layui.each($,function(){var _=n(this),F=_.text(),D=F.indexOf(i)===-1;(i===""||p==="blur"?i!==F:D)&&w++,p==="keyup"&&_[D?"addClass":"removeClass"](S)});var Z=w===$.length;return l(Z),Z},j=function(i){var l=this.value,p=i.keyCode;return p!==9&&p!==13&&p!==37&&p!==38&&p!==39&&p!==40&&(E(l,function(w){w?s.find("."+a)[0]||s.append('<p class="'+a+'">\u65E0\u5339\u914D\u9879</p>'):s.find("."+a).remove()},"keyup"),l===""&&s.find("."+a).remove(),void T())};k&&u.on("keyup",j).on("blur",function(i){var l=y[0].selectedIndex;d=u,e=n(y[0].options[l]).html(),setTimeout(function(){E(u.val(),function(p){e||u.val("")},"blur")},200)}),$.on("click",function(){var i=n(this),l=i.attr("lay-value"),p=y.attr("lay-filter");return!i.hasClass(H)&&(i.hasClass("layui-select-tips")?u.val(""):(u.val(i.text()),i.addClass(C)),i.siblings().removeClass(C),y.val(l).removeClass("layui-form-danger"),layui.event.call(this,z,"select("+p+")",{elem:y[0],value:l,othis:r}),B(!0),!1)}),r.find("dl>dt").on("click",function(i){return!1}),n(document).off("click",t).on("click",t)}};o.each(function(r,h){var k=n(this),b=k.next("."+f),y=this.disabled,q=h.value,u=n(h.options[h.selectedIndex]),s=h.options[0];if(typeof k.attr("lay-ignore")=="string")return k.show();var $=typeof k.attr("lay-search")=="string",G=s?s.value?g:s.innerHTML||g:g,X=n(['<div class="'+($?"":"layui-unselect ")+f,(y?" layui-select-disabled":"")+'">','<div class="'+x+'">','<input type="text" placeholder="'+G+'" '+('value="'+(q?u.html():"")+'"')+($?"":" readonly")+' class="layui-input'+($?"":" layui-unselect")+(y?" "+H:"")+'">','<i class="layui-edge"></i></div>','<dl class="layui-anim layui-anim-upbit'+(k.find("optgroup")[0]?" layui-select-group":"")+'">',function(B){var T=[];return layui.each(B,function(E,j){E!==0||j.value?j.tagName.toLowerCase()==="optgroup"?T.push("<dt>"+j.label+"</dt>"):T.push('<dd lay-value="'+j.value+'" class="'+(q===j.value?C:"")+(j.disabled?" "+H:"")+'">'+j.innerHTML+"</dd>"):T.push('<dd lay-value="" class="layui-select-tips">'+(j.innerHTML||g)+"</dd>")}),T.length===0&&T.push('<dd lay-value="" class="'+H+'">\u6CA1\u6709\u9009\u9879</dd>'),T.join("")}(k.find("*"))+"</dl>","</div>"].join(""));b[0]&&b.remove(),k.after(X),v.call(this,X,y,$)})},checkbox:function(){var d={checkbox:["layui-form-checkbox","layui-form-checked","checkbox"],_switch:["layui-form-switch","layui-form-onswitch","switch"]},g=I.find("input[type=checkbox]"),f=function(x,a){var e=n(this);x.on("click",function(){var o=e.attr("lay-filter"),t=(e.attr("lay-text")||"").split("|");e[0].disabled||(e[0].checked?(e[0].checked=!1,x.removeClass(a[1]).find("em").text(t[1])):(e[0].checked=!0,x.addClass(a[1]).find("em").text(t[0])),layui.event.call(e[0],z,a[2]+"("+o+")",{elem:e[0],value:e[0].value,othis:x}))})};g.each(function(x,a){var e=n(this),o=e.attr("lay-skin"),t=(e.attr("lay-text")||"").split("|"),v=this.disabled;o==="switch"&&(o="_"+o);var r=d[o]||d.checkbox;if(typeof e.attr("lay-ignore")=="string")return e.show();var h=e.next("."+r[0]),k=n(['<div class="layui-unselect '+r[0],a.checked?" "+r[1]:"",v?" layui-checkbox-disbaled "+H:"",'"',o?' lay-skin="'+o+'"':"",">",function(){var b=a.title.replace(/\s/g,""),y={checkbox:[b?"<span>"+a.title+"</span>":"",'<i class="layui-icon layui-icon-ok"></i>'].join(""),_switch:"<em>"+((a.checked?t[0]:t[1])||"")+"</em><i></i>"};return y[o]||y.checkbox}(),"</div>"].join(""));h[0]&&h.remove(),e.after(k),f.call(this,k,r)})},radio:function(){var d="layui-form-radio",g=["&#xe643;","&#xe63f;"],f=I.find("input[type=radio]"),x=function(a){var e=n(this),o="layui-anim-scaleSpring";a.on("click",function(){var t=e[0].name,v=e.parents(A),r=e.attr("lay-filter"),h=v.find("input[name="+t.replace(/(\.|#|\[|\])/g,"\\$1")+"]");e[0].disabled||(layui.each(h,function(){var k=n(this).next("."+d);this.checked=!1,k.removeClass(d+"ed"),k.find(".layui-icon").removeClass(o).html(g[1])}),e[0].checked=!0,a.addClass(d+"ed"),a.find(".layui-icon").addClass(o).html(g[0]),layui.event.call(e[0],z,"radio("+r+")",{elem:e[0],value:e[0].value,othis:a}))})};f.each(function(a,e){var o=n(this),t=o.next("."+d),v=this.disabled;if(typeof o.attr("lay-ignore")=="string")return o.show();t[0]&&t.remove();var r=n(['<div class="layui-unselect '+d,e.checked?" "+d+"ed":"",(v?" layui-radio-disbaled "+H:"")+'">','<i class="layui-anim layui-icon">'+g[e.checked?0:1]+"</i>","<div>"+function(){var h=e.title||"";return typeof o.next().attr("lay-radio")=="string"&&(h=o.next().html(),o.next().remove()),h}()+"</div>","</div>"].join(""));o.after(r),x.call(this,r)})}};return c?N[c]?N[c]():ee.error("\u4E0D\u652F\u6301\u7684"+c+"\u8868\u5355\u6E32\u67D3"):layui.each(N,function(d,g){g()}),L};var Q=function(){var c=n(this),m=O.config.verify,L=null,I="layui-form-danger",N={},d=c.parents(A),g=d.find("*[lay-verify]"),f=c.parents("form")[0],x=d.find("input,select,textarea"),a=c.attr("lay-filter");if(layui.each(g,function(o,t){var v=n(this),r=v.attr("lay-verify").split("|"),h=v.attr("lay-verType"),k=v.val();if(v.removeClass(I),layui.each(r,function(b,y){var q,u="",s=typeof m[y]=="function";if(m[y]){var q=s?u=m[y](k,t):!m[y][0].test(k);if(u=u||m[y][1],q)return h==="tips"?K.tips(u,function(){return typeof v.attr("lay-ignore")=="string"||t.tagName.toLowerCase()!=="select"&&!/^checkbox|radio$/.test(t.type)?v:v.next()}(),{tips:1}):h==="alert"?K.alert(u,{title:"\u63D0\u793A",shadeClose:!0}):K.msg(u,{icon:5,shift:6}),P.android||P.ios||t.focus(),v.addClass(I),L=!0}}),L)return L}),L)return!1;var e={};return layui.each(x,function(o,t){if(t.name=(t.name||"").replace(/^\s*|\s*&/,""),t.name){if(/^.*\[\]$/.test(t.name)){var v=t.name.match(/^(.*)\[\]$/g)[0];e[v]=0|e[v],t.name=t.name.replace(/^(.*)\[\]$/,"$1["+e[v]+++"]")}/^checkbox|radio$/.test(t.type)&&!t.checked||(N[t.name]=t.value)}}),layui.event.call(this,z,"submit("+a+")",{elem:this,form:f,field:N})},O=new M,R=n(document),U=n(window);O.render(),R.on("reset",A,function(){var c=n(this).attr("lay-filter");setTimeout(function(){O.render(null,c)},50)}),R.on("submit",A,Q).on("click","*[lay-submit]",Q),Y(z,O)});
