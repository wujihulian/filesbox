layui.define("jquery",function(m){"use strict";var l=layui.$,f=layui.hint(),h="layui-tree-enter",s=function(e){this.options=e},c={arrow:["&#xe623;","&#xe625;"],checkbox:["&#xe626;","&#xe627;"],radio:["&#xe62b;","&#xe62a;"],branch:["&#xe622;","&#xe624;"],leaf:"&#xe621;"};s.prototype.init=function(e){var r=this;e.addClass("layui-box layui-tree"),r.options.skin&&e.addClass("layui-tree-skin-"+r.options.skin),r.tree(e),r.on(e)},s.prototype.tree=function(e,r){var t=this,o=t.options,i=r||o.nodes;layui.each(i,function(n,a){var u=a.children&&a.children.length>0,p=l('<ul class="'+(a.spread?"layui-show":"")+'"></ul>'),d=l(["<li "+(a.spread?'data-spread="'+a.spread+'"':"")+">",function(){return u?'<i class="layui-icon layui-tree-spread">'+(a.spread?c.arrow[1]:c.arrow[0])+"</i>":""}(),function(){return o.check?'<i class="layui-icon layui-tree-check">'+(o.check==="checkbox"?c.checkbox[0]:o.check==="radio"?c.radio[0]:"")+"</i>":""}(),function(){return'<a href="'+(a.href||"javascript:;")+'" '+(o.target&&a.href?'target="'+o.target+'"':"")+">"+('<i class="layui-icon layui-tree-'+(u?"branch":"leaf")+'">'+(u?a.spread?c.branch[1]:c.branch[0]:c.leaf)+"</i>")+("<cite>"+(a.name||"\u672A\u547D\u540D")+"</cite></a>")}(),"</li>"].join(""));u&&(d.append(p),t.tree(p,a.children)),e.append(d),typeof o.click=="function"&&t.click(d,a),t.spread(d,a),o.drag&&t.drag(d,a)})},s.prototype.click=function(e,r){var t=this,o=t.options;e.children("a").on("click",function(i){layui.stope(i),o.click(r)})},s.prototype.spread=function(e,r){var t=this,o=(t.options,e.children(".layui-tree-spread")),i=e.children("ul"),n=e.children("a"),a=function(){e.data("spread")?(e.data("spread",null),i.removeClass("layui-show"),o.html(c.arrow[0]),n.find(".layui-icon").html(c.branch[0])):(e.data("spread",!0),i.addClass("layui-show"),o.html(c.arrow[1]),n.find(".layui-icon").html(c.branch[1]))};i[0]&&(o.on("click",a),n.on("dblclick",a))},s.prototype.on=function(e){var r=this,t=r.options,o="layui-tree-drag";e.find("i").on("selectstart",function(i){return!1}),t.drag&&l(document).on("mousemove",function(i){var n=r.move;if(n.from){var a=(n.to,l('<div class="layui-box '+o+'"></div>'));i.preventDefault(),l("."+o)[0]||l("body").append(a);var u=l("."+o)[0]?l("."+o):a;u.addClass("layui-show").html(n.from.elem.children("a").html()),u.css({left:i.pageX+10,top:i.pageY+10})}}).on("mouseup",function(){var i=r.move;i.from&&(i.from.elem.children("a").removeClass(h),i.to&&i.to.elem.children("a").removeClass(h),r.move={},l("."+o).remove())})},s.prototype.move={},s.prototype.drag=function(e,r){var t=this,o=(t.options,e.children("a")),i=function(){var n=l(this),a=t.move;a.from&&(a.to={item:r,elem:e},n.addClass(h))};o.on("mousedown",function(){var n=t.move;n.from={item:r,elem:e}}),o.on("mouseenter",i).on("mousemove",i).on("mouseleave",function(){var n=l(this),a=t.move;a.from&&(delete a.to,n.removeClass(h))})},m("tree",function(e){var r=new s(e=e||{}),t=l(e.elem);return t[0]?void r.init(t):f.error("layui.tree \u6CA1\u6709\u627E\u5230"+e.elem+"\u5143\u7D20")})});
