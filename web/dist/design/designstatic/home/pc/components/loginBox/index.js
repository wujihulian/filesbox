(function(){var y={init:function(){var e=this,i=$(".module[data-type=loginBox]"),a=$(".module[data-type=language]");e.unlogin(i),i.each(function(n){e.bindEvent(i.eq(n))}),a.each(function(n){e.bindxEvent(a.eq(n))}),e.listenState(i)},listenState:function(e){var i=this;window.loginUserResponse&&(i.onlogin(e),clearInterval(a));var a=setInterval(function(){window.loginUserResponse&&(i.onlogin(e),clearInterval(a))},200)},onlogin:function(e){var r;var i=this;return;var a,n},bindEvent:function(e){var i=this,a=window.roominfo?window.roominfo:{},n=a.systemInfo||{},r=e.find(".submit"),p=e.find(".account"),l=e.find(".password"),c=e.find(".eyesModule"),I=e.find(".accountRemoveModule"),d=e.find(".checkboxDiv"),v=e.find(".logindrag");if(r.on("click",function(){var u=window.roominfo?window.roominfo.isGraphicCode==1:!1,g=e.find(".account").val(),f=e.find(".password").val();if($(this).find(".tip").remove(),!g)return $(this).append('<span class="tip" >\u8BF7\u8F93\u5165\u8D26\u53F7</span>'),!1;if(!f)return $(this).append('<span class="tip" >\u8BF7\u8F93\u5165\u5BC6\u7801</span>'),!1;if(u){var x=e.find("input.yantess"),S=x.val();return S?(window.user.newLogin({isGraphicCode:1,captchaInput:S,encrypted:!!window.CryptoJS,username:g,password:window.CryptoJS?encrypt(f):f},function(o){if(o.success)d.hasClass("on")&&window.encrypt?(localStorage.isSaveAPWordKey=encrypt(JSON.stringify({a:p.val().trim(),b:l.val().trim(),t:Date.now()})),localStorage.removeItem("isSaveAPWordKeyNoOn")):localStorage.isSaveAPWordKeyNoOn=1,window.mainHome.getLoginUser(!0);else{var t=o.message;switch(parseInt(o.code)){case 200:t="\u5BC6\u7801\u6216\u8D26\u53F7\u4E0D\u6B63\u786E\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165";break;case 400:t="\u8BE5\u7F51\u6821\u9700\u8981\u4F7F\u7528\u9501\u5C4F\u6D4F\u89C8\u5668\u767B\u5F55";break;case 403:t="\u8D26\u53F7\u7C7B\u578B\u4E0D\u6B63\u786E";break;case 503:t="\u5DF2\u88AB\u9650\u5236\u767B\u5F55";break;case 707:t="\u60A8\u5DF2\u88AB\u7981\u6B62\u767B\u5F55";break}if(o.success){var s=o.data;if(s){var h=s.errCode;h=="4012"?t="\u8D85\u8FC7\u9650\u5236\u6B21\u6570"+s.limitCount+"\u6B21\uFF0C\u8BF7"+s.denyTime/60+"\u5206\u949F\u540E\u91CD\u8BD5":t="\u5BC6\u7801\u6216\u8D26\u53F7\u4E0D\u6B63\u786E\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165"}else t="\u5BC6\u7801\u6216\u8D26\u53F7\u4E0D\u6B63\u786E\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165"}r.append('<span class="tip" >'+t+"</span>"),e.find(".yaned").attr("src","/api/user/getVerifyImageCode?cType=2&height=36&width=98&v="+parseInt(Math.random()*100))}}),""):($(this).append('<span class="tip">\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801</span>'),!1)}if((a==null?void 0:a.needCheckCode)=="1"){var m=localStorage.getItem("umi_locale")||"zh-CN",D=v.text(),P=m==="en-US"?"Successful verification":"\u9A8C\u8BC1\u901A\u8FC7";if(D!==P){var N=m==="en-US"?"Please drag the slider to verify!":"\u8BF7\u62D6\u52A8\u6ED1\u5757\u8FDB\u884C\u9A8C\u8BC1\uFF01";r.append('<span class="tip" >'+N+"</span>");return}}window.user.login(g,f,function(o){if(o.success)window.mainHome.getLoginUser(!0),d.hasClass("on")&&window.encrypt?(localStorage.isSaveAPWordKey=encrypt(JSON.stringify({a:p.val().trim(),b:l.val().trim(),t:Date.now()})),localStorage.removeItem("isSaveAPWordKeyNoOn")):localStorage.isSaveAPWordKeyNoOn=1;else{var t=o.message;switch(parseInt(o.code)){case 200:t="\u5BC6\u7801\u6216\u8D26\u53F7\u4E0D\u6B63\u786E\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165";break;case 400:t="\u8BE5\u7F51\u6821\u9700\u8981\u4F7F\u7528\u9501\u5C4F\u6D4F\u89C8\u5668\u767B\u5F55";break;case 403:t="\u8D26\u53F7\u7C7B\u578B\u4E0D\u6B63\u786E";break;case 503:t="\u5DF2\u88AB\u9650\u5236\u767B\u5F55";break;case 707:t="\u60A8\u5DF2\u88AB\u7981\u6B62\u767B\u5F55";break}if(o.success){var s=o.data;if(s){var h=s.errCode;h=="4012"?t="\u8D85\u8FC7\u9650\u5236\u6B21\u6570"+s.limitCount+"\u6B21\uFF0C\u8BF7"+s.denyTime/60+"\u5206\u949F\u540E\u91CD\u8BD5":t="\u5BC6\u7801\u6216\u8D26\u53F7\u4E0D\u6B63\u786E\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165"}else t="\u5BC6\u7801\u6216\u8D26\u53F7\u4E0D\u6B63\u786E\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165"}r.append('<span class="tip" >'+t+"</span>")}})}),e.find(".quitBtn").on("click",function(){window.user.loginout(function(u){if(u.success){localStorage.ap="";try{myextension.delphicallback(1401,"")}catch(g){console.log("\u975E\u65E0\u6781\u6D4F\u89C8\u5668")}window.location.reload()}})}),e.find(".going").on("click",function(){$(this).text("\u6B63\u5728\u8FDB\u5165"),window.location.href=window.basePath?"/"+window.basePath+"#/":"/#/"}),c.css("backgroundImage","url(/design/designstatic/home/image/login_icon.png)"),c.on("click",function(){c.hasClass("open")?(c.removeClass("open"),l.attr("type","password")):(c.addClass("open"),l.attr("type","text"))}),I.on("click",function(){p.val("")}),v.length&&$.getScript("/design/designstatic/design/js/drag.js",function(){v.html(""),setTimeout(function(){v.drag()},200)}),localStorage.isSaveAPWordKeyNoOn&&d.removeClass("on"),d.on("click",function(){d.hasClass("on")?(d.removeClass("on"),localStorage.removeItem("isSaveAPWordKey")):d.addClass("on")}),localStorage.isSaveAPWordKey&&window.CryptoJS&&window.decrypt){var C=decrypt(localStorage.isSaveAPWordKey),w=JSON.parse(C),k=w.a,b=w.b;p.val(k),l.val(b)}$(".languageBox").length&&$.getScript("/design/designstatic/design/js/select2.min.js",function(){setTimeout(function(){$(".languageBox").html(`<select name="language" class="language">
          <option value="zh-CN">CN \u7B80\u4F53\u4E2D\u6587</option>
          <option value="zh-TW">HK \u7E41\u9AD4\u4E2D\u6587</option>
          <option value="en-US">US English</option>
          <option value="ja-JP">JP \u65E5\u672C\u8A9E</option>
          <option value="fr-FR">FR Fran\xE7ais</option>
          <option value="es-ES">ES Espa\xF1ol</option>
          <option value="ru-RU">RU Ruso</option>
          <option value="it-IT">IT Italia</option>
        </select>`);var u=$(".languageBox .language").select2({minimumResultsForSearch:-1,width:"100%"});u.val([localStorage.getItem("umi_locale")||"zh-CN"]).trigger("change")},200)}),e.on("keydown",function(u){u.keyCode==13&&r.click()})},bindxEvent:function(e){var i=this,a=e.find(".language");a.val(localStorage.getItem("umi_locale")||"zh-CN"),a.change(function(){localStorage.setItem("umi_locale",a.val())})},unlogin:function(e){e.attr("data-islogin","0")},getTimeZhCN:function(e,i){if(new Date(parseInt(e))=="Invalid Date"&&new Date(parseInt(e)*1e3)=="Invalid Date")return"--";new Date(parseInt(i))=="Invalid Date"&&new Date(parseInt(i)*1e3)=="Invalid Date"&&(i=Date.parse(new Date));var a=i-e;if(a<0)return"\u521A\u521A";if(a<6e4)return parseInt(a/1e3,10)+" \u79D2\u524D";if(a<3600*1e3)return parseInt(a/1e3/60,10)+" \u5206\u949F\u524D";if(a<24*3600*1e3)return parseInt(a/1e3/3600,10)+" \u5C0F\u65F6\u524D";if(a<30*24*3600*1e3)return parseInt(a/1e3/3600/24,10)+" \u5929\u524D";var n=new Date(parseInt(e)),r=parseInt(n.getMonth()+1)<10?"0"+(n.getMonth()+1):n.getMonth()+1,p=parseInt(n.getDate())<10?"0"+n.getDate():n.getDate(),l=parseInt(n.getHours())<10?"0"+n.getHours():n.getHours(),c=parseInt(n.getMinutes())<10?"0"+n.getMinutes():n.getMinutes();return n.getFullYear()+"-"+r+"-"+p+" "+l+":"+c}};setTimeout(function(){y.init()},400)})();
