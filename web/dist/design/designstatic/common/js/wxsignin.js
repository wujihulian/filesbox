function postwxsignin(){var i=this;location.pathname.indexOf("shop/discount.html")>=0||i.init()}postwxsignin.prototype={init:function(){var i=this,f=i.GetQueryString("w")||i.GetQueryString("kf")?parseInt(i.GetQueryString("w")||i.GetQueryString("kf")):0,l=cdnPath=="//pre-static.1x.cn"?"https://pre.xx.cn":cdnPath=="//static.wxbig.cn"?location.origin:"https://test.1x.cn";if(!i.getCookie("vxtoken")&&f&&(i.getChannel()==1||i.getChannel()==9))i.goherf();else if(!i.getCookie("vxtoken")&&f&&!(i.getChannel()==1||i.getChannel()==9||i.getChannel()==5)){window.location.replace(l+"/pages/wxwebauthorize.html?infohref="+encodeURIComponent(decodeURIComponent(window.location.href)));return}else i.getCookie("vxtoken")&&f&&(i.getChannel()==1||i.getChannel()==9)?$.ajax({headers:{},type:"GET",url:"/api/vcard/getVCardInfo",data:{targetServerNameForOverride:i.GetQueryString("targetServerNameForOverride")||void 0},dataType:"json",async:!0,success:function(c){if(!(c.success&&c.data))i.goherf();else{var u=c.data||{},s=u.vCardInfo||{};window.localStorage.setItem("visitingCardIdStr",s.visitingCardIdStr||""),window.localStorage.setItem("visitingCardavatar",s.avatar||""),window.localStorage.setItem("visitingCardName",s.cardName||""),window.localStorage.setItem("visitingCardsex",s.sex||"")}}}):i.getCookie("vxtoken")&&f&&!(i.getChannel()==1||i.getChannel()==9||i.getChannel()==5)&&$.ajax({headers:{},type:"GET",url:"/api/vcard/getVCardInfo",data:{targetServerNameForOverride:i.GetQueryString("targetServerNameForOverride")||void 0},dataType:"json",async:!0,success:function(c){if(c.success&&c.data){var u=c.data||{},s=u.vCardInfo||{};window.localStorage.setItem("visitingCardIdStr",s.visitingCardIdStr||""),window.localStorage.setItem("visitingCardavatar",s.avatar||""),window.localStorage.setItem("visitingCardName",s.cardName||""),window.localStorage.setItem("visitingCardsex",s.sex||"")}else{window.location.replace(l+"/pages/wxwebauthorize.html?infohref="+encodeURIComponent(decodeURIComponent(window.location.href)));return}}})},openWin:function(i){var f,l=500,c=570,u=(window.screen.height-30-c)/2,s=(window.screen.width-10-l)/2;window.open(i,f,"height="+c+",innerHeight="+c+",width="+l+",innerWidth="+l+",top="+u+",left="+s+",toolbar=no,menubar=no,scrollbars=auto,resizable=no,location=no,status=no")},goherf:function(){var i=this,i=this;$(document).off("touchend"),$(document).off("click"),$(document).on("touchend",function(){$(document).off("touchend"),$(document).off("click");var f=encodeURIComponent(decodeURIComponent(decodeURIComponent(window.location.href))),l=window.frames.length!=parent.frames.length;$.ajax({headers:{token:i.getCookie("token")},type:"GET",url:"/api/welink/wechat/qrCode/url",data:{targetServerNameForOverride:i.getUrlParms("targetServerNameForOverride")||void 0,envTypeName:"official_account",sceneTypeName:location.href.indexOf("scale-h5server")>-1?"ce_ping":"consulting",redirectUrl:f},dataType:"json",async:!1,success:function(c){if(c.code==200&&c.success){var u=c.data||{};u.url&&(l?window.parent.location.href=u.url:window.location.replace(u.url))}}})}),$(document).on("click",function(){$(document).off("touchend"),$(document).off("click");var f=encodeURIComponent(decodeURIComponent(decodeURIComponent(window.location.href))),l=window.frames.length!=parent.frames.length;$.ajax({headers:{token:i.getCookie("token")},type:"GET",url:"/api/welink/wechat/qrCode/url",data:{targetServerNameForOverride:i.getUrlParms("targetServerNameForOverride")||void 0,envTypeName:"official_account",sceneTypeName:location.href.indexOf("scale-h5server")>-1?"ce_ping":"consulting",redirectUrl:f},dataType:"json",async:!1,success:function(c){if(c.code==200&&c.success){var u=c.data||{};u.url&&(l?window.parent.location.href=u.url:window.location.replace(u.url))}}})})},getChannel:function(){var i=this,f=navigator.userAgent.toLowerCase();if(window.__wxjs_environment==="miniprogram")return 4;if(f.match(/MicroMessenger/i)=="micromessenger"){var l={win:!1,mac:!1},c=navigator.platform;return l.win=c.indexOf("Win")==0,l.mac=c.indexOf("Mac")==0,l.win||l.mac?9:1}else return window.localStorage.appAdapt===!0||window.localStorage.appAdapt==="true"?i.getUrlParms("channel")||5:i.getUrlParms("channel")?i.getUrlParms("channel"):/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)?2:3},getStrCount:function(i,f){for(var l=0;i.indexOf(f)!=-1;)i=i.replace(f,""),l++;return l},GetQueryString:function(i){var f=new RegExp("(^|&)"+i+"=([^&]*)(&|$)","i"),l=window.location.search.substr(1).match(f),c="";return l!=null&&(c=l[2]),f=null,l=null,c==null||c==""||c=="undefined"?"":c},getShtmlUrl:function(){for(var i=location.href.split("/"),f=0,l=i.length;f<l;f++){var c=i[f];if(c.indexOf(".shtml")>-1)return c.split(".shtml")[0]}return!1},getHtmlUrl:function(){for(var i=location.href.split("/"),f=0,l=i.length;f<l;f++){var c=i[f];if(c.indexOf(".html")>-1)return c.split("shtml")[0]}return!1},getbusType:function(i){switch(i){case"0":return"001";case"1":return"002";case"2":return"003";case"3":return"008";case"4":return"007";case"5":return"006";case"6":return"005";case"7":return"004";case"8":return"011";case"9":return"010";case"10":return"009";case"11":return"014";case"13":return"105";case"14":return"106";case"15":return"107";default:return""}},getCookie:function(i){for(var f=document.cookie,l=f.split("; "),c=0;c<l.length;c++){var u=l[c].split("=");if(u[0]==i)return u[1]}return""},getUrlParms:function(i){var f=new RegExp("(^|&)"+i+"=([^&]*)(&|$)"),l=window.location.search.substr(1).match(f);return l!=null?unescape(l[2]):null},base64decode:function(i){var f=this,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",u,s,g,m,C,k,S,b=0;for(i=i.replace(/[^A-Za-z0-9\+\/\=]/g,"");b<i.length;)m=l.indexOf(i.charAt(b++)),C=l.indexOf(i.charAt(b++)),k=l.indexOf(i.charAt(b++)),S=l.indexOf(i.charAt(b++)),u=m<<2|C>>4,s=(C&15)<<4|k>>2,g=(k&3)<<6|S,c=c+String.fromCharCode(u),k!=64&&(c=c+String.fromCharCode(s)),S!=64&&(c=c+String.fromCharCode(g));return c=f._utf8_decode(c),c},_utf8_decode:function(i){for(var f="",l=0,c=0,u=0,s=0,g=0;l<i.length;)c=i.charCodeAt(l),c<128?(f+=String.fromCharCode(c),l++):c>191&&c<224?(s=i.charCodeAt(l+1),f+=String.fromCharCode((c&31)<<6|s&63),l+=2):(s=i.charCodeAt(l+1),g=i.charCodeAt(l+2),f+=String.fromCharCode((c&15)<<12|(s&63)<<6|g&63),l+=3);return f}},function(i){"use strict";function f(e,d){var r=(e&65535)+(d&65535),h=(e>>16)+(d>>16)+(r>>16);return h<<16|r&65535}function l(e,d){return e<<d|e>>>32-d}function c(e,d,r,h,v,w){return f(l(f(f(d,e),f(h,w)),v),r)}function u(e,d,r,h,v,w,p){return c(d&r|~d&h,e,d,v,w,p)}function s(e,d,r,h,v,w,p){return c(d&h|r&~h,e,d,v,w,p)}function g(e,d,r,h,v,w,p){return c(d^r^h,e,d,v,w,p)}function m(e,d,r,h,v,w,p){return c(r^(d|~h),e,d,v,w,p)}function C(e,d){e[d>>5]|=128<<d%32,e[(d+64>>>9<<4)+14]=d;var r,h,v,w,p,n=1732584193,t=-271733879,a=-1732584194,o=271733878;for(r=0;r<e.length;r+=16)h=n,v=t,w=a,p=o,n=u(n,t,a,o,e[r],7,-680876936),o=u(o,n,t,a,e[r+1],12,-389564586),a=u(a,o,n,t,e[r+2],17,606105819),t=u(t,a,o,n,e[r+3],22,-1044525330),n=u(n,t,a,o,e[r+4],7,-176418897),o=u(o,n,t,a,e[r+5],12,1200080426),a=u(a,o,n,t,e[r+6],17,-1473231341),t=u(t,a,o,n,e[r+7],22,-45705983),n=u(n,t,a,o,e[r+8],7,1770035416),o=u(o,n,t,a,e[r+9],12,-1958414417),a=u(a,o,n,t,e[r+10],17,-42063),t=u(t,a,o,n,e[r+11],22,-1990404162),n=u(n,t,a,o,e[r+12],7,1804603682),o=u(o,n,t,a,e[r+13],12,-40341101),a=u(a,o,n,t,e[r+14],17,-1502002290),t=u(t,a,o,n,e[r+15],22,1236535329),n=s(n,t,a,o,e[r+1],5,-165796510),o=s(o,n,t,a,e[r+6],9,-1069501632),a=s(a,o,n,t,e[r+11],14,643717713),t=s(t,a,o,n,e[r],20,-373897302),n=s(n,t,a,o,e[r+5],5,-701558691),o=s(o,n,t,a,e[r+10],9,38016083),a=s(a,o,n,t,e[r+15],14,-660478335),t=s(t,a,o,n,e[r+4],20,-405537848),n=s(n,t,a,o,e[r+9],5,568446438),o=s(o,n,t,a,e[r+14],9,-1019803690),a=s(a,o,n,t,e[r+3],14,-187363961),t=s(t,a,o,n,e[r+8],20,1163531501),n=s(n,t,a,o,e[r+13],5,-1444681467),o=s(o,n,t,a,e[r+2],9,-51403784),a=s(a,o,n,t,e[r+7],14,1735328473),t=s(t,a,o,n,e[r+12],20,-1926607734),n=g(n,t,a,o,e[r+5],4,-378558),o=g(o,n,t,a,e[r+8],11,-2022574463),a=g(a,o,n,t,e[r+11],16,1839030562),t=g(t,a,o,n,e[r+14],23,-35309556),n=g(n,t,a,o,e[r+1],4,-1530992060),o=g(o,n,t,a,e[r+4],11,1272893353),a=g(a,o,n,t,e[r+7],16,-155497632),t=g(t,a,o,n,e[r+10],23,-1094730640),n=g(n,t,a,o,e[r+13],4,681279174),o=g(o,n,t,a,e[r],11,-358537222),a=g(a,o,n,t,e[r+3],16,-722521979),t=g(t,a,o,n,e[r+6],23,76029189),n=g(n,t,a,o,e[r+9],4,-640364487),o=g(o,n,t,a,e[r+12],11,-421815835),a=g(a,o,n,t,e[r+15],16,530742520),t=g(t,a,o,n,e[r+2],23,-995338651),n=m(n,t,a,o,e[r],6,-198630844),o=m(o,n,t,a,e[r+7],10,1126891415),a=m(a,o,n,t,e[r+14],15,-1416354905),t=m(t,a,o,n,e[r+5],21,-57434055),n=m(n,t,a,o,e[r+12],6,1700485571),o=m(o,n,t,a,e[r+3],10,-1894986606),a=m(a,o,n,t,e[r+10],15,-1051523),t=m(t,a,o,n,e[r+1],21,-2054922799),n=m(n,t,a,o,e[r+8],6,1873313359),o=m(o,n,t,a,e[r+15],10,-30611744),a=m(a,o,n,t,e[r+6],15,-1560198380),t=m(t,a,o,n,e[r+13],21,1309151649),n=m(n,t,a,o,e[r+4],6,-145523070),o=m(o,n,t,a,e[r+11],10,-1120210379),a=m(a,o,n,t,e[r+2],15,718787259),t=m(t,a,o,n,e[r+9],21,-343485551),n=f(n,h),t=f(t,v),a=f(a,w),o=f(o,p);return[n,t,a,o]}function k(e){var d,r="",h=e.length*32;for(d=0;d<h;d+=8)r+=String.fromCharCode(e[d>>5]>>>d%32&255);return r}function S(e){var d,r=[];for(r[(e.length>>2)-1]=void 0,d=0;d<r.length;d+=1)r[d]=0;var h=e.length*8;for(d=0;d<h;d+=8)r[d>>5]|=(e.charCodeAt(d/8)&255)<<d%32;return r}function b(e){return k(C(S(e),e.length*8))}function N(e,d){var r,h=S(e),v=[],w=[],p;for(v[15]=w[15]=void 0,h.length>16&&(h=C(h,e.length*8)),r=0;r<16;r+=1)v[r]=h[r]^909522486,w[r]=h[r]^1549556828;return p=C(v.concat(S(d)),512+d.length*8),k(C(w.concat(p),512+128))}function A(e){var d="0123456789abcdef",r="",h,v;for(v=0;v<e.length;v+=1)h=e.charCodeAt(v),r+=d.charAt(h>>>4&15)+d.charAt(h&15);return r}function y(e){return unescape(encodeURIComponent(e))}function I(e){return b(y(e))}function T(e){return A(I(e))}function O(e,d){return N(y(e),y(d))}function R(e,d){return A(O(e,d))}function U(e,d,r){return d?r?O(d,e):R(d,e):r?I(e):T(e)}typeof define=="function"&&define.amd?define(function(){return U}):typeof module=="object"&&module.exports?module.exports=U:i.md5=U}(this);var postwxsignin=new postwxsignin;
