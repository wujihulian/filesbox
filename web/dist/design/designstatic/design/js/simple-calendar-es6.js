class LunarHelp{constructor(e,a,t){this.lunarInfo=new Array(19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448),this.nStr1=new Array("\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341"),this.nStr2=new Array("\u521D","\u5341","\u5EFF","\u4E09");var i=new Date(parseInt(e),parseInt(a)-1,parseInt(t)),s,n=0,r=0,c=new Date(1900,0,31),l=(i-c)/864e5;for(s=1900;s<2050&&l-this.lYearDays(s)>0;s++)l-=this.lYearDays(s);for(this.year=s,n=this.leapMonth(s),this.isLeap=!1,s=1;s<13&&l>0;s++)n>0&&s==n+1&&this.isLeap==!1?(--s,r=this.leapDays(this.year)):r=this.monthDays(this.year,s),this.isLeap==!0&&s==n+1&&(this.isLeap=!1),l-=r;l==0&&n>0&&s==n+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--s)),l<0&&(l+=r,--s),this.month=s,this.day=l+1}lYearDays(e){var a,t=0;for(a=32768;a>8;a>>=1)t+=this.lunarInfo[e-1900]&a?30:29;return t+this.leapDays(e)}leapDays(e){return this.leapMonth(e)?this.lunarInfo[e-1900]&65536?30:29:0}leapMonth(e){return this.lunarInfo[e-1900]&15}monthDays(e,a){return this.lunarInfo[e-1900]&65536>>a?30:29}cDay(e){var a;switch(e){case 10:a="\u521D\u5341";break;case 20:a="\u4E8C\u5341";break;case 30:a="\u4E09\u5341";break;default:a=this.nStr2[Math.floor(e/10)],a+=this.nStr1[e%10]}return a}cMonth(e){var a;switch(e){case 1:a="\u6B63\u6708";break;case 2:a="\u4E8C\u6708";break;case 3:a="\u4E09\u6708";break;case 4:a="\u56DB\u6708";break;case 5:a="\u4E94\u6708";break;case 6:a="\u516D\u6708";break;case 7:a="\u4E03\u6708";break;case 8:a="\u516B\u6708";break;case 9:a="\u4E5D\u6708";break;case 10:a="\u5341\u6708";break;case 11:a="\u5341\u4E00\u6708";break;case 12:a="\u5341\u4E8C\u6708";break;default:break}return a}getLunarDay(){return cMonth(this.month)+cDay(this.day)}getLunarDayName(){return this.day==1?this.cMonth(this.month):this.cDay(this.day)}getLunarDayNum(){return{day:this.day,month:this.month}}}class SimpleCalendar{constructor(e,a){this._defaultOptions={width:"500px",height:"500px",language:"CH",showLunarCalendar:!0,showHoliday:!0,showFestival:!0,showLunarFestival:!0,showSolarTerm:!0,showMark:!0,timeRange:{startYear:1900,endYear:2049},timeZone:"",mark:{"2016-5-5":"\u4E0A\u5B66"},theme:{changeAble:!1,weeks:{backgroundColor:"#FBEC9C",fontColor:"#4A4A4A",fontSize:"20px"},days:{backgroundColor:"#ffffff",fontColor:"#565555",fontSize:"24px"},todaycolor:"orange",activeSelectColor:"orange",invalidDays:"#C1C0C0"}},this.container=document.querySelector(e),this._defaultOptions.width=this.container.style.offsetWidth,this._defaultOptions.height=this.container.style.offsetHeight,this._options=this.optionAssign(this._defaultOptions,a),this.create()}optionAssign(e,a){for(var t in a)typeof e[t]!="object"?e[t]=a[t]:e[t]=this.optionAssign(e[t],a[t]);return e}create(){var e=this.container;e.innerHTML='<div class="sc-header"> </div> <div class="sc-body"> </div>',e.style.width=this._options.width,e.style.height=this._options.height,e.className="sc-calendar";var a=e.querySelector(".sc-header"),t=e.querySelector(".sc-body");a.innerHTML=a.innerHTML+'<div class="sc-actions">      <div class="sc-yleft">        &lsaquo;</div>      <select class="sc-select-year" name="">      </select>      <div class="sc-yright">&rsaquo;</div>  </div>',a.innerHTML=a.innerHTML+'<div class="sc-actions">    <div class="sc-mleft">      &lsaquo;</div>    <select class="sc-select-month" name="">    </select>    <div class="sc-mright">&rsaquo;</div></div>',a.innerHTML=a.innerHTML+'<div class="sc-actions"><span class="sc-return-today ">\u8FD4\u56DE\u4ECA\u5929</span></div>',a.innerHTML=a.innerHTML+'<div class="sc-actions"><span class="sc-time"></span></div>',t.innerHTML=' <div class="sc-week"> </div> <div class="sc-days"> </div>';for(var i=t.querySelector(".sc-week"),s=t.querySelector(".sc-days"),n=0;n<7;n++)i.innerHTML=i.innerHTML+' <div class="sc-week-item"></div>';for(var n=0;n<35;n++)s.innerHTML=s.innerHTML+'<div class="sc-item"><div class="day"></div><div class="lunar-day"></div></div>';this.updateSelect(this.tyear,this.tmonth),this.update(),self.setInterval("SimpleCalendar.timeupdate()",200)}update(e=this.tmonth,a=this.tyear){this.updateSize(),this.updateWeek(),this.addData(a,e),this.updateHoliday(a,e),this.updateMark(a,e),this.updateFestival(a,e),this.updateEvent(),this.updateTheme(this._options.theme)}updateSize(e=this._options.width,a=this._options.height){if(this._options.width=e,this._options.height=a,this.container.style.width=e,this.container.style.height=a,parseInt(e)<500){var t=this.arrayfrom(this.container.querySelectorAll(".sc-actions"));t.forEach(function(n,r){n.classList.add("sc-actions-big")})}else{var t=this.arrayfrom(this.container.querySelectorAll(".sc-actions"));t.forEach(function(r,c){r.classList.remove("sc-actions-big")})}if(parseInt(a)<400){var i=this.arrayfrom(this.container.querySelectorAll(".sc-item")),s=this.arrayfrom(this.container.querySelectorAll(".sc-week-item"));i.forEach(function(n,r){n.querySelector(".day").classList.add("sc-item-small")}),s.forEach(function(n,r){n.classList.add("sc-item-small")})}else{var i=this.arrayfrom(this.container.querySelectorAll(".sc-item")),s=this.arrayfrom(this.container.querySelectorAll(".sc-week-item"));i.forEach(function(c,l){c.querySelector(".day").classList.remove("sc-item-small")}),s.forEach(function(c,l){c.classList.remove("sc-item-small")})}}updateSelect(e,a){var t=this.container.querySelector(".sc-select-year"),i=this.container.querySelector(".sc-select-month");t.innerHTML="";for(var s=this._options.timeRange.startYear;s<this._options.timeRange.endYear+1;s++)t.innerHTML+='<option value="'+s+'">'+s+"</option>";i.innerHTML="";for(var s=0;s<12;s++){var n=this.languageData["months_"+this._options.language];i.innerHTML+='<option value="'+(s+1)+'">'+n[s]+"</option>"}t.value=e,i.value=a}updateWeek(){var e=this.arrayfrom(this.container.querySelectorAll(".sc-week-item")),a=this.languageData["days_"+this._options.language];a||console.error("language error!"),e.forEach(function(t,i){t.innerHTML=a[i]})}addData(e,a){var t=this.arrayfrom(this.container.querySelectorAll(".sc-item")),i=new Date(e,a-1,1),s=i.getDay();s==0&&(s=7);for(var n=new Date(Date.parse(i)-(s-1)*24*3600*1e3),r=0;r<35;r++){t[r].className="sc-item";var c=new Date(Date.parse(n)+r*24*3600*1e3),l=c.getFullYear(),d=c.getDate(),o=c.getMonth()+1;o!=a&&t[r].classList.add("sc-othermenth"),t[r].querySelector(".day").innerHTML=d,this._options.showLunarCalendar?t[r].querySelector(".lunar-day").innerHTML=new LunarHelp(l,o,d).getLunarDayName():(t[r].querySelector(".lunar-day").innerHTML="",t[r].classList.add("item-nolunar")),this.tyear==l&&this.tday==d&&this.tmonth==o&&(this.selectDay=t[r],t[r].classList.add("sc-today"))}}updateMark(e,a){var t=this._options;if(t.showMark){var i=this.arrayfrom(this.container.querySelectorAll(".sc-item")),s=a-1,n=t.mark;n&&i.forEach(function(r,c){var l=+r.querySelector(".day").innerHTML;l==1&&s++,n[e+"-"+s+"-"+l]?(r.classList.add("sc-mark"),r.title=n[e+"-"+s+"-"+l]):(r.classList.remove("sc-mark"),r.title="")})}}updateFestival(e,a){var t=this._options,i=this.arrayfrom(this.container.querySelectorAll(".sc-item")),s=a-1,n=this.languageData["feativals_"+this._options.language],r=this.languageData["lunarFeatival_"+this._options.language],c=this.languageData.solarTerm;n||console.error("language error!"),i.forEach(function(l,d){var o=+l.querySelector(".day").innerHTML;if(o==1&&s++,t.showSolarTerm&&c[s+"-"+o]&&(l.querySelector(".lunar-day").innerHTML=c[s+"-"+o],l.classList.add("sc-festival")),t.showFestival&&n[s+"-"+o]&&(l.querySelector(".lunar-day").innerHTML=n[s+"-"+o],l.classList.add("sc-festival")),r&&t.showLunarFestival){var h=new LunarHelp(e,s,o).getLunarDayNum();r[h.month+"-"+h.day]&&(l.querySelector(".lunar-day").innerHTML=r[h.month+"-"+h.day],l.classList.add("sc-festival"))}})}updateHoliday(e,a){var t=this._options;if(t.showHoliday){var i=this.arrayfrom(this.container.querySelectorAll(".sc-item")),s=a-1,n=this.languageData.vocation["data_"+e];n&&i.forEach(function(r,c){var l=+r.querySelector(".day").innerHTML;l==1&&s++,n.indexOf(s+"-"+l)>0&&r.classList.add("sc-vocation")})}}updateTheme(e){if(this._options.theme.changeAble){var a=e.days,t=e.weeks,i=this.arrayfrom(this.container.querySelectorAll(".sc-week-item")),s=this.arrayfrom(this.container.querySelectorAll(".sc-item"));i.forEach(function(r,c){r.style.backgroundColor=t.backgroundColor,r.style.fontSize=t.fontSize,r.style.color=t.fontColor}),s.forEach(function(r,c){r.classList.contains("sc-today")?r.style.backgroundColor=e.todaycolor:(r.style.backgroundColor=a.backgroundColor,r.querySelector(".day").style.color=a.fontColor),r.querySelector(".day").style.fontSize=a.fontSize});var n=this;s.forEach(function(r,c){r.onmouseover=function(l){this.style.borderColor=e.activeSelectColor,this.style.borderWidth="1px"},r.onmouseout=function(l){this.style.borderColor="#F1EBE4",this.style.borderWidth="0 0 1px 1px"}})}}updateEvent(){var e=this.arrayfrom(this.container.querySelectorAll(".sc-item")),a=this.container,t=this;e.forEach(function(o,h){o.onmouseover=function(u){this.classList.add("sc-active-day")},o.onmouseout=function(u){this.classList.remove("sc-active-day")},o.onclick=function(){t.selectDay=o;var u=a.querySelector(".sc-selected");u&&u.classList.remove("sc-selected"),this.classList.add("sc-selected")}});var i=a.querySelector(".sc-select-year"),s=a.querySelector(".sc-select-month");i.onchange=function(){var o=s.value,h=this.value;t.update(o,h)},s.onchange=function(){var o=i.value,h=this.value;t.update(h,o)};var n=a.querySelector(".sc-yright"),r=a.querySelector(".sc-yleft"),c=a.querySelector(".sc-mright"),l=a.querySelector(".sc-mleft");n.onclick=function(){var o=i.value;o<2099&&o++,i.value=o,t.update(this.tmonth,o)},r.onclick=function(){var o=i.value;o>1900&&o--,i.value=o,t.update(this.tmonth,o)},c.onclick=function(){var o=s.value,h=i.value;o<12?o++:(o=1,i.value=++h),s.value=o,t.update(o,h)},l.onclick=function(){var o=s.value,h=i.value;o>1?o--:(o=12,i.value=--h),s.value=o,t.update(o,h)};var d=a.querySelector(".sc-return-today");d.onclick=function(){i.value=t.tyear,s.value=t.tmonth,t.update()}}addMark(e,a){this._options.mark[e]=a,this.update()}getSelectedDay(){var e=this.container.querySelector(".sc-select-year").value,a=this.container.querySelector(".sc-select-month").value,t=this.selectDay.querySelector(".day").innerHTML;return new Date(e,a-1,t)}setLenguage(e){this._options.language=e;var a=this.container.querySelector(".sc-select-year"),t=this.container.querySelector(".sc-select-month");this.updateSelect(a.value,t.value),this.update()}showFestival(e){this._options.showFestival=e,this.update()}showHoliday(e){this._options.showHoliday=e,this.update()}showSolarTerm(e){this._options.showSolarTerm=e,this.update()}showLunarFestival(e){this._options.showLunarFestival=e,this.update()}showLunarCalendar(e){this._options.showLunarCalendar=e,this.update()}showMark(e){this._options.showMark=e,this.update()}arrayfrom(e){var a=[];return[].forEach.call(e,function(t){a.push(t)}),a}}SimpleCalendar.timeupdate=function(){var y=document.querySelectorAll(".sc-time"),e=new Date,a=e.getHours(),t=e.getMinutes(),i=e.getSeconds();a<10&&(a="0"+a),t<10&&(t="0"+t),i<10&&(i="0"+i),[].forEach.call(y,function(s){s.innerHTML="\u65F6\u95F4\uFF1A"+a+":"+t+":"+i})},SimpleCalendar.prototype.languageData={feativals_CH:{"1-1":"\u5143\u65E6","2-14":"\u60C5\u4EBA\u8282","3-8":"\u5987\u5973\u8282","3-12":"\u690D\u6811\u8282","4-1":"\u611A\u4EBA\u8282","4-22":"\u5730\u7403\u65E5","5-1":"\u52B3\u52A8\u8282","5-4":"\u9752\u5E74\u8282","6-1":"\u513F\u7AE5\u8282","7-1":"\u5EFA\u515A\u8282","8-1":"\u5EFA\u519B\u8282","9-10":"\u6559\u5E08\u8282","10-1":"\u56FD\u5E86\u8282","12-25":"\u5723\u8BDE\u8282"},feativals_EN:{"1-1":"new year\u2019s day","2-14":"Saint Valentine's Day","3-8":"international women\u2019s day","3-12":"Arbor Day","4-1":"April Fool's Day","4-22":"Earth Day","5-1":"international labour day","5-4":"Chinese Youth Day","6-1":"Children's Day","7-1":"The party's Day","8-1":"the Army's Day","9-10":"Teachers' Day","10-1":"National Day","12-25":"Christmas Day"},lunarFeatival_CH:{"1-1":"\u6625\u8282","2-2":"\u9F99\u62AC\u5934","1-15":"\u5143\u5BB5\u8282","4-4":"\u5BD2\u98DF\u8282","4-5":"\u6E05\u660E\u8282","5-5":"\u7AEF\u5348\u8282","8-15":"\u4E2D\u79CB\u8282","9-9":"\u91CD\u9633\u8282","12-30":"\u9664\u5915"},solarTerm:{"2-3":"\u7ACB\u6625","5-5":"\u7ACB\u590F","8-7":"\u7ACB\u79CB","11-7":"\u7ACB\u51AC","2-18":"\u96E8\u6C34","5-20":"\u5C0F\u6EE1","8-22":"\u5904\u6691","11-22":"\u5C0F\u96EA","3-5":"\u60CA\u86F0","6-5":"\u8292\u79CD","9-7":"\u767D\u9732","12-6":"\u5927\u96EA","3-20":"\u6625\u5206","6-21":"\u590F\u81F3","9-22":"\u79CB\u5206","12-21":"\u51AC\u81F3","4-4":"\u6E05\u660E","7-6":"\u5C0F\u6691","10-8":"\u5BD2\u9732","1-5":"\u5C0F\u5BD2","4-19":"\u8C37\u96E8","7-22":"\u5927\u6691","10-23":"\u971C\u964D","1-20":"\u5927\u5BD2"},days_EN:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],days_CH:["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u65E5"],months_EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],months_CH:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],vocation:{data_2016:["1-1","1-2","1-3","2-7","2-8","2-9","2-10","2-11","2-12","2-13","4-2","4-3","4-4","4-30","5-1","5-2","6-9","6-10","6-11","9-15","9-16","9-17",,"10-1","10-2","10-3","10-4","10-5","10-6","10-7"]}},SimpleCalendar.prototype.tyear=new Date().getFullYear(),SimpleCalendar.prototype.tmonth=new Date().getMonth()+1,SimpleCalendar.prototype.tday=new Date().getDate();
