(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[10398],{94723:function(J){J.exports={treeSelectBox:"treeSelectBox___3_ftB",footBtns:"footBtns___3t86s",unZipConfirmBox:"unZipConfirmBox___Vxz9t"}},36228:function(J,F,a){"use strict";a.d(F,{Z:function(){return ie}});var ae=a(98247),H=a.n(ae),re=a(28216),Q=a(67294),q=a(85893),A,N,U,b,ee=1,E=1,y="dark",_=[],ne,ie=(A=(0,re.$j)(k=>{var c=k.common,f=k.loading;return{common:c,loading:f.effects["common/getListPath"]}}),N=Reflect.metadata("design:type",Function),U=Reflect.metadata("design:paramtypes",[void 0]),A(b=N(b=U(b=class extends Q.Component{constructor(c){var f;super(c);f=this,this.showRemoveBtn=(t,o)=>!o.isFirstNode,this.addDiyDom=(t,o)=>{var e=this,s=this.props,l=s.common,x=s.id,u=x===void 0?"":x,n=s.dispatch,P=l.isMobile,L=5,C=$("#"+o.tId+"_switch"),I=$("#"+o.tId+"_ico");C.remove(),I.before(C);var oe='<div class="menu-item ripple-item'+(P?" menu-mobile-item":"")+'"><div class="cert">'+(P?"\xB7\xB7\xB7":"")+"</div></div>";u!="TS"&&C.before(oe);var te='<span class="space space-level-'+o.level+'" style="width:'+o.level*15+'px"></span>';C.before(te),!this.props.showLevel0Icon&&o.level===0&&!o.sourceID&&I.remove(),o!=null&&o.labelId&&I.css({background:o==null?void 0:o.style,borderRadius:"50%",width:"15px",height:"15px"}),P||$("#"+o.tId+"_a").on("mouseenter mouseleave",function(R){if(R.type=="mouseenter"){var v=R,d=e.props.common.xhovertooltips||{},g=o.sourceID||o.labelId||o.xxicon||o.icon||"",p=d.sourceID||"";if(g==p&&d.visible)return;if(window.xhovertooltipstime&&clearTimeout(window.xhovertooltipstime),window.xleavetooltipstime&&clearTimeout(window.xleavetooltipstime),window.xhuantooltipstime&&clearTimeout(window.xhuantooltipstime),document.onmousemove=Z=>{v=Z},g!=p&&d.visible){n({type:"common/setState",payload:{xhovertooltips:{visible:!1}}}),window.xhuantooltipstime=setTimeout(function(){n({type:"common/setState",payload:{xhovertooltips:{visible:!0,x:v.pageX,y:v.pageY,sourceID:g,data:o}}})},300);return}window.xhovertooltipstime=setTimeout(function(){n({type:"common/setState",payload:{xhovertooltips:{visible:!0,x:v.pageX,y:v.pageY,sourceID:g,data:o}}})},2e3)}else R.type=="mouseleave"&&(document.onmousemove=null,window.xhovertooltipstime&&clearTimeout(window.xhovertooltipstime),window.xleavetooltipstime&&clearTimeout(window.xleavetooltipstime),window.xhuantooltipstime&&clearTimeout(window.xhuantooltipstime),window.xleavetooltipstime=setTimeout(function(){var Z=e.props.common.xhovertooltips||{};!Z.visible||n({type:"common/setState",payload:{xhovertooltips:{visible:!1}}})},300))}),this.props.showStatus&&$("#"+o.tId+"_a").addClass("group_status_".concat(o.status))},this.addHoverDom=(t,o)=>{var e=window.$("#"+o.tId+"_span");if(!(o.editNameFlag||window.$("#addBtn_"+o.tId).length>0)){var s="<span class='button add' id='addBtn_"+o.tId+"' title='add node' onfocus='this.blur();' style='margin-left:2px; margin-right: -1px; background-position:-144px 0; vertical-align:top; *vertical-align:middle'></span>";e.after(s);var l=this,x=window.$("#addBtn_"+o.tId);x&&x.bind("click",function(){var u=window.$.fn.zTree.getZTreeObj(t),n="new node"+E++,P=u.addNodes(o,{id:100+E,pId:o.id,name:n}),L=l.props.addNode(n);return P[0].id=L,!1})}},this.removeHoverDom=(t,o)=>{window.$("#addBtn_"+o.tId).unbind().remove()},this.onDragMove=(t,o,e)=>{this.props.onDragMove&&this.props.onDragMove(t,o,e)},this.dropPrev=(t,o,e)=>{if(this.props.dragSort)return!0;var s=e.getParentNode();if(s&&s.dropInner===!1)return!1;for(var l=0,x=_.length;l<x;l++){var u=_[l].getParentNode();if(u&&u!==e.getParentNode()&&u.childOuter===!1)return!1}return!1},this.dropInner=(t,o,e)=>{if(e&&e.dropInner===!1)return!1;for(var s=0,l=_.length;s<l;s++){if(!e&&_[s].dropRoot===!1)return!1;if(_[s].parentTId&&_[s].getParentNode()!==e&&_[s].getParentNode().childOuter===!1)return!1}return!0},this.dropNext=(t,o,e)=>{if(this.props.dragSort)return!0;var s=e.getParentNode();if(s&&s.dropInner===!1)return!1;for(var l=0,x=_.length;l<x;l++){var u=_[l].getParentNode();if(u&&u!==e.getParentNode()&&u.childOuter===!1)return!1}return!0},this.beforeDrag=(t,o)=>{y=y==="dark"?"":"dark";for(var e=0,s=o.length;e<s;e++){if(o[e].drag===!1)return _=null,!1;if(o[e].parentTId&&o[e].getParentNode().childDrag===!1)return _=null,!1}return _=o,!0},this.beforeDrop=(t,o,e,s,l)=>this.props.dragSort&&this.props.beforeDrop?this.props.beforeDrop(t,o,e,s):(s&&e.parentLevel&&this.props.beforeDrop&&this.props.beforeDrop(t,o,e,s,l),!1),this.onDrop=(t,o,e,s,l,x)=>s?this.props.dragSort?(this.props.onDrop&&this.props.onDrop(e,s),!1):(this.props.onDrop&&this.props.onDrop(e[0].id,s.id,l),!1):!1,this.onExpand=(t,o,e)=>{((e==null?void 0:e.xxicon)=="position"||(e==null?void 0:e.xxicon)=="tool"||(e==null?void 0:e.xxicon)=="tag"||(e==null?void 0:e.xxicon)=="fileType")&&(localStorage[(e==null?void 0:e.xxicon)+"open"]=1)},this.onCollapse=(t,o,e)=>{((e==null?void 0:e.xxicon)=="position"||(e==null?void 0:e.xxicon)=="tool"||(e==null?void 0:e.xxicon)=="tag"||(e==null?void 0:e.xxicon)=="fileType")&&(localStorage[(e==null?void 0:e.xxicon)+"open"]=0)},this.OnClick=function(t,o,e){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=f,x=f.props.loading;if(x)return!1;f.ztreeObj&&f.ztreeObj.selectNode(e),f.props.OnClick&&f.props.OnClick(t,o,e,s)},this.beforeClick=(t,o,e)=>{var s=this,l=this.props.loading;if(l)return!1},this.onRightClick=(t,o,e)=>{this.ztreeObj&&this.ztreeObj.selectNode(e),this.props.onRightClick&&this.props.onRightClick(t,o,e)},this.beforeMouseDown=(t,o)=>{},this.mouseMove=(t,o)=>{},this.beforeRemove=(t,o)=>{y=y==="dark"?"":"dark";var e=window.$.fn.zTree.getZTreeObj(t);return e.selectNode(o),window.confirm("\u786E\u8BA4\u5220\u9664 \u8282\u70B9 -- "+o.name+" \u5417\uFF1F")},this.onRemove=(t,o,e)=>{this.props.onDeleteNode&&this.props.onDeleteNode(e.id)},this.beforeRename=(t,o,e,s)=>{y=y==="dark"?"":"dark";var l=window.$.fn.zTree.getZTreeObj(t);return e.length==0?(l.setEditable(!1),!1):!0},this.onRename=(t,o,e,s)=>{this.props.onChangeName&&this.props.onChangeName(t,o,e,s)},this.expandAll=()=>{!this.ztreeObj||this.ztreeObj.expandAll(!0)},this.foldAll=()=>{!this.ztreeObj||this.ztreeObj.expandAll(!1)},this.ztreeDom=null,this.setZtree=t=>{this.ztreeDom=t}}componentDidMount(){this.renderZtreeDom()}componentDidUpdate(c){var f=c.common,t=this.props.common;t.isMobile!=f.isMobile}componentWillUnmount(){!this.ztreeObj||this.ztreeObj.destroy()}renderZtreeDom(){var c=this.ztreeObj=window.$.fn.zTree.init(this.getTreeDom(),this.getTreeSetting(),this.props.nodes);return c}getTreeDom(){var c=this.props.common,f=c.isMobile;return window.$(this.ztreeDom)}getTreeSetting(){var c=this.props,f=this.props.common,t=c.edit;t&&(t.showRemoveBtn&&(t.showRemoveBtn=this.showRemoveBtn),t.drag&&(t.drag.prev=t.drag.prev||t.drag.prev===void 0?this.dropPrev:!1,t.drag.inner=t.drag.inner||t.drag.inner===void 0?this.dropInner:!1,t.drag.next=t.drag.next||t.drag.next===void 0?this.dropNext:!1));var o=c.view;o.addDiyDom=this.addDiyDom,o&&o.addHoverDom&&(o.addHoverDom=this.addHoverDom,o.removeHoverDom=this.removeHoverDom);var e={beforeDrag:this.beforeDrag,onDrop:this.onDrop,beforeDrop:this.beforeDrop,beforeRename:this.beforeRename,onRename:this.onRename,onClick:this.OnClick,onRightClick:this.onRightClick,onDragMove:this.onDragMove,onExpand:this.onExpand,onCollapse:this.onCollapse,beforeClick:this.beforeClick};return{treeId:c.treeId,treeObj:c.treeObj,async:c.async,callback:e,check:c.check,data:c.data,edit:t,view:o}}getTreeObj(){return this.ztreeObj}render(){return(0,q.jsx)("div",{className:"netdiskZtree",children:(0,q.jsx)("div",{className:"ztree",ref:this.setZtree,id:"ztree_leftMenu"+(this.props.id||"")})})}})||b)||b)||b)},10398:function(J,F,a){"use strict";a.r(F),a.d(F,{default:function(){return te}});var ae=a(34792),H=a(48086),re=a(47673),Q=a(4107),q=a(57663),A=a(71577),N=a(34669),U=a(54458),b=a(74379),ee=a(38648),E=a(11849),y=a(71194),_=a(50146),ne=a(34895),ie=a(36228),k=a(28216),c=a(57119),f=a(67294),t=a(30672),o=a(51964),e=a.n(o),s=a(37406),l=a(69847),x=a(94723),u=a.n(x),n=a(85893),P,L,C,I,oe=_.Z.confirm,te=(P=(0,k.$j)(R=>{var v=R.common;return{common:v}}),L=Reflect.metadata("design:type",Function),C=Reflect.metadata("design:paramtypes",[void 0]),P(I=L(I=C(I=class extends f.PureComponent{constructor(v){super(v);this.ztreeSelectDom=null,this.ZtreeTSRef=d=>{this.ztreeSelectDom=d},this.state={modelZindex:100,fullScreen:!1,current:1,total:0,target:{},getInfoLoading:!0,viewUrl:"",treeinit:!0,treeList:[]}}componentDidMount(){var v=this,d=v.props,g=d.dispatch,p=d.common,Z=d.isShare,B=d.shareCode,he=p.sharePageData,_e=p.getParams,V=p.rootpath,xe=(0,s.ej)("token");v.setState({treeList:V.filter(W=>W.sourceID||W.icon=="position"||W.xxicon=="position"),treeinit:!0})}componentDidUpdate(v){var d=this,g=v.common,p=this.props.common;p.isMobile!=g.isMobile&&d.setState({treeinit:!1},()=>{setTimeout(function(){d.setState({treeinit:!0})},300)})}render(){var v=this,d=v.props,g=d.dispatch,p=d.common,Z=d.open,B=d.setOpenModel,he=d.videoOption,_e=d.iframeUrl,V=d.iframeName,xe=V===void 0?"":V,W=d.issmall,ge=p.shareCode,De=p.isShare,Ae=p.isMobile,le=p.zipData,T=le===void 0?{}:le,X=p.addressPath,de=p.selectAddressIndex,ce=p.getParams,ve=p.viewType,Ue=T.sourceID,Me=T.isZipModal,Ee=T.zipmodalData,ke=T.encrypted,Ie=T.isVideoEdit,w=this.state,Oe=w.modelZindex,me=w.fileInfo,Le=me===void 0?{}:me,We=w.fullScreen,Ke=w.getInfoLoading,$e=w.viewUrl,se=w.treeList,Fe=w.treeinit,Pe=ve==3?X[de]||{}:X[X.length-1]||{},pe=(D,i)=>{if(ve==3){var m=X.length-1;if(de!=m){g({payload:(0,E.Z)((0,E.Z)({},D||ce),{},{sourceID:Pe.sourceID}),type:"common/refreshListPath",callback:M=>{i&&i()}});return}}g({payload:(0,E.Z)({},D||ce),type:"common/getListPath",callback:M=>{i&&i()}})},Te=D=>{v.setState({modelZindex:D})},r=(0,t.lw)((0,t.Kd)()),be={position:r.formatMessage({id:"explorer.file.address"}),tool:r.formatMessage({id:"explorer.app.groupTools"}),fileType:r.formatMessage({id:"explorer.search.ext"}),tag:r.formatMessage({id:"explorer.tag.name"}),fav:r.formatMessage({id:"explorer.toolbar.fav"}),space:r.formatMessage({id:"explorer.toolbar.rootPath"}),box:"",recentDoc:r.formatMessage({id:"explorer.toolbar.recentDoc"}),shareTo:r.formatMessage({id:"explorer.toolbar.shareTo"}),shareLink:r.formatMessage({id:"explorer.toolbar.shareLink"}),photo:r.formatMessage({id:"explorer.toolbar.photo"}),recycle:r.formatMessage({id:"explorer.toolbar.recycle"}),doc:r.formatMessage({id:"explorer.type.doc"}),image:r.formatMessage({id:"explorer.type.image"}),music:r.formatMessage({id:"explorer.type.music"}),movie:r.formatMessage({id:"explorer.type.movie"}),zip:r.formatMessage({id:"explorer.type.zip"}),other:r.formatMessage({id:"explorer.type.others"}),info:r.formatMessage({id:"information-news"}),toolbox:r.formatMessage({id:"explorer.toolbar.tool"})};function ye(D,i,m){var M=[];if(m.success)for(var O=m.data||((i==null?void 0:i.xxicon)=="tag"?[]:{}),j=(i==null?void 0:i.xxicon)=="tag"?O||[]:O.folderList||[],z=0;z<j.length;z++){var h=j[z],S=z+1,G=l.q0[h.icon],K=be[h.icon]||"",ue=h.icon;delete h.icon,M.push((0,E.Z)((0,E.Z)({},h),{},{id:(i==null?void 0:i.xxicon)=="position"||(i==null?void 0:i.xxicon)=="tool"||(i==null?void 0:i.xxicon)=="fileType"||(i==null?void 0:i.xxicon)=="tag"?i.id+""+S:h.sourceID||"labelId"+h.labelId,pId:i.id,isParent:ue=="fav"?!1:h.isChildren||!!h.hasFolder,name:K||h.name||h.labelName,oldName:K||h.name||h.labelName,xxicon:ue,icon:G,drag:(i==null?void 0:i.xxicon)=="position"||(i==null?void 0:i.xxicon)=="tool"||(i==null?void 0:i.xxicon)=="fileType"||(i==null?void 0:i.xxicon)=="tag"?!1:void 0,childOuter:(i==null?void 0:i.xxicon)=="position"||(i==null?void 0:i.xxicon)=="tool"||(i==null?void 0:i.xxicon)=="fileType"||(i==null?void 0:i.xxicon)=="tag"?!1:void 0}))}return v.setState({treeList:[...se,...M]}),M}function Ce(D,i){var m=(i==null?void 0:i.xxicon)=="position"?"files":(i==null?void 0:i.xxicon)=="tool"?"tools":(i==null?void 0:i.xxicon)=="fileType"?"fileType":(i==null?void 0:i.xxicon)=="tag"?"fileTag":"";return De?"/api/disk/share/menu?shareCode="+ge:(i==null?void 0:i.xxicon)=="tag"?"/api/disk/tag/list":"/api/disk/list/path"+(m?"?block="+m:"")}var Y={edit:{enable:!0,editNameSelectAll:!0,showRemoveBtn:!1,showRenameBtn:!1,drag:{autoExpandTrigger:!0}},view:{showLine:!1,showIcon:!0,selectedMulti:!1,dblClickExpand:!1},data:{simpleData:{enable:!0}},async:{enable:!0,url:Ce,autoParam:["sourceID"],otherParam:["currentPage",1,"fileType","folder","pageSize",500],headers:{token:(0,s.ej)("token")},type:"get",dataFilter:ye}},we=Y.edit,je=Y.view,Re=Y.data,Ze=Y.async,Be=D=>100,ze=(D,i,m)=>{D.preventDefault()},Se=(D,i,m)=>{},fe=D=>{var i=D.taskID||"";window.zipTimer&&clearInterval(window.zipTimer),window.zipTimer=setInterval(function(){g({type:"common/getunZiptaskAction",payload:{taskID:i},callback:m=>{if(m.success){var M=m.data||{},O=M.status||0,j=parseInt(M.zipProgress||0);O?(window.zipTimer&&clearInterval(window.zipTimer),pe(),ee.Z.success({message:r.formatMessage({id:"common.tips"}),key:i,description:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:r.formatMessage({id:"explorer.unzipSuccess"})})," ",(0,n.jsx)("div",{children:(0,n.jsx)(U.Z,{percent:100})})]}),duration:4.5})):ee.Z.info({message:r.formatMessage({id:"common.tips"}),key:i,description:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:r.formatMessage({id:"rightmenu.rma"})})," ",(0,n.jsx)("div",{children:(0,n.jsx)(U.Z,{percent:j})})]}),duration:100})}}})},1500)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(ne.Z,{open:Z,issmall:W,modelZindex:Oe,setOpenModel:B,setModelZindex:Te,type:"treeSelect",isFull:!1,title:"\u9009\u62E9\u6587\u4EF6\u5939",style:{width:500,height:800},children:[(0,n.jsx)("div",{className:u().treeSelectBox,children:(0,n.jsxs)(e(),{children:[" ",se.length?(0,n.jsx)(ie.Z,{id:"TS",nodes:se,treeName:"treeDemo",edit:we,view:je,data:Re,async:Ze,OnClick:ze,onRightClick:Se,addNode:Be}):""]})}),(0,n.jsxs)("div",{className:u().footBtns,children:[(0,n.jsx)(A.Z,{style:{marginRight:12},onClick:()=>{B(!1,"visible")},children:"\u53D6\u6D88"}),(0,n.jsx)(A.Z,{onClick:()=>{var D=window.$.fn.zTree.getZTreeObj("ztree_leftMenuTS"),i=D.getSelectedNodes();if(i.length){var m=i[0];if(m.sourceID&&(m.auth||"1,2,3,4,5,6,7,8,9,10,11,12").indexOf("7")>-1){if(Ie){window.videosaveEdit(m.sourceID,function(){pe(),B(!1,"visible")});return}var M={};if(Me){var O=Ee||{};M={directory:O.directory,fullName:O.fileName,sourceID:O.sourceID,index:O.index}}var j=(0,s.fW)();g({type:"common/checkIsEncrypted",payload:{sourceID:M.sourceID||T.sourceID},callback:z=>{var h=z.data||!1;h?oe({icon:(0,n.jsx)(c.Z,{}),content:(0,n.jsxs)("div",{className:u().unZipConfirmBox,children:[r.formatMessage({id:"mack.dsr.d"}),(0,n.jsx)("div",{className:"unZipPass",children:(0,n.jsx)(Q.Z.Password,{className:"unzipPassword",placeholder:r.formatMessage({id:"mack.dsr.e"})})})]}),okText:r.formatMessage({id:"common.oktext"}),cancelText:r.formatMessage({id:"common.cancel"}),onOk(S){var G=$(".unzipPassword input").val();if(!G){H.ZP.error(r.formatMessage({id:"user.inputPwd"}));return}g({type:"common/createunZip",payload:(0,E.Z)((0,E.Z)({sourceID:T.sourceID,sourceIDTo:m.sourceID},M),{},{password:G,taskID:j}),callback:K=>{K.success&&(S(),fe(K.data||{}),B(!1,"visible"))}})},onCancel(){}}):g({type:"common/createunZip",payload:(0,E.Z)((0,E.Z)({sourceID:T.sourceID,sourceIDTo:m.sourceID},M),{},{taskID:j}),callback:S=>{S.success&&(fe(S.data||{}),B(!1,"visible"))}})}})}else H.ZP.error(r.formatMessage({id:"explorer.pathNotSupport"}))}else H.ZP.error(r.formatMessage({id:"explorer.pathNotSupport"}))},type:"primary",children:"\u786E\u5B9A"})]})]})})}})||I)||I)||I)}}]);
